<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Mac æ¸…ç†åƒåœ¾</title>
    <link href="/2022/09/29/Mac-%E6%B8%85%E7%90%86%E5%9E%83%E5%9C%BE/"/>
    <url>/2022/09/29/Mac-%E6%B8%85%E7%90%86%E5%9E%83%E5%9C%BE/</url>
    
    <content type="html"><![CDATA[<h1 id="1-æ¸…ç†æ—¥å¿—æ–‡ä»¶"><a class="markdownIt-Anchor" href="#1-æ¸…ç†æ—¥å¿—æ–‡ä»¶"></a> 1 æ¸…ç†æ—¥å¿—æ–‡ä»¶:</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># ä¸æ˜¯å¾ˆæ¨èæŠŠlogæ–‡ä»¶å¤¹ç»™åˆ é™¤, åˆ é™¤å†…å®¹å°±è¡Œ</span><br>sudo <span class="hljs-built_in">rm</span> -rf /private/var/log/*<br>sudo <span class="hljs-built_in">rm</span> -rf /private/var/logs/*<br></code></pre></td></tr></table></figure><h1 id="2-æ¸…ç†ä¸´æ—¶æ–‡ä»¶å’Œç¼“å­˜æ–‡ä»¶"><a class="markdownIt-Anchor" href="#2-æ¸…ç†ä¸´æ—¶æ–‡ä»¶å’Œç¼“å­˜æ–‡ä»¶"></a> 2 æ¸…ç†ä¸´æ—¶æ–‡ä»¶å’Œç¼“å­˜æ–‡ä»¶</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo <span class="hljs-built_in">rm</span> -rf /private/var/tmp/*<br><br>sudo <span class="hljs-built_in">rm</span> -rf ~/Library/Caches/*<br></code></pre></td></tr></table></figure><h1 id="3-åˆ é™¤æœ¬æœºçš„æ—¶é—´æœºå™¨å¤‡ä»½æ³¨æ„-ä¸æ˜¯æŒ‡æ—¶é—´æœºå™¨å¤‡ä»½ç¡¬ç›˜"><a class="markdownIt-Anchor" href="#3-åˆ é™¤æœ¬æœºçš„æ—¶é—´æœºå™¨å¤‡ä»½æ³¨æ„-ä¸æ˜¯æŒ‡æ—¶é—´æœºå™¨å¤‡ä»½ç¡¬ç›˜"></a> 3 åˆ é™¤æœ¬æœºçš„æ—¶é—´æœºå™¨å¤‡ä»½(æ³¨æ„, ä¸æ˜¯æŒ‡æ—¶é—´æœºå™¨å¤‡ä»½ç¡¬ç›˜)</h1><blockquote><p>Mac OS é™¤äº†ç”¨ç¡¬ç›˜ææ—¶é—´æœºå™¨å¤‡ä»½, ä»–è‡ªå·±è¿˜ä¼šæä¸€ä»½å¤‡ä»½</p><p>åˆ é™¤æ—¶é—´æœºå™¨ç¼“å­˜æœ€èŠ‚çœç©ºé—´çš„</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># åˆ—å‡ºæœ¬æœºä¸Šæ‰€æœ‰æœ¬åœ°æ—¶é—´æœºå™¨ç¼“å­˜</span><br>sudo tmutil listlocalsnapshots /<br><br><span class="hljs-comment"># åˆ é™¤æŒ‡å®šçš„æ—¶é—´æœºå™¨å¤‡ä»½ç¼“å­˜(å¯ä»¥å¤šå‡ºå¾ˆå¤š~, ç³»ç»Ÿæ–‡ä»¶å¤§éƒ¨åˆ†éƒ½æ˜¯è¿™äº›æçš„å¤‡ä»½)</span><br>tmutil deletelocalsnapshots 2022-09-28-105624<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æ”¶è—</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Mac OS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>vscodeè¿æ¥è™šæ‹Ÿæœºå°è´´å£«</title>
    <link href="/2022/09/23/vscode%E8%BF%9E%E6%8E%A5%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%B0%8F%E8%B4%B4%E5%A3%AB/"/>
    <url>/2022/09/23/vscode%E8%BF%9E%E6%8E%A5%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%B0%8F%E8%B4%B4%E5%A3%AB/</url>
    
    <content type="html"><![CDATA[<p>è°ˆåˆ°vscodeè¿æ¥è™šæ‹Ÿæœº, å¾ˆå¤šäººç¬¬ä¸€æƒ³åˆ°æ¡¥æ¥æ¨¡å¼, ä½†æ˜¯å¯¹äºwifiç½‘å¡, ç°é˜¶æ®µä¼¼ä¹æ— æ³•å®ç°,å¦‚æœå¯¹wifiç½‘å¡ä½¿ç”¨æ¡¥æ¥, å®¢æˆ·æœºå°†æ²¡æœ‰ç½‘ç»œ, è¿˜è¡¨ç°ä¸ºæ²¡æœ‰è·¯ç”±å’Œipv4åœ°å€, å› æ­¤è¿™ç¯‡ç¬”è®°ä¸»è¦æ˜¯ä¸ºé‚£äº›ä½¿ç”¨ç¬”è®°æœ¬(æ‹¥æœ‰æ— çº¿ç½‘å¡)çš„åŒå­¦å‡†å¤‡.</p><h1 id="1-å‡†å¤‡å·¥ä½œ"><a class="markdownIt-Anchor" href="#1-å‡†å¤‡å·¥ä½œ"></a> 1. å‡†å¤‡å·¥ä½œ:</h1><p>åˆ›å»ºä¸€ä¸ªNATç½‘ç»œçš„è™šæ‹Ÿæœº.</p><h1 id="2-é…ç½®ç«¯å£æ˜ å°„"><a class="markdownIt-Anchor" href="#2-é…ç½®ç«¯å£æ˜ å°„"></a> 2. é…ç½®ç«¯å£æ˜ å°„:</h1><p>åœ¨NATæ¨¡å¼ä¸‹, å®¢æˆ·æœºçš„IPæ˜¯ä¸è¢«æ„ŸçŸ¥çš„, ä¸ºäº†èƒ½å¤Ÿæ–¹ä¾¿çš„è®¿é—®åˆ°å®¢æˆ·æœº, æˆ‘ä»¬è¿›è¡Œç«¯å£æ˜ å°„(æœ‰æ—¶ä¹Ÿå«NATæ˜ å°„).</p><p>æ€è·¯: æˆ‘ä»¬å¯ä»¥åœ¨virtual boxä¸­å°†<code>å®¿ä¸»æœºçš„ç«¯å£</code>æ˜ å°„åˆ°<code>å®¢æˆ·æœºçš„ç«¯å£</code>:</p><p>å‡è®¾æˆ‘ä»¬æœ‰å®¢æˆ·æœºIP: <code>10.0.2.15</code></p><p><img src="https://s1.ax1x.com/2022/09/23/xkXQaR.jpg" alt="å®¢æˆ·æœºIP" /></p><p>æˆ‘ä»¬è®¾ç«‹å¦‚ä¸‹çš„ç«¯å£æ˜ å°„:</p><table><thead><tr><th style="text-align:center">Host</th><th style="text-align:center">Guest</th></tr></thead><tbody><tr><td style="text-align:center">127.0.0.1:22</td><td style="text-align:center">10.0.2.15:22</td></tr></tbody></table><blockquote><p>ä¸‹å›¾ä¸­é…ç½®çš„æ˜ å°„æ˜¯ 127.0.0.1:2233 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>â†’</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">â†’</span></span></span></span> 10.0.2.15:22, ä½†æ˜¯ä¸ºäº†æ–¹ä¾¿, æ¨èå°†ä¸»æœºç«¯å£æ¢ä¸º22, è¿™æ ·è¿æ¥æ—¶å°±ä¸ç”¨é¢å¤–çš„å‚æ•°,è‡³äºç«¯å£å†²çª,æœ€åä¸€èŠ‚ç»™å‡ºè§£å†³æ€è·¯.</p></blockquote><p><img src="https://s1.ax1x.com/2022/09/23/xkX3Px.jpg" alt="ç«¯å£æ˜ å°„" /></p><h1 id="3-è®¿é—®å®¢æˆ·æœº"><a class="markdownIt-Anchor" href="#3-è®¿é—®å®¢æˆ·æœº"></a> 3. è®¿é—®å®¢æˆ·æœº:</h1><p>å¦‚æœæˆ‘ä»¬éœ€è¦SSHåˆ°å®¢æˆ·æœº, ä¸€èˆ¬æƒ³çš„å¯èƒ½æ˜¯ç›´æ¥ssh: <code>ssh guest_user@&lt;guest_ip&gt;</code>, ä½†æ˜¯NATæƒ…å†µä¸‹IPæ˜¯ä¸æ„ŸçŸ¥çš„, å› æ­¤æ— æ³•è®¿é—®, ä½†æ˜¯æˆ‘ä»¬åšç«¯å£æ˜ å°„ä¹‹å, å°±å˜äº†, æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼è®¿é—®å®¢æˆ·æœº:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ssh guest_user@127.0.0.1 <span class="hljs-comment"># äº‹å®ä¸Š, ä»–æ˜¯sshåˆ°å®¢æˆ·æœºä¸Š, ç™»é™†ç”¨æˆ·åä¸ºguest_user</span><br></code></pre></td></tr></table></figure><p>éšåå¦‚æœæƒ³ä½¿ç”¨vscode, åƒå¾€å¸¸ä¸€æ ·å³å¯.</p><h1 id="4-å…¶ä»–"><a class="markdownIt-Anchor" href="#4-å…¶ä»–"></a> 4. å…¶ä»–:</h1><p>ä¸Šæ–‡æˆ‘ä»¬è®²åˆ°, å°†æœ¬æœºçš„22ç«¯å£æ˜ å°„åˆ°å®¢æˆ·æœºçš„22ç«¯å£, ä½†æ˜¯æœ¬æœºçš„22ç«¯å£å¹¶ä¸æ€»æ˜¯ç©ºé—²çš„, ä¸ºæ­¤æˆ‘ä»¬å¯èƒ½å°†2233ç«¯å£æ˜ å°„åˆ°å®¢æˆ·æœºçš„22ç«¯å£, è®¿é—®æ–¹å¼å°±å˜åŒ–äº†:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ssh -p 2233 guest_user@127.0.0.1<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æ”¶è—</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>CMU Bomblab(æ±‡ç¼–å°ç¬”è®°)</title>
    <link href="/2022/09/22/CMU-Bomblab-%E6%B1%87%E7%BC%96%E5%B0%8F%E7%AC%94%E8%AE%B0/"/>
    <url>/2022/09/22/CMU-Bomblab-%E6%B1%87%E7%BC%96%E5%B0%8F%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<blockquote><p>å‚è€ƒ: <a href="https://github.com/CurryTang/bomb_lab_solution">https://github.com/CurryTang/bomb_lab_solution</a></p></blockquote><blockquote><p>ä»¥ä¸‹ä»x64æ¶æ„ä¸ºå‡†</p></blockquote><h1 id="1-ç›¸å…³æŒ‡ä»¤"><a class="markdownIt-Anchor" href="#1-ç›¸å…³æŒ‡ä»¤"></a> 1. ç›¸å…³æŒ‡ä»¤:</h1><h2 id="11-objdump-ç”¨äºç»™å‡ºæ‰€æœ‰æ±‡ç¼–æŒ‡ä»¤"><a class="markdownIt-Anchor" href="#11-objdump-ç”¨äºç»™å‡ºæ‰€æœ‰æ±‡ç¼–æŒ‡ä»¤"></a> 1.1 objdump: ç”¨äºç»™å‡ºæ‰€æœ‰æ±‡ç¼–æŒ‡ä»¤</h2><blockquote><p>objdump -d</p><p><code>Display assembler contents of executable sections</code></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">objdump -d xxx &gt; xxx.asm<br></code></pre></td></tr></table></figure><h2 id="12-gdb"><a class="markdownIt-Anchor" href="#12-gdb"></a> 1.2 gdb</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">gdb &lt;program&gt; <span class="hljs-comment"># è°ƒè¯•ç¨‹åº</span><br>p &lt;var&gt;  <span class="hljs-comment"># æ‰“å°å˜é‡</span><br>b &lt;func&gt;  <span class="hljs-comment"># ç»™å‡½æ•°è®¾ç½®ç«¯ç‚¹</span><br>c <span class="hljs-comment"># continue</span><br>n <span class="hljs-comment"># next line, stepping over function calls</span><br>s <span class="hljs-comment"># next line, stepping into funciton calls</span><br>list <span class="hljs-comment"># å±•å¼€æºç¨‹åºä»£ç </span><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">p/c *0x2000@10 <span class="hljs-comment"># æŸ¥çœ‹å†…å­˜å­—ç¬¦å€¼</span><br>x /25c 0x2000  <span class="hljs-comment"># xæœ¬èº«å°±æ˜¯çœ‹å†…å­˜çš„, ä¸éœ€è¦åŠ *</span><br><br>p/x <span class="hljs-variable">$eax</span> <span class="hljs-comment"># æŸ¥çœ‹å¯„å­˜å™¨å€¼çš„8è¿›åˆ¶å½¢å¼</span><br><br>x /20a 0x2000<br></code></pre></td></tr></table></figure><p>x æŒ‰åå…­è¿›åˆ¶æ ¼å¼æ˜¾ç¤ºå˜é‡ã€‚</p><p>d æŒ‰åè¿›åˆ¶æ ¼å¼æ˜¾ç¤ºå˜é‡ã€‚</p><p>u æŒ‰åå…­è¿›åˆ¶æ ¼å¼æ˜¾ç¤ºæ— ç¬¦å·æ•´å‹ã€‚</p><p>o æŒ‰å…«è¿›åˆ¶æ ¼å¼æ˜¾ç¤ºå˜é‡ã€‚</p><p>t æŒ‰äºŒè¿›åˆ¶æ ¼å¼æ˜¾ç¤ºå˜é‡ã€‚</p><p>a æŒ‰åå…­è¿›åˆ¶æ ¼å¼æ˜¾ç¤ºå˜é‡ã€‚</p><p>c æŒ‰å­—ç¬¦æ ¼å¼æ˜¾ç¤ºå˜é‡ã€‚</p><p>f æŒ‰æµ®ç‚¹æ•°æ ¼å¼æ˜¾ç¤ºå˜é‡ã€‚</p><p>åˆ‡æ¢æ ˆå¸§:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">bt</span><br><br><span class="hljs-attribute">f</span><span class="hljs-meta"> [N]</span><br></code></pre></td></tr></table></figure><p>æ˜¾ç¤ºæ‰€æœ‰å¯„å­˜å™¨</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">i</span> registers<br></code></pre></td></tr></table></figure><p>çœ‹å¯„å­˜å™¨çš„å€¼</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">x</span> /<span class="hljs-number">16</span>xb $eax+<span class="hljs-number">0</span>x14<br></code></pre></td></tr></table></figure><h2 id="13-strings"><a class="markdownIt-Anchor" href="#13-strings"></a> 1.3 strings</h2><p>å¦‚æœä»æ±‡ç¼–ä¸­çœ‹åˆ°æŸäº›å…³é”®å­—ç¬¦, å¯ä»¥è¿™æ ·è·å–ä¸€æ•´å¥è¯:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">strings bomb | grep keywords<br></code></pre></td></tr></table></figure><h1 id="2-bomblabå®éªŒæ“ä½œ"><a class="markdownIt-Anchor" href="#2-bomblabå®éªŒæ“ä½œ"></a> 2. Bomblabå®éªŒæ“ä½œ</h1><ol><li>å¼€å¯æ±‡ç¼–çª—å£(å¥½æŸ¥çœ‹å¯¹åº”çš„æ±‡ç¼–ä»£ç )</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">layout asm<br></code></pre></td></tr></table></figure><ol start="2"><li>æ‰“æ–­ç‚¹</li></ol><p>åœ¨è¿›æ¯ä¸ªé˜¶æ®µå‰ä¸”åœ¨readlineå‰æ‰“æ–­ç‚¹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">b *0x400e37 <span class="hljs-comment"># åœ°å€\æŒ‡é’ˆå‰è¦æœ‰ *</span><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">b phase_1<br>b phase_2<br>b phase_3<br>b phase_4<br>b phase_5<br>b phase_6<br></code></pre></td></tr></table></figure><ol start="3"><li>å¼€å§‹è¿è¡Œ,è¿›è¡Œè°ƒè¯•</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">r<br><br><span class="hljs-comment"># æŸ¥çœ‹æŸä¸€ä¸ªåœ°å€/å‡½æ•°çš„æ±‡ç¼– (å¦‚æœä¸åœ¨è¿è¡Œæ²¡æ³•æ ¹æ®åœ°å€çœ‹æ±‡ç¼–, åªèƒ½ç”¨å‡½æ•°ååå­—)</span><br>disassem *0x400ee0<br><br>disassem phase_1<br><br>disassem strings_not_equal<br></code></pre></td></tr></table></figure><h1 id="3-çœ‹æ±‡ç¼–"><a class="markdownIt-Anchor" href="#3-çœ‹æ±‡ç¼–"></a> 3. çœ‹æ±‡ç¼–</h1><p>x86ç³»ç»Ÿä¸­,æ ˆçš„åœ°å€æ˜¯ä»é«˜åœ°å€å¾€ä½åœ°å€, pushæ ˆå¸§çš„æ—¶å€™, rsp(<code>stack pointer</code>)å‡å°‘å››ä¸ªå­—èŠ‚.</p><p><img src="https://s1.328888.xyz/2022/09/22/IoR1S.png" alt="å¯„å­˜å™¨" /></p><h2 id="31-é€šç”¨å¯„å­˜å™¨64ä½å¯„å­˜å™¨"><a class="markdownIt-Anchor" href="#31-é€šç”¨å¯„å­˜å™¨64ä½å¯„å­˜å™¨"></a> 3.1 é€šç”¨å¯„å­˜å™¨(64ä½å¯„å­˜å™¨)</h2><p>0x8(%rsp) è¡¨ç¤ºä¸Šä¸€ä¸ªå˜é‡(ä¸€èˆ¬ç¬¬ä¸€ä¸ª)</p><blockquote><p>bombä¸­å°†string_lengthçš„è¿”å›å€¼æ”¾åœ¨EAXä¸­</p></blockquote><p>EAX: accumulator, åŠ æ³•ä¹˜æ³•æŒ‡ä»¤çš„ç¼ºçœå¯„å­˜å™¨<br />EBX: baseåŸºåœ°å€å¯„å­˜å™¨,åœ¨å†…å­˜å¯»å€æ—¶å­˜æ”¾åŸºåœ°å€<br />ECX: counterè®¡æ•°å™¨, é‡å¤(REP)å‰ç¼€æŒ‡ä»¤å’ŒLOOPæŒ‡ä»¤çš„å†…å®šè®¡æ•°å™¨<br />EDX: å­˜æ”¾æ•´æ•°é™¤æ³•äº§ç”Ÿçš„ä½™æ•°<br />ESI/EDI: source/destination index, å­—ç¬¦ä¸²æ“ä½œæŒ‡ä»¤é‡Œ, DS:ESIæŒ‡å‘æºä¸², ES:EDIæŒ‡å‘ç›®æ ‡ä¸²<br />EBP: base pointer, é«˜çº§è¯­è¨€å‡½æ•°è°ƒç”¨æ—¶çš„frame pointerä¿å­˜åœ°æ–¹<br />å¦‚:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs asm">push ebp;  // ä¿å­˜å½“å‰ebp<br>mov ebp,esp; // ebpè®¾ä¸ºå½“å‰<br>sub esp,xxx;  // é¢„ç•™xxxå­—èŠ‚ç»™å‡½æ•°ä¸´æ—¶å˜é‡<br></code></pre></td></tr></table></figure><p>ESP: ä¸“é—¨ç”¨ä½œå †æ ˆçš„é¡¶éƒ¨æŒ‡é’ˆ</p><h2 id="32-å…¶ä»–å¯„å­˜å™¨"><a class="markdownIt-Anchor" href="#32-å…¶ä»–å¯„å­˜å™¨"></a> 3.2 å…¶ä»–å¯„å­˜å™¨:</h2><p>R0~R12 æ˜¯64ä½å·¥ä½œå¯„å­˜å™¨, å…¶ä¸­R12æœ‰å¯èƒ½è¢«linkerä¿®æ”¹,æ‰€ä»¥å‡½æ•°å¼€å¤´ç»å¸¸å¯¹R12è¿›è¡Œä¿æŠ¤</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">push %r12 <span class="hljs-comment"># å°†R12çš„å†…å®¹æ¨å…¥å †æ ˆè¿›è¡Œä¿æŠ¤</span><br></code></pre></td></tr></table></figure><p>å½“å‡½æ•°å‚æ•°å°‘äº7ä¸ªæ—¶, ä»å·¦åˆ°å³å‚æ•°ä¾æ¬¡æ”¾å…¥å¯„å­˜å™¨:</p><ul><li>rdi</li><li>rsi</li><li>rdx</li><li>rcx</li><li>r8</li><li>r9</li></ul><h2 id="33-æ¡ä»¶è·³è½¬æŒ‡ä»¤å’Œæ¯”è¾ƒæŒ‡ä»¤"><a class="markdownIt-Anchor" href="#33-æ¡ä»¶è·³è½¬æŒ‡ä»¤å’Œæ¯”è¾ƒæŒ‡ä»¤"></a> 3.3 æ¡ä»¶è·³è½¬æŒ‡ä»¤å’Œæ¯”è¾ƒæŒ‡ä»¤:</h2><blockquote><p><a href="https://faydoc.tripod.com/cpu/jle.htm">https://faydoc.tripod.com/cpu/jle.htm</a></p></blockquote><p><code>test</code> æŒ‡ä»¤ä¸»è¦å°†ä¸¤ä¸ªæ“ä½œæ•°æŒ‰ä½ä¸, å¹¶æ ¹æ®ç»“æœè®¾ç½®<code>æ ‡å¿—å¯„å­˜å™¨</code> (ç»“æœä¸ä¼šå†™å›åˆ°ç›®æ ‡æ“ä½œæ•°), <code>test</code>çš„ä¸¤ä¸ªå¯„å­˜å™¨åªæœ‰éƒ½æ˜¯ç©º(å…¨0)æ—¶æˆ–è€…ä¸åŒæ—¶, ZFæ‰ä¼šè¢«ç½®ä½</p><blockquote><p>æ³¨æ„: addq src, dst -&gt; dst = dst + src, ä¼šå°†ç»“æœå†™å›åˆ°ç›®æ ‡å¯„å­˜å™¨ä¸Š</p></blockquote><p><code>test</code>æŒ‡ä»¤ä½ä¸è¿ç®—ç»“æœä¸º0çš„è¯, ZF(Zero Flag)è®¾ä¸º0.</p><p><code>je</code> æ˜¯jz(jump if zero)çš„åˆ«ç§°.<br /><code>jne</code>å°±æ˜¯åè¿‡æ¥çš„æ¡ä»¶è·³è½¬æŒ‡ä»¤</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">cmp</span> eax, edx<br>ja somewhere ; <span class="hljs-attribute">will</span> go <span class="hljs-string">&quot;somewhere&quot;</span> if eax &gt;u edx<br>             ; <span class="hljs-attribute">where</span> &gt;u is <span class="hljs-string">&quot;unsigned greater than&quot;</span><br><br>cmp eax, edx<br>jg somewhere ; <span class="hljs-attribute">will</span> go <span class="hljs-string">&quot;somewhere&quot;</span> if eax &gt;s edx<br>             ; <span class="hljs-attribute">where</span> &gt;s is <span class="hljs-string">&quot;signed greater than&quot;</span><br></code></pre></td></tr></table></figure><p><code>cmpb</code>: åˆ¤æ–­æ˜¯å¦ç›¸ç­‰, ç„¶åç½®ZFä¸º1:</p><p><code>cmpl</code>:<br />For &gt;, there is ja for unsigned and jg for signed (jump if above and jump if greater).</p><pre><code class="hljs">For &lt;, there is jb for unsigned and jl for signed (jump if below and jump if less).</code></pre><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">cmpb <span class="hljs-variable">$0x0</span>, (%edx)<br></code></pre></td></tr></table></figure><p><code>(%edx)</code> è¡¨ç¤º %edxä¸­æ‰€ä¿å­˜çš„åœ°å€æŒ‡å‘å•å…ƒçš„å†…å®¹(å³å–æŒ‡é’ˆæ‰€æŒ‡å†…å®¹)</p><h2 id="34-å¯„å­˜å™¨æ“ä½œ"><a class="markdownIt-Anchor" href="#34-å¯„å­˜å™¨æ“ä½œ"></a> 3.4 å¯„å­˜å™¨æ“ä½œ:</h2><blockquote><p><a href="https://stackoverflow.com/questions/19748074/meaning-of-0x8rsp">https://stackoverflow.com/questions/19748074/meaning-of-0x8rsp</a></p></blockquote><p><code>0x8(%rsp)</code> means &quot;get the location on the stack that is 8 bytes away from the stack pointer %rsp</p><p><code>lea</code>: å’Œmovå¾ˆåƒ, ä¸è¿‡æœ‰å…¶ä»–ä½œç”¨</p><h1 id="å…¶ä»–"><a class="markdownIt-Anchor" href="#å…¶ä»–"></a> å…¶ä»–:</h1><p>å› ä¸ºä¸åŒåŒå­¦çš„bombå†…å®¹ä¸åŒ, æˆ‘å¸®çš„ä¸€ä½åŒå­¦æ¯”ç½‘ä¸Šçš„ç‰ˆæœ¬è¦ç¨å¾®å¤æ‚ä¸€äº›,å…±è®¡19å°æ—¶,bingo~</p><p>è¿™ç¯‡ç¬”è®°åªæ˜¯é›¶æ˜Ÿéšç¬”, å¸®åŠ©è‡ªå·±å›å¿†æ±‡ç¼–, æ—¥åæœ‰æœºä¼šä¼šç»¼åˆæ•´ç†</p>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>æ“ä½œç³»ç»Ÿ</category>
      
      <category>Linux</category>
      
      <category>æ±‡ç¼–</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Generate 204é“¾æ¥æ”¶é›†</title>
    <link href="/2022/09/04/Generate-204%E9%93%BE%E6%8E%A5%E6%94%B6%E9%9B%86/"/>
    <url>/2022/09/04/Generate-204%E9%93%BE%E6%8E%A5%E6%94%B6%E9%9B%86/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æ³¨æ„, è¿™äº›é“¾æ¥éƒ½å¯ä»¥ç”¨httpsæ›¿ä»£, ä½†æ˜¯å¹¶ä¸æ¨è.</p></blockquote><ul><li><a href="http://www.gstatic.com/generate_204">http://www.gstatic.com/generate_204</a></li><li><a href="http://cp.cloudflare.com/generate_204">http://cp.cloudflare.com/generate_204</a></li><li><a href="http://www.qualcomm.cn/generate_204">http://www.qualcomm.cn/generate_204</a></li><li><a href="http://clients3.google.com/generate_204">http://clients3.google.com/generate_204</a></li></ul>]]></content>
    
    
    <categories>
      
      <category>æ”¶è—</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>dbsç»“é¡¹æŠ¥å‘Š</title>
    <link href="/2022/09/03/dbs%E7%BB%93%E9%A1%B9%E6%8A%A5%E5%91%8A/"/>
    <url>/2022/09/03/dbs%E7%BB%93%E9%A1%B9%E6%8A%A5%E5%91%8A/</url>
    
    <content type="html"><![CDATA[<center>    <font size="10"><bold>ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°å¯åŠ¨å¾®å‹è™šæ‹Ÿæœº</bold></font>    <br/><br/></center><h1 id="1-é¡¹ç›®å®ç°æ–¹æ¡ˆç ”ç©¶"><a class="markdownIt-Anchor" href="#1-é¡¹ç›®å®ç°æ–¹æ¡ˆç ”ç©¶"></a> 1. ğŸ“½ é¡¹ç›®å®ç°æ–¹æ¡ˆç ”ç©¶:</h1><blockquote><p>å®ç°æ–¹æ¡ˆç»™å‡ºæ˜¯ä¸ºäº†æä¾›<font color="cyan">å¯å¤ç°æ€§</font></p></blockquote><table><thead><tr><th>é…ç½®</th><th>æè¿°</th></tr></thead><tbody><tr><td>å¤„ç†å™¨</td><td>AMDÂ® Ryzen 7 4800h with radeon graphics Ã— 16</td></tr><tr><td>å†…å­˜</td><td>32g</td></tr><tr><td>æ˜¾å¡</td><td>NVIDIA Corporation TU117M [GeForce GTX 1650 Ti Mobile] / NVIDIA GeForce GTX 1650 Ti/PCIe/SSE2</td></tr><tr><td>OS</td><td>Ubuntu 22.04 LTS</td></tr><tr><td>rustcç‰ˆæœ¬</td><td>rustc 1.62.1</td></tr></tbody></table><h2 id="11-å‚è€ƒç›®æ ‡-firecracker"><a class="markdownIt-Anchor" href="#11-å‚è€ƒç›®æ ‡-firecracker"></a> 1.1 ğŸ² å‚è€ƒç›®æ ‡: <a href="https://github.com/firecracker-microvm/firecracker">firecracker</a></h2><h3 id="111-æ„å»ºfirecracker"><a class="markdownIt-Anchor" href="#111-æ„å»ºfirecracker"></a> 1.1.1 æ„å»º<code>firecracker</code></h3><blockquote><p>cargoçš„ä½¿ç”¨æ–‡æ¡£: <a href="https://doc.rust-lang.org/cargo/index.html">https://doc.rust-lang.org/cargo/index.html</a></p><p>å¦‚æœéœ€è¦ç¼–è¯‘å…¶ä»–å¹³å°çš„crate, å¯èƒ½è¿˜éœ€è¦ç”¨rustupæ·»åŠ å¯¹åº”çš„toolchain, rustupçš„ä½¿ç”¨æ–‡æ¡£: <a href="https://rust-lang.github.io/rustup/index.html">https://rust-lang.github.io/rustup/index.html</a></p></blockquote><ol><li>æ‹‰å–æºç :</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">git <span class="hljs-built_in">clone</span> https://github.com/firecracker-microvm/firecracker<br><span class="hljs-built_in">cd</span> firecracker<br></code></pre></td></tr></table></figure><ol start="2"><li><p>é…ç½®ä¾èµ–</p><blockquote><p>æ„å»ºfirecrakerä¾èµ–äº<code>Docker</code>, æˆ‘çš„ä¸ªäººåšå®¢ä¸Šdockerçš„å®‰è£…ç¬”è®°å¯ä¾›å‚è€ƒ: <a href="https://www.torch-fan.site/2022/07/21/Ubuntu%E4%B8%8A%E4%BD%BF%E7%94%A8docker/">Ubuntuä¸Šä½¿ç”¨Docker</a></p></blockquote></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo apt install build-essential clang<br>cargo check <br></code></pre></td></tr></table></figure><ol start="3"><li>æ„å»ºfirecracker</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">tools/devtool build<br><br><span class="hljs-comment"># release</span><br>tools/devtool build --release<br></code></pre></td></tr></table></figure><h3 id="112-ä½¿ç”¨firecrackeråˆ›å»ºè™šæ‹Ÿæœº"><a class="markdownIt-Anchor" href="#112-ä½¿ç”¨firecrackeråˆ›å»ºè™šæ‹Ÿæœº"></a> 1.1.2 ä½¿ç”¨<code>firecracker</code>åˆ›å»ºè™šæ‹Ÿæœº</h3><blockquote><p>å‚è€ƒèµ„æ–™: <a href="https://github.com/firecracker-microvm/firecracker/blob/main/docs/getting-started.md">https://github.com/firecracker-microvm/firecracker/blob/main/docs/getting-started.md</a></p></blockquote><blockquote><p>äº‹å®ä¸Š, æŠ¥å‘Šçš„æœ€ç»ˆç›®çš„ç›®çš„å¹¶ä¸åœ¨äºæè¿°æ„å»ºfirecrakeræˆ–è€…ä½¿ç”¨dbsä¹‹ç±»çš„æ–¹å¼, è€Œæ˜¯å€ŸåŠ©å¯¹firecrakerçš„äº†è§£æ¥è¾…åŠ©ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°ä»<code>DBS</code>ä¸­å¯åŠ¨ä¸€ä¸ªè™šæ‹Ÿæœº, å› æ­¤æ–‡æ¡£å™è¿°ä¸ä»¥çº¿æ€§è¿›è¡Œ, å°†è¿›è¡Œè·³è½¬, ä½“ç°æ€è€ƒçš„è¿‡ç¨‹.</p></blockquote><p>â€‹ä½¿ç”¨firecrackeråˆ›å»ºè™šæ‹Ÿæœº, éœ€è¦è¿™äº›å†…å®¹:</p><ol><li><code>API socket</code></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">./firecracker --api-sock /tmp/firecracker.socket<br></code></pre></td></tr></table></figure><ol start="2"><li><p><code>Linux kernel</code></p></li><li><p><code>rootfs</code></p></li></ol><p>â€‹å› æ­¤å½“æˆ‘ä»¬å¼€å§‹äº†è§£<code>DBS</code>æ—¶, éœ€è¦å…³æ³¨<code>DBS</code>å·²ç»å…·å¤‡å’Œä¸å…·å¤‡çš„è¦ç´ ,</p><h2 id="12-æ›´è¿›ä¸€æ­¥"><a class="markdownIt-Anchor" href="#12-æ›´è¿›ä¸€æ­¥"></a> 1.2 ğŸ¦Œ æ›´è¿›ä¸€æ­¥</h2><blockquote><p>ä¸Šé¢çš„æ­¥éª¤ä¸å­˜åœ¨ä»»ä½•å›°éš¾, ä½†æˆ‘ä»¬å¹¶ä¸å…³å¿ƒæ˜¯å¦åˆ›å»ºå¥½è™šæ‹Ÿæœº, è€Œå…³æ³¨åœ¨firecrackerä¸€å¼€å§‹æ˜¯å¦‚ä½•åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿæœº</p></blockquote><h3 id="121-vmmçš„å¯¹å¤–æ¥å£"><a class="markdownIt-Anchor" href="#121-vmmçš„å¯¹å¤–æ¥å£"></a> 1.2.1 VMMçš„å¯¹å¤–æ¥å£</h3><blockquote><p>å®šä½åˆ°<code>src/firecracker/src/main.rs</code>, å…³æ³¨åœ¨<code>api-sock</code>å‘½ä»¤è¡Œå‚æ•°</p></blockquote><p>firecrackerå¯¹è™šæ‹Ÿæœºè¿›è¡Œé…ç½®ä¸»è¦åˆ†ä¸º<font color="cyan"><strong>ä¸¤ç§å½¢å¼</strong></font>:</p><ol><li>HTTP APIçš„è¯·æ±‚æ–¹å¼è¿›è¡Œé…ç½®(ä¹Ÿå¯ä»¥åŒæ—¶æŒ‡å®šé…ç½®æ–‡ä»¶)</li><li>é€šè¿‡æŒ‡å®šé…ç½®æ–‡ä»¶çš„æ–¹å¼è¿›è¡Œé…ç½®</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash">rootfs_path=$(<span class="hljs-built_in">pwd</span>)<span class="hljs-string">&quot;/hello-rootfs.ext4&quot;</span><br>curl --unix-socket /tmp/firecracker.socket -i \<br>  -X PUT <span class="hljs-string">&#x27;http://localhost/drives/rootfs&#x27;</span> \<br>  -H <span class="hljs-string">&#x27;Accept: application/json&#x27;</span>           \<br>  -H <span class="hljs-string">&#x27;Content-Type: application/json&#x27;</span>     \<br>  -d <span class="hljs-string">&quot;&#123;</span><br><span class="hljs-string">        \&quot;drive_id\&quot;: \&quot;rootfs\&quot;,</span><br><span class="hljs-string">        \&quot;path_on_host\&quot;: \&quot;<span class="hljs-variable">$&#123;rootfs_path&#125;</span>\&quot;,</span><br><span class="hljs-string">        \&quot;is_root_device\&quot;: true,</span><br><span class="hljs-string">        \&quot;is_read_only\&quot;: false</span><br><span class="hljs-string">   &#125;&quot;</span><br><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># ä¸ä½¿ç”¨APIè¿›è¡Œé…ç½®, ä¼ å…¥é…ç½®æ–‡ä»¶</span><br>./firecracker --api-sock /tmp/firecracker.socket --config-file &lt;path_to_the_configuration_file&gt;<br></code></pre></td></tr></table></figure><blockquote><p>å¯¹äºDBSè€Œè¨€, é¡¹ç›®æœ€åˆç›®æ ‡æ˜¯é€šè¿‡å‘½ä»¤è¡Œå‚æ•°è¿›è¡Œå¯åŠ¨, è€Œä¸éœ€è¦kataçš„ç¯å¢ƒ, å› æ­¤æˆ‘ä»¬å¯ä»¥å…³æ³¨åœ¨ä½¿ç”¨é…ç½®æ–‡ä»¶åˆ›å»ºè™šæ‹Ÿæœºçš„ä»£ç é€»è¾‘éƒ¨åˆ†, å› æ­¤å¯ä»¥å…³æ³¨å‡½æ•°<code>run_without_api</code> <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>â†’</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">â†’</span></span></span></span>  <code>VmResources::from_json</code></p></blockquote><h3 id="122-rootfså’Œlinux-kernelçš„ä½¿ç”¨æ–¹å¼"><a class="markdownIt-Anchor" href="#122-rootfså’Œlinux-kernelçš„ä½¿ç”¨æ–¹å¼"></a> 1.2.2 rootfså’ŒLinux kernelçš„ä½¿ç”¨æ–¹å¼</h3><blockquote><p>è¦äº†è§£rootfså’ŒLinux kernelå¦‚ä½•è¢«ä½¿ç”¨äº†, éœ€è¦ä»<code>main.rs</code>çš„<code>run_without_api</code>ä¸­, æ·±å…¥åˆ°<code>build_microvm_from_json</code></p></blockquote><ul><li>kernelè¢«ä»¥<code>VmmConfig::block_devices</code>çš„å½¢å¼ä¼ å…¥</li><li>rootfsä½œä¸º<code>VmmConfig::block_devices</code>é…ç½®çš„ä¸€éƒ¨åˆ†è¿›è¡Œä¼ å…¥</li><li>è‡³äºå¯åŠ¨è™šæ‹Ÿæœºç­‰å‘½ä»¤, åˆ™å¯ä»¥HTTP APIå½¢å¼, ä¼ é€’ç»™<code>api_server/src/lib.rs</code>, æ¥å—è¯·æ±‚<code>/actions</code>çš„å‚æ•°, å¹¶å¯åŠ¨é…ç½®å¥½çš„è™šæ‹Ÿæœº</li></ul><blockquote><p>è‡³æ­¤, æˆ‘ä»¬å¯ä»¥å¸¦ç€ç–‘é—®, è¾¹å¼€å§‹å®ç°æˆ‘ä»¬çš„é¡¹ç›®éœ€æ±‚, è¾¹æµè§ˆäº†è§£firecrackeræ˜¯å¦‚ä½•å®ç°çš„.</p></blockquote><h1 id="2-é˜¶æ®µä¸€-åˆ›å»ºå‘½ä»¤è¡Œå‰ç«¯æ¥å£"><a class="markdownIt-Anchor" href="#2-é˜¶æ®µä¸€-åˆ›å»ºå‘½ä»¤è¡Œå‰ç«¯æ¥å£"></a> 2. ğŸ”¨ é˜¶æ®µä¸€: åˆ›å»ºå‘½ä»¤è¡Œå‰ç«¯æ¥å£</h1><blockquote><p>ç”±äºrustç¼–ç¨‹ç»éªŒä¸å¤š, å› æ­¤å°½å¯èƒ½ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“, åœ¨å‘½ä»¤è¡Œè§£æä¸Š, é€‰ç”¨<a href="https://github.com/clap-rs/clap">clap</a> (Dual-licensed under <code>Apache 2.0</code> or <code>MIT</code>, å¯¹äºDBSè€Œè¨€, æ­£å¥½å¯ä»¥ç”¨<code>Apache 2.0</code>)</p><p><code>clap</code>çš„ä½¿ç”¨æ–‡æ¡£: <a href="https://docs.rs/clap/latest/clap/">https://docs.rs/clap/latest/clap/</a></p></blockquote><h2 id="21-å‘½ä»¤è¡Œé…ç½®é¡¹"><a class="markdownIt-Anchor" href="#21-å‘½ä»¤è¡Œé…ç½®é¡¹"></a> 2.1 ğŸ¨ å‘½ä»¤è¡Œé…ç½®é¡¹</h2><blockquote><p>ä»<a href="https://github.com/kata-containers/kata-containers/tree/runtime-rs">kata-containers</a>çš„<code>runtime-rs</code>åˆ†æ”¯ä¸­, å¯ä»¥åœ¨<code>dragonball::vm::VmConfigInfo</code>ä¸­çœ‹åˆ°DBSä½¿ç”¨çš„è™šæ‹Ÿæœºé…ç½®.</p></blockquote><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">CpuTopology</span> &#123;<br>    <span class="hljs-comment">/// threads per core to indicate hyperthreading is enabled or not</span><br>    <span class="hljs-keyword">pub</span> threads_per_core: <span class="hljs-type">u8</span>,<br>    <span class="hljs-comment">/// cores per die to guide guest cpu topology init</span><br>    <span class="hljs-keyword">pub</span> cores_per_die: <span class="hljs-type">u8</span>,<br>    <span class="hljs-comment">/// dies per socket to guide guest cpu topology</span><br>    <span class="hljs-keyword">pub</span> dies_per_socket: <span class="hljs-type">u8</span>,<br>    <span class="hljs-comment">/// number of sockets</span><br>    <span class="hljs-keyword">pub</span> sockets: <span class="hljs-type">u8</span>,<br>&#125;<br><br><span class="hljs-meta">#[derive(Clone, Debug, PartialEq)]</span><br><span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">VmConfigInfo</span> &#123;<br>    <span class="hljs-comment">/// Number of vcpu to start.</span><br>    <span class="hljs-keyword">pub</span> vcpu_count: <span class="hljs-type">u8</span>,<br>    <span class="hljs-comment">/// Max number of vcpu can be added</span><br>    <span class="hljs-keyword">pub</span> max_vcpu_count: <span class="hljs-type">u8</span>,<br>    <span class="hljs-comment">/// cpu power management.</span><br>    <span class="hljs-keyword">pub</span> cpu_pm: <span class="hljs-type">String</span>,<br>    <span class="hljs-comment">/// cpu topology information</span><br>    <span class="hljs-keyword">pub</span> cpu_topology: CpuTopology,<br>    <span class="hljs-comment">/// vpmu support level</span><br>    <span class="hljs-keyword">pub</span> vpmu_feature: <span class="hljs-type">u8</span>,<br><br>    <span class="hljs-comment">/// Memory type that can be either hugetlbfs or shmem, default is shmem</span><br>    <span class="hljs-keyword">pub</span> mem_type: <span class="hljs-type">String</span>,<br>    <span class="hljs-comment">/// Memory file path</span><br>    <span class="hljs-keyword">pub</span> mem_file_path: <span class="hljs-type">String</span>,<br>    <span class="hljs-comment">/// The memory size in MiB.</span><br>    <span class="hljs-keyword">pub</span> mem_size_mib: <span class="hljs-type">usize</span>,<br><br>    <span class="hljs-comment">/// sock path</span><br>    <span class="hljs-keyword">pub</span> serial_path: <span class="hljs-type">Option</span>&lt;<span class="hljs-type">String</span>&gt;,<br>&#125;<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨<code>clap</code>å®šä¹‰å‘½ä»¤è¡Œå‚æ•°åï¼Œå…·ä½“å†…å®¹å¦‚ä¸‹:</p><table><thead><tr><th style="text-align:center">arguments</th><th style="text-align:center">required</th><th style="text-align:center">default value</th><th style="text-align:center">description</th></tr></thead><tbody><tr><td style="text-align:center"><code>rootfs</code></td><td style="text-align:center">true</td><td style="text-align:center">-</td><td style="text-align:center">The path to rootfs image.</td></tr><tr><td style="text-align:center"><code>kernel-path</code></td><td style="text-align:center">true</td><td style="text-align:center">-</td><td style="text-align:center">The path of kernel image (Only uncompressed kernel is supported for Dragonball).</td></tr><tr><td style="text-align:center"><code>log-file</code></td><td style="text-align:center">false</td><td style="text-align:center"><code>&quot;dbs-cli.log&quot;</code></td><td style="text-align:center">The path to log file</td></tr><tr><td style="text-align:center"><code>log-level</code></td><td style="text-align:center">false</td><td style="text-align:center"><code>&quot;Info&quot;</code></td><td style="text-align:center">The logging level.</td></tr><tr><td style="text-align:center"><code>boot-args</code></td><td style="text-align:center">false</td><td style="text-align:center"><code>console=ttyS0 tty0 reboot=k debug panic=1 pci=off root=/dev/vda1</code></td><td style="text-align:center">The boot arguments passed to the kernel.</td></tr><tr><td style="text-align:center"><code>is-root</code></td><td style="text-align:center">false</td><td style="text-align:center"><code>true</code></td><td style="text-align:center">Decide the device to be the root boot device or not.</td></tr><tr><td style="text-align:center"><code>is-read-only</code></td><td style="text-align:center">false</td><td style="text-align:center"><code>false</code></td><td style="text-align:center">The driver opened in read-only or not.</td></tr><tr><td style="text-align:center"><code>vcpu</code></td><td style="text-align:center">false</td><td style="text-align:center"><code>1</code></td><td style="text-align:center">The number of vcpu to start.</td></tr><tr><td style="text-align:center"><code>max-vcpu</code></td><td style="text-align:center">false</td><td style="text-align:center"><code>1</code></td><td style="text-align:center">The max number of vpu can be added.</td></tr><tr><td style="text-align:center"><code>cpu-pm</code></td><td style="text-align:center">false</td><td style="text-align:center"><code>0</code></td><td style="text-align:center">vpmu support level.</td></tr><tr><td style="text-align:center"><code>threads-per-core</code></td><td style="text-align:center">false</td><td style="text-align:center"><code>1</code></td><td style="text-align:center">Threads per core to indicate hyper-threading is enabled or not.</td></tr><tr><td style="text-align:center"><code>cores-per-die</code></td><td style="text-align:center">false</td><td style="text-align:center"><code>1</code></td><td style="text-align:center">Cores per die to guide guest cpu topology init.</td></tr><tr><td style="text-align:center"><code>dies-per-socket</code></td><td style="text-align:center">false</td><td style="text-align:center"><code>1</code></td><td style="text-align:center">Dies per socket to guide guest cpu topology.</td></tr><tr><td style="text-align:center"><code>sockets</code></td><td style="text-align:center">false</td><td style="text-align:center"><code>1</code></td><td style="text-align:center">The number of sockets.</td></tr><tr><td style="text-align:center"><code>mem-type</code></td><td style="text-align:center">false</td><td style="text-align:center"><code>shmem</code></td><td style="text-align:center">Memory type that can be either hugetlbfs or shmem.</td></tr><tr><td style="text-align:center"><code>mem-file</code></td><td style="text-align:center">false</td><td style="text-align:center">``</td><td style="text-align:center">Memory file path.</td></tr><tr><td style="text-align:center"><code>initrd-path</code></td><td style="text-align:center">false</td><td style="text-align:center"><code>None</code></td><td style="text-align:center">The path of initrd.</td></tr></tbody></table><h2 id="22-å‚æ•°ç›¸å…³çš„æ³¨æ„äº‹é¡¹"><a class="markdownIt-Anchor" href="#22-å‚æ•°ç›¸å…³çš„æ³¨æ„äº‹é¡¹"></a> 2.2 å‚æ•°ç›¸å…³çš„æ³¨æ„äº‹é¡¹:</h2><p>æ•´ä¸ªå‘½ä»¤è¡Œå‚æ•°æœ€ä¸ºå…³é”®çš„ä¸‰ä¸ªå‚æ•°æ˜¯<code>rootfs</code>, <code>kernel-path</code> å’Œ <code>boot-args</code>. ç”±äºä»å‘½ä»¤è¡Œç»ˆç«¯è¿›å…¥vmçš„consoleé‡‡ç”¨çš„æ–¹å¼æ˜¯å°†ttySxçš„è¾“å‡ºé‡å®šå‘åˆ°å½“å‰ç»ˆç«¯çš„stdout, å› æ­¤éœ€è¦ç¡®ä¿kernelæ”¯æŒserial consoleå¹¶ä¸”rootfsåœ¨æ„å»ºæ—¶éœ€è¦é…ç½®å¥½å¯åŠ¨ä¹‹åèƒ½å¤Ÿå¯åŠ¨å¯¹åº”ç»ˆç«¯, å¦åˆ™å°†æ— æ³•è¿›å…¥vm. å¯¹äº<code>boot-args</code>, <code>console=xx</code>å’Œ<code>root=&quot;dev/vda1&quot;</code> æ˜¯æ ¹æ®å¯¹åº”rootfsçš„è®¾ç½®æ¥çš„, å› æ­¤è™½ç„¶ä¸æ˜¯å¿…é¡»ç»™å‡ºçš„å‚æ•°, ä½†æ˜¯éœ€è¦è‡ªè¡ŒæŸ¥çœ‹æ˜¯å¦éœ€è¦æœ‰æ‰€ä¿®æ”¹ã€‚</p><h1 id="3-é˜¶æ®µäºŒ-é¡¹ç›®å®ç°æ€è·¯åŠé—®é¢˜è§£å†³"><a class="markdownIt-Anchor" href="#3-é˜¶æ®µäºŒ-é¡¹ç›®å®ç°æ€è·¯åŠé—®é¢˜è§£å†³"></a> 3. ğŸ”¥ é˜¶æ®µäºŒï¼š é¡¹ç›®å®ç°æ€è·¯åŠé—®é¢˜è§£å†³</h1><h2 id="31-å‘½ä»¤è¡Œå‚æ•°"><a class="markdownIt-Anchor" href="#31-å‘½ä»¤è¡Œå‚æ•°"></a> 3.1 å‘½ä»¤è¡Œå‚æ•°ï¼š</h2><p>â€‹æ ¹æ®firecrakerå’Œkata-containerç°æœ‰ä»£ç ï¼Œç¡®å®šå¯åŠ¨è™šæ‹Ÿæœºå¿…å¤‡å‚æ•°åï¼Œä¾¿å¯ç›´æ¥ç”¨<code>clap</code>æä¾›çš„ä¸€äº›<code>derive</code>æ¥å®šä¹‰å‘½ä»¤è¡Œå‚æ•°ï¼Œå‚æ•°é¡¹è§ä¸Šè¡¨ï¼Œæš‚æ— é—®é¢˜å‡ºç°ã€‚</p><h2 id="32-è¿›å…¥vmç»ˆç«¯"><a class="markdownIt-Anchor" href="#32-è¿›å…¥vmç»ˆç«¯"></a> 3.2 è¿›å…¥vmç»ˆç«¯ï¼š</h2><p>â€‹åŸºäºç°æœ‰kata-containerçš„ä¸€äº›åˆ›å»ºvmã€å¯åŠ¨vmã€åˆ›å»ºè®¾å¤‡ç­‰APIï¼Œåªéœ€è¿›è¡Œç®€å•çš„ä¿®æ”¹è°ƒç”¨å³å¯å®Œæˆã€‚ä½†æ˜¯æœ€ååœ¨IOä¸Šå‡ºç°é—®é¢˜ï¼Œå…·ä½“å¯ä»¥æè¿°ä¸ºåˆ›å»ºvmçš„æ ‡å‡†è¾“å…¥è¾“å‡ºç»ˆç«¯æ—¶ï¼Œ<code>com1</code>æœªå°†è¾“å‡ºé‡å®šå‘åˆ°stdoutï¼Œå¯¼è‡´æ— æ³•ä¸vmè¿›è¡Œäº¤äº’ã€‚</p><p>â€‹è§£å†³æ–¹æ³•ï¼Œä¸º<code>com1</code>è®¾ç½®è¾“å‡ºæµå¹¶é‡å®šå‘åˆ°<code>stdout</code>ï¼š</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs rust">device.<span class="hljs-title function_ invoke__">lock</span>().<span class="hljs-title function_ invoke__">unwrap</span>().<span class="hljs-title function_ invoke__">set_output_stream</span>(<span class="hljs-title function_ invoke__">Some</span>(<span class="hljs-type">Box</span>::<span class="hljs-title function_ invoke__">new</span>(std::io::<span class="hljs-title function_ invoke__">stdout</span>())));<br></code></pre></td></tr></table></figure><h2 id="33-åŸºæœ¬åŸç†-serial-console"><a class="markdownIt-Anchor" href="#33-åŸºæœ¬åŸç†-serial-console"></a> 3.3 åŸºæœ¬åŸç†ï¼š <code>serial console</code></h2><ul><li><a href="https://www.kernel.org/doc/html/latest/admin-guide/serial-console.html">Linux Serial Console â€” The Linux Kernel documentation</a></li><li><a href="https://tldp.org/HOWTO/Serial-HOWTO-10.html">Serial HOWTO: Serial Port Devices /dev/ttyS2, etc. (tldp.org)</a></li></ul><blockquote><p>ä¸‹å›¾ä¸ºä¸²å£å¯¹åº”ç»ˆç«¯åä»¥åŠIOåœ°å€</p></blockquote><p><img src="https://s1.ax1x.com/2022/08/29/vfSKR1.png" alt="" /></p><p><code>kata-container</code>åœ¨<code>runtime-rs</code>åˆ†æ”¯ä¸‹ï¼Œcom2è¢«ç”¨æ¥è¾“å‡ºæ—¥å¿—ä¿¡æ¯ï¼ˆåŒæ—¶ä¹Ÿå°†dmesgä¹Ÿå†™å…¥loggeräº†ï¼‰ï¼Œå› æ­¤åªèƒ½ä½¿ç”¨è®¾å¤‡com1è¿æ¥åˆ°å¯¹åº”çš„ç»ˆç«¯ã€‚</p><blockquote><p><code>console=device,options</code> ç”¨æ¥æŒ‡å®šç»ˆç«¯çš„è¾“å‡ºï¼Œè¯¥å‚æ•°æ”¾åœ¨kernelçš„å¯åŠ¨å‚æ•°ä¸­ã€‚</p><p><code>device</code>å¯èƒ½çš„å€¼ä¸ºï¼š</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">tty0 <span class="hljs-keyword">for</span> <span class="hljs-keyword">the</span> foreground virtual console<br>                ttyX <span class="hljs-keyword">for</span> <span class="hljs-keyword">any</span> other virtual console<br>                ttySx <span class="hljs-keyword">for</span> <span class="hljs-keyword">a</span> serial port<br>                lp0 <span class="hljs-keyword">for</span> <span class="hljs-keyword">the</span> <span class="hljs-keyword">first</span> parallel port<br>                ttyUSB0 <span class="hljs-keyword">for</span> <span class="hljs-keyword">the</span> <span class="hljs-keyword">first</span> USB serial device<br></code></pre></td></tr></table></figure></blockquote><p>åœ¨<code>kata-container</code>ä»“åº“<code>runtime-rs</code>åˆ†æ”¯çš„ç°æœ‰ä»£ç ä¸‹ï¼Œå·²ç»æœ‰é€šè¿‡socketè¿›å…¥serial consoleçš„ä»£ç ï¼Œä½†æ˜¯ä»å‘½ä»¤è¡Œå°†stdioé‡å®šå‘åˆ°è™šæ‹Ÿæœºserial consoleçš„ä»£ç å´ä¸èƒ½è¾¾åˆ°æ­£å¸¸é¢„æœŸã€‚åœ¨é€šè¿‡åå¤æµè§ˆä»£ç ï¼Œé€šè¿‡<code>3.2</code>ä¸­çš„ä¿®æ”¹ï¼Œè§£å†³äº†æ— æ³•åˆ›å»ºstdio consoleçš„é—®é¢˜ï¼Œå†åŠ ä¸Šæ­¤å‰å®ç°çš„å‘½ä»¤è¡Œå‚æ•°è§£æï¼Œæ•´ä¸ªæµç¨‹å°±å·²ç»å®Œæˆäº†ã€‚</p><h1 id="4-é¡¹ç›®æˆæœå±•ç¤º"><a class="markdownIt-Anchor" href="#4-é¡¹ç›®æˆæœå±•ç¤º"></a> 4. é¡¹ç›®æˆæœå±•ç¤ºï¼š</h1><h2 id="41-æœ¬åœ°å¼€å‘ä»“åº“"><a class="markdownIt-Anchor" href="#41-æœ¬åœ°å¼€å‘ä»“åº“"></a> 4.1 æœ¬åœ°å¼€å‘ä»“åº“ï¼š</h2><p>ä»“åº“åœ°å€ï¼š <a href="https://github.com/QiliangFan/kata-containers">https://github.com/QiliangFan/kata-containers</a></p><p>åˆ†æ”¯ï¼š<code>runtime-rs</code></p><h2 id="42-pull-request"><a class="markdownIt-Anchor" href="#42-pull-request"></a> 4.2  pull request:</h2><ul><li><p><a href="https://github.com/openanolis/dbs-cli/pull/1">Create VM from command line arguments #1</a></p></li><li><p><a href="https://github.com/kata-containers/kata-containers/pull/5082">dragonball: Fix problem that stdio console cannot connect to stdout #5082</a></p></li></ul><h2 id="43-è¿è¡Œç¤ºä¾‹ä¸ç»“æœæˆªå›¾"><a class="markdownIt-Anchor" href="#43-è¿è¡Œç¤ºä¾‹ä¸ç»“æœæˆªå›¾"></a> 4.3 è¿è¡Œç¤ºä¾‹ä¸ç»“æœæˆªå›¾:</h2><blockquote><p>ä¸ºäº†ç»“æœæ˜“äºå¤ç°ï¼Œä½¿ç”¨äº†firecrakeré¡¹ç›®çš„kernelå’Œrootfs(æ–¹ä¾¿ç”¨æˆ·ä¸‹è½½ï¼Œ å½“ç„¶å…¶ä»–æ”¯æŒserial consoleçš„å†…æ ¸å’Œrootfsä¹Ÿå¯ä»¥)ï¼Œå¦‚éœ€è¿è¡Œæ­¤CLIï¼Œå¯å‰å¾€<a href="https://github.com/firecracker-microvm/firecracker/blob/main/docs/getting-started.md">firecracker/getting-started.md at main Â· firecracker-microvm/firecracker (github.com)</a>ä¸‹è½½å¹¶ä½¿ç”¨</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">./dbs-cli --kernel-path ~/data/build/dbs/firecracker/vmlinux.bin --rootfs ~/data/build/dbs/firecracker/bionic.rootfs.ext4 --boot-args <span class="hljs-string">&quot;console=ttyS0 tty0 reboot=k debug panic=1 pci=off root=/dev/vda&quot;</span><br></code></pre></td></tr></table></figure><p><img src="https://s1.ax1x.com/2022/08/27/vRc536.png" alt="è¿›å…¥vm" /></p><p><img src="https://s1.ax1x.com/2022/08/27/vRczgf.png" alt="è¾“å…¥æŒ‡ä»¤" /></p><h2 id="44-å¯é€šè¿‡å‘½ä»¤è¡Œé…ç½®çš„å‚æ•°"><a class="markdownIt-Anchor" href="#44-å¯é€šè¿‡å‘½ä»¤è¡Œé…ç½®çš„å‚æ•°"></a> 4.4 å¯é€šè¿‡å‘½ä»¤è¡Œé…ç½®çš„å‚æ•°ï¼š</h2><table><thead><tr><th style="text-align:center">arguments</th><th style="text-align:center">required</th><th style="text-align:center">default value</th><th style="text-align:center">description</th></tr></thead><tbody><tr><td style="text-align:center"><code>rootfs</code></td><td style="text-align:center">true</td><td style="text-align:center">-</td><td style="text-align:center">The path to rootfs image.</td></tr><tr><td style="text-align:center"><code>kernel-path</code></td><td style="text-align:center">true</td><td style="text-align:center">-</td><td style="text-align:center">The path of kernel image (Only uncompressed kernel is supported for Dragonball).</td></tr><tr><td style="text-align:center"><code>log-file</code></td><td style="text-align:center">false</td><td style="text-align:center"><code>&quot;dbs-cli.log&quot;</code></td><td style="text-align:center">The path to log file</td></tr><tr><td style="text-align:center"><code>log-level</code></td><td style="text-align:center">false</td><td style="text-align:center"><code>&quot;Info&quot;</code></td><td style="text-align:center">The logging level.</td></tr><tr><td style="text-align:center"><code>boot-args</code></td><td style="text-align:center">false</td><td style="text-align:center"><code>console=ttyS0 tty0 reboot=k debug panic=1 pci=off root=/dev/vda1</code></td><td style="text-align:center">The boot arguments passed to the kernel.</td></tr><tr><td style="text-align:center"><code>is-root</code></td><td style="text-align:center">false</td><td style="text-align:center"><code>true</code></td><td style="text-align:center">Decide the device to be the root boot device or not.</td></tr><tr><td style="text-align:center"><code>is-read-only</code></td><td style="text-align:center">false</td><td style="text-align:center"><code>false</code></td><td style="text-align:center">The driver opened in read-only or not.</td></tr><tr><td style="text-align:center"><code>vcpu</code></td><td style="text-align:center">false</td><td style="text-align:center"><code>1</code></td><td style="text-align:center">The number of vcpu to start.</td></tr><tr><td style="text-align:center"><code>max-vcpu</code></td><td style="text-align:center">false</td><td style="text-align:center"><code>1</code></td><td style="text-align:center">The max number of vpu can be added.</td></tr><tr><td style="text-align:center"><code>cpu-pm</code></td><td style="text-align:center">false</td><td style="text-align:center"><code>0</code></td><td style="text-align:center">vpmu support level.</td></tr><tr><td style="text-align:center"><code>threads-per-core</code></td><td style="text-align:center">false</td><td style="text-align:center"><code>1</code></td><td style="text-align:center">Threads per core to indicate hyper-threading is enabled or not.</td></tr><tr><td style="text-align:center"><code>cores-per-die</code></td><td style="text-align:center">false</td><td style="text-align:center"><code>1</code></td><td style="text-align:center">Cores per die to guide guest cpu topology init.</td></tr><tr><td style="text-align:center"><code>dies-per-socket</code></td><td style="text-align:center">false</td><td style="text-align:center"><code>1</code></td><td style="text-align:center">Dies per socket to guide guest cpu topology.</td></tr><tr><td style="text-align:center"><code>sockets</code></td><td style="text-align:center">false</td><td style="text-align:center"><code>1</code></td><td style="text-align:center">The number of sockets.</td></tr><tr><td style="text-align:center"><code>mem-type</code></td><td style="text-align:center">false</td><td style="text-align:center"><code>shmem</code></td><td style="text-align:center">Memory type that can be either hugetlbfs or shmem.</td></tr><tr><td style="text-align:center"><code>mem-file</code></td><td style="text-align:center">false</td><td style="text-align:center">``</td><td style="text-align:center">Memory file path.</td></tr><tr><td style="text-align:center"><code>initrd-path</code></td><td style="text-align:center">false</td><td style="text-align:center"><code>None</code></td><td style="text-align:center">The path of initrd.</td></tr></tbody></table><h2 id="45-ä½¿ç”¨ç¤ºä¾‹"><a class="markdownIt-Anchor" href="#45-ä½¿ç”¨ç¤ºä¾‹"></a> 4.5 ä½¿ç”¨ç¤ºä¾‹:</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">./dbs-cli \<br>  --kernel-path ~/data/build/dbs/vmlinux.bin \<br>  --rootfs ~/data/build/dbs/rootfs.dmg \<br>  --boot-args <span class="hljs-string">&quot;console=ttyS0 tty0 reboot=k debug panic=1 pci=off root=/dev/vda1&quot;</span> ;<br></code></pre></td></tr></table></figure><p>For the rootfs from firecracker:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">./dbs-cli \<br>  --kernel-path ~/data/build/dbs/vmlinux.bin \<br>  --rootfs ~/data/build/dbs/bionic.rootfs.ext4 \<br>  --boot-args <span class="hljs-string">&quot;console=ttyS0 tty0 reboot=k debug panic=1 pci=off root=/dev/vda&quot;</span> ;<br></code></pre></td></tr></table></figure><p>For the rootfs build from kata:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">./dbs-cli \<br>  --kernel-path ~/data/build/dbs/vmlinux.bin \<br>  --rootfs ~/data/build/dbs/kata-containers.img \<br>  --boot-args <span class="hljs-string">&quot;console=ttyS0 tty0 reboot=k debug panic=1 pci=off root=/dev/vda1&quot;</span> ;<br></code></pre></td></tr></table></figure><p>Set the log level and log file:</p><blockquote><p>The log-level argument is case-insensitive: ErrOR and InFO are valid.</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">./dbs-cli \<br>  --log-file dbs-cli.log --log-level ERROR \<br>  --kernel-path ~/data/build/dbs/vmlinux.bin \<br>  --rootfs ~/data/build/dbs/kata-containers.img \<br>  --boot-args <span class="hljs-string">&quot;console=ttyS0 tty0 reboot=k debug panic=1 pci=off root=/dev/vda1&quot;</span> ;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>æŠ¥å‘Š</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Linuxä¸ªäººä½¿ç”¨æŒ‡ä»¤æ”¶é›†</title>
    <link href="/2022/08/24/Linux%E4%B8%AA%E4%BA%BA%E4%BD%BF%E7%94%A8%E6%8C%87%E4%BB%A4%E6%94%B6%E9%9B%86/"/>
    <url>/2022/08/24/Linux%E4%B8%AA%E4%BA%BA%E4%BD%BF%E7%94%A8%E6%8C%87%E4%BB%A4%E6%94%B6%E9%9B%86/</url>
    
    <content type="html"><![CDATA[<h1 id="1-socketserial"><a class="markdownIt-Anchor" href="#1-socketserial"></a> 1. Socket/Serial</h1><blockquote><p>ç™»é™†ç»‘å®šåœ¨socketä¸Šçš„console</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># console.sock æ”¹ä¸ºå¯¹åº”çš„socketåœ°å€</span><br>socat <span class="hljs-string">&quot;stdin,raw,echo=0,escape=0x11&quot;</span> <span class="hljs-string">&quot;unix-connect:[console.sock]&quot;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>æ“ä½œç³»ç»Ÿ</category>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>matplotlibçš„å¸¸ç”¨è®¾ç½®</title>
    <link href="/2022/08/23/matplotlib%E7%9A%84%E5%B8%B8%E7%94%A8%E8%AE%BE%E7%BD%AE/"/>
    <url>/2022/08/23/matplotlib%E7%9A%84%E5%B8%B8%E7%94%A8%E8%AE%BE%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<h1 id="1-backend"><a class="markdownIt-Anchor" href="#1-backend"></a> 1. backend</h1><blockquote><p>æœ‰æ—¶ä¿å­˜çš„å›¾ç‰‡ä¸åªæ˜¯png, å¯èƒ½è¿˜éœ€è¦pdf, å› æ­¤è®¾ç½®å¯ä»¥è®¾ç½®å¥½backedn</p><p>å‚è€ƒèµ„æ–™: <a href="https://matplotlib.org/stable/api/matplotlib_configuration_api.html?highlight=backend">https://matplotlib.org/stable/api/matplotlib_configuration_api.html</a></p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python3">matplotlib.use(&quot;pdf&quot;);<br></code></pre></td></tr></table></figure><ul><li>interactive backends: GTK3Agg, GTK3Cairo, GTK4Agg, GTK4Cairo, MacOSX, nbAgg, QtAgg, QtCairo, TkAgg, TkCairo, WebAgg, WX, WXAgg, WXCairo, Qt5Agg, Qt5Cairo</li><li>non-interactive backends: agg, cairo, pdf, pgf, ps, svg, template</li></ul><h1 id="2-rcparams"><a class="markdownIt-Anchor" href="#2-rcparams"></a> 2. rcParams</h1><blockquote><p>å¯è®¾ç½®çš„å±æ€§åˆ—è¡¨: <a href="https://matplotlib.org/stable/api/matplotlib_configuration_api.html?highlight=rcparams#matplotlib.rcParams">https://matplotlib.org/stable/api/matplotlib_configuration_api.html?highlight=rcparams#matplotlib.rcParams</a></p></blockquote><h2 id="21-dpi-æ¶‰åŠæ¸…æ™°åº¦"><a class="markdownIt-Anchor" href="#21-dpi-æ¶‰åŠæ¸…æ™°åº¦"></a> 2.1 DPI (æ¶‰åŠæ¸…æ™°åº¦)</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">plt.rcParams[<span class="hljs-string">&#x27;figure.dpi&#x27;</span>] = <span class="hljs-number">200</span><br></code></pre></td></tr></table></figure><h2 id="22-å­—ä½“"><a class="markdownIt-Anchor" href="#22-å­—ä½“"></a> 2.2 å­—ä½“</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">plt.rcParams.update(&#123;<br>    <span class="hljs-string">&quot;font.size&quot;</span>:<span class="hljs-number">20</span>,<br>    <span class="hljs-string">&#x27;font.sans-serif&#x27;</span>: <span class="hljs-string">&quot;simsun&quot;</span>  <span class="hljs-comment"># SimHei</span><br>    &#125;)<br></code></pre></td></tr></table></figure><h3 id="221-ubuntuæ”¯æŒä¸­æ–‡"><a class="markdownIt-Anchor" href="#221-ubuntuæ”¯æŒä¸­æ–‡"></a> 2.2.1 ubuntuæ”¯æŒä¸­æ–‡</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># æŸ¥çœ‹matplotlibé…ç½®æ–‡ä»¶ä½ç½®</span><br><span class="hljs-keyword">import</span> matplotlib<br><span class="hljs-built_in">print</span>(matplotlib.matplotlib_fname())<br><span class="hljs-comment"># å¦‚: /APP/anaconda/anaconda3/lib/python3.6/site-packages/matplotlib/mpl-data/matplotlibrc</span><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># è¿›å…¥å­—ä½“åº“</span><br><span class="hljs-built_in">cd</span> ~/APP/anaconda/anaconda3/lib/python3.6/site-packages/matplotlib/mpl-data/fonts/ttf<br><br><span class="hljs-comment"># æ¸…é™¤ç¼“å­˜</span><br><span class="hljs-built_in">rm</span> ~/.cache/matplotlib<br><br><span class="hljs-comment"># å°†simsun.ttfå¤åˆ¶åˆ°è¯¥ç›®å½•ä¸‹å³å¯</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>ç¼–ç¨‹è¯­è¨€</category>
      
      <category>Python</category>
      
      <category>Matplotlib</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>kernelå’Œrootfsé•œåƒæ„å»º</title>
    <link href="/2022/08/15/kernel%E5%92%8Crootfs%E9%95%9C%E5%83%8F%E6%9E%84%E5%BB%BA/"/>
    <url>/2022/08/15/kernel%E5%92%8Crootfs%E9%95%9C%E5%83%8F%E6%9E%84%E5%BB%BA/</url>
    
    <content type="html"><![CDATA[<h1 id="1-åˆ›å»ºrootfs"><a class="markdownIt-Anchor" href="#1-åˆ›å»ºrootfs"></a> 1. åˆ›å»ºrootfs:</h1><p>åœ¨Linuxä¸Šè‡ªå¸¦<code>mkfs</code>æŒ‡ä»¤, ç”¨äºåˆ›å»ºæ–‡ä»¶ç³»ç»Ÿ.</p><p><img src="https://s1.ax1x.com/2022/08/15/vdcuFA.png" alt="mkfs" /></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># åˆ›å»ºä¸€ä¸ªå®¹é‡ä¸º512MBçš„æ ¹æ–‡ä»¶ç³»ç»Ÿ</span><br>mkfs -t ext4 rootfs.ext4 512M<br></code></pre></td></tr></table></figure><h1 id="2-æ„å»ºvmlinux-elfæ–‡ä»¶-å†…æ ¸ç¼–è¯‘æœ€åŸå§‹çš„æ–‡ä»¶-å¯è¢«rustçš„linux-loaderåŠ è½½"><a class="markdownIt-Anchor" href="#2-æ„å»ºvmlinux-elfæ–‡ä»¶-å†…æ ¸ç¼–è¯‘æœ€åŸå§‹çš„æ–‡ä»¶-å¯è¢«rustçš„linux-loaderåŠ è½½"></a> 2. æ„å»ºvmlinux (ELFæ–‡ä»¶, å†…æ ¸ç¼–è¯‘æœ€åŸå§‹çš„æ–‡ä»¶, å¯è¢«rustçš„<code>linux-loader</code>åŠ è½½)</h1><blockquote><p>å‚è€ƒæ–‡æ¡£: <a href="https://wiki.ubuntu.com/Kernel/BuildYourOwnKernel">https://wiki.ubuntu.com/Kernel/BuildYourOwnKernel</a></p></blockquote><h2 id="21-ä¸‹è½½å†…æ ¸æºç "><a class="markdownIt-Anchor" href="#21-ä¸‹è½½å†…æ ¸æºç "></a> 2.1 ä¸‹è½½å†…æ ¸æºç :</h2><p>æºç ä»“åº“: <a href="https://www.kernel.org/">https://www.kernel.org/</a></p><h2 id="22-å®‰è£…ä¾èµ–"><a class="markdownIt-Anchor" href="#22-å®‰è£…ä¾èµ–"></a> 2.2 å®‰è£…ä¾èµ–:</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo apt-get install libncurses-dev gawk flex bison openssl libssl-dev dkms libelf-dev libudev-dev libpci-dev libiberty-dev autoconf git<br></code></pre></td></tr></table></figure><h2 id="23-é…ç½®å†…æ ¸"><a class="markdownIt-Anchor" href="#23-é…ç½®å†…æ ¸"></a> 2.3 é…ç½®å†…æ ¸</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># optional: å¤åˆ¶æœ¬æœºçš„é…ç½®</span><br><span class="hljs-built_in">cp</span> -v /boot/config-$(<span class="hljs-built_in">uname</span> -r) .config<br><br><span class="hljs-built_in">chmod</span> +x ./scripts/*<br>make menuconfig<br></code></pre></td></tr></table></figure><p>ä»å†…æ ¸æºç æ ¹ç›®å½•çš„makefileä¸­, å¯ä»¥çœ‹åˆ°é»˜è®¤å°±æ˜¯vmlinux, æš‚æ—¶ä¹Ÿä¸éœ€è¦å»è€ƒè™‘vmlinuzçš„å‹ç¼©é—®é¢˜.</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-comment"># The all: target is the default when no target is given on the</span><br><span class="hljs-comment"># command line.</span><br><span class="hljs-comment"># This allow a user to issue only &#x27;make&#x27; to build a kernel including modules</span><br><span class="hljs-comment"># Defaults to vmlinux, but the arch makefile usually adds further targets</span><br><span class="hljs-section">all: vmlinux</span><br></code></pre></td></tr></table></figure><p>æ„å»ºå†…æ ¸</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">make</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>æ“ä½œç³»ç»Ÿ</category>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Rusté”™è¯¯å¤„ç†</title>
    <link href="/2022/08/02/Rust%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/"/>
    <url>/2022/08/02/Rust%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/</url>
    
    <content type="html"><![CDATA[<blockquote><p>è¿™é‡Œä¸å¤è¿°æ–‡æ¡£å’Œæ•™ç¨‹ä¸­æœ‰çš„å†…å®¹, æ¯”å¦‚<code>Result</code>ä¹‹ç±»çš„ç»†èŠ‚, å¯ä»¥è‡ªè¡Œçœ‹æ–‡æ¡£å†…å®¹:</p><ul><li><p><a href="https://learning-rust.github.io/docs/e7.custom_error_types.html">https://learning-rust.github.io/docs/e7.custom_error_types.html</a></p></li><li><p><a href="https://doc.rust-lang.org/book/ch09-00-error-handling.html">https://doc.rust-lang.org/book/ch09-00-error-handling.html</a></p></li></ul><p>å‚è€ƒèµ„æ–™: <a href="https://www.philipdaniels.com/blog/2019/defining-rust-error-types/">https://www.philipdaniels.com/blog/2019/defining-rust-error-types/</a></p></blockquote><h1 id="1-rustä¸­è‡ªå®šä¹‰errorçš„æ–¹å¼"><a class="markdownIt-Anchor" href="#1-rustä¸­è‡ªå®šä¹‰errorçš„æ–¹å¼"></a> 1. Rustä¸­è‡ªå®šä¹‰Errorçš„æ–¹å¼</h1><h2 id="11-å®šä¹‰ä¸€ä¸ªé”™è¯¯ç±»å‹"><a class="markdownIt-Anchor" href="#11-å®šä¹‰ä¸€ä¸ªé”™è¯¯ç±»å‹"></a> 1.1 å®šä¹‰ä¸€ä¸ªé”™è¯¯ç±»å‹:</h2><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-meta">#[derive(Debug)]</span><br><span class="hljs-keyword">pub</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">MyErorType</span> &#123;<br>    <span class="hljs-comment">// Errors from external libraries..</span><br>    <span class="hljs-title function_ invoke__">Io</span>(io::Error),<br>    <span class="hljs-title function_ invoke__">Git</span>(git2::Error),<br>    <span class="hljs-comment">// Errors raised by us...</span><br>    <span class="hljs-title function_ invoke__">Regular</span>(ErrorKind),<br>    <span class="hljs-title function_ invoke__">Custom</span>(<span class="hljs-type">String</span>)<br>&#125;<br><br><span class="hljs-meta">#[derive(Clone, Copy, Debug, Eq, Hash, Ord, PartialEq, PartialOrd)]</span><br><span class="hljs-keyword">pub</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">ErrorKind</span> &#123;<br>    NotFound,<br>    NotAuthorized,<br>    <span class="hljs-comment">// ...</span><br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">ErrorKind</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">as_str</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-type">str</span> &#123;<br>        <span class="hljs-keyword">match</span> *<span class="hljs-keyword">self</span> &#123;<br>            ErrorKind::NotFound =&gt; <span class="hljs-string">&quot;not found&quot;</span>,<br>            ErrorKind::NotAuthorized =&gt; <span class="hljs-string">&quot;not authorized&quot;</span><br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="12-å®ç°errorå’Œdisplayè¿™ä¸¤ä¸ªtrait"><a class="markdownIt-Anchor" href="#12-å®ç°errorå’Œdisplayè¿™ä¸¤ä¸ªtrait"></a> 1.2 å®ç°<code>Error</code>å’Œ<code>Display</code>è¿™ä¸¤ä¸ªtrait</h2><blockquote><p><code>Error</code>åªå…è®¸è¿”å›é™æ€å­—ç¬¦ä¸²å¸¸é‡</p></blockquote><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Error</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">MyErrorType</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">description</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-type">str</span> &#123;<br>        <span class="hljs-keyword">match</span> *<span class="hljs-keyword">self</span> &#123;<br>            MyErrorType::<span class="hljs-title function_ invoke__">Io</span>(<span class="hljs-keyword">ref</span> err) =&gt; err.<span class="hljs-title function_ invoke__">description</span>(),<br>            MyErrorType::<span class="hljs-title function_ invoke__">Git</span>(<span class="hljs-keyword">ref</span> err) =&gt; err.<span class="hljs-title function_ invoke__">description</span>(),<br>            MyErrorType::<span class="hljs-title function_ invoke__">Regular</span>(<span class="hljs-keyword">ref</span> err) =&gt; err.<span class="hljs-title function_ invoke__">as_str</span>(),<br>            MyErrorType::<span class="hljs-title function_ invoke__">Custom</span>(<span class="hljs-keyword">ref</span> err) =&gt; err,<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p><code>fmt::Display</code>æ›´ä¸ºçµæ´»ä¸€ç‚¹</p></blockquote><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">impl</span> <span class="hljs-title class_">fmt</span>::Display <span class="hljs-keyword">for</span> <span class="hljs-title class_">MyErrorType</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">fmt</span>(&amp;<span class="hljs-keyword">self</span>, f: &amp;<span class="hljs-keyword">mut</span> fmt::Formatter) <span class="hljs-punctuation">-&gt;</span> fmt::<span class="hljs-type">Result</span> &#123;<br>        <span class="hljs-keyword">match</span> *<span class="hljs-keyword">self</span> &#123;<br>            MyErrorType::<span class="hljs-title function_ invoke__">Io</span>(<span class="hljs-keyword">ref</span> err) =&gt; err.<span class="hljs-title function_ invoke__">fmt</span>(f),<br>            MyErrorType::<span class="hljs-title function_ invoke__">Git</span>(<span class="hljs-keyword">ref</span> err) =&gt; err.<span class="hljs-title function_ invoke__">fmt</span>(f),<br>            MyErrorType::<span class="hljs-title function_ invoke__">Regular</span>(<span class="hljs-keyword">ref</span> err) =&gt; <span class="hljs-built_in">write!</span>(f, <span class="hljs-string">&quot;A regular error occurred &#123;:?&#125;&quot;</span>, err),<br>            MyErrorType::<span class="hljs-title function_ invoke__">Custom</span>(<span class="hljs-keyword">ref</span> err) =&gt; <span class="hljs-built_in">write!</span>(f, <span class="hljs-string">&quot;A custom error occurred &#123;:?&#125;&quot;</span>, err),<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="13-ä¸ºexternal-error-typeå®ç°from"><a class="markdownIt-Anchor" href="#13-ä¸ºexternal-error-typeå®ç°from"></a> 1.3 ä¸ºexternal error typeå®ç°<code>From</code></h2><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">impl</span> <span class="hljs-title class_">From</span>&lt;io::Error&gt; <span class="hljs-keyword">for</span> <span class="hljs-title class_">MyErrorType</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">from</span>(err: io::Error) <span class="hljs-punctuation">-&gt;</span> MyErrorType &#123;<br>        MyErrorType::<span class="hljs-title function_ invoke__">Io</span>(err)<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">From</span>&lt;io::Error&gt; <span class="hljs-keyword">for</span> <span class="hljs-title class_">MyErrorType</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">from</span>(err: git2::Error) <span class="hljs-punctuation">-&gt;</span> MyErrorType &#123;<br>        MyErrorType::<span class="hljs-title function_ invoke__">Git</span>(err)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>ä½¿ç”¨èµ·æ¥å°±å¯ä»¥è¿™æ ·, åœ¨æ•è·å¼‚å¸¸çš„ä»£ç ç‰‡æ®µä¸­:</p></blockquote><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs rust">MyErrorType::<span class="hljs-title function_ invoke__">From</span>(err)<br></code></pre></td></tr></table></figure><h2 id="14-å¯é€‰-åˆ›å»ºä¸€ä¸ªresultåˆ«å"><a class="markdownIt-Anchor" href="#14-å¯é€‰-åˆ›å»ºä¸€ä¸ªresultåˆ«å"></a> 1.4 å¯é€‰: åˆ›å»ºä¸€ä¸ªResultåˆ«å</h2><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">pub</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">Result</span>&lt;T&gt; = std::result::<span class="hljs-type">Result</span>&lt;T, MyErrorType&gt;;<br></code></pre></td></tr></table></figure><h2 id="15-ä½¿ç”¨è‡ªå®šä¹‰çš„ç±»å‹"><a class="markdownIt-Anchor" href="#15-ä½¿ç”¨è‡ªå®šä¹‰çš„ç±»å‹"></a> 1.5 ä½¿ç”¨è‡ªå®šä¹‰çš„ç±»å‹:</h2><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">some_func</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-type">usize</span>&gt; &#123;<br>    <span class="hljs-comment">// possible: std::io::Error</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">_f</span> = std::fs::File::<span class="hljs-title function_ invoke__">create</span>(<span class="hljs-string">&quot;aa&quot;</span>)?;<br>    <span class="hljs-comment">// possible: git2::Error</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">_g</span> = Respository::<span class="hljs-title function_ invoke__">init</span>(<span class="hljs-string">&quot;/path/to/repo&quot;</span>)?;<br><br>    <span class="hljs-comment">// return a error</span><br>    <span class="hljs-title function_ invoke__">Err</span>(MyErrorType::<span class="hljs-title function_ invoke__">Regular</span>(ErrorKind::NotAuthorized));<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="2-rust-ä¸­ä½¿ç”¨-thiserror-å’Œ-anyhow-ç®€æ´-å¥½ç”¨"><a class="markdownIt-Anchor" href="#2-rust-ä¸­ä½¿ç”¨-thiserror-å’Œ-anyhow-ç®€æ´-å¥½ç”¨"></a> 2. Rust ä¸­ä½¿ç”¨ <code>thiserror</code> å’Œ <code>anyhow</code> (ç®€æ´, å¥½ç”¨)</h1><blockquote><p><code>thiserror</code>æ–‡æ¡£: <a href="https://docs.rs/thiserror/latest/thiserror/">https://docs.rs/thiserror/latest/thiserror/</a></p><p><code>anyhow</code>æ–‡æ¡£: <a href="https://github.com/dtolnay/anyhow">https://github.com/dtolnay/anyhow</a></p><p>è¿™ä¸¤ä¸ªåº“ä¸»è¦è¿˜æ˜¯ä¸ºäº†æŸäº›åº“é‡Œå¤„ç†æ•°é‡ä¼—å¤šçš„å¼‚å¸¸ç±»å‹, å¯ä»¥è§£å†³å…¼å®¹, ä½†è¿˜éœ€è¦é¢å¤–å¤„ç†</p></blockquote><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> anyhow::<span class="hljs-type">Result</span><br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">get</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;()&gt; &#123;  <span class="hljs-comment">// ~~æ¥æ”¶ä»»æ„ç±»å‹å¼‚å¸¸~~</span><br><br>&#125;<br><br></code></pre></td></tr></table></figure><h1 id="3-é”™è¯¯ç±»å‹æ˜ å°„"><a class="markdownIt-Anchor" href="#3-é”™è¯¯ç±»å‹æ˜ å°„"></a> 3. é”™è¯¯ç±»å‹æ˜ å°„</h1><blockquote><p>å‰é¢æ‰€ä½œçš„åŠªåŠ›åªæ˜¯ä¸ºäº†å…¼å®¹, ä½†æ˜¯rustå¹¶ä¸ä¼šä¸»åŠ¨å»åš, è½¬æ¢å·¥ä½œè¿˜æ˜¯å¾—è‡ªå·±æ¥</p></blockquote><h2 id="31-map_err"><a class="markdownIt-Anchor" href="#31-map_err"></a> 3.1 <code>map_err</code></h2><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::env;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">double_arg</span>(<span class="hljs-keyword">mut</span> argv: env::Args) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-type">i32</span>, <span class="hljs-type">String</span>&gt; &#123;<br>    argv.<span class="hljs-title function_ invoke__">nth</span>(<span class="hljs-number">1</span>)<br>        .<span class="hljs-title function_ invoke__">ok_or</span>(<span class="hljs-string">&quot;Please give at least one argument&quot;</span>.<span class="hljs-title function_ invoke__">to_owned</span>())<br>        .<span class="hljs-title function_ invoke__">and_then</span>(|arg| arg.parse::&lt;<span class="hljs-type">i32</span>&gt;().<span class="hljs-title function_ invoke__">map_err</span>(|err| err.<span class="hljs-title function_ invoke__">to_string</span>()))<br>        .<span class="hljs-title function_ invoke__">map</span>(|n| <span class="hljs-number">2</span> * n)<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">match</span> <span class="hljs-title function_ invoke__">double_arg</span>(env::<span class="hljs-title function_ invoke__">args</span>()) &#123;<br>        <span class="hljs-title function_ invoke__">Ok</span>(n) =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, n),<br>        <span class="hljs-title function_ invoke__">Err</span>(err) =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Error: &#123;&#125;&quot;</span>, err),<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// è¿™é‡Œæ˜¯ç”¨æ„é€ å‡½æ•°åšlambdaå‡½æ•°äº†</span><br>cmdline.<span class="hljs-title function_ invoke__">insert_str</span>(boot_args)<br>    .<span class="hljs-title function_ invoke__">map_err</span>(BootSourceConfigError::InvalidKernelCommandLine)<br>    .<span class="hljs-title function_ invoke__">map_err</span>(VmmActionError::BootSource)<br>    .<span class="hljs-title function_ invoke__">map_err</span>(CLIError::BootSource)?;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>ç¼–ç¨‹è¯­è¨€</category>
      
      <category>Rust</category>
      
      <category>åŸºç¡€</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>LaTexåŸºç¡€-Table</title>
    <link href="/2022/08/02/LaTex%E5%9F%BA%E7%A1%80-Table/"/>
    <url>/2022/08/02/LaTex%E5%9F%BA%E7%A1%80-Table/</url>
    
    <content type="html"><![CDATA[<figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\begin</span>&#123;tabular&#125;[pos]&#123;cols&#125;<br><br>  table content<br><br><span class="hljs-keyword">\end</span>&#123;tabular&#125;<br></code></pre></td></tr></table></figure><p>where options can be:</p><ul><li><code>pos</code>Â : Vertical position. It can assume the following values:</li></ul><table><thead><tr><th><code>t</code></th><th>the line at the top is aligned with the text baseline (å¯ä»¥ç†è§£ä¸ºä¸€æ¨ªæ–‡å­—çš„åº•éƒ¨åŸºçº¿, æ‰€æœ‰æ–‡å­—åœ¨è¿™ä¸ªåŸºçº¿ä¸Šæ’å¸ƒ)</th></tr></thead><tbody><tr><td><code>b</code></td><td>the line at the bottom is aligned with the text baseline</td></tr><tr><td><code>c</code> or none</td><td>the table is centred to the text baseline</td></tr></tbody></table><ul><li><code>cols</code>Â : Defines the alignment and the borders of each column. It can have the following values:</li></ul><table><thead><tr><th><code>l</code></th><th>left-justified column</th></tr></thead><tbody><tr><td><code>c</code></td><td>centred column</td></tr><tr><td><code>r</code></td><td>right-justified column</td></tr><tr><td><code>p&#123;'width'&#125;</code></td><td>paragraph column with text vertically aligned at the top</td></tr><tr><td><code>m&#123;'width'&#125;</code></td><td>paragraph column with text vertically aligned in the middle (requires <code>array</code><br /> package)</td></tr><tr><td><code>b&#123;'width'&#125;</code></td><td>paragraph column with text vertically aligned at the bottom (requires <code>array</code><br /> package)</td></tr><tr><td><code>&amp;#124;</code></td><td>vertical line</td></tr><tr><td><code>&amp;#124;&amp;#124;</code></td><td>double vertical line</td></tr><tr><td><code>*&#123;num&#125;&#123;form&#125;</code></td><td>the format form is repeated <em>num</em> times; for example <code>*&#123;3&#125;&#123;&amp;#124;l&#125;&amp;#124;</code><br /> is equal to <code>&amp;#124;l&amp;#124;l&amp;#124;l&amp;#124;</code></td></tr></tbody></table><p>To separate between cells and introducing new lines use the following commands:</p><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td><code>&amp;</code></td><td>column separator</td></tr><tr><td><code>\\\\</code></td><td>start new row (additional space may be specified after <code>\\</code><br /> using square brackets, such as <code>\\[6pt]</code><br />)</td></tr><tr><td><code>\\hline</code></td><td>horizontal line between rows</td></tr><tr><td><code>\\newline</code></td><td>start a new line within a cell (in a paragraph column)</td></tr><tr><td><code>\\cline&#123;i-j&#125;</code></td><td>partial horizontal line beginning in column <em>i</em> and ending in column <em>j</em></td></tr></tbody></table><h1 id="1-ç”¨tableåˆ¶ä½œå°é¢"><a class="markdownIt-Anchor" href="#1-ç”¨tableåˆ¶ä½œå°é¢"></a> 1. ç”¨tableåˆ¶ä½œå°é¢:</h1><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-comment">% ç”¨äºåˆ¶ä½œæ›´å¤æ‚çš„å°é¢</span><br><span class="hljs-keyword">\title</span>&#123;<span class="hljs-keyword">\makebox</span>&#123;<br>    <span class="hljs-keyword">\begin</span>&#123;tabular&#125;&#123;c&#125;<br>        <span class="hljs-keyword">\includegraphics</span>[width=<span class="hljs-keyword">\textwidth</span>]&#123;img/nankai.jpg&#125; <span class="hljs-keyword">\\</span><br>         <span class="hljs-keyword">\textbf</span>&#123;è¯¾ç¨‹æŠ¥å‘Š&#125; <span class="hljs-keyword">\\</span><br>         xxxxxx<br>    <span class="hljs-keyword">\end</span>&#123;tabular&#125;<br>    &#125;<br>&#125;<br><span class="hljs-keyword">\author</span>&#123;<span class="hljs-keyword">\makebox</span>&#123;<br>    <span class="hljs-keyword">\begin</span>&#123;tabular&#125;&#123;cc&#125;<br>        å§“åï¼š <span class="hljs-built_in">&amp;</span> xxxx  <span class="hljs-keyword">\\</span><br>        å­¦å·ï¼š <span class="hljs-built_in">&amp;</span> xxxx<br>    <span class="hljs-keyword">\end</span>&#123;tabular&#125;<br>&#125;&#125;<br><span class="hljs-keyword">\date</span>&#123;<span class="hljs-keyword">\today</span>&#125;<br></code></pre></td></tr></table></figure><h1 id="2-å°†è¡¨æ ¼è¿›è¡Œæ•´ä½“ç¼©æ”¾å¹¶ä¸æ¨è-é™¤éè¿«ä¸å¾—å·²"><a class="markdownIt-Anchor" href="#2-å°†è¡¨æ ¼è¿›è¡Œæ•´ä½“ç¼©æ”¾å¹¶ä¸æ¨è-é™¤éè¿«ä¸å¾—å·²"></a> 2. å°†è¡¨æ ¼è¿›è¡Œæ•´ä½“ç¼©æ”¾(å¹¶ä¸æ¨è, é™¤éè¿«ä¸å¾—å·²)</h1><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\resizebox</span>&#123;<span class="hljs-keyword">\textwidth</span>&#125;&#123;15mm&#125;&#123;<br>  <span class="hljs-keyword">\begin</span>&#123;tabular&#125;&#123;|c|c|&#125;<br>    <span class="hljs-keyword">\hline</span><br>    <span class="hljs-keyword">\ </span> <span class="hljs-built_in">&amp;</span> å¹³å‡è¿è¡Œæ—¶é—´(å•ä½: s) <span class="hljs-keyword">\\</span><br>    <span class="hljs-keyword">\hline</span><br>    è®­ç»ƒé˜¶æ®µ <span class="hljs-built_in">&amp;</span> 2333.5593 <span class="hljs-keyword">\\</span><br>    æµ‹è¯•é˜¶æ®µ <span class="hljs-built_in">&amp;</span> <span class="hljs-keyword">\ </span> <span class="hljs-keyword">\\</span><br>    <span class="hljs-keyword">\hline</span><br>  <span class="hljs-keyword">\end</span>&#123;tabular&#125;<br>&#125;  <span class="hljs-comment">% åªèƒ½åŒ…å«tabular ä¸èƒ½åŒ…å«æ–‡æœ¬ å¦‚ \caption</span><br></code></pre></td></tr></table></figure><h1 id="3-æ•´ä½“è°ƒæ•´æ¯ä¸€åˆ—å®½åº¦"><a class="markdownIt-Anchor" href="#3-æ•´ä½“è°ƒæ•´æ¯ä¸€åˆ—å®½åº¦"></a> 3. æ•´ä½“è°ƒæ•´æ¯ä¸€åˆ—å®½åº¦</h1><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\setlength</span>&#123;<span class="hljs-keyword">\tabcolsep</span>&#125;&#123;7mm&#125;&#123;<br>  <span class="hljs-keyword">\begin</span>&#123;tabular&#125;&#123;cccccc&#125; <br>    <span class="hljs-keyword">\toprule</span><br>    Models  <span class="hljs-built_in">&amp;</span>  <span class="hljs-built_in">$</span><span class="hljs-keyword">\hat</span> c<span class="hljs-built_in">$</span>  <span class="hljs-built_in">&amp;</span>  <span class="hljs-built_in">$</span><span class="hljs-keyword">\hat</span><span class="hljs-keyword">\alpha</span><span class="hljs-built_in">$</span>  <span class="hljs-built_in">&amp;</span>  <span class="hljs-built_in">$</span><span class="hljs-keyword">\hat</span><span class="hljs-keyword">\beta</span><span class="hljs-built_in">_</span>0<span class="hljs-built_in">$</span>  <span class="hljs-built_in">&amp;</span>  <span class="hljs-built_in">$</span><span class="hljs-keyword">\hat</span><span class="hljs-keyword">\beta</span><span class="hljs-built_in">_</span>1<span class="hljs-built_in">$</span>  <span class="hljs-built_in">&amp;</span>  <span class="hljs-built_in">$</span><span class="hljs-keyword">\hat</span><span class="hljs-keyword">\beta</span><span class="hljs-built_in">_</span>2<span class="hljs-built_in">$</span>  <span class="hljs-keyword">\\</span> <span class="hljs-keyword">\hline</span><br>    model  <span class="hljs-built_in">&amp;</span> 30.6302  <span class="hljs-built_in">&amp;</span> 0.4127  <span class="hljs-built_in">&amp;</span> 9.4257  <span class="hljs-built_in">&amp;</span> - <span class="hljs-built_in">&amp;</span> - <span class="hljs-keyword">\\</span><br>    model  <span class="hljs-built_in">&amp;</span> 12.4089  <span class="hljs-built_in">&amp;</span> 0.5169  <span class="hljs-built_in">&amp;</span> 18.6986  <span class="hljs-built_in">&amp;</span> -6.6157  <span class="hljs-built_in">&amp;</span> - <span class="hljs-keyword">\\</span><br>    model  <span class="hljs-built_in">&amp;</span> 14.8586  <span class="hljs-built_in">&amp;</span> 0.4991  <span class="hljs-built_in">&amp;</span> 19.5421  <span class="hljs-built_in">&amp;</span> -7.0717  <span class="hljs-built_in">&amp;</span> 0.2183  <span class="hljs-keyword">\\</span><br>    model  <span class="hljs-built_in">&amp;</span> 3.06302  <span class="hljs-built_in">&amp;</span> 0.41266  <span class="hljs-built_in">&amp;</span> 0.11725  <span class="hljs-built_in">&amp;</span> - <span class="hljs-built_in">&amp;</span> - <span class="hljs-keyword">\\</span><br>    model  <span class="hljs-built_in">&amp;</span> 1.24089  <span class="hljs-built_in">&amp;</span> 0.51691  <span class="hljs-built_in">&amp;</span> 0.83605  <span class="hljs-built_in">&amp;</span> -0.66157  <span class="hljs-built_in">&amp;</span> - <span class="hljs-keyword">\\</span><br>    model  <span class="hljs-built_in">&amp;</span> 1.48586  <span class="hljs-built_in">&amp;</span> 0.49906  <span class="hljs-built_in">&amp;</span> 0.95609  <span class="hljs-built_in">&amp;</span> -0.70717  <span class="hljs-built_in">&amp;</span> 0.02183  <span class="hljs-keyword">\\</span><br>    <span class="hljs-keyword">\bottomrule</span><br>    <span class="hljs-keyword">\caption</span>&#123;å“ˆå“ˆå“ˆ&#125;<br>  <span class="hljs-keyword">\end</span>&#123;tabular&#125;<br>&#125;  <span class="hljs-comment">% è¿™ä¸ªå¯ä»¥åŒ…å«å¾ˆå¤šå…ƒç´ </span><br></code></pre></td></tr></table></figure><h1 id="4-è®¾ç½®åˆ—é«˜"><a class="markdownIt-Anchor" href="#4-è®¾ç½®åˆ—é«˜"></a> 4.  è®¾ç½®åˆ—é«˜</h1><blockquote><p><code>\rule&#123;çº¿çš„å®½åº¦&#125;&#123;çº¿æ’‘èµ·çš„é«˜åº¦&#125;</code></p><p>çº¿è®¾ç½®ä¸º0ptå®½åº¦, å°±å¯ä»¥èµ·åˆ°æ’‘èµ·å•å…ƒæ ¼çš„ä½œç”¨äº†</p></blockquote><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\begin</span>&#123;tabular&#125;&#123;|c|c|&#125;<br>  <span class="hljs-keyword">\hline</span><br>  <span class="hljs-keyword">\ </span> <span class="hljs-built_in">&amp;</span> å¹³å‡è¿è¡Œæ—¶é—´(å•ä½: s) <span class="hljs-keyword">\\</span><br>  <span class="hljs-keyword">\hline</span><br>  <span class="hljs-keyword">\rule</span>&#123;0pt&#125;&#123;8pt&#125;è®­ç»ƒé˜¶æ®µ <span class="hljs-built_in">&amp;</span> 2333.5593 <span class="hljs-keyword">\\</span><br>  æµ‹è¯•é˜¶æ®µ <span class="hljs-built_in">&amp;</span> <span class="hljs-keyword">\ </span> <span class="hljs-keyword">\\</span><br>  <span class="hljs-keyword">\hline</span><br><span class="hljs-keyword">\end</span>&#123;tabular&#125;<br></code></pre></td></tr></table></figure><h1 id="5-ä¸‰çº¿è¡¨"><a class="markdownIt-Anchor" href="#5-ä¸‰çº¿è¡¨"></a> 5. ä¸‰çº¿è¡¨</h1><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\documentclass</span>&#123;article&#125; <br><span class="hljs-keyword">\usepackage</span>&#123;float&#125;<span class="hljs-comment">%æä¾›floatæµ®åŠ¨ç¯å¢ƒ</span><br><span class="hljs-keyword">\usepackage</span>&#123;booktabs&#125;<span class="hljs-comment">%æä¾›å‘½ä»¤\topruleã€\midruleã€\bottomrule</span><br> <br><span class="hljs-keyword">\begin</span>&#123;document&#125;<br> <br>  <span class="hljs-comment">%ç»å…¸ä¸‰çº¿è¡¨</span><br>  <span class="hljs-keyword">\begin</span>&#123;table&#125;[H]<br>    <span class="hljs-keyword">\caption</span>&#123;<span class="hljs-keyword">\textbf</span>&#123;Example 1&#125;&#125;<span class="hljs-comment">%æ ‡é¢˜</span><br>    <span class="hljs-keyword">\centering</span><span class="hljs-comment">%æŠŠè¡¨å±…ä¸­</span><br>    <span class="hljs-keyword">\begin</span>&#123;tabular&#125;&#123;c&#123;80pt&#125;c&#123;80pt&#125;c&#123;80pt&#125;c&#123;80pt&#125;&#125;<span class="hljs-comment">%å››ä¸ªcä»£è¡¨è¯¥è¡¨ä¸€å…±å››åˆ—ï¼Œå†…å®¹å…¨éƒ¨å±…ä¸­</span><br>    <span class="hljs-keyword">\toprule</span><span class="hljs-comment">%ç¬¬ä¸€é“æ¨ªçº¿</span><br>    Item 1<span class="hljs-built_in">&amp;</span>Item 2<span class="hljs-built_in">&amp;</span>Item 3<span class="hljs-built_in">&amp;</span>Item 4 <span class="hljs-keyword">\\</span><br>    <span class="hljs-keyword">\midrule</span><span class="hljs-comment">%ç¬¬äºŒé“æ¨ªçº¿ </span><br>    Data1<span class="hljs-built_in">&amp;</span>Data2<span class="hljs-built_in">&amp;</span>Data3<span class="hljs-built_in">&amp;</span>Data4 <span class="hljs-keyword">\\</span><br>    Data5<span class="hljs-built_in">&amp;</span>Data6<span class="hljs-built_in">&amp;</span>Data7<span class="hljs-built_in">&amp;</span>Data8 <span class="hljs-keyword">\\</span><br>    <span class="hljs-keyword">\bottomrule</span><span class="hljs-comment">%ç¬¬ä¸‰é“æ¨ªçº¿</span><br>    <span class="hljs-keyword">\end</span>&#123;tabular&#125;<br>  <span class="hljs-keyword">\end</span>&#123;table&#125;<br> <br><span class="hljs-keyword">\end</span>&#123;document&#125;<br></code></pre></td></tr></table></figure><h1 id="6-å¤æ‚è¡¨æ ¼"><a class="markdownIt-Anchor" href="#6-å¤æ‚è¡¨æ ¼"></a> 6. å¤æ‚è¡¨æ ¼</h1><blockquote><p>å¤šåˆ—è¡¨æ ¼ä¸­ç”¨<code>\cline</code> æ§åˆ¶å“ªå‡ åˆ—æœ‰æ¨ªçº¿: <code>\cline&#123;3-5&#125;</code> è¡¨ç¤ºç¬¬3åˆ—å’Œç¬¬5åˆ—æœ‰æ¨ªçº¿.</p></blockquote><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-comment">% å¦‚æœè¦é—´éš”ä¸€åˆ—åŠ æ¨ªçº¿åªè¦ä¸¤ä¸ªæŒ‡ä»¤å°±è¡Œ</span><br><span class="hljs-keyword">\begin</span>&#123;tabular&#125;&#123;llrr&#125; <br>  a <span class="hljs-built_in">&amp;</span>b <span class="hljs-built_in">&amp;</span>c <span class="hljs-built_in">&amp;</span>d <span class="hljs-keyword">\\</span> <span class="hljs-keyword">\cline</span>&#123;1-1&#125; <span class="hljs-keyword">\cline</span>&#123;3-4&#125; <br>  e <span class="hljs-built_in">&amp;</span>f <span class="hljs-built_in">&amp;</span>g <span class="hljs-built_in">&amp;</span>h <br><span class="hljs-keyword">\end</span>&#123;tabular&#125;<br></code></pre></td></tr></table></figure><blockquote><p>å¦‚æœç”¨äº†<code>booktabs</code>, æƒ³è¦<code>\cline</code>ç±»ä¼¼çš„å¤šåˆ—æ¨ªçº¿, åˆ™å¯ä»¥ä½¿ç”¨<code>\cmidrule</code>, è¿™ä¸ªæ¯”<code>\midrule</code>æ›´ç»†</p></blockquote><p><img src="https://img1.imgtp.com/2022/08/02/VIxH5MFg.png" alt="è§£é‡Š" /></p><p><img src="https://img1.imgtp.com/2022/08/02/L8Ict2Bp.png" alt="è§£é‡Š2" /></p><hr /><blockquote><p>\usepackage{multirow}</p></blockquote><blockquote><p><code>\multirow&#123;nrows&#125;[bigstruct]&#123;width&#125;[fixup]&#123;text&#125;</code></p><ul><li>nrows: å ç”¨çš„è¡Œæ•°</li><li>bigstructs: å¯é€‰, åœ¨ä½¿ç”¨äº†bigstructå®åŒ…æ—¶ç”¨</li><li>width: è¯¥æ å®½åº¦, å¦‚æœä¸º*åˆ™ç”±LaTexè‡ªè¡Œå†³å®š</li><li>fixup: å¯é€‰é¡¹, è°ƒæ•´æ–‡æœ¬çš„å‚ç›´ä½ç½®</li><li>text: æ‰€è¦æ’ç‰ˆçš„æ–‡æœ¬, å¯ä»¥ç”¨ \ å¼ºåˆ¶æ¢è¡Œ</li></ul></blockquote><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\begin</span>&#123;tabular&#125;&#123;|c|c|c|c|c|&#125;<br>  <span class="hljs-keyword">\hline</span><br>  <span class="hljs-comment">%è·¨è¡Œï¼ˆå°†ä¸¤è¡Œåˆå¹¶ä¸ºä¸€è¡Œï¼‰ ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡æ˜è·¨å‡ è¡Œ è®°å¾—ä¸‹ä¸€è¡Œå¯¹åº”ä½ç½®ç©ºå‡ºæ¥ ä¸ç„¶ä¼šé‡å , ç¬¬äºŒä¸ªå‚æ•°æ˜¯å®½åº¦</span><br>  <span class="hljs-keyword">\multirow</span>&#123;2&#125;&#123;*&#125;&#123;1&#125; <span class="hljs-built_in">&amp;</span> 11 <span class="hljs-built_in">&amp;</span> 111 <span class="hljs-built_in">&amp;</span> 1111 <span class="hljs-built_in">&amp;</span> 11111 <span class="hljs-keyword">\\</span><br>  <span class="hljs-keyword">\cline</span>&#123;2-5&#125;<br>   <span class="hljs-built_in">&amp;</span> 22 <span class="hljs-built_in">&amp;</span> 222 <span class="hljs-built_in">&amp;</span> 2222 <span class="hljs-built_in">&amp;</span> 22222 <span class="hljs-keyword">\\</span><br>  <span class="hljs-keyword">\hline</span><br>  3 <span class="hljs-built_in">&amp;</span> 33 <span class="hljs-built_in">&amp;</span> 333 <span class="hljs-built_in">&amp;</span> 3333 <span class="hljs-built_in">&amp;</span> 33333 <span class="hljs-keyword">\\</span><br>  <span class="hljs-keyword">\hline</span><br><span class="hljs-keyword">\end</span>&#123;tabular&#125;<br></code></pre></td></tr></table></figure><blockquote><p><code>\multicolumn&#123;ncols&#125;&#123;æŒ‡æ˜å¯¹é½æ–¹å¼ä»¥åŠæ–¹æ ¼çº¿&#125;&#123;å•å…ƒæ ¼å†…å®¹&#125;</code></p></blockquote><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\begin</span>&#123;tabular&#125;&#123;|c|c|c|c|c|&#125;<br>  <span class="hljs-keyword">\hline</span><br>  <span class="hljs-comment">% after \\: \hline or \cline&#123;col1-col2&#125; \cline&#123;col3-col4&#125; ...</span><br>  <span class="hljs-comment">%è·¨åˆ—ï¼ˆå°†ä¸¤åˆ—åˆå¹¶ä¸ºä¸€åˆ—ï¼‰ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡æ˜è·¨å‡ åˆ—  ç¬¬äºŒä¸ªå‚æ•°æŒ‡æ˜å†…å®¹å±…ä¸­å¹¶åœ¨å·¦å³ä¸¤è¾¹ç”»ä¸Šç›´çº¿ æœ€åä¸€ä¸ªå‚æ•°æ˜¯è¡¨æ ¼å†…å®¹</span><br>  <span class="hljs-keyword">\multicolumn</span>&#123;2&#125;&#123;|c|&#125;&#123;1&#125;  <span class="hljs-built_in">&amp;</span> 111 <span class="hljs-built_in">&amp;</span> 1111 <span class="hljs-built_in">&amp;</span> 11111 <span class="hljs-keyword">\\</span><br>  <span class="hljs-keyword">\hline</span><br>   2 <span class="hljs-built_in">&amp;</span> 22 <span class="hljs-built_in">&amp;</span> 222 <span class="hljs-built_in">&amp;</span> 2222 <span class="hljs-built_in">&amp;</span> 22222 <span class="hljs-keyword">\\</span><br>  <span class="hljs-keyword">\hline</span><br>  3 <span class="hljs-built_in">&amp;</span> 33 <span class="hljs-built_in">&amp;</span> 333 <span class="hljs-built_in">&amp;</span> 3333 <span class="hljs-built_in">&amp;</span> 33333 <span class="hljs-keyword">\\</span><br>  <span class="hljs-keyword">\hline</span><br><span class="hljs-keyword">\end</span>&#123;tabular&#125;<br></code></pre></td></tr></table></figure><h1 id="7-è¡¨æ ¼çš„åˆ—æ–¹å‘ä¸Šåˆ†æ•£å¯¹é½"><a class="markdownIt-Anchor" href="#7-è¡¨æ ¼çš„åˆ—æ–¹å‘ä¸Šåˆ†æ•£å¯¹é½"></a> 7. è¡¨æ ¼çš„åˆ—æ–¹å‘ä¸Šåˆ†æ•£å¯¹é½</h1><blockquote><p><code>\makebox[width][position]&#123;text&#125;</code></p><p><code>\makebox[4em][s]&#123;content&#125;</code></p><ul><li>l - left</li><li>r - right</li><li>s - interword space adjusted so text fills box exactly</li></ul></blockquote><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\begin</span>&#123;tabular&#125;&#123;rl&#125;<br>  <span class="hljs-keyword">\makebox</span>[4em][s]&#123;è®ºæ–‡é¢˜ç›®&#125;ï¼š        <span class="hljs-built_in">&amp;</span> <span class="hljs-keyword">\@title</span><span class="hljs-keyword">\\</span><br>  <span class="hljs-keyword">\makebox</span>[4em][s]&#123;ä¸“<span class="hljs-keyword">\hspace</span>&#123;<span class="hljs-keyword">\fill</span>&#125;ä¸š&#125;ï¼š<span class="hljs-built_in">&amp;</span> <span class="hljs-keyword">\@major</span><span class="hljs-keyword">\\</span><br>  <span class="hljs-keyword">\makebox</span>[4em][s]&#123;åš<span class="hljs-keyword">\hspace</span>&#123;<span class="hljs-keyword">\fill</span>&#125;å£«<span class="hljs-keyword">\hspace</span>&#123;<span class="hljs-keyword">\fill</span>&#125;ç”Ÿ&#125;ï¼š      <span class="hljs-built_in">&amp;</span> <span class="hljs-keyword">\@author</span><span class="hljs-keyword">\\</span><br>  <span class="hljs-keyword">\makebox</span>[4em][s]&#123;æŒ‡å¯¼æ•™å¸ˆ&#125;ï¼š        <span class="hljs-built_in">&amp;</span> <span class="hljs-keyword">\@advisorname</span> <span class="hljs-keyword">\,</span><span class="hljs-keyword">\,</span> <span class="hljs-keyword">\@advisortitle</span><br><span class="hljs-keyword">\end</span>&#123;tabular&#125;<br></code></pre></td></tr></table></figure><ol start="7"><li>è¡¨æ ¼å†…æ¢è¡Œ</li></ol><blockquote><p><code>\makecell</code></p></blockquote><p><img src="https://img1.imgtp.com/2022/08/02/LNe2NvOn.png" alt="è§£é‡Š" /></p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\usepackage</span>&#123;makecell&#125;<br><br><span class="hljs-comment">% ...</span><br><br><span class="hljs-keyword">\begin</span>&#123;tabular&#125;&#123;cc&#125;<br>  <span class="hljs-keyword">\makecell</span>[l]&#123;a <span class="hljs-keyword">\\</span> b <span class="hljs-keyword">\\</span> c &#125; <span class="hljs-built_in">&amp;</span> 1 <span class="hljs-keyword">\\</span>  <span class="hljs-comment">% ç”¨äºå•å…ƒæ ¼å†…æ¢è¡Œ</span><br><span class="hljs-keyword">\end</span>&#123;tabular&#125;<br></code></pre></td></tr></table></figure><p>é™¤äº†ä½¿ç”¨<code>\makecell</code>å¤–, è¿˜å¯ä»¥ç”¨åµŒå¥—tabularçš„æ–¹å¼</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\begin</span>&#123;tabular&#125;&#123;cccc&#125;<br>    <span class="hljs-keyword">\toprule</span><br>        <span class="hljs-keyword">\begin</span>&#123;tabular&#125;&#123;c&#125;<br>            ç‰©ç†æœº<span class="hljs-keyword">\\</span>èµ„æºç±»å‹<br>        <span class="hljs-keyword">\end</span>&#123;tabular&#125;<br>          <span class="hljs-built_in">&amp;</span> CPUèµ„æºï¼ˆå•ä½ï¼šæ ¸ï¼‰ <span class="hljs-built_in">&amp;</span> å†…å­˜èµ„æºï¼ˆå•ä½ï¼šGï¼‰ <span class="hljs-built_in">&amp;</span> æœºå™¨æ•°é‡ <span class="hljs-keyword">\\</span><br>     <span class="hljs-keyword">\hline</span><br>         ç±»å‹ä¸€ <span class="hljs-built_in">&amp;</span>  32  <span class="hljs-built_in">&amp;</span> 64 <span class="hljs-built_in">&amp;</span> 6000 <span class="hljs-keyword">\\</span><br>         ç±»å‹äºŒ <span class="hljs-built_in">&amp;</span> 92 <span class="hljs-built_in">&amp;</span> 288 <span class="hljs-built_in">&amp;</span> 3000 <span class="hljs-keyword">\\</span><br>    <span class="hljs-keyword">\bottomrule</span><br><span class="hljs-keyword">\end</span>&#123;tabular&#125;<br></code></pre></td></tr></table></figure><ol start="9"><li>è®¾ç½®åˆç†åˆ—å®½</li></ol><blockquote><p>éœ€è¦å¯¼å…¥<code>makecell</code>åŒ…</p></blockquote><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-comment">% p&#123;xpt&#125; å¯ä»¥æŒ‡å®šæ¯ä¸€åˆ—çš„å®½åº¦ï¼Œ ä½†æ˜¯è¿™æ ·å°±æ²¡æœ‰t, c, b å¯¹é½çš„ä½œç”¨äº†, ä½†æ˜¯å¯ä»¥è‡ªåŠ¨æ¢è¡Œ!</span><br><br><span class="hljs-keyword">\begin</span>&#123;table &#125;[ htbp]<br>  <span class="hljs-keyword">\centering</span><br>  <span class="hljs-keyword">\begin</span>&#123;tabular&#125;&#123;p&#123;80 pt&#125;p&#123;80 pt&#125;p&#123;80 pt&#125;&#125;<br>  <span class="hljs-keyword">\toprule</span><br>  æ“ä½œç³»ç»Ÿ <span class="hljs-built_in">&amp;</span> å‘è¡Œç‰ˆ <span class="hljs-built_in">&amp;</span> ç¼–è¾‘å™¨ <span class="hljs-keyword">\\</span><br>  <span class="hljs-keyword">\midrule</span><br>  Windows <span class="hljs-built_in">&amp;</span> MikTeX <span class="hljs-built_in">&amp;</span> TexMakerX <span class="hljs-keyword">\\</span><br>   Unix/Linux <span class="hljs-built_in">&amp;</span> teTeX <span class="hljs-built_in">&amp;</span> Kile <span class="hljs-keyword">\\</span><br>  Mac OS <span class="hljs-built_in">&amp;</span> MacTeX <span class="hljs-built_in">&amp;</span> TeXShop <span class="hljs-keyword">\\</span><br>   é€šç”¨ <span class="hljs-built_in">&amp;</span> TeX Live <span class="hljs-built_in">&amp;</span> TeXworks <span class="hljs-keyword">\\</span><br>  <span class="hljs-keyword">\bottomrule</span><br><span class="hljs-keyword">\end</span>&#123;tabular&#125;<br></code></pre></td></tr></table></figure><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-comment">% p&#123;80pt&#125;&lt;&#123;\centering&#125;</span><br><br><span class="hljs-keyword">\begin</span>&#123;table &#125;[ htbp]<br> <span class="hljs-keyword">\centering</span><br>  <span class="hljs-keyword">\begin</span>&#123;tabular &#125;&#123;p&#123;80 pt&#125;&lt;&#123;<span class="hljs-keyword">\centering</span>&#125;p&#123;80 pt&#125;&lt;&#123;<span class="hljs-keyword">\raggedleft</span><span class="hljs-keyword">\arraybackslash</span> &#125;p&#123;80 pt&#125;&#125;<br> <span class="hljs-keyword">\toprule</span><br>æ“ä½œç³»ç»Ÿ <span class="hljs-built_in">&amp;</span> å‘è¡Œç‰ˆ <span class="hljs-built_in">&amp;</span> ç¼–è¾‘å™¨ <span class="hljs-keyword">\\</span><br> <span class="hljs-keyword">\midrule</span><br>Windows <span class="hljs-built_in">&amp;</span> MikTeX <span class="hljs-built_in">&amp;</span> TexMakerX <span class="hljs-keyword">\\</span><br> Unix/Linux <span class="hljs-built_in">&amp;</span> teTeX <span class="hljs-built_in">&amp;</span> Kile <span class="hljs-keyword">\\</span><br>Mac OS <span class="hljs-built_in">&amp;</span> MacTeX <span class="hljs-built_in">&amp;</span> TeXShop <span class="hljs-keyword">\\</span><br> é€šç”¨ <span class="hljs-built_in">&amp;</span> TeX Live <span class="hljs-built_in">&amp;</span> TeXworks <span class="hljs-keyword">\\</span><br> <span class="hljs-keyword">\bottomrule</span><br> <span class="hljs-keyword">\end</span>&#123;tabular&#125;<br><span class="hljs-keyword">\end</span>&#123;table&#125;<br></code></pre></td></tr></table></figure><h1 id="9-å°†è¡¨æ—‹è½¬90åº¦æ˜¾ç¤º"><a class="markdownIt-Anchor" href="#9-å°†è¡¨æ—‹è½¬90åº¦æ˜¾ç¤º"></a> 9. å°†è¡¨æ—‹è½¬90åº¦æ˜¾ç¤º</h1><blockquote><p>ä½¿ç”¨å®åŒ…<code>rotating</code></p><p>å°†<code>table</code>ç¯å¢ƒæ”¹ä¸º<code>sidewaytable</code></p><ul><li><code>\usepackage[figuresleft]&#123;rotating&#125;</code>: é¡ºæ—¶é’ˆ90åº¦</li><li><code>\usepackage[figuresright]&#123;rotating&#125;</code>: é€†æ—¶é’ˆ90åº¦</li></ul></blockquote><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\usepackage</span>[figuresright]&#123;rotating&#125;<br><br><span class="hljs-comment">%...</span><br><br><span class="hljs-keyword">\begin</span>&#123;sidewaystable&#125;[htp]<br><span class="hljs-keyword">\caption</span>&#123;This is a caption&#125;  <br><span class="hljs-keyword">\centering</span>  <span class="hljs-comment">%è¡¨æ ¼æ•´ä½“å±…ä¸­</span><br>  <span class="hljs-keyword">\footnotesize</span>  <span class="hljs-comment">%è®¾ç½®å­—ä½“</span><br><span class="hljs-keyword">\begin</span>&#123;tabular&#125;&#123;l*&#123;7&#125;&#123;L&#123;3cm&#125;&#125;&#125; <span class="hljs-comment">%å…±7åˆ—ï¼Œæ¯ä¸€åˆ—åˆ—å®½ä¸º3cm</span><br>    <span class="hljs-comment">%...</span><br><span class="hljs-keyword">\end</span>&#123;tabular&#125;<br><span class="hljs-keyword">\end</span>&#123;sidewaystable&#125;<br></code></pre></td></tr></table></figure><h1 id="multicolumn-å°ç»“"><a class="markdownIt-Anchor" href="#multicolumn-å°ç»“"></a> multicolumn å°ç»“</h1><ul><li><code>m&#123;5cm&#125;</code>: å±…ä¸­</li><li><code>p&#123;5cm&#125;</code>: é¡¶éƒ¨</li><li><code>b&#123;5cm&#125;</code>: åº•éƒ¨</li></ul><p><img src="https://img1.imgtp.com/2022/08/02/UMYQll70.png" alt="multicolumnçš„ä½ç½®è®¾ç½®" /></p><h2 id="1-å‚ç›´å±…ä¸­"><a class="markdownIt-Anchor" href="#1-å‚ç›´å±…ä¸­"></a> 1. å‚ç›´å±…ä¸­</h2><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\begin</span>&#123;center&#125;<br><span class="hljs-keyword">\begin</span>&#123;tabular&#125;&#123;|l|l|l|l|&#125;<br><span class="hljs-keyword">\hline</span><br>Day <span class="hljs-built_in">&amp;</span> Min Temp <span class="hljs-built_in">&amp;</span> Max Temp <span class="hljs-built_in">&amp;</span> Summary <span class="hljs-keyword">\\</span><br><span class="hljs-keyword">\hline</span><br><span class="hljs-comment">% æ³¨æ„, multicolumnä¸­ | ä¼šè¦†ç›–å…¨å±€çš„è¾¹æ¡†è®¾ç½®, ä¸åŠ çš„è¯, å¯¹åº”å•å…ƒæ ¼ä¹Ÿæ²¡è¾¹æ¡†</span><br>Monday <span class="hljs-built_in">&amp;</span> 11C <span class="hljs-built_in">&amp;</span> 22C <span class="hljs-built_in">&amp;</span> <span class="hljs-keyword">\multicolumn</span>&#123;1&#125;&#123;|p&#123;5cm&#125;|&#125;&#123;A clear day with lots of sunshine. However, the strong breeze will bring down the temperatures.&#125; <span class="hljs-keyword">\\</span><br><span class="hljs-keyword">\hline</span><br>Tuesday <span class="hljs-built_in">&amp;</span> 9C <span class="hljs-built_in">&amp;</span> 19C <span class="hljs-built_in">&amp;</span> <span class="hljs-keyword">\multicolumn</span>&#123;1&#125;&#123;|m&#123;5cm&#125;|&#125;&#123;Cloudy with rain, across many northern regions. Clear spells across most of Scotland and Northern Ireland, but rain reaching the far northwest.&#125; <span class="hljs-keyword">\</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">\hline</span><br>Wednesday <span class="hljs-built_in">&amp;</span> 10C <span class="hljs-built_in">&amp;</span> 21C <span class="hljs-built_in">&amp;</span> <span class="hljs-keyword">\multicolumn</span>&#123;1&#125;&#123;|b&#123;5cm&#125;|&#125;&#123;Rain will still linger for the morning. Conditions will improve by early afternoon and continue throughout the evening.&#125; <span class="hljs-keyword">\\</span><br><span class="hljs-keyword">\hline</span><br><br><span class="hljs-keyword">\end</span>&#123;tabular&#125;<br><br><span class="hljs-keyword">\end</span>&#123;center&#125;<br></code></pre></td></tr></table></figure><h2 id="2-å‚ç›´ä¸”æ°´å¹³å±…ä¸­"><a class="markdownIt-Anchor" href="#2-å‚ç›´ä¸”æ°´å¹³å±…ä¸­"></a> 2. å‚ç›´ä¸”æ°´å¹³å±…ä¸­</h2><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\documentclass</span>[a4paper,twoside,12pt]&#123;article&#125;<br><span class="hljs-keyword">\usepackage</span>&#123;amsbsy&#125;<span class="hljs-comment">%</span><br><span class="hljs-keyword">\usepackage</span>&#123;graphicx&#125;<br><span class="hljs-keyword">\usepackage</span>&#123;array&#125;<br><span class="hljs-keyword">\usepackage</span>&#123;calc&#125;<br><span class="hljs-keyword">\newcolumntype</span>&#123;N&#125;&#123;&gt;&#123;<span class="hljs-keyword">\centering</span><span class="hljs-keyword">\arraybackslash</span>&#125;m&#123;.5in&#125;&#125;  <span class="hljs-comment">% \arraybackslash å°±æ˜¯é‚£ä¸ª \\</span><br><span class="hljs-keyword">\newcolumntype</span>&#123;G&#125;&#123;&gt;&#123;<span class="hljs-keyword">\bfseries</span><span class="hljs-keyword">\centering</span><span class="hljs-keyword">\arraybackslash</span>&#125;m&#123;2in+6<span class="hljs-keyword">\tabcolsep</span>&#125;&#125;<br><br><span class="hljs-keyword">\begin</span>&#123;document&#125;<br><br><span class="hljs-keyword">\begin</span>&#123;table&#125;[H]<br><span class="hljs-keyword">\centering</span><br><span class="hljs-keyword">\begin</span>&#123;tabular&#125;&#123;*&#123;9&#125;&#123;N|&#125;&#125;<br><span class="hljs-keyword">\cline</span>&#123;2-9&#125;<br><span class="hljs-keyword">\multicolumn</span>&#123;1&#125;&#123;N|&#125;&#123;&#125; <span class="hljs-built_in">&amp;</span> <span class="hljs-keyword">\multicolumn</span>&#123;4&#125;&#123;G|&#125;&#123;Emissions (Pre Catalytic Converter)&#125; <span class="hljs-built_in">&amp;</span> <span class="hljs-keyword">\multicolumn</span>&#123;4&#125;&#123;G|&#125;&#123;Emissions (Post Catalytic Converter)&#125; <span class="hljs-keyword">\tabularnewline</span>  <span class="hljs-keyword">\hline</span><br><span class="hljs-keyword">\multicolumn</span>&#123;1&#125;&#123;|N|&#125;&#123;<span class="hljs-keyword">\textbf</span>&#123;Dyno Load (<span class="hljs-keyword">\%</span>)&#125;&#125; <span class="hljs-built_in">&amp;</span> <span class="hljs-keyword">\textbf</span>&#123;CO (<span class="hljs-keyword">\%</span>)&#125; <span class="hljs-built_in">&amp;</span> <span class="hljs-keyword">\textbf</span>&#123;HC (ppm)&#125; <span class="hljs-built_in">&amp;</span> <span class="hljs-keyword">\textbf</span>&#123;Nox (ppm)&#125; <span class="hljs-built_in">&amp;</span> <span class="hljs-keyword">\textbf</span>&#123;<span class="hljs-built_in">$</span><span class="hljs-keyword">\boldsymbol</span>&#123;<span class="hljs-keyword">\mathrm</span>&#123;CO<span class="hljs-built_in">_</span>2&#125;&#125;<span class="hljs-built_in">$</span> (<span class="hljs-keyword">\%</span>)&#125; <span class="hljs-built_in">&amp;</span> <span class="hljs-keyword">\textbf</span>&#123;CO (<span class="hljs-keyword">\%</span>)&#125; <span class="hljs-built_in">&amp;</span> <span class="hljs-keyword">\textbf</span>&#123;HC (ppm)&#125; <span class="hljs-built_in">&amp;</span> <span class="hljs-keyword">\textbf</span>&#123;Nox (ppm)&#125; <span class="hljs-built_in">&amp;</span> <span class="hljs-keyword">\textbf</span>&#123;<span class="hljs-built_in">$</span><span class="hljs-keyword">\boldsymbol</span>&#123;<span class="hljs-keyword">\mathrm</span>&#123;CO<span class="hljs-built_in">_</span>2&#125;&#125;<span class="hljs-built_in">$</span> (<span class="hljs-keyword">\%</span>)&#125; <span class="hljs-keyword">\\</span> <span class="hljs-keyword">\hline</span><br><span class="hljs-keyword">\multicolumn</span>&#123;1&#125;&#123;|N|&#125;&#123;10&#125; <span class="hljs-built_in">&amp;</span> 0.77 <span class="hljs-built_in">&amp;</span> 23 <span class="hljs-built_in">&amp;</span> 523 <span class="hljs-built_in">&amp;</span> 14.0 <span class="hljs-built_in">&amp;</span> 0.09 <span class="hljs-built_in">&amp;</span> 18 <span class="hljs-built_in">&amp;</span> 130 <span class="hljs-built_in">&amp;</span> 13.8 <span class="hljs-keyword">\\</span> <span class="hljs-keyword">\hline</span><br><span class="hljs-keyword">\multicolumn</span>&#123;1&#125;&#123;|c|&#125;&#123;30&#125; <span class="hljs-built_in">&amp;</span> 0.78 <span class="hljs-built_in">&amp;</span> 13 <span class="hljs-built_in">&amp;</span> 555 <span class="hljs-built_in">&amp;</span> 14.2 <span class="hljs-built_in">&amp;</span> - <span class="hljs-built_in">&amp;</span> - <span class="hljs-built_in">&amp;</span> - <span class="hljs-built_in">&amp;</span> - <span class="hljs-keyword">\\</span> <span class="hljs-keyword">\hline</span><br><span class="hljs-keyword">\multicolumn</span>&#123;1&#125;&#123;|c|&#125;&#123;70&#125; <span class="hljs-built_in">&amp;</span> 0.70 <span class="hljs-built_in">&amp;</span> 14 <span class="hljs-built_in">&amp;</span> 580 <span class="hljs-built_in">&amp;</span> 14.4 <span class="hljs-built_in">&amp;</span> - <span class="hljs-built_in">&amp;</span> - <span class="hljs-built_in">&amp;</span> - <span class="hljs-built_in">&amp;</span> - <span class="hljs-keyword">\\</span> <span class="hljs-keyword">\hline</span><br><span class="hljs-keyword">\multicolumn</span>&#123;1&#125;&#123;|c|&#125;&#123;90&#125; <span class="hljs-built_in">&amp;</span> 0.74 <span class="hljs-built_in">&amp;</span> 15 <span class="hljs-built_in">&amp;</span> 630 <span class="hljs-built_in">&amp;</span> 14.5 <span class="hljs-built_in">&amp;</span> 0.70 <span class="hljs-built_in">&amp;</span> 15 <span class="hljs-built_in">&amp;</span> 618 <span class="hljs-built_in">&amp;</span> 14.6 <span class="hljs-keyword">\\</span> <span class="hljs-keyword">\hline</span><br><span class="hljs-keyword">\multicolumn</span>&#123;1&#125;&#123;|c|&#125;&#123;Neutral&#125; <span class="hljs-built_in">&amp;</span> 0.06 <span class="hljs-built_in">&amp;</span> 7 <span class="hljs-built_in">&amp;</span> 21 <span class="hljs-built_in">&amp;</span> 15.6 <span class="hljs-built_in">&amp;</span> 0.06 <span class="hljs-built_in">&amp;</span> 5 <span class="hljs-built_in">&amp;</span> 27 <span class="hljs-built_in">&amp;</span> 15.7 <span class="hljs-keyword">\\</span> <span class="hljs-keyword">\hline</span><br><span class="hljs-keyword">\end</span>&#123;tabular&#125;<br><span class="hljs-keyword">\caption</span>&#123;<span class="hljs-keyword">\textbf</span>&#123;&#125;&#125;<br><span class="hljs-keyword">\label</span>&#123;2000Emissions&#125;<br><span class="hljs-keyword">\end</span>&#123;table&#125;<br><br><span class="hljs-keyword">\end</span>&#123;document&#125;<br></code></pre></td></tr></table></figure><h2 id="3-newcolumntypeæ˜¯å¦‚ä½•å·¥ä½œçš„å‘¢"><a class="markdownIt-Anchor" href="#3-newcolumntypeæ˜¯å¦‚ä½•å·¥ä½œçš„å‘¢"></a> 3. <code>newcolumntypeæ˜¯å¦‚ä½•å·¥ä½œçš„å‘¢?</code></h2><blockquote><p>è¯¦æƒ…å¯è§: <a href="https://tex.stackexchange.com/questions/257128/how-does-the-newcolumntype-command-work">https://tex.stackexchange.com/questions/257128/how-does-the-newcolumntype-command-work</a></p></blockquote><blockquote><p><code>\arraybackslash</code></p></blockquote><blockquote><p>As for <code>\arraybackslash</code>, the <code>\raggedright</code>, <code>\raggedleft</code>, and <code>\centering</code> declarations refine <code>\</code> in a way that conflicts with its use in a tabular or array environments. The command <code>\arraybackslash</code> (implemented in array and tabularx) restoresthe meaning of <code>\</code> for use in array and tabular (you would only need <code>\arraybackslash</code> for the last column).</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>æ•™ç¨‹</category>
      
      <category>æ–‡æ¡£æ’°å†™</category>
      
      <category>LaTex</category>
      
    </categories>
    
    
    <tags>
      
      <tag>LaTex</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LaTexå°æŠ€å·§</title>
    <link href="/2022/07/29/LaTex%E5%B0%8F%E6%8A%80%E5%B7%A7/"/>
    <url>/2022/07/29/LaTex%E5%B0%8F%E6%8A%80%E5%B7%A7/</url>
    
    <content type="html"><![CDATA[<h1 id="1-ç¬¦å·"><a class="markdownIt-Anchor" href="#1-ç¬¦å·"></a> 1. ç¬¦å·</h1><blockquote><p><code>~</code>: æ³¢æµªå·è¡¨ç¤ºä¸€ä¸ªç©ºæ ¼, ä½†åˆä¸åªæ˜¯ä¸€ä¸ªç©ºæ ¼, æ³¢æµªå·å·¦å³çš„å†…å®¹ä¸å…è®¸æ¢è¡Œæˆªæ–­, åœ¨ç”¨<code>A~\cite&#123;name&#125;</code>å¼•ç”¨æ—¶, åå­—å’Œå¼•ç”¨å°±ä¸ä¼šå› æ¢è¡Œè€Œæˆªæ–­äº†.</p></blockquote><p><code>\checkmark</code>: <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">âœ“</mi></mrow><annotation encoding="application/x-tex">\checkmark</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69224em;vertical-align:0em;"></span><span class="mord amsrm">âœ“</span></span></span></span></p>]]></content>
    
    
    <categories>
      
      <category>æ•™ç¨‹</category>
      
      <category>æ–‡æ¡£æ’°å†™</category>
      
      <category>LaTex</category>
      
    </categories>
    
    
    <tags>
      
      <tag>LaTex</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LaTexåŸºç¡€-Figure</title>
    <link href="/2022/07/28/LaTex%E5%9F%BA%E7%A1%80-Figure/"/>
    <url>/2022/07/28/LaTex%E5%9F%BA%E7%A1%80-Figure/</url>
    
    <content type="html"><![CDATA[<h1 id="1-å­å›¾"><a class="markdownIt-Anchor" href="#1-å­å›¾"></a> 1. å­å›¾</h1><blockquote><p>æ³¨æ„, å­å›¾å’Œæ­£å¸¸çš„figureä¹Ÿæ˜¯ä¸€æ ·æœ‰captionçš„, ä¹Ÿå¯ä»¥åŠ <code>\label</code>, ä¸ºäº†çªå‡ºé‡ç‚¹å°±ä¸æå¤æ‚äº†. ä¸‹é¢æ˜¯ä¸€èˆ¬è¦å¼•å…¥çš„package</p><p><code>\usepackages&#123;subcaption&#125;</code></p><p><code>\usepackage&#123;graphicx&#125;</code></p></blockquote><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\begin</span>&#123;figure&#125;<br>    <span class="hljs-keyword">\centering</span><br>    <span class="hljs-keyword">\begin</span>&#123;subfigure&#125;&#123;0.4<span class="hljs-keyword">\textwidth</span>&#125;<br>        <span class="hljs-keyword">\includegraphics</span>[width=<span class="hljs-keyword">\textwidth</span>]&#123;example-image&#125;<br>    <span class="hljs-keyword">\end</span>&#123;subfigure&#125;<br>    <span class="hljs-comment">% è¿™é‡Œå¾ˆå¾®å¦™, å¦‚æœæ²¡æœ‰è¿™ä¸ª\quad, ä¸¤ä¸ªå­å›¾ä¼šå‚ç›´å¹¶åˆ—, åŠ ä¸Šåå°±æ˜¯æ°´å¹³å¹¶åˆ—</span><br>    <span class="hljs-comment">% ä½¿ç”¨ \hfill ä¹Ÿèƒ½èµ·åˆ°è®©å­å›¾æ°´å¹³å¹¶åˆ—çš„ä½œç”¨ </span><br>    <span class="hljs-comment">% å½“ç„¶å¦‚æœæ°´å¹³æ‘†ä¸ä¸‹, å‰©ä½™çš„å›¾è¿˜æ˜¯ä¼šå»ä¸‹ä¸€è¡ŒæŒ¤</span><br>    <span class="hljs-keyword">\quad</span> <br>    <span class="hljs-keyword">\begin</span>&#123;subfigure&#125;&#123;0.4<span class="hljs-keyword">\textwidth</span>&#125;<br>        <span class="hljs-keyword">\includegraphics</span>[width=<span class="hljs-keyword">\textwidth</span>]&#123;example-image&#125;<br>    <span class="hljs-keyword">\end</span>&#123;subfigure&#125;<br>    <br>    <span class="hljs-keyword">\caption</span>&#123;The common architecture of a recurrent VAE. &#125;<br>    <span class="hljs-keyword">\label</span>&#123;fig:recurrent<span class="hljs-built_in">_</span>vae&#125;<br><span class="hljs-keyword">\end</span>&#123;figure&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æ•™ç¨‹</category>
      
      <category>æ–‡æ¡£æ’°å†™</category>
      
      <category>LaTex</category>
      
    </categories>
    
    
    <tags>
      
      <tag>LaTex</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>gitå·¥å…·ç”¨æ³•å°ç»“</title>
    <link href="/2022/07/27/git%E5%B7%A5%E5%85%B7%E7%94%A8%E6%B3%95%E5%B0%8F%E7%BB%93/"/>
    <url>/2022/07/27/git%E5%B7%A5%E5%85%B7%E7%94%A8%E6%B3%95%E5%B0%8F%E7%BB%93/</url>
    
    <content type="html"><![CDATA[<h1 id="1-submodule"><a class="markdownIt-Anchor" href="#1-submodule"></a> 1. <code>submodule</code></h1><blockquote><p>æœ‰æ—¶å€™, é‡åˆ°å¤æ‚çš„é¡¹ç›®ä¼šå­˜åœ¨submodule, è¦æ‹‰å–è¿™æ ·çš„ä»“åº“, éœ€è¦è¿™æ ·. (è‡³äºå¦‚ä½•ç»™è‡ªå·±çš„é¡¹ç›®æ·»åŠ ä¸€ä¸ªsubmodule, gitå®˜æ–¹ç»™äº†ä¾‹å­, å°±ä¸å¤åˆ¶äº†)</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">git pull remote main<br>git submodule update --init <span class="hljs-comment"># åˆå§‹åŒ–submoduleä»¥åŠæ‹‰å–å…¶ä»£ç </span><br>git submodule update &lt;submodule-name&gt; <span class="hljs-comment"># è·å–submoduleçš„è¿œç¨‹æ›´æ–°, ä¹Ÿå¯ä»¥ä¸æŒ‡å®šåå­—, å…¨éƒ¨æ›´æ–°.</span><br></code></pre></td></tr></table></figure><h1 id="2-commit"><a class="markdownIt-Anchor" href="#2-commit"></a> 2. <code>commit</code></h1><blockquote><p><code>-i</code> è¡¨ç¤ºè¿›å…¥äº¤äº’æ¨¡å¼</p><p><code>HEAD~10</code> è¡¨ç¤ºç›®æ ‡æ˜¯ä»HEADå‘å‰(æ›´æ—©)çš„10æ¬¡æäº¤</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git rebase -i HEAD~10<br></code></pre></td></tr></table></figure><p>éšåæ‰“å¼€ä¸€ä¸ªäº¤äº’ç•Œé¢, å°†<code>pick</code>éƒ½æ›¿æ¢ä¸º<code>squash</code>, !!! é™¤äº†æœ€é¡¶ä¸Šé‚£è¡Œçš„<code>pick</code>ä¿ç•™, é‚£æ˜¯<code>HEAD</code>æŒ‡é’ˆæ‰€æŒ‡å‘çš„æœ€æ–°æäº¤. æœ€åä¿å­˜æ–‡ä»¶é€€å‡ºå³å¯.</p><p>é€€å‡ºå, ä¼šè¿›å…¥å¦ä¸€ä¸ªæ–‡ä»¶, è¿™é‡Œæ˜¯ç¼–è¾‘commitçš„æäº¤ä¿¡æ¯çš„, æ¯ä¸ªåˆå¹¶çš„commitå…¶ä¿¡æ¯ä¼šè¢«åˆå¹¶åœ¨ä¸€èµ·, å› æ­¤æ˜¯å¦ä¿®æ”¹å¯ä»¥çœ‹éœ€æ±‚, ä¸€èˆ¬ç›´æ¥é€€å‡ºå°±è¡Œäº†.</p><p>è¿™é‡Œæ˜¯rebaseä¸­å…¶ä»–å¯ä¾›ä½¿ç”¨çš„å‘½ä»¤:</p><blockquote><p>å‘½ä»¤:<br />p, pick &lt;æäº¤&gt; = ä½¿ç”¨æäº¤</p><p>r, reword &lt;æäº¤&gt; = ä½¿ç”¨æäº¤ï¼Œä½†ç¼–è¾‘æäº¤è¯´æ˜</p><p>e, edit &lt;æäº¤&gt; = ä½¿ç”¨æäº¤ï¼Œä½†åœæ­¢ä»¥ä¾¿åœ¨ shell ä¸­ä¿®è¡¥æäº¤</p><p>s, squash &lt;æäº¤&gt; = ä½¿ç”¨æäº¤ï¼Œä½†æŒ¤å‹åˆ°å‰ä¸€ä¸ªæäº¤</p><p>f, fixup [-C | -c] &lt;æäº¤&gt; = ç±»ä¼¼äº â€œsquashâ€ï¼Œä½†åªä¿ç•™å‰ä¸€ä¸ªæäº¤<br />çš„æäº¤è¯´æ˜ï¼Œé™¤éä½¿ç”¨äº† -C å‚æ•°ï¼Œæ­¤æƒ…å†µä¸‹åˆ™åª<br />ä¿ç•™æœ¬æäº¤è¯´æ˜ã€‚ä½¿ç”¨ -c å’Œ -C ç±»ä¼¼ï¼Œä½†ä¼šæ‰“å¼€<br />ç¼–è¾‘å™¨ä¿®æ”¹æäº¤è¯´æ˜</p><p>x, exec &lt;å‘½ä»¤&gt; = ä½¿ç”¨ shell è¿è¡Œå‘½ä»¤ï¼ˆæ­¤è¡Œå‰©ä½™éƒ¨åˆ†ï¼‰</p><p>b, break = åœ¨æ­¤å¤„åœæ­¢ï¼ˆä½¿ç”¨ â€˜git rebase --continueâ€™ ç»§ç»­å˜åŸºï¼‰</p><p>d, drop &lt;æäº¤&gt; = åˆ é™¤æäº¤</p><p>l, label <label> = ä¸ºå½“å‰ HEAD æ‰“ä¸Šæ ‡è®°</p><p>t, reset <label> = é‡ç½® HEAD åˆ°è¯¥æ ‡è®°</p><p>m, merge [-C <commit> | -c <commit>] <label> [# <oneline>]<br />.       åˆ›å»ºä¸€ä¸ªåˆå¹¶æäº¤ï¼Œå¹¶ä½¿ç”¨åŸå§‹çš„åˆå¹¶æäº¤è¯´æ˜ï¼ˆå¦‚æœæ²¡æœ‰æŒ‡å®š<br />.       åŸå§‹æäº¤ï¼Œä½¿ç”¨æ³¨é‡Šéƒ¨åˆ†çš„ oneline ä½œä¸ºæäº¤è¯´æ˜ï¼‰ã€‚ä½¿ç”¨<br />.       -c &lt;æäº¤&gt; å¯ä»¥ç¼–è¾‘æäº¤è¯´æ˜ã€‚</p><p>å¯ä»¥å¯¹è¿™äº›è¡Œé‡æ–°æ’åºï¼Œå°†ä»ä¸Šè‡³ä¸‹æ‰§è¡Œã€‚</p><p>å¦‚æœæ‚¨åœ¨è¿™é‡Œåˆ é™¤ä¸€è¡Œï¼Œå¯¹åº”çš„æäº¤å°†ä¼šä¸¢å¤±ã€‚</p><p>ç„¶è€Œï¼Œå¦‚æœæ‚¨åˆ é™¤å…¨éƒ¨å†…å®¹ï¼Œå˜åŸºæ“ä½œå°†ä¼šç»ˆæ­¢ã€‚</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>å·¥å…·</category>
      
      <category>Git</category>
      
      <category>åŸºç¡€</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Git</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Rustä½¿ç”¨ä¸­é‡åˆ°çš„é—®é¢˜</title>
    <link href="/2022/07/26/Rust%E4%BD%BF%E7%94%A8%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/"/>
    <url>/2022/07/26/Rust%E4%BD%BF%E7%94%A8%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<blockquote><p>è¿™é‡Œæ•´ç†çš„é—®é¢˜æœ‰å¯èƒ½å¹¶éé—®é¢˜, è€Œæ˜¯ä½¿ç”¨è¿‡ç¨‹ä¸­å¯¹è¯­æ³•\rustç‰ˆæœ¬ç‰¹æ€§çš„ä¸ç†Ÿæ‚‰å¯¼è‡´, ä¼šå…ˆè¡Œè®°å½•, ç­‰äº†è§£å…¶èƒŒåçš„åŸç†ä¼šè¡¥å……è§£é‡Š.</p></blockquote><h1 id="1-ç¼–ç¨‹æ—¥å¸¸"><a class="markdownIt-Anchor" href="#1-ç¼–ç¨‹æ—¥å¸¸"></a> 1. ç¼–ç¨‹æ—¥å¸¸</h1><h2 id="1-ç±»å‹ä¸åŒ¹é…"><a class="markdownIt-Anchor" href="#1-ç±»å‹ä¸åŒ¹é…"></a> 1. ç±»å‹ä¸åŒ¹é…:</h2><blockquote><p>åœ¨ä½¿ç”¨ä¸€ä¸ªç±»å‹æ—¶, é€šå¸¸ä¼šé‡‡ç”¨<code>use</code>è¯­å¥, ç„¶è€Œåˆæœ‰ä¸€äº›åº“å®ƒä¸ä½¿ç”¨<code>use</code>è€Œç›´æ¥ä»¥å…¨è·¯å¾„å¼•ç”¨ç±»å‹,åœ¨è°ƒç”¨å‡½æ•°æ—¶, æ˜æ˜æ˜¯åŒä¸€ä¸ªç±»å‹,ç¡®å› ä¸ºä¸€ä¸ªæ˜¯ç®€å†™, ä¸€ä¸ªæ˜¯å…¨è·¯å¾„,å¯¼è‡´æ— æ³•åŒ¹é…ç±»å‹è€ŒæŠ¥é”™.</p></blockquote><p>è¿™æ—¶, è¦æ£€æŸ¥ä¸€ä¸‹, æ‰€ä½¿ç”¨çš„å‡½æ•°æ¥è‡ªå“ªä¸ªåº“(ç”¨<code>A</code>æŒ‡ä»£), ç„¶åå˜é‡çš„ç±»å‹æ¥è‡ªå“ªä¸ªåº“(ç”¨<code>B</code>), è¿™é‡Œ<code>A</code>å¿…å®šä½¿ç”¨äº†<code>B</code>, è€Œä½ æ‰€ä½¿ç”¨çš„<code>B</code>ä¸<code>A</code>ä½¿ç”¨çš„<code>B</code>ç‰ˆæœ¬ä¸åŒ. è¿™æ—¶å€™å°±è¦å»çœ‹<code>B</code>çš„ç‰ˆæœ¬, æŠŠä½ ç”¨çš„ç‰ˆæœ¬æ”¹ä¸€ä¸‹, ä¸è¿‡è¿™åœ¨rust 2021editionå­˜åœ¨, éœ€è¦èƒ½å°½å¿«æ”¹è¿›.</p><h2 id="2-cargo-updateæŠ¥é”™"><a class="markdownIt-Anchor" href="#2-cargo-updateæŠ¥é”™"></a> 2. <code>cargo update</code>æŠ¥é”™</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">Updating crates.io index<br>error: failed to select a version <span class="hljs-keyword">for</span> the requirement `vmm-sys-util = <span class="hljs-string">&quot;^0.10.0&quot;</span>`<br>candidate versions found <span class="hljs-built_in">which</span> didn<span class="hljs-string">&#x27;t match: 0.9.0</span><br><span class="hljs-string">location searched: crates.io index</span><br><span class="hljs-string">required by package `dbs-legacy-devices v0.1.0 (/home/fanqiliang/data/project/active/dbs/crates/dbs-legacy-devices)`</span><br></code></pre></td></tr></table></figure><p>è¿™ç§æƒ…å†µæ˜¯: ä½ çš„é¡¹ç›®æ˜¯ä¸€ä¸ªworkspace, ç„¶åä¸åŒcomponentç”¨äº†ç›¸åŒçš„crate, ä½†æ˜¯ä¹‹é—´æœ‰ä¾èµ–å…³ç³», åªèƒ½æ‰‹åŠ¨æ”¹äº†â€¦</p>]]></content>
    
    
    <categories>
      
      <category>ç¼–ç¨‹è¯­è¨€</category>
      
      <category>Rust</category>
      
      <category>åŸºç¡€</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>RuståŸºç¡€ç”¨æ³•</title>
    <link href="/2022/07/21/Rust%E5%9F%BA%E7%A1%80%E7%94%A8%E6%B3%95/"/>
    <url>/2022/07/21/Rust%E5%9F%BA%E7%A1%80%E7%94%A8%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<blockquote><p>è¿˜æ˜¯è§‰å¾—åªæœ‰åˆ—å‡ºå‚è€ƒèµ„æ–™çš„å¿…è¦, è‡³äºå¿…é¡»å¼ºè°ƒçš„ç»†èŠ‚æ‰ä¼šä¸»åŠ¨åˆ—å‡º</p></blockquote><h1 id="1-cargo"><a class="markdownIt-Anchor" href="#1-cargo"></a> 1. Cargo</h1><blockquote><p>å‚è€ƒèµ„æ–™: <a href="https://doc.rust-lang.org/cargo/index.html">https://doc.rust-lang.org/cargo/index.html</a></p></blockquote><p>å¦‚æœéœ€è¦æ·»åŠ ä¸€ä¸ªä¾èµ–, ä»¥<a href="https://docs.rs/clap/latest/clap/">clap</a>ä¸ºä¾‹:</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">cargo <span class="hljs-built_in">add</span> clap <span class="hljs-comment">--features derive</span><br></code></pre></td></tr></table></figure><h1 id="2-rustup"><a class="markdownIt-Anchor" href="#2-rustup"></a> 2. Rustup</h1><blockquote><p>å‚è€ƒèµ„æ–™: <a href="https://rust-lang.github.io/rustup/index.html">https://rust-lang.github.io/rustup/index.html</a></p></blockquote><h1 id="crates"><a class="markdownIt-Anchor" href="#crates"></a> Crates</h1><table><thead><tr><th style="text-align:center">name</th><th style="text-align:center">doc</th><th style="text-align:center">desc</th></tr></thead><tbody><tr><td style="text-align:center">clap</td><td style="text-align:center"><a href="https://docs.rs/clap">https://docs.rs/clap</a></td><td style="text-align:center">çƒ­é—¨çš„CLIå‚æ•°è§£æåº“</td></tr></tbody></table><h1 id="3-å¸¸è§ç”¨æ³•"><a class="markdownIt-Anchor" href="#3-å¸¸è§ç”¨æ³•"></a> 3. å¸¸è§ç”¨æ³•:</h1><h2 id="31-raw-string"><a class="markdownIt-Anchor" href="#31-raw-string"></a> 3.1 raw string</h2><blockquote><p>raw string:</p><p><code>r#&quot;...&quot;#</code> ä½¿ç”¨r#â€¦# åŒ…è£¹çš„å­—ç¬¦ä¸²å†…å®¹ä¸ä¼šè¢«è½¬ä¹‰</p></blockquote><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">let</span> <span class="hljs-variable">data</span> = <span class="hljs-string">r#&quot;</span><br><span class="hljs-string">        &#123;</span><br><span class="hljs-string">            &quot;name&quot;: &quot;John Doe&quot;,</span><br><span class="hljs-string">            &quot;age&quot;: 43,</span><br><span class="hljs-string">            &quot;phones&quot;: [</span><br><span class="hljs-string">                &quot;+44 1234567&quot;,</span><br><span class="hljs-string">                &quot;+44 2345678&quot;</span><br><span class="hljs-string">            ]</span><br><span class="hljs-string">        &#125;&quot;#</span>;<br></code></pre></td></tr></table></figure><h2 id="32-socket"><a class="markdownIt-Anchor" href="#32-socket"></a> 3.2 socket</h2><blockquote><p>Socketç¼–ç¨‹: æ³¨æ„, socketé€šä¿¡, åªæœ‰ç»‘å®šäº†ä¸€ä¸ªsocketæ‰èƒ½ç›‘å¬æ¥å—æ¶ˆæ¯, å³: åªæœ‰socketæ˜¯å•å‘é€šä¿¡çš„</p></blockquote><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><code class="hljs rust"><br><span class="hljs-keyword">use</span> std::thread;<br><span class="hljs-keyword">use</span> std::os::unix::net::&#123;UnixStream, UnixListener&#125;;<br><span class="hljs-keyword">use</span> std::println;<br><span class="hljs-keyword">use</span> std::io::prelude::*;<br><span class="hljs-keyword">use</span> std::time::Duration;<br><span class="hljs-keyword">use</span> std::io::&#123;BufWriter, BufReader, Read&#125;;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">handle_client</span>(stream:  UnixStream) &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">read_stream</span> = BufReader::<span class="hljs-title function_ invoke__">new</span>(&amp;stream);<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">res</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">new</span>();<br>    <span class="hljs-comment">// for line in read_stream.lines() &#123;</span><br>    <span class="hljs-comment">//     println!(&quot;Server: &#123;&#125;&quot;, line.unwrap());</span><br>    <span class="hljs-comment">// &#125;</span><br>    <span class="hljs-comment">// read_lines is not recommended: as a new line ch is required.</span><br>    read_stream.<span class="hljs-title function_ invoke__">read_to_string</span>(&amp;<span class="hljs-keyword">mut</span> res).<span class="hljs-title function_ invoke__">unwrap</span>();<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Server: &#123;res:?&#125;&quot;</span>);<br><br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() <span class="hljs-punctuation">-&gt;</span> std::io::<span class="hljs-type">Result</span>&lt;()&gt; &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">socket</span> = std::path::Path::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-string">&quot;/tmp/dbs.socks&quot;</span>);<br>    <span class="hljs-keyword">if</span> socket.<span class="hljs-title function_ invoke__">exists</span>() &#123;<br>        std::fs::<span class="hljs-title function_ invoke__">remove_file</span>(socket).<span class="hljs-title function_ invoke__">unwrap</span>();<br>    &#125;<br><br>    <span class="hljs-comment">// server</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">t1</span> = thread::<span class="hljs-title function_ invoke__">spawn</span>(|| &#123;<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">listener</span> = UnixListener::<span class="hljs-title function_ invoke__">bind</span>(<span class="hljs-string">&quot;/tmp/dbs.socks&quot;</span>).<span class="hljs-title function_ invoke__">unwrap</span>();<br>        <span class="hljs-keyword">for</span> <span class="hljs-title class_">mut</span> stream <span class="hljs-keyword">in</span> listener.<span class="hljs-title function_ invoke__">incoming</span>() &#123;<br>            <span class="hljs-keyword">match</span> stream &#123;<br>                <span class="hljs-title function_ invoke__">Ok</span>(stream ) =&gt; &#123;<br>                    <span class="hljs-comment">/* connection succeeded */</span><br>                    thread::<span class="hljs-title function_ invoke__">spawn</span>(|| <span class="hljs-title function_ invoke__">handle_client</span>(stream));<br>                    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;bingo&quot;</span>);<br>                &#125;<br>                <span class="hljs-title function_ invoke__">Err</span>(err) =&gt; &#123;<br>                    <span class="hljs-comment">/* connection failed */</span><br>                    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;:?&#125;&quot;</span>, err);<br>                    <span class="hljs-keyword">break</span>;<br>                &#125;<br>            &#125;<br>        &#125;<br><br>    &#125;);<br><br>    thread::<span class="hljs-title function_ invoke__">sleep</span>(Duration::<span class="hljs-title function_ invoke__">from_millis</span>(<span class="hljs-number">2000</span>));<br><br>    <span class="hljs-comment">// client</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">t2</span> =thread::<span class="hljs-title function_ invoke__">spawn</span>(|| &#123;<br>        <span class="hljs-comment">// println!(&quot;&#123;&#125;&quot;, soc.)</span><br>        <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..<span class="hljs-number">10</span> &#123;<br><br>            <span class="hljs-comment">// each request for one connection (Otherwise, the streaming is recognized as one transfer process)</span><br>            <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">soc</span> = UnixStream::<span class="hljs-title function_ invoke__">connect</span>(<span class="hljs-string">&quot;/tmp/dbs.socks&quot;</span>).<span class="hljs-title function_ invoke__">unwrap</span>();<br>            soc.<span class="hljs-title function_ invoke__">write_all</span>(<span class="hljs-string">b&quot;Hello! dsa\n&quot;</span>).<span class="hljs-title function_ invoke__">unwrap</span>();<br>            <span class="hljs-comment">// let mut reader = BufReader::new(&amp;soc);</span><br>            <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;send&quot;</span>);<br>            thread::<span class="hljs-title function_ invoke__">sleep</span>(Duration::<span class="hljs-title function_ invoke__">from_millis</span>(<span class="hljs-number">200</span>));<br>        &#125;<br><br>    &#125;);<br><br>    t1.<span class="hljs-title function_ invoke__">join</span>().<span class="hljs-title function_ invoke__">unwrap</span>();<br>    t2.<span class="hljs-title function_ invoke__">join</span>().<span class="hljs-title function_ invoke__">unwrap</span>();<br><br><br>    <span class="hljs-title function_ invoke__">Ok</span>(())<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="33-é”™è¯¯å¤„ç†"><a class="markdownIt-Anchor" href="#33-é”™è¯¯å¤„ç†"></a> 3.3 é”™è¯¯å¤„ç†</h2><blockquote><p><code>?</code>å¯ä»¥ç”¨åœ¨Optionåé¢, ä¹Ÿå¯ä»¥ç”¨åœ¨Resultåé¢, ä½†åœ¨ä¸€ä¸ªå‡½æ•°ä¸­, å¦‚æœè¿”å›å€¼æ˜¯Result, åˆ™ä¸èƒ½ç”¨åœ¨Optionå, å¦åˆ™æœ‰è¿”å›Noneçš„é£é™©, ç±»å‹ä¸ä¸€è‡´, ä½†å¯ä»¥ç”¨<code>ok_or</code>æ¥è§£å†³</p></blockquote><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::io::ErrorKind;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">test</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;(), std::io::Error&gt; &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">res</span> = <span class="hljs-title function_ invoke__">do</span>(<span class="hljs-title function_ invoke__">A</span>().<span class="hljs-title function_ invoke__">ok_or</span>(ErrorKin::AddrInUse)?)?;<br>    res<br>&#125;<br></code></pre></td></tr></table></figure><p>é€šè¿‡ok_or, å°†Optionçš„çŸ›ç›¾ä¸Šå‡åˆ°Errorå±‚é¢, å°±å¥½å¤„ç†çš„å¾—å¤šäº†.</p>]]></content>
    
    
    <categories>
      
      <category>ç¼–ç¨‹è¯­è¨€</category>
      
      <category>Rust</category>
      
      <category>åŸºç¡€</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Ubuntuä¸Šä½¿ç”¨docker</title>
    <link href="/2022/07/21/Ubuntu%E4%B8%8A%E4%BD%BF%E7%94%A8docker/"/>
    <url>/2022/07/21/Ubuntu%E4%B8%8A%E4%BD%BF%E7%94%A8docker/</url>
    
    <content type="html"><![CDATA[<h1 id="1-å®‰è£…docker"><a class="markdownIt-Anchor" href="#1-å®‰è£…docker"></a> 1. å®‰è£…Docker</h1><h2 id="11-å®‰è£…kvm"><a class="markdownIt-Anchor" href="#11-å®‰è£…kvm"></a> 1.1 å®‰è£…KVM</h2><blockquote><p>å‚è€ƒ: <a href="https://ubuntu.com/blog/kvm-hyphervisor">https://ubuntu.com/blog/kvm-hyphervisor</a></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo apt -y install bridge-utils cpu-checker libvirt-clients libvirt-daemon qemu qemu-kvm<br></code></pre></td></tr></table></figure><blockquote><p>æ£€æŸ¥è™šæ‹ŸåŒ–åŠŸèƒ½</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">kvm-ok<br></code></pre></td></tr></table></figure><h2 id="12-å®‰è£…docker"><a class="markdownIt-Anchor" href="#12-å®‰è£…docker"></a> 1.2 å®‰è£…Docker</h2><blockquote><p>å‚è€ƒèµ„æ–™: <a href="https://docs.docker.com/engine/install/ubuntu/">https://docs.docker.com/engine/install/ubuntu/</a></p><p>æˆ‘å¯¹Docker Desktopå¹¶ä¸æ„Ÿå…´è¶£, å› æ­¤é€‰æ‹©å®‰è£…æ— å›¾å½¢ç•Œé¢çš„<code>Docker Engine</code></p></blockquote><ol><li>å¸è½½æ—§ç‰ˆæœ¬</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo apt-get remove docker docker-engine docker.io containerd runc<br></code></pre></td></tr></table></figure><ol start="2"><li>è®¾ç½®è½¯ä»¶æº</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo apt update<br>sudo apt install ca-certificates curl gnupg lsb-release<br>sudo <span class="hljs-built_in">mkdir</span> -p /etc/apt/keyrings<br>curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg<br><span class="hljs-built_in">echo</span> \<br>  <span class="hljs-string">&quot;deb [arch=<span class="hljs-subst">$(dpkg --print-architecture)</span> signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \</span><br><span class="hljs-string">  <span class="hljs-subst">$(lsb_release -cs)</span> stable&quot;</span> | sudo <span class="hljs-built_in">tee</span> /etc/apt/sources.list.d/docker.list &gt; /dev/null<br>sudo apt-get update<br></code></pre></td></tr></table></figure><ol start="3"><li>å®‰è£…Docker Engine</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo apt-get install docker-ce docker-ce-cli containerd.io docker-compose-plugin<br></code></pre></td></tr></table></figure><ol start="4"><li>é…ç½®æƒé™</li></ol><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">sudo groupadd docker <br>sudo groupadd libvirt<br>sudo groupadd kvm<br>sudo adduser $<span class="hljs-keyword">USER</span> <span class="hljs-title">docker</span><br>sudo adduser $<span class="hljs-keyword">USER</span> <span class="hljs-title">libvirt</span><br>sudo adduser $<span class="hljs-keyword">USER</span> <span class="hljs-title">kvm</span><br>newgrp kvm<br>newgrp docker<br>newgrp libvirt<br></code></pre></td></tr></table></figure><blockquote><p><code>newgrp</code>ç”¨äºé‡æ–°ä»¥å¯¹åº”ç¾¤ç»„èº«ä»½ç™»é™†</p></blockquote><h1 id="2-docker-çš„å¸¸ç”¨å‘½ä»¤"><a class="markdownIt-Anchor" href="#2-docker-çš„å¸¸ç”¨å‘½ä»¤"></a> 2. Docker çš„å¸¸ç”¨å‘½ä»¤</h1><p>æ„å»ºé•œåƒ</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml">docker build -f <span class="hljs-tag">&lt;<span class="hljs-name">dockerfile</span>&gt;</span> -t <span class="hljs-tag">&lt;<span class="hljs-name">image_name:tag</span>&gt;</span> .<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>æ“ä½œç³»ç»Ÿ</category>
      
      <category>è™šæ‹ŸåŒ–åº”ç”¨</category>
      
      <category>Docker</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç½‘ç«™çš„Header--å®‰å…¨è®¾ç½®</title>
    <link href="/2022/07/21/%E7%BD%91%E7%AB%99%E7%9A%84%E5%AE%89%E5%85%A8%E8%AE%BE%E7%BD%AE/"/>
    <url>/2022/07/21/%E7%BD%91%E7%AB%99%E7%9A%84%E5%AE%89%E5%85%A8%E8%AE%BE%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<blockquote><p>å‚è€ƒèµ„æ–™: <a href="https://infosec.mozilla.org/guidelines/web_security#content-security-policy">https://infosec.mozilla.org/guidelines/web_security#content-security-policy</a></p></blockquote><p>è¿™æ˜¯æˆ‘ä¸»é¡µçš„CSPè®¾ç½®, CSPçš„è®¾ç½®å¯ä»¥æœ‰æ•ˆé˜²æ­¢XSS. å¦‚éœ€ä½¿ç”¨, åªè¦æ›¿æ¢æˆ–æ·»åŠ è‡ªå·±éœ€è¦çš„åŸŸåå³å¯~</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;Content-Security-Policy&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;img-src &#x27;self&#x27; image.torch-fan.site img1.imgtp.com;</span></span><br><span class="hljs-string"><span class="hljs-tag">    script-src &#x27;unsafe-inline&#x27; &#x27;self&#x27;lib.baomitu.com at.alicdn.com;</span></span><br><span class="hljs-string"><span class="hljs-tag">    style-src &#x27;self&#x27; &#x27;unsafe-inline&#x27; at.alicdn.com lib.baomitu.com;</span></span><br><span class="hljs-string"><span class="hljs-tag">    media-src &#x27;self&#x27; blob:;</span></span><br><span class="hljs-string"><span class="hljs-tag">    worker-src &#x27;self&#x27; blob:;</span></span><br><span class="hljs-string"><span class="hljs-tag">    object-src &#x27;self&#x27; &quot;</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ä½†æ˜¯, å¯ä»¥çœ‹åˆ°<code>script-src</code>ä¸­æœ‰<code>unsafe-inline</code>, è¿™ä»ç„¶ä¸æ˜¯éå¸¸å®‰å…¨, å› æ­¤å¯ä»¥å»æ‰, ç„¶åæ·»åŠ scriptçš„hashå€¼(ä¸ç”¨æ‹…å¿ƒä¸çŸ¥é“, æµè§ˆå™¨çš„consoleä¸­ä¼šæ‰“å°è¢«å±è”½çš„javascriptè„šæœ¬çš„hashå€¼, å¤åˆ¶ç²˜è´´å³å¯):</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;Content-Security-Policy&quot;</span></span><br><span class="hljs-tag"><span class="hljs-attr">content</span>=<span class="hljs-string">&quot;img-src &#x27;self&#x27; imagebed.torch-fan.site img1.imgtp.com;</span></span><br><span class="hljs-string"><span class="hljs-tag">script-src  &#x27;self&#x27;lib.baomitu.com at.alicdn.com &#x27;sha256-u0AitIxF7N0hYtvjq/jQbABXtOYAsJnJeCFoRizdaDM=&#x27; &#x27;sha256-cPZda3lIu6/tDfdRIA6fN74jCn3QXC9sg4vsBi+VW6w=&#x27; &#x27;sha256-gX0IeNsFB1Hts7cNk8JTGzzl9RcNAI+59T2fVUJBw1I=&#x27;;</span></span><br><span class="hljs-string"><span class="hljs-tag">style-src &#x27;self&#x27; at.alicdn.com lib.baomitu.com &#x27;sha256-quaYMDAFArRHzQDsZzJMSjqcQCtz+UUgFIbN2a8TIQc=&#x27; &#x27;sha256-NK4ORibhZQrqK59KJ1o+jAxvEYk2UPVOV0Wgggbfaek=&#x27;;</span></span><br><span class="hljs-string"><span class="hljs-tag">media-src &#x27;self&#x27; blob:;</span></span><br><span class="hljs-string"><span class="hljs-tag">worker-src &#x27;self&#x27; blob:;</span></span><br><span class="hljs-string"><span class="hljs-tag">object-src &#x27;self&#x27; &quot;</span>&gt;</span><br></code></pre></td></tr></table></figure><p>è¿™ç§æ–¹æ³•ä¹Ÿæœ‰ä¸ªç¼ºé™·, å¯¹äºéœ€è¦åå¤æ„å»ºçš„ç½‘ç«™, å†…è”scriptçš„hashå€¼å¹¶éä¸€æˆä¸å˜çš„, æ­¤æ—¶å°±éœ€è¦ç”¨<code>nonce-&lt;v&gt;</code></p><blockquote><p>Nonces æ˜¯é€šè¿‡åœ¨ CSP ä¸­æŒ‡å®šå…è®¸èµ„æºçš„åºå·ï¼Œè¾¾åˆ°é™åˆ¶éæ³• inline ä»£ç çš„ç›®çš„ã€‚åªæœ‰ä¸ CSP ç­–ç•¥ä¸­åºå·ä¸€è‡´çš„ä»£ç å¯ä»¥æ‰§è¡Œï¼Œå…·ä½“ä½¿ç”¨æ–¹å¼å¦‚ä¸‹(CSSå°±æ²¡å¿…è¦æå®‰å…¨äº†-æˆ–è€…è¯´æ²¡é‚£ä¹ˆé‡è¦)ï¼š</p><p><code>Content-Security-Policy: script-src 'nonce-1'</code></p><p><code>&lt;script nonce=&quot;1&quot;&gt;alert(0);&lt;/script&gt;</code></p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;Content-Security-Policy&quot;</span></span><br><span class="hljs-tag"><span class="hljs-attr">content</span>=<span class="hljs-string">&quot;img-src &#x27;self&#x27; imagebed.torch-fan.site img1.imgtp.com;</span></span><br><span class="hljs-string"><span class="hljs-tag">script-src &#x27;self&#x27; lib.baomitu.com at.alicdn.com utteranc.es &#x27;nonce-1&#x27; &#x27;nonce-2&#x27; &#x27;nonce-3&#x27; &#x27;nonce-4&#x27; &#x27;nonce-5&#x27; &#x27;nonce-6&#x27; &#x27;nonce-7&#x27; &#x27;nonce-8&#x27; &#x27;nonce-9&#x27; &#x27;nonce-10&#x27; &#x27;nonce-11&#x27; &#x27;nonce-12&#x27; &#x27;nonce-13&#x27; &#x27;nonce-14&#x27;;</span></span><br><span class="hljs-string"><span class="hljs-tag">style-src &#x27;self&#x27; &#x27;unsafe-inline&#x27; at.alicdn.com lib.baomitu.com;</span></span><br><span class="hljs-string"><span class="hljs-tag">media-src &#x27;self&#x27; blob:;</span></span><br><span class="hljs-string"><span class="hljs-tag">worker-src &#x27;self&#x27; blob:;</span></span><br><span class="hljs-string"><span class="hljs-tag">object-src &#x27;self&#x27; &quot;</span>&gt;</span><br></code></pre></td></tr></table></figure><p>æœ€å, æ ¹æ®<a href="https://observatory.mozilla.org/analyze/www.torch-fan.site">mozilla observatory</a>çš„ç½‘ç«™æ‰«æç»“æœ, æœ€ç»ˆç½‘ç«™çš„å®‰å…¨è®¾ç½®å¦‚ä¸‹:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;Content-Security-Policy&quot;</span></span><br><span class="hljs-tag"><span class="hljs-attr">content</span>=<span class="hljs-string">&quot;default-src &#x27;none&#x27;; form-action &#x27;none&#x27;; base-uri &#x27;self&#x27;;</span></span><br><span class="hljs-string"><span class="hljs-tag">img-src &#x27;self&#x27; imagebed.torch-fan.site img1.imgtp.com;</span></span><br><span class="hljs-string"><span class="hljs-tag">script-src &#x27;self&#x27; lib.baomitu.com at.alicdn.com utteranc.es &#x27;nonce-1&#x27; &#x27;nonce-2&#x27; &#x27;nonce-3&#x27; &#x27;nonce-4&#x27; &#x27;nonce-5&#x27; &#x27;nonce-6&#x27; &#x27;nonce-7&#x27; &#x27;nonce-8&#x27; &#x27;nonce-9&#x27; &#x27;nonce-10&#x27; &#x27;nonce-11&#x27; &#x27;nonce-12&#x27; &#x27;nonce-13&#x27; &#x27;nonce-14&#x27;;</span></span><br><span class="hljs-string"><span class="hljs-tag">style-src &#x27;self&#x27; &#x27;unsafe-inline&#x27; at.alicdn.com lib.baomitu.com;</span></span><br><span class="hljs-string"><span class="hljs-tag">media-src &#x27;self&#x27; blob:;</span></span><br><span class="hljs-string"><span class="hljs-tag">worker-src &#x27;self&#x27; blob:;</span></span><br><span class="hljs-string"><span class="hljs-tag">object-src &#x27;self&#x27;;</span></span><br><span class="hljs-string"><span class="hljs-tag">font-src &#x27;self&#x27; lib.baomitu.com at.alicdn.com data:;</span></span><br><span class="hljs-string"><span class="hljs-tag">frame-src &#x27;self&#x27; utteranc.es; &quot;</span>&gt;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æ”¶è—</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Modules</title>
    <link href="/2022/07/21/modules/"/>
    <url>/2022/07/21/modules/</url>
    
    <content type="html"><![CDATA[<blockquote><p>å‚è€ƒèµ„æ–™: <a href="https://doc.rust-lang.org/reference/items/modules.html">https://doc.rust-lang.org/reference/items/modules.html</a></p></blockquote><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs oxygene">Syntax:<br><span class="hljs-keyword">Module</span> :<br>      <span class="hljs-keyword">unsafe</span>? <span class="hljs-keyword">mod</span> IDENTIFIER <span class="hljs-punctuation">;</span><br>   | <span class="hljs-keyword">unsafe</span>? <span class="hljs-keyword">mod</span> IDENTIFIER <span class="hljs-comment">&#123;</span><br><span class="hljs-comment">        InnerAttribute*</span><br><span class="hljs-comment">        Item*</span><br><span class="hljs-comment">      &#125;</span><br></code></pre></td></tr></table></figure><p><code>module</code>å’Œç±»å‹äº«æœ‰ç›¸åŒçš„å‘½åç©ºé—´, ä¸èƒ½å‡ºç°é‡åçš„ç°è±¡. <code>unsafe</code>å…³é”®è¯åœ¨rustå¾ˆå¤šåœ°æ–¹éƒ½å¯ä»¥ç”¨, å…¶è¯¦ç»†ä½œç”¨ç•™å¾…åç»­è¡¥å…….<br />ä¸€ä¸ª<code>module</code>é€šå¸¸ç”±èŠ±æ‹¬å·çš„å†…å®¹è¿›è¡Œå®šä¹‰, å¦‚:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs rust"><br><span class="hljs-meta">#![allow(unused)]</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br><span class="hljs-keyword">mod</span> math &#123;<br>    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Complex</span> = (<span class="hljs-type">f64</span>, <span class="hljs-type">f64</span>);<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">sin</span>(f: <span class="hljs-type">f64</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">f64</span> &#123;<br>        <span class="hljs-comment">/* ... */</span><br>      <span class="hljs-built_in">unimplemented!</span>();<br>    &#125;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">cos</span>(f: <span class="hljs-type">f64</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">f64</span> &#123;<br>        <span class="hljs-comment">/* ... */</span><br>      <span class="hljs-built_in">unimplemented!</span>();<br>    &#125;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">tan</span>(f: <span class="hljs-type">f64</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">f64</span> &#123;<br>        <span class="hljs-comment">/* ... */</span><br>      <span class="hljs-built_in">unimplemented!</span>();<br>    &#125;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="1-module-source-filenames"><a class="markdownIt-Anchor" href="#1-module-source-filenames"></a> 1. Module Source Filenames</h1><p>ä¸Šé¢æ˜¯ä¸€ç§<code>mod</code>å…³é”®è¯çš„ä½¿ç”¨, å¦ä¸€ç§æ˜¯å£°æ˜ä¸€ä¸ª<code>module</code>, ä½†æ˜¯ä¸å…·å¤‡ä¸»ä½“. å¦‚:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">mod</span> rvmm;<br></code></pre></td></tr></table></figure><p>è¿™ç±»<code>module</code>çš„ä¸»ä½“æ˜¯ä»æ–‡ä»¶ä¸­åŠ è½½çš„. å½“<code>mod</code>è¯­å¥æ²¡æœ‰<code>path</code>å±æ€§æ—¶, moduleæ–‡ä»¶çš„è·¯å¾„ä¼šæ ¹æ®moduleçš„åç§°è¿›è¡Œæ¨ç†, è§ä¸‹è¡¨, è¿™æ ·å°±èƒ½ç»„ç»‡èµ·<code>module</code>çš„æ ‘å½¢ç»“æ„äº†</p><table><thead><tr><th style="text-align:center">Module Path</th><th style="text-align:center">File Path</th><th style="text-align:center">Contents</th></tr></thead><tbody><tr><td style="text-align:center">crate</td><td style="text-align:center"><a href="http://lib.rs">lib.rs</a></td><td style="text-align:center"><code>mod util;</code></td></tr><tr><td style="text-align:center">crate::util</td><td style="text-align:center"><a href="http://util.rs">util.rs</a></td><td style="text-align:center"><code>mod config;</code></td></tr><tr><td style="text-align:center">crate::util::config</td><td style="text-align:center">util/config.rs</td><td style="text-align:center"></td></tr></tbody></table><p>äº‹å®ä¸Š, <code>module</code>å¯¹åº”çš„åå­—ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹, åªè¦è¯¥æ–‡ä»¶å¤¹ä¸‹æœ‰<code>mod.rs</code>.</p><p>æ³¨æ„, ä½¿ç”¨<code>mod</code>è¯­å¥, åªæ˜¯å°†ä¸€ä¸ªmoduleæ·»åŠ åˆ°moduleåˆ†æ”¯æ ‘çš„å½“å‰èŠ‚ç‚¹ä¸Š, è¿˜éœ€è¦ç”¨<code>use</code>è¯­å¥è¿›è¡Œå¯¼å…¥~</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">mod</span> vmm_action;<br><span class="hljs-keyword">pub</span> <span class="hljs-keyword">use</span> self::vmm_action::*;<br></code></pre></td></tr></table></figure><h1 id="2-the-path-attribute"><a class="markdownIt-Anchor" href="#2-the-path-attribute"></a> 2. The path attribute</h1><p>æœ‰æ—¶å€™, <code>module</code>çš„åå­—å¿…é¡»ä¸æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹ç»‘å®šè¿‡äºæ­»æ¿, å› æ­¤å¯ä»¥æŒ‡å®š<code>path</code>å±æ€§, å•ç‹¬è®¾ç½®. è¿™æ—¶åˆå­˜åœ¨ä¸¤ç§æƒ…å†µ:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-meta">#[path = <span class="hljs-string">&quot;foo.rs&quot;</span>]</span><br><span class="hljs-keyword">mod</span> c;<br></code></pre></td></tr></table></figure><table><thead><tr><th>Source File</th><th><code>c</code>'s File Location</th><th><code>c</code>'s Module Path</th></tr></thead><tbody><tr><td><code>src/a/b.rs</code></td><td><code>src/a/foo.rs</code></td><td><code>crate::a::b::c</code></td></tr><tr><td><code>src/a/mod.rs</code></td><td><code>src/a/foo.rs</code></td><td><code>crate::a::c</code></td></tr></tbody></table><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">mod</span> inline &#123;<br>    <span class="hljs-meta">#[path = <span class="hljs-string">&quot;other.rs&quot;</span>]</span><br>    <span class="hljs-keyword">mod</span> inner;<br>&#125;<br></code></pre></td></tr></table></figure><table><thead><tr><th>Source File</th><th><code>inner</code>'s File Location</th><th><code>inner</code>'s Module Path</th></tr></thead><tbody><tr><td><code>src/a/b.rs</code></td><td><code>src/a/b/inline/other.rs</code></td><td><code>crate::a::b::inline::inner</code></td></tr><tr><td><code>src/a/mod.rs</code></td><td><code>src/a/inline/other.rs</code></td><td><code>crate::a::inline::inner</code></td></tr></tbody></table><blockquote><p><code>mod-rs</code>æŒ‡çš„æ˜¯æ ¹æ¨¡å—(ä¾‹å¦‚<code>lib.rs</code>æˆ–è€…<code>main.rs</code>)å’Œ<code>mod.rs</code> (ç”¨æ¥å°†ç›®å½•ä½œä¸ºmodule)</p></blockquote><p>å¯¹äºç¬¬ä¸€ç§æƒ…å†µ, <code>path</code>å±æ€§çš„è®¾ç½®åœ¨<code>inline module</code>ä¹‹å¤–, æŒ‡å®šçš„æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„æ˜¯ç›¸å¯¹äºå½“å‰æºæ–‡ä»¶æ‰€åœ¨ç›®å½•. æ³¨æ„æºæ–‡ä»¶æ˜¯<code>mod-rs</code>è¿˜æ˜¯<code>non-mod-rs</code>å…¶åœ¨module treeä¸­çš„ä½ç½®ä¸ä¸€æ ·~ å¯ä»¥å¯¹æ¯”ç¬¬ä¸€ä¸ªè¡¨æ¥åˆ¤æ–­</p><p>å¯¹äºç¬¬äºŒç§æƒ…å†µ, ä¹Ÿåˆ†ä¸º<code>mod-rs</code>å’Œ<code>non-mod-rs</code>ä¸¤ç§æƒ…å†µ, å…¶å®æœ¬è´¨å·®ä¸å¤š, æœ€ç»ˆå½’ç»“ä¸ºmoduleçš„å®šä¹‰å½¢å¼</p>]]></content>
    
    
    <categories>
      
      <category>ç¼–ç¨‹è¯­è¨€</category>
      
      <category>Rust</category>
      
      <category>Items</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Ubuntuå¸¸ç”¨çš„æŒ‡ä»¤å’Œé…ç½®</title>
    <link href="/2022/07/21/Ubuntu%E5%B8%B8%E7%94%A8%E7%9A%84%E6%8C%87%E4%BB%A4%E5%92%8C%E9%85%8D%E7%BD%AE/"/>
    <url>/2022/07/21/Ubuntu%E5%B8%B8%E7%94%A8%E7%9A%84%E6%8C%87%E4%BB%A4%E5%92%8C%E9%85%8D%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<h1 id="1-è£…æœºåçš„å¸¸ç”¨æŒ‡ä»¤"><a class="markdownIt-Anchor" href="#1-è£…æœºåçš„å¸¸ç”¨æŒ‡ä»¤"></a> 1. è£…æœºåçš„å¸¸ç”¨æŒ‡ä»¤</h1><ol><li>å®‰è£…é©±åŠ¨</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo ubuntu-drivers autoinstall  <br>sudo apt install xorg-server-source<br>sudo apt install nvidia-cudnn<br></code></pre></td></tr></table></figure><blockquote><p><code>ubuntu-drivers devices</code>  å¯ä»¥åˆ—å‡ºæ¨èçš„æ˜¾å¡é©±åŠ¨ç‰ˆæœ¬, æ‰‹åŠ¨è£…æ›´å¥½(ä¸ä¼šåªè£…æœ€æ–°çš„)</p></blockquote><ol start="2"><li>å®‰è£…å¼€å‘å·¥å…·</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo apt install build-essential net-tools curl<br></code></pre></td></tr></table></figure><ol start="3"><li>ç»´æŠ¤</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo resolvectl flush-caches <span class="hljs-comment"># æ¸…é™¤DNSç¼“å­˜</span><br></code></pre></td></tr></table></figure><h1 id="2-é…ç½®ç½‘ç»œ"><a class="markdownIt-Anchor" href="#2-é…ç½®ç½‘ç»œ"></a> 2. é…ç½®ç½‘ç»œ</h1><h2 id="21-é…ç½®tcpç¼“å­˜éå¿…é¡»-æ•ˆæœä¸æ˜æ˜¾"><a class="markdownIt-Anchor" href="#21-é…ç½®tcpç¼“å­˜éå¿…é¡»-æ•ˆæœä¸æ˜æ˜¾"></a> 2.1 é…ç½®TCPç¼“å­˜(éå¿…é¡», æ•ˆæœä¸æ˜æ˜¾)</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo vim /etc/sysctl.conf<br>sudo sysctl -p<br></code></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs conf">net.core.default_qdisc=fq<br>net.ipv4.tcp_congestion_control=bbr<br>net.ipv4.tcp_rmem=375126 500170 75025200<br>net.ipv4.tcp_wmem=375126 500170 75025200<br>net.ipv4.tcp_window_scaling=1<br>net.ipv4.tcp_timestamps=1<br></code></pre></td></tr></table></figure><h2 id="22-é…ç½®dnsè§£ææ¨èä¼˜åŒ–æ•ˆæœçªå‡º"><a class="markdownIt-Anchor" href="#22-é…ç½®dnsè§£ææ¨èä¼˜åŒ–æ•ˆæœçªå‡º"></a> 2.2 é…ç½®DNSè§£æ(æ¨è,ä¼˜åŒ–æ•ˆæœçªå‡º)</h2><blockquote><p><code>systemd-resolve</code>æœåŠ¡æŒ‡ä»¤å¯èƒ½æ˜¯<code>systemd-resolve</code>ä¹Ÿå¯èƒ½æ˜¯<code>resolvectl</code>(å¦‚ubuntu22.04ä¸Š)</p><p><code>systemd-resolve</code>é…ç½®æ–‡ä»¶ä¿®æ”¹æŒ‡å¯¼æ–‡æ¡£: <a href="https://systemd.network/resolved.conf.html">https://systemd.network/resolved.conf.html</a></p></blockquote><ol><li>ä¿®æ”¹é…ç½®æ–‡ä»¶: <code>/etc/systemd/resolved.conf</code>, åœ¨æœ€åé¢åŠ ä¸Šè¿™ä¸€è¡Œ:</li></ol><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">options</span> single-request-reopen<br></code></pre></td></tr></table></figure><blockquote><p>DNSè§£ææ•ˆç‡ä¼šæé«˜å¾ˆå¤š, ä½†æ˜¯è¿˜ä¾èµ–äºDNSæœåŠ¡å™¨çš„ç¨³å®šæ€§</p></blockquote><ol start="2"><li>ä¿®æ”¹DNSæœåŠ¡å™¨</li></ol><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[Resolve]</span><br><span class="hljs-attr">DNS</span>=<span class="hljs-number">119.29</span>.<span class="hljs-number">29.29</span> <span class="hljs-number">223.6</span>.<span class="hljs-number">6.6</span><br><span class="hljs-attr">FallbackDNS</span>=<span class="hljs-number">114.114</span>.<span class="hljs-number">114.114</span> <span class="hljs-number">8.8</span>.<span class="hljs-number">8.8</span><br></code></pre></td></tr></table></figure><ol start="3"><li>é‡å¯æœåŠ¡</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo systemctl restart systemd-resolved.service<br></code></pre></td></tr></table></figure><p>æ­¤æ—¶ä¹Ÿå¯ä»¥æŸ¥çœ‹DNSçš„é…ç½®</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">resolvectl status<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>æ“ä½œç³»ç»Ÿ</category>
      
      <category>Linux</category>
      
      <category>Ubuntu</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>rustç›¸å…³åŸºç¡€çŸ¥è¯†</title>
    <link href="/2022/07/21/rust%E7%9B%B8%E5%85%B3%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"/>
    <url>/2022/07/21/rust%E7%9B%B8%E5%85%B3%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/</url>
    
    <content type="html"><![CDATA[<h1 id="1-ç‰ˆæœ¬æ›´æ›¿é—®é¢˜"><a class="markdownIt-Anchor" href="#1-ç‰ˆæœ¬æ›´æ›¿é—®é¢˜"></a> 1. ç‰ˆæœ¬æ›´æ›¿é—®é¢˜</h1><p>Pythonçš„2.xå’Œ3.xä¹‹é—´æœ‰å·¨å¤§çš„å˜åŒ–, å¯¹äºæ›´ä¸ºå¹´è½»çš„Rustè€Œè¨€, æ¯ä¸€æ¬¡å¤§ç‰ˆæœ¬ä¹‹é—´æœ‰åºŸå¼ƒåŠŸèƒ½å’Œæ–°ç‰¹æ€§ä¹Ÿä¸è¶³ä¸ºå¥‡, å› æ­¤æœ‰æ—¶éœ€è¦ç–‘é—®ä¸åªè¦å»çœ‹å®˜æ–¹æ–‡æ¡£, è¿˜éœ€è¦çœ‹é‡å¤§ç‰ˆæœ¬æ›´æ–°å˜åŒ–, å…·ä½“å¯åœ¨<a href="https://doc.rust-lang.org/stable/edition-guide/">https://doc.rust-lang.org/stable/edition-guide/</a>ä¸­çœ‹åˆ°.</p>]]></content>
    
    
    <categories>
      
      <category>ç¼–ç¨‹è¯­è¨€</category>
      
      <category>Rust</category>
      
      <category>åŸºç¡€</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>useå£°æ˜è¯­å¥</title>
    <link href="/2022/07/21/use%E5%A3%B0%E6%98%8E%E8%AF%AD%E5%8F%A5/"/>
    <url>/2022/07/21/use%E5%A3%B0%E6%98%8E%E8%AF%AD%E5%8F%A5/</url>
    
    <content type="html"><![CDATA[<blockquote><p>å‚è€ƒèµ„æ–™: <a href="https://doc.rust-lang.org/reference/items/use-declarations.html">https://doc.rust-lang.org/reference/items/use-declarations.html</a></p></blockquote><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs coq">Syntax:<br>UseDeclaration :<br>   use UseTree ;<br><br>UseTree :<br>      (SimplePath? ::)? *<br>   | <span class="hljs-type">(SimplePath</span>? ::)? &#123; (UseTree ( , UseTree )* ,?)? &#125;<br>   | <span class="hljs-type">SimplePath</span> ( <span class="hljs-built_in">as</span> ( IDENTIFIER | <span class="hljs-type">_</span> ) )?<br></code></pre></td></tr></table></figure><p><code>use</code>è¯­å¥æœ€å¸¸ç”¨çš„åšæ³•æ˜¯å¼•ç”¨ä¸€ä¸ªmodule item. è¿™äº›å£°æ˜è¯­å¥å¯ä»¥å‡ºç°åœ¨<code>modules</code>æˆ–<code>blocks</code>ä¸­, ä½†æœ€å¸¸è§çš„æ˜¯åœ¨æ–‡ä»¶çš„é¡¶çº§ç»“æ„ä¸‹.</p><h1 id="1-useè¯­å¥çš„ç®€å†™ä½¿ç”¨"><a class="markdownIt-Anchor" href="#1-useè¯­å¥çš„ç®€å†™ä½¿ç”¨"></a> 1. <code>use</code>è¯­å¥çš„ç®€å†™ä½¿ç”¨:</h1><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¯¼å…¥åŒä¸€ä¸ªå‰ç¼€ä¸‹çš„æ‰€æœ‰paths</span><br><span class="hljs-keyword">use</span> a::b::&#123;c, d, e::f, g::h::i&#125;;<br><br><span class="hljs-comment">// å¯¼å…¥åŒä¸€ä¸ªå‰ç¼€ä¸‹æ‰€æœ‰paths, ä¸”åŒ…å«è¯¥parent moduleæœ¬èº«</span><br><span class="hljs-keyword">use</span> a::b::&#123;<span class="hljs-keyword">self</span>, c, d::e&#125;;<br><br><span class="hljs-comment">// ä¹Ÿå¯ä»¥å–åˆ«å</span><br><span class="hljs-keyword">use</span> a::b::&#123;<span class="hljs-keyword">self</span> <span class="hljs-keyword">as</span> ab, c <span class="hljs-keyword">as</span> abc&#125;;<br><br><span class="hljs-comment">// å¯ä»¥ç”¨é€šé…ç¬¦å¯¼å…¥æ‰€æœ‰path</span><br><span class="hljs-keyword">use</span> a::b::*;<br><br><span class="hljs-comment">//  è¿˜å¯ä»¥åµŒå¥—ä½¿ç”¨ä¸Šè¿°è§„åˆ™</span><br><span class="hljs-keyword">use</span> a::b::&#123;<span class="hljs-keyword">self</span> <span class="hljs-keyword">as</span> ab, c, d::&#123;*, e::f&#125;&#125;<br></code></pre></td></tr></table></figure><blockquote><p>ä¸€ä¸ªä¾‹å­:</p></blockquote><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::collections::hash_map::&#123;<span class="hljs-keyword">self</span>, HashMap&#125;;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">foo</span>&lt;T&gt;(_: T)&#123;&#125;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">bar</span>(map1: HashMap&lt;<span class="hljs-type">String</span>, <span class="hljs-type">usize</span>&gt;, map2: hash_map::HashMap&lt;<span class="hljs-type">String</span>, <span class="hljs-type">usize</span>&gt;)&#123;&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// use declarations can also exist inside of functions</span><br>    <span class="hljs-keyword">use</span> std::option::<span class="hljs-type">Option</span>::&#123;<span class="hljs-literal">Some</span>, <span class="hljs-literal">None</span>&#125;;<br><br>    <span class="hljs-comment">// Equivalent to &#x27;foo(vec![std::option::Option::Some(1.0f64),</span><br>    <span class="hljs-comment">// std::option::Option::None]);&#x27;</span><br>    <span class="hljs-title function_ invoke__">foo</span>(<span class="hljs-built_in">vec!</span>[<span class="hljs-title function_ invoke__">Some</span>(<span class="hljs-number">1.0f64</span>), <span class="hljs-literal">None</span>]);<br><br>    <span class="hljs-comment">// Both `hash_map` and `HashMap` are in scope.</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">map1</span> = HashMap::<span class="hljs-title function_ invoke__">new</span>();<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">map2</span> = hash_map::HashMap::<span class="hljs-title function_ invoke__">new</span>();<br>    <span class="hljs-title function_ invoke__">bar</span>(map1, map2);<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="2-visibility"><a class="markdownIt-Anchor" href="#2-visibility"></a> 2. Visibility</h1><blockquote><p><code>use</code>è¯­å¥å¯ä»¥è¢«<code>pub</code>é™å®šç¬¦ä¿®é¥°, ä½¿ç”¨<code>pub</code>ä¿®é¥°çš„<code>use</code>è¯­å¥, å¯ä»¥èµ·åˆ°â€™å‘½åç©ºé—´é‡å®šå‘â€™çš„ä½œç”¨, åŸæœ¬åœ¨ä¸€ä¸ªåœ°æ–¹å®šä¹‰çš„<code>name</code>, åœ¨è¢«<code>pub use</code>ä¹‹å, å…¶è¢«æš´éœ²åœ¨ä¸€ä¸ªæ–°çš„ç¯å¢ƒä¸­. å°±ç±»ä¼¼pythonçš„import, ä¹Ÿä¼šå¼•èµ·å‘½åç©ºé—´é‡å®šå‘.</p><p>æ³¨æ„ä¸èƒ½å¼•èµ·å¾ªç¯å¼•ç”¨, æ€»ä½“æ¥è¯´å’Œpythonçš„è®¾è®¡æ€æƒ³ç±»ä¼¼</p></blockquote><p>ä¸€ä¸ª<code>re-exporting</code>çš„ä¾‹å­:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">mod</span> quux &#123;<br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">use</span> self::foo::&#123;bar, baz&#125;;<br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">mod</span> foo &#123;<br>        <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">bar</span>() &#123;&#125;<br>        <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">baz</span>() &#123;&#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    quux::<span class="hljs-title function_ invoke__">bar</span>();<br>    quux::<span class="hljs-title function_ invoke__">baz</span>();<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="3-paths"><a class="markdownIt-Anchor" href="#3-paths"></a> 3. Paths</h1><blockquote><p>è¿™é‡Œç»™å‡ºçš„æ˜¯ä¾‹å­</p></blockquote><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-meta">#![allow(unused_imports)]</span><br><span class="hljs-keyword">use</span> std::path::&#123;<span class="hljs-keyword">self</span>, Path, PathBuf&#125;;  <span class="hljs-comment">// good: std is a crate name</span><br><span class="hljs-keyword">use</span> crate::foo::baz::foobaz;    <span class="hljs-comment">// good: foo is at the `root` of the crate</span><br><br><span class="hljs-keyword">mod</span> foo &#123;<br><br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">mod</span> example &#123;<br>        <span class="hljs-keyword">pub</span> <span class="hljs-keyword">mod</span> iter &#123;&#125;<br>    &#125;<br><br>    <span class="hljs-keyword">use</span> crate::foo::example::iter; <span class="hljs-comment">// good: foo is at crate root</span><br><span class="hljs-comment">//  use example::iter;      // bad in 2015 edition: relative paths are not allowed without `self`; good in 2018 edition</span><br>    <span class="hljs-keyword">use</span> self::baz::foobaz;  <span class="hljs-comment">// good: self refers to module &#x27;foo&#x27;</span><br>    <span class="hljs-keyword">use</span> crate::foo::bar::foobar;   <span class="hljs-comment">// good: foo is at crate root</span><br><br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">mod</span> bar &#123;<br>        <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">foobar</span>() &#123; &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">mod</span> baz &#123;<br>        <span class="hljs-keyword">use</span> super::bar::foobar; <span class="hljs-comment">// good: super refers to module &#x27;foo&#x27;</span><br>        <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">foobaz</span>() &#123; &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;&#125;<br></code></pre></td></tr></table></figure><p>åœ¨2018ç‰ˆä¹‹å, å¦‚æœåŒä¸€å‘½åç©ºé—´ä¸‹ä¸æ ‡å‡†åº“æœ‰åå­—å†²çªçš„, å¯ä»¥åŠ ä¸Š<code>::</code>æ¥é¿å…æ­§ä¹‰:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> ::std::fs;  <span class="hljs-comment">// Imports from the `std` crate, not the module below.</span><br><span class="hljs-keyword">use</span> self::std::fs <span class="hljs-keyword">as</span> self_fs;  <span class="hljs-comment">// Imports the module below.</span><br><br><span class="hljs-keyword">mod</span> std &#123;<br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">mod</span> fs &#123;&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="4-underscore-imports"><a class="markdownIt-Anchor" href="#4-underscore-imports"></a> 4. Underscore Imports</h1><blockquote><p><code>use path as _</code></p><p>ä½¿ç”¨ä¸‹åˆ’çº¿, å¯ä»¥å°†å¼•å…¥çš„nameéšè—, å½“å¯¼å…¥çš„æ˜¯ä¸€ä¸ªtraitæ—¶, å½“å‰å‘½åç©ºé—´ä¸­æ‰€æœ‰(åœ¨<code>use path as _</code>ä¹‹å)çš„structéƒ½èƒ½ä½¿ç”¨Zooè¿™ä¸ªtraitçš„æ–¹æ³•(äº‹å®ä¸Š, é‚£ä¸ªZoo structå‘½åä¸ºA B C D éƒ½æ— æ‰€è°“, å®ƒéƒ½èƒ½è®¿é—®zooè¿™ä¸ªå‡½æ•°)</p></blockquote><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">mod</span> foo &#123;<br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">trait</span> <span class="hljs-title class_">Zoo</span> &#123;<br>        <span class="hljs-keyword">fn</span> <span class="hljs-title function_">zoo</span>(&amp;<span class="hljs-keyword">self</span>) &#123;&#125;<br>    &#125;<br><br>    <span class="hljs-keyword">impl</span>&lt;T&gt; Zoo <span class="hljs-keyword">for</span> <span class="hljs-title class_">T</span> &#123;&#125;<br>&#125;<br><br><span class="hljs-keyword">use</span> self::foo::Zoo <span class="hljs-keyword">as</span> _;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Zoo</span>;  <span class="hljs-comment">// Underscore import avoids name conflict with this item.</span><br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">z</span> = Zoo;<br>    z.<span class="hljs-title function_ invoke__">zoo</span>();<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>ç¼–ç¨‹è¯­è¨€</category>
      
      <category>Rust</category>
      
      <category>Items</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Rustæ³¨é‡Š</title>
    <link href="/2022/07/21/Rust%E6%B3%A8%E9%87%8A/"/>
    <url>/2022/07/21/Rust%E6%B3%A8%E9%87%8A/</url>
    
    <content type="html"><![CDATA[<h1 id="1-åŸºæœ¬æ³¨é‡Š"><a class="markdownIt-Anchor" href="#1-åŸºæœ¬æ³¨é‡Š"></a> 1. åŸºæœ¬æ³¨é‡Š</h1><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// Line comment</span><br><br><span class="hljs-comment">/* Block comment */</span><br></code></pre></td></tr></table></figure><blockquote><p>æŒ‰ç…§çº¦å®š, å°½é‡ä½¿ç”¨è¡Œæ³¨é‡Šè€Œéå—æ³¨é‡Š</p></blockquote><h1 id="2-æ–‡æ¡£æ³¨é‡Šdoc-comennts"><a class="markdownIt-Anchor" href="#2-æ–‡æ¡£æ³¨é‡Šdoc-comennts"></a> 2. æ–‡æ¡£æ³¨é‡Š(Doc Comennts)</h1><blockquote><p><code>cargo doc</code>ä¼šè°ƒç”¨<code>rustdoc</code>æ¥ç”Ÿæˆæ–‡æ¡£, è€Œè¿™ä¾èµ–äºæ–‡æ¡£æ³¨é‡Šçš„å­˜åœ¨</p></blockquote><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">/// Line comment; document the next item</span><br><span class="hljs-comment">/** Block comment; document the next item */</span><br><br><br><span class="hljs-comment">//! Line comment; document the enclosing item </span><br><span class="hljs-comment">/*! Block comment; document the enclosing item !*/</span><br></code></pre></td></tr></table></figure><p>ç”¨ä¾‹å­æ¥å±•ç¤ºä¸Šé¢ä¸¤ç§æ–‡æ¡£æ³¨é‡Šçš„ä¸åŒ:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">/// This module contains tests; `Outer comment`</span><br>mode tests&#123;<br><br>&#125; <br><br>mode tests&#123;<br>    <span class="hljs-comment">//! This module contains tests; `Inner comment`</span><br>&#125;<br><br></code></pre></td></tr></table></figure><h1 id="3-æ–‡æ¡£å±æ€§doc-attributes"><a class="markdownIt-Anchor" href="#3-æ–‡æ¡£å±æ€§doc-attributes"></a> 3. æ–‡æ¡£å±æ€§(Doc Attributes)</h1><blockquote><p><code>Doc Attributes</code>ç­‰ä»·äºæ–‡æ¡£æ³¨é‡Š, ä½†æ˜¯åŠŸèƒ½æ›´å¼ºå¤§. è­¬å¦‚å½“æˆ‘ä»¬éœ€è¦è®¾ç½®<code>rustdoc</code>çš„ä¸€äº›æ§åˆ¶å±æ€§æ—¶, å°±ä¼šæ›´æ–¹ä¾¿. ä¸‹é¢æ˜¯ä¸¤è€…çš„ç­‰ä»·å¯¹åº”å…³ç³»</p></blockquote><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">/// Outer comment</span><br><span class="hljs-meta">#[doc = <span class="hljs-string">&quot;Out comment&quot;</span>]</span><br><br><br><span class="hljs-comment">//! Inner comment</span><br><span class="hljs-meta">#![doc = <span class="hljs-string">&quot;Inner comment&quot;</span>]</span><br></code></pre></td></tr></table></figure><blockquote><p>åœ¨è¿™é‡Œ, å…¶å®æ¶‰åŠäº†rustçš„<code>Attribute</code></p><ul><li>Outer attribute: <code>#[attr]</code></li><li>Inner attribute: <code>#![attr]</code></li></ul></blockquote><h1 id="4-å¸¸ç”¨æ³¨é‡Š"><a class="markdownIt-Anchor" href="#4-å¸¸ç”¨æ³¨é‡Š"></a> 4. å¸¸ç”¨æ³¨é‡Š:</h1><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¦‚æœæœ‰æœªä½¿ç”¨çš„importæˆ–è€…å˜é‡, ä¸å‘å‡ºwarning</span><br><span class="hljs-meta">#![allow(unused)]</span> <br></code></pre></td></tr></table></figure><h1 id="æ³¨æ„äº‹é¡¹"><a class="markdownIt-Anchor" href="#æ³¨æ„äº‹é¡¹"></a> æ³¨æ„äº‹é¡¹:</h1><p>åœ¨ä¸º<code>crate-level</code>æ·»åŠ æ³¨é‡Šæ—¶, åº”å½“ä½¿ç”¨<code>//!</code>. è€Œå¯¹äº<code>mod</code>ç­‰å…¶ä»–ä»£ç å—, å°†<code>///</code>æ”¾åœ¨ä»£ç å—å‰é¢, ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨ç¤ºä¾‹:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">//! A Simple Hello World Crate</span><br><br><span class="hljs-comment">/// This function returns the greeting; Hello, world!</span><br><span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">hello</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123;<br>    (<span class="hljs-string">&quot;Hello, world!&quot;</span>).<span class="hljs-title function_ invoke__">to_string</span>()<br>&#125;<br><br><span class="hljs-meta">#[cfg(test)]</span><br><span class="hljs-keyword">mod</span> tests &#123;<br>    <span class="hljs-keyword">use</span> super::hello;<br><br>    <span class="hljs-meta">#[test]</span><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">test_hello</span>() &#123;<br>        <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-title function_ invoke__">hello</span>(), <span class="hljs-string">&quot;Hello, world!&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>ç¼–ç¨‹è¯­è¨€</category>
      
      <category>Rust</category>
      
      <category>åŸºç¡€</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Ubuntuä¸‹çš„ä»£ç†é…ç½®</title>
    <link href="/2022/07/20/Ubuntu%E4%B8%8B%E7%9A%84%E4%BB%A3%E7%90%86%E9%85%8D%E7%BD%AE/"/>
    <url>/2022/07/20/Ubuntu%E4%B8%8B%E7%9A%84%E4%BB%A3%E7%90%86%E9%85%8D%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<h1 id="1-è½¯ä»¶é€‰æ‹©"><a class="markdownIt-Anchor" href="#1-è½¯ä»¶é€‰æ‹©"></a> 1. è½¯ä»¶é€‰æ‹©ï¼š</h1><blockquote><p>åœ¨2022å¹´ï¼Œclashå·²ç»æˆä¸ºäº†ä¸»æµçš„VPNå·¥å…·ï¼Œå› æ­¤è¿™ç¯‡ç¬”è®°ä¹Ÿä¸»è¦æ¨èclashçš„è½¯ä»¶ï¼Œè‡³äºéšç€æŠ€æœ¯å˜é©ï¼Œä¹Ÿåªæœ‰è½¯ä»¶çš„å˜åŒ–ï¼Œå…¶ä½™æ“ä½œä»ç„¶ç»´æŒä¸å˜çš„ï½</p></blockquote><p>è¯´åˆ°clashï¼Œåœ¨Linuxä¸‹ï¼Œ<code>Clash for windows</code>å°±æ˜¯ä¸€ä¸ªæœ€å¥½ç”¨çš„è½¯ä»¶ï¼Œè¿™ä¸ªè½¯ä»¶æ”¯æŒmac osï¼Œwindowså’ŒLiinuxã€‚ï¼ˆå°½ç®¡ä»–çš„åå­—å¸¦æœ‰<code>for windows</code>ï¼Œæˆ–è®¸è¿™ä¸ªè½¯ä»¶æœ€åˆåªæ˜¯ä¸ºwindowså‡†å¤‡çš„ï¼‰</p><h1 id="2-ä»£ç†é…ç½®"><a class="markdownIt-Anchor" href="#2-ä»£ç†é…ç½®"></a> 2. ä»£ç†é…ç½®ï¼š</h1><p>Ubuntuç³»ç»Ÿé…ç½®ä»£ç†ï¼ŒæŒ‰ç…§å¦‚ä¸‹è¿›è¡Œæ“ä½œï¼š<code>è®¾ç½® -&gt; ç½‘ç»œ -&gt; ç½‘ç»œä»£ç†ï¼ˆé½¿è½®å›¾æ ‡ï¼‰-&gt; æ‰‹åŠ¨</code></p><p>éšåï¼Œåœ¨<code>HTTPä»£ç†</code>å’Œ<code>HTTPSä»£ç†</code>ä¸Šå¡«å†™IP: <code>127.0.0.1</code>å’Œport: <code>7890</code></p><blockquote><p>è¿™é‡ŒIP<code>127.0.0.1</code>å³å¯ï¼Œè‡³äºç«¯å£ï¼Œè¦çœ‹è½¯ä»¶ä¸­é€‰æ‹©ç›‘å¬çš„ç«¯å£å·ã€‚clashç›¸å…³è½¯ä»¶ä¸€èˆ¬æ˜¯<code>7890</code></p></blockquote><blockquote><p>! æ³¨æ„ï¼šä¸æ¨èåœ¨Ubuntuä¸‹ä½¿ç”¨socketä»£ç†ï¼Œå› ä¸ºæˆªè‡³2022å¹´ï¼Œè¶Šæ¥è¶Šå¤šçš„ç½‘ç«™å¼€å§‹ä½¿ç”¨websocketè¿›è¡Œæ•°æ®äº¤äº’ï¼Œæ ¹æ®å®é™…ä½“éªŒï¼Œå¼€å¯socketä»£ç†ä¼šå¯¼è‡´æ­¤ç±»ç½‘ç«™è¿æ¥å¼‚å¸¸ï¼ˆå‡ºç°connection errorçš„æƒ…å†µï¼‰ï¼Œæ¯”å¦‚grammarlyçš„wordæ’ä»¶å°±æ— æ³•æ­£å¸¸è¿è¡Œã€‚<br />ä¸è¿‡socketä»£ç†åªæœ‰<code>mac</code>å’Œ<code>linux</code>æ‰éœ€è¦è€ƒè™‘ï¼Œwindowså¹¶ä¸å­˜åœ¨ï¼ˆæˆ–è€…è¯´æˆ‘æ²¡æœ‰æ„ŸçŸ¥åˆ°ï¼‰ã€‚</p></blockquote><h2 id="21-é…ç½®å‘½ä»¤è¡Œä»£ç†"><a class="markdownIt-Anchor" href="#21-é…ç½®å‘½ä»¤è¡Œä»£ç†"></a> 2.1 é…ç½®å‘½ä»¤è¡Œä»£ç†ï¼š</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># HTTP_PROXY å’Œ http_proxy éƒ½è¡Œ</span><br><span class="hljs-built_in">export</span> http_proxy=127.0.0.1:7890<br><span class="hljs-built_in">export</span> https_proxy=127.0.0.1:7890<br></code></pre></td></tr></table></figure><blockquote><p>åœ¨å‘½ä»¤è¡Œè¾“å…¥å¦‚ä¸‹å‘½ä»¤åï¼Œä¸€èˆ¬å‘½ä»¤è¡Œä¸­å¤§éƒ¨åˆ†ç¨‹åºä¼šéµå¾ªæ­¤ä»£ç†ï¼Œç„¶è€Œäº‹æ— ç»å¯¹ï¼Œå› æ­¤åé¢ä¼šç»™å‡ºéƒ¨åˆ†ç¨‹åºçš„ä»£ç†è®¾ç½®æ–¹å¼ã€‚</p><p>åœ¨ubuntuè¾ƒæ—©ç‰ˆæœ¬ï¼Œæˆ‘è®°å¾—gitçš„ä»£ç†æ˜¯ä¸ç»è¿‡<code>http_proxy</code>çš„, éœ€è¦è¿™æ ·è®¾ç½®</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">git config --global https.proxy http://127.0.0.1:7890<br>git config --global https.proxy https://127.0.0.1:7890<br></code></pre></td></tr></table></figure><p>ä½†æ˜¯åœ¨ä½¿ç”¨Ubuntu20.04å’ŒUbuntu22.04æ—¶, å‘ç°gitä¼šä½¿ç”¨<code>http_proxy</code>ä¸­çš„ä»£ç†äº†, å› æ­¤gitå°±ä¸å•ç‹¬è®²äº†</p></blockquote><blockquote><p>Dockerçš„ä»£ç†åˆ™æ›´ä¸ºå¤æ‚, å› ä¸ºåœ¨Dockerfileæ„å»ºè¿‡ç¨‹ä¸­, ç¯å¢ƒå˜é‡ä¼šè¢«æ„å»ºå‡ºçš„å®¹å™¨è‡ªèº«è¦†ç›–(æˆ–è€…è¯´æœ¬ä¸å­˜åœ¨è¦†ç›–,åªæ˜¯è‡ªç«‹æ›´ç”Ÿç½¢äº†), è€Œä¸”å®¹å™¨ä¸Hostä¹‹é—´çš„ç½‘ç»œæ˜ å°„å’Œç«¯å£é—®é¢˜åˆè’™ä¸Šä¸€å±‚çº±, å› æ­¤Dockerçš„ä»£ç†è®¾ç½®ä¼šå•ç‹¬åˆ—å‡ºä¸€èŠ‚, ä¸è¿‡ç­‰æ—¥åæˆ‘å†æ¬¡é‡åˆ°è¿™ç§åœºæ™¯æ—¶å†ä»”ç»†æ€»ç»“ä¸€ä¸‹.</p></blockquote><h2 id="22-apt-getä»£ç†è®¾ç½®"><a class="markdownIt-Anchor" href="#22-apt-getä»£ç†è®¾ç½®"></a> 2.2 apt-getä»£ç†è®¾ç½®</h2><p>æœ‰ä¸¤ç§å¯é€‰çš„æ–¹å¼:</p><ol><li><code>sudo vim /etc/apt/apt.conf</code></li><li>åœ¨<code>/etc/apt/apt.conf.d/</code>ä¸‹åˆ›å»ºä¸€ä¸ªå•ç‹¬çš„é…ç½®æ–‡ä»¶(æ¨æµ‹è¯¥ç›®å½•åº”è¯¥æ˜¯APTçš„é…ç½®å¯¼å…¥ç›®å½•), ç„¶åæ·»åŠ å†…å®¹</li></ol><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">Acquire:</span>:http::Proxy <span class="hljs-string">&quot;http://yourproxyaddress:proxyport&quot;</span><span class="hljs-punctuation">;</span><br><span class="hljs-meta"># å¦‚æœä½ çš„ä»£ç†éœ€è¦ç™»é™†, é‚£ä¹ˆå°†urlæ”¹ä¸º:</span><br><span class="hljs-meta"># <span class="hljs-string">&quot;http://username:password@yourproxyaddress:proxyport&quot;</span>;</span><br></code></pre></td></tr></table></figure><h2 id="23-socksä»£ç†é…ç½®"><a class="markdownIt-Anchor" href="#23-socksä»£ç†é…ç½®"></a> 2.3 socksä»£ç†é…ç½®</h2><p>å¯¹äºæŸäº›åº”ç”¨ç¨‹åºæ˜¯æ— æ³•ä½¿ç”¨HTTPä»£ç†çš„ï¼Œè¿™æ—¶å€™ï¼Œéœ€è¦è®¾ç½®socketä»£ç†, Linuxå‘½ä»¤è¡Œå¹¶æ²¡æœ‰ç›´æ¥è®¾ç½®çš„æ–¹æ³•ï¼Œéœ€è¦åœ¨ç³»ç»Ÿè®¾ç½®é‡Œè®¾ç½®ï¼Œå¦‚æœç”¨çš„è½¯ä»¶æ˜¯cfwï¼Œåˆ™è®¾ç½®ä¸º<code>127.0.0.1:7890</code>ï¼ä½†ä¸æ˜¯å¾ˆæ¨èè®¾ç½®ç³»ç»Ÿé‡Œçš„socksä»£ç†ï¼Œåªè®¾ç½®ç»ˆç«¯å°±å¤Ÿäº†ï¼</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># terminal</span><br><span class="hljs-built_in">export</span> all_proxy=socks5://127.0.0.1:7890<br></code></pre></td></tr></table></figure><h2 id="24-git-sshç«¯å£ä»£ç†"><a class="markdownIt-Anchor" href="#24-git-sshç«¯å£ä»£ç†"></a> 2.4 git sshç«¯å£ä»£ç†</h2><blockquote><p>è¿™é‡Œè¿˜åˆ—å‡ºgitçš„åŸå› æ˜¯, æœ‰æ—¶å€™, å¹¶ä¸é€šè¿‡htpsæ‹‰å–å’Œä¸Šä¼ ä»£ç , è®¾ç½®çš„æ˜¯SSHç«¯å£çš„ä»“åº“é“¾æ¥, è¿™æ—¶å€™ä»£ç†å°±å®Œå…¨æ²¡ç”¨äº†, éœ€è¦é¢å¤–è®¾ç½®.</p></blockquote><p>ç¼–è¾‘<code>~/.ssh/config</code>, ç„¶ååŸºæœ¬åº”è¯¥æ²¡å¾—é—®é¢˜äº†~</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs config">Host github.com<br>    ProxyCommand          nc -X connect -x 127.0.0.1:7890 %h %p<br>    ServerAliveInterval   10<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>æ“ä½œç³»ç»Ÿ</category>
      
      <category>Linux</category>
      
      <category>Ubuntu</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Attributes</title>
    <link href="/2022/07/20/Attribute/"/>
    <url>/2022/07/20/Attribute/</url>
    
    <content type="html"><![CDATA[<h1 id="rustçš„attribute"><a class="markdownIt-Anchor" href="#rustçš„attribute"></a> Rustçš„<code>Attribute</code></h1><blockquote><p>å‚è€ƒèµ„æ–™: <a href="https://doc.rust-lang.org/reference/attributes.html">Attribute</a></p></blockquote><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">Syntax</span><br><span class="hljs-attribute">InnerAttribute </span><span class="hljs-punctuation">:</span><br>   <span class="hljs-comment"># ! [ Attr ]</span><br><br><span class="hljs-attribute">OuterAttribute </span><span class="hljs-punctuation">:</span><br>   <span class="hljs-comment"># [ Attr ]</span><br><br><span class="hljs-attribute">Attr </span><span class="hljs-punctuation">:</span><br>   <span class="hljs-attribute">SimplePath AttrInput?</span><br><span class="hljs-attribute"></span><br><span class="hljs-attribute">AttrInput </span><span class="hljs-punctuation">:</span><br>      DelimTokenTree<br>   | = Expression<br></code></pre></td></tr></table></figure><blockquote><ul><li>Inner attributes, written with a bang (!) after the hash (#), apply to the item that the attribute is declared within.</li><li>Outer attributes, written without the bang after the hash, apply to the thing that follows the attribute.</li></ul></blockquote><p><code>Attributes</code>èƒ½å¤Ÿåˆ†ç±»ä¸ºä»¥ä¸‹å‡ ç±»:</p><ul><li><a href="https://doc.rust-lang.org/reference/attributes.html#built-in-attributes-index">built-in attributes</a></li><li><a href="https://doc.rust-lang.org/reference/procedural-macros.html#attribute-macros">Macro attributes</a></li><li><a href="https://doc.rust-lang.org/reference/procedural-macros.html#derive-macro-helper-attributes">Derive macro helper attributes</a></li><li><a href="https://doc.rust-lang.org/reference/attributes.html#tool-attributes">Tool attributes</a></li></ul><h1 id="1-testing-attributes"><a class="markdownIt-Anchor" href="#1-testing-attributes"></a> 1. Testing Attributes</h1><blockquote><p>å‚è€ƒèµ„æ–™: <a href="https://doc.rust-lang.org/reference/attributes/testing.html">https://doc.rust-lang.org/reference/attributes/testing.html</a></p><p>The <code>test</code> attribute marks a function to be executed as a test.</p></blockquote><h1 id="derive"><a class="markdownIt-Anchor" href="#derive"></a> Derive</h1><blockquote><p><code>Derive</code>ä½œç”¨ä¸»è¦æœ‰ä¸¤ç‚¹:</p><ol><li>use the <a href="https://doc.rust-lang.org/reference/attributes.html#meta-item-attribute-syntax">MetaListPaths</a>  to specify a list of traits to implement</li><li>or paths to <a href="https://doc.rust-lang.org/reference/procedural-macros.html#derive-macros">derive macro</a> to process</li></ol></blockquote><p>ç®€è€Œè¨€ä¹‹, deriveçš„ä½œç”¨ä¸€ä¸ªæ˜¯æŒ‡å®štrait(å¯ä»¥è®¤ä¸ºæ˜¯Javaä¸­<code>æ¥å£</code>çš„è¿‘äº²), å¦ä¸€ä¸ªä½œç”¨æ˜¯æŒ‡å®š<code>derive macro</code>å®.</p>]]></content>
    
    
    <categories>
      
      <category>ç¼–ç¨‹è¯­è¨€</category>
      
      <category>Rust</category>
      
      <category>Atributes</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>äº‘æœåŠ¡å™¨å¿«é€Ÿé…ç½®SSLè¯ä¹¦</title>
    <link href="/2022/07/19/%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%BF%AB%E9%80%9F%E9%85%8D%E7%BD%AESSL%E8%AF%81%E4%B9%A6/"/>
    <url>/2022/07/19/%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%BF%AB%E9%80%9F%E9%85%8D%E7%BD%AESSL%E8%AF%81%E4%B9%A6/</url>
    
    <content type="html"><![CDATA[<p>åœ¨æœåŠ¡å™¨ä¸Šé…ç½®SSLè¯ä¹¦ä¸€èˆ¬æ¥è¯´å¦‚æœä¸ç†Ÿæ‚‰çš„è¯éå¸¸éº»çƒ¦ï¼Œæ›´åˆ«ææœ‰é‚£ä¹ˆå¤šç§web serveräº†, ç”šè‡³ä¸åŒçš„ç‰ˆæœ¬ã€æ“ä½œç³»ç»Ÿï¼Œæ–¹æ³•åˆæœ‰ä¸åŒã€‚æƒ³è¦å¿«é€Ÿçš„é…ç½®SSLè¯ä¹¦ï¼Œå¯ä»¥ä½¿ç”¨<code>certbot</code><sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="https://certbot.eff.org/">[1]</span></a></sup>å·¥å…·.</p><blockquote><p><a href="https://certbot.eff.org/">https://certbot.eff.org/</a></p></blockquote><p>å…·ä½“æ“ä½œå¯ä»¥è¿›è¡Œè¿›å®˜ç½‘çœ‹,å°±ä¸è¯¦ç»†å¤è¿°äº†. éœ€è¦æ³¨æ„çš„æ˜¯, åœ¨ä¸ºapacheé…ç½®æ—¶,éœ€è¦å®‰è£…<code>python-certbot-apache</code>è¿™ä¸ªæ’ä»¶. è™½ç„¶è¿™ç¬”è®°å¾ˆçŸ­, ä½†è¿™ä¸ªå·¥å…·äº²æµ‹æ˜¯çœŸçš„å¥½ç”¨~</p><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://certbot.eff.org/">https://certbot.eff.org/</a><a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>æ”¶è—</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Linuxå†…æ ¸ä¸æ ¹æ–‡ä»¶ç³»ç»Ÿ</title>
    <link href="/2022/07/18/Linux%E5%86%85%E6%A0%B8%E4%B8%8E%E6%A0%B9%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/"/>
    <url>/2022/07/18/Linux%E5%86%85%E6%A0%B8%E4%B8%8E%E6%A0%B9%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/</url>
    
    <content type="html"><![CDATA[<h1 id="1-linuxå†…æ ¸æ˜ åƒçš„æ„æˆ"><a class="markdownIt-Anchor" href="#1-linuxå†…æ ¸æ˜ åƒçš„æ„æˆ"></a> 1. Linuxå†…æ ¸æ˜ åƒçš„æ„æˆ</h1><p><img src="https://imagebed.torch-fan.site/2022/blog/110acb08-83f4-4511-922e-f0cc2e6f5641_.png" alt="å†…æ ¸æ˜ åƒbzImageçš„æ„æˆ" /></p><blockquote><p>Linuxå†…æ ¸æœ‰å¤šç§æ ¼å¼çš„æ˜ åƒï¼ŒåŒ…æ‹¬vmlinuxã€Imageã€zImageã€bzImageã€uImageã€xipImageã€bootpImageç­‰<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="https://www.cnblogs.com/lemaden/p/10438499.html">[1]</span></a></sup></p></blockquote><p>â€‹<code>vmlinux</code>æ˜¯å¯å¼•å¯¼çš„, å¯å‹ç¼©çš„å†…æ ¸æ˜ åƒ. vmè¡¨ç¤ºvirtual memory, è¡¨ç¤ºlinuxæ”¯æŒè™šæ‹Ÿå†…å­˜, å› æ­¤å¾—åvmlinux. å®ƒç”±ç”¨æˆ·å¯¹å†…æ ¸æºç ç¼–è¯‘å¾—åˆ°, <font color='cyan'><strong>å®è´¨ä¸Šæ˜¯elfæ ¼å¼çš„æ–‡ä»¶</strong></font>, ä¹Ÿå¯ä»¥è¯´vmlinuxæ˜¯ç¼–è¯‘å‡ºæ¥çš„æœ€<strong>åŸå§‹çš„å†…æ ¸æ–‡ä»¶</strong>.</p><blockquote><p>ELF(Executable and Linkable Format) æ˜¯å¯æ‰§è¡Œå¯é“¾æ¥æ ¼å¼, æ˜¯UNIXå®éªŒå®¤ä½œä¸ºåº”ç”¨ç¨‹åºäºŒè¿›åˆ¶æ¥å£è€Œå‘å¸ƒçš„ (Unix/Linuxä¸Šç¼–è¯‘å‹è¯­è¨€æœ€åç¼–è¯‘çš„å¯æ‰§è¡Œæ–‡ä»¶å°±æ˜¯ELFæ ¼å¼çš„),</p></blockquote><p><img src="https://imagebed.torch-fan.site/2022/blog/20220717084046.png" alt="å†…æ ¸æ˜ åƒæ–‡ä»¶ä½ç½®" /></p><p>â€‹vmlinuxæ˜¯å¯æ‰§è¡Œçš„Linuxå†…æ ¸, ä½äº/boot/vmlinux, ä¸€èˆ¬æ˜¯ä¸€ä¸ªè½¯é“¾æ¥, <code>vmlinuz</code>æ˜¯<code>vmlinux</code>çš„å‹ç¼©æ–‡ä»¶, <code>vmlinuz</code>çš„åˆ›å»ºæ–¹å¼æœ‰ä¸¤ç§:</p><ol><li>å†…æ ¸ç¼–è¯‘æ—¶é€šè¿‡<code>make zImage</code>åˆ›å»º</li><li>å†…æ ¸ç¼–è¯‘æ—¶é€šè¿‡<code>make bzImage</code>åˆ›å»º</li></ol><p>â€‹å›åˆ°æœ€ä¸Šé¢bzImageå†…æ ¸æ˜ åƒçš„æ„æˆ, ä½¿ç”¨èˆªå¤©å™¨çš„ä¾‹å­. <code>setup.bin</code>å°±åƒç«ç®­çš„ä¸€çº§æ¨è¿›å­ç³»ç»Ÿ, æœ€åˆè¿™éƒ¨åˆ†è´Ÿè´£å°†å†…æ ¸åŠ è½½è¿›å†…å­˜, å¹¶ä¸ºåé¢å†…æ ¸ä¿æŠ¤æ¨¡å¼çš„è¿è¡Œå»ºç«‹åŸºæœ¬çš„ç¯å¢ƒ. åæ¥åŠ è½½å†…æ ¸çš„åŠŸèƒ½è¢«åˆ†ç¦»åˆ°Bootloaderä¸­, setup.binåˆ™é€€åŒ–ä¸ºè¾…åŠ©Bootloaderå°†å†…æ ¸åŠ è½½åˆ°å†…å­˜.</p><p>â€‹å†è¿›ä¸€æ­¥æ‹†åˆ†, åŒ…å›´åœ¨32ä½ä¿æŠ¤æ¨¡å¼éƒ¨åˆ†å¤–çš„æ˜¯éå‹ç¼©éƒ¨åˆ†, è¿™éƒ¨åˆ†å¯ä»¥çœ‹ä½œæ˜¯ç«ç®­çš„äºŒçº§æ¨è¿›å­ç³»ç»Ÿ, è´Ÿè´£å°†å‹ç¼©çš„å†…æ ¸è§£å‹åˆ°åˆé€‚çš„ä½ç½®, å¹¶è¿›è¡Œå†…æ ¸é‡å®šä½, åœ¨å®Œæˆè¿™ä¸ªç¯èŠ‚å, å…¶ä»å†…æ ¸æ˜ åƒè„±ç¦».</p><p>â€‹æœ€åæ˜¯å†…æ ¸çš„32ä½ä¿æŠ¤æ¨¡å¼éƒ¨åˆ†vmlinux. è¿™éƒ¨åˆ†ç›¸å½“äºèˆªå¤©å™¨çš„æœ‰æ•ˆè´Ÿè½½. æœ€ç»ˆåªæœ‰è¿™éƒ¨åˆ†ä¼šè¢«ç•™åœ¨å†…å­˜ä¸­, å†…å­˜æ„å»ºæ—¶, å°†å¯¹vmlinuxè¿›è¡Œå‹ç¼©, ç„¶åä¸äºŒçº§æ¨è¿›ç³»ç»Ÿè£…é…ä¸º<code>vmlinux.bin</code></p><h2 id="11-ä¸€çº§æ¨è¿›ç³»ç»Ÿ-setupbin"><a class="markdownIt-Anchor" href="#11-ä¸€çº§æ¨è¿›ç³»ç»Ÿ-setupbin"></a> 1.1 ä¸€çº§æ¨è¿›ç³»ç»Ÿ: <code>setup.bin</code></h2><p>â€‹åœ¨è¿›è¡Œå†…æ ¸åˆå§‹åŒ–æ—¶, éœ€è¦ä¸€äº›ä¿¡æ¯, å¦‚æ˜¾ç¤ºä¿¡æ¯ã€å†…å­˜ä¿¡æ¯ç­‰ã€‚è¿™äº›ä¿¡æ¯æ›¾ç»ç”±å·¥ä½œåœ¨å®æ¨¡å¼ä¸‹çš„<code>setup.bin</code>é€šè¿‡BIOSè·å–ï¼Œä¿å­˜åœ¨å†…æ ¸çš„å˜é‡<code>boot_param</code>ä¸­.</p><h2 id="12-äºŒçº§æ¨è¿›ç³»ç»Ÿ-å†…æ ¸éå‹ç¼©éƒ¨åˆ†"><a class="markdownIt-Anchor" href="#12-äºŒçº§æ¨è¿›ç³»ç»Ÿ-å†…æ ¸éå‹ç¼©éƒ¨åˆ†"></a> 1.2 äºŒçº§æ¨è¿›ç³»ç»Ÿ: <code>å†…æ ¸éå‹ç¼©éƒ¨åˆ†</code></h2><p>â€‹å†…æ ¸çš„ä¿æŠ¤æ¨¡å¼éƒ¨åˆ†æ˜¯ç»è¿‡å‹ç¼©çš„, å› æ­¤è¿è¡Œå‰éœ€è¦è§£å‹ç¼©. æ—¢ç„¶å†…æ ¸åœ¨æ„å»ºæ—¶è‡ªå·±å‹ç¼©äº†è‡ªå·±, è§£å‹ç¼©æ—¶ä¹Ÿéœ€è¦ç”±å†…æ ¸æ˜ åƒè‡ªå·±å®Œæˆ.</p><p>â€‹å†…æ ¸åœ¨å‹ç¼©çš„æ˜ åƒå¤–éƒ¨åŒ…å›´äº†ä¸€éƒ¨åˆ†éå‹ç¼©çš„ä»£ç , Bootloaderåœ¨åŠ è½½å†…æ ¸æ˜ åƒåè·³è½¬è‡³å¤–å›´çš„è¿™æ®µéå‹ç¼©éƒ¨åˆ†. è¿™äº›æ²¡æœ‰ç»è¿‡å‹ç¼©çš„æŒ‡ä»¤å¯ä»¥ç›´æ¥ç»™CPUæ‰§è¡Œ, è¿™æ®µæŒ‡ä»¤æ°æ°è´Ÿè´£è§£å‹å†…æ ¸çš„å‹ç¼©éƒ¨åˆ†.</p><p>â€‹é™¤äº†è§£å‹å¤–, éå‹ç¼©éƒ¨åˆ†è¿˜è´Ÿè´£å†…æ ¸é‡å®šä½. å†…æ ¸å¯ä»¥é…ç½®ä¸º<code>å¯é‡å®šä½çš„(relocatable)</code>. æ‰€è°“å¯é‡å®šä½å³å†…æ ¸å¯ä»¥è¢«BootloaderåŠ è½½åˆ°å†…å­˜çš„ä»»ä½•åŒºåŸŸ, ä½†æ˜¯åœ¨é“¾æ¥å†…æ ¸æ—¶, é“¾æ¥å™¨éœ€è¦å‡å®šä¸€ä¸ªåŠ è½½åœ°å€, ç„¶åè¿™ä¸ªå‡å®šåœ°å€ä¸ºå‚è€ƒ, ä¸ºå„ä¸ªç¬¦å·åˆ†é…è¿è¡Œåœ°å€. å¦‚æœåŠ è½½åœ°å€å’Œé“¾æ¥æ—¶å‡å®šçš„åœ°å€ä¸åŒ, é‚£ä¹ˆéœ€è¦å¯¹ç¬¦å·çš„åœ°å€è¿›è¡Œé‡æ–°ä¿®è®¢, è¿™å°±æ˜¯å†…æ ¸é‡å®šä½.</p><blockquote><p>å†…æ ¸çš„éå‹ç¼©éƒ¨åˆ†å·¥ä½œåœ¨ä¿æŠ¤æ¨¡å¼ä¸‹, å…¶å ç”¨çš„å†…å­˜åœ¨å®Œæˆä½¿å‘½åå°†è¢«é‡Šæ”¾.</p></blockquote><h2 id="13-æœ‰æ•ˆè½½è·-vmlinux"><a class="markdownIt-Anchor" href="#13-æœ‰æ•ˆè½½è·-vmlinux"></a> 1.3 æœ‰æ•ˆè½½è·: <code>vmlinux</code></h2><blockquote><p>ç¼–è¯‘æ—¶, kbuildåˆ†åˆ«æ„å»ºå†…æ ¸å„ä¸ªå­ç›®å½•ä¸­çš„ç›®æ ‡æ–‡ä»¶, ç„¶åå°†å®ƒä»¬é“¾æ¥ä¸ºvmlinux, ä¸ºäº†ç¼©å°å†…æ ¸ä½“ç§¯, kbuildåˆ é™¤äº†vmlinuxä¸­ä¸€äº›ä¸å¿…è¦çš„ä¿¡æ¯, å¹¶å°†å…¶å‘½åä¸ºvmlinux.bin, æœ€åå°†vmlinux.binå‹ç¼©ä¸ºvmlinux.bin.gz. é»˜è®¤æƒ…å†µä¸‹, å†…æ ¸ä½¿ç”¨gzipå‹ç¼©, ä¹Ÿå¯ä»¥é…ç½®ä¸ºä½¿ç”¨å…¶ä»–å‹ç¼©æ ¼å¼, ä½†æ˜¯gzipå‹ç¼©é€Ÿåº¦æœ€å¿«(ä½†æ˜¯å‹ç¼©æ¯”è¾ƒå°)</p></blockquote><p><font color="yellow">ä¸ºä»€ä¹ˆå†…æ ¸éœ€è¦è¿›è¡Œå‹ç¼©å‘¢?</font></p><ol><li>åœ¨æœ€åˆ, å› ä¸ºæŸäº›ä½“ç³»æ¶æ„ä¸Š, ç‰¹åˆ«æ˜¯i386, ç³»ç»Ÿå¯åŠ¨æ—¶è¿è¡Œäº<code>å®æ¨¡å¼çŠ¶æ€</code>, å¯ä»¥å¯»å€ç©ºé—´åªèƒ½åœ¨1MBä»¥ä¸‹, å¦‚æœå†…æ ¸å°ºå¯¸è¿‡å¤§, å°†æ— æ³•æ­£å¸¸åŠ è½½, å› æ­¤éœ€è¦å¯¹å†…æ ¸è¿›è¡Œå‹ç¼©. åœ¨å†…æ ¸åŠ è½½å®Œæ¯•å, CPUåˆ‡æ¢åˆ°ä¿æŠ¤æ¨¡å¼, å¯ä»¥å¯»å€æ›´å¤§çš„åœ°å€ç©ºé—´, äºæ˜¯å°±å¯ä»¥å°†å‹ç¼©è¿‡çš„å†…æ ¸å±•å¼€äº†.</li><li>2.4ä»¥åŠæ›´æ—©çš„å†…æ ¸ç‰ˆæœ¬, éœ€è¦å¯ä»¥å®¹çº³åœ¨ä¸€å¼ è½¯ç›˜ä¸Š, æ‰€ä»¥å†…æ ¸ä¹Ÿè¦è¿›è¡Œå‹ç¼©</li></ol><p>â€‹ä½†é‚£äº›éƒ½æ˜¯å†å²åŸå› , å¦‚ä»Šçš„ä¸€äº›Bootloader(è­¬å¦‚<font color='cyan'>GRUB</font>), åœ¨åŠ è½½å†…æ ¸æœŸé—´å°±å·²ç»å°†CPUåˆ‡æ¢åˆ°ä¿æŠ¤æ¨¡å¼äº†, å¯»å€ç©ºé—´çš„é™åˆ¶æ—©å·²ä¸æ˜¯é—®é¢˜. ä½†æ˜¯å†…å­˜çš„å‹ç¼©ä»ç„¶ä¿ç•™ä¸‹æ¥, ä»ç„¶è€ƒè™‘åˆ°æŸäº›å—é™çš„æƒ…å†µ, ä»¥åŠç°ä»£CPUè§£å‹çš„é€Ÿåº¦è¦è¿œå¤§äºIOé€Ÿåº¦, æ›´å°çš„å†…æ ¸ä¹Ÿèƒ½å‡å°‘åŠ è½½æ—¶é—´.</p><h2 id="14-æ˜ åƒæ ¼å¼"><a class="markdownIt-Anchor" href="#14-æ˜ åƒæ ¼å¼"></a> 1.4 æ˜ åƒæ ¼å¼</h2><p>â€‹ä¸è®ºæ˜¯setup.binã€vmlinux.binï¼Œè¿˜æ˜¯vmlinux.bin.gz, å‘½åä¸­éƒ½åŒ…å«â€™binâ€™, è¿™æ˜¯<code>binary</code>çš„ç¼©å†™. ç„¶è€Œå¯èƒ½ä¼šæœ‰ä¸ªç–‘æƒ‘: Linuxç³»ç»Ÿä¸ŠäºŒè¿›åˆ¶æ–‡ä»¶çš„æ ¼å¼ä¸æ˜¯ç”¨ABI(Application Binary Interface)è§„å®šçš„ELFå—?</p><p>â€‹Linuxæ“ä½œç³»ç»Ÿæä¾›çš„hosted environmentä¸‹, äºŒè¿›åˆ¶æ–‡ä»¶ä½¿ç”¨ELFæ ¼å¼, æ“ä½œç³»ç»Ÿä¹Ÿæä¾›ELFæ–‡ä»¶çš„åŠ è½½å™¨. ä½†æ˜¯Linuxæ“ä½œç³»ç»Ÿæœ¬èº«å´æ˜¯å·¥ä½œåœ¨freestanding environmentä¸‹, æ˜¾ç„¶ä¸èƒ½å¼ºæ±‚Bootloaderä¹Ÿæä¾›ELFåŠ è½½å™¨.</p><p>â€‹äº‹å®ä¸Š, Linux 2.6.26å¼€å§‹, å†…æ ¸çš„å‹ç¼©éƒ¨åˆ†(å³æœ‰æ•ˆè´Ÿè·)å°±å¼€å§‹é‡‡ç”¨äº†ELFæ ¼å¼, ä¸‹é¢æ˜¯Patchçš„æäº¤è€…ç»™å‡ºçš„åŸå› :</p><blockquote><p>This allows other boot loaders such as the Xen domain builder the opptunity to extract the ELF file.</p></blockquote><p>â€‹åœ¨è§£å‹å†…æ ¸æ˜ åƒå, ä¼šè·³è½¬åˆ°è§£å‹æ˜ åƒçš„å¼€å¤´æ‰§è¡Œ, ä½†æ˜¯ELFæ–‡ä»¶çš„å¼€å¤´å¹¶ä¸æ˜¯ä»£ç æ®µçš„å¼€å§‹, è€Œæ˜¯ELFæ–‡ä»¶å¤´, å³å¹¶éCPUå¯æ‰§è¡Œçš„æœºå™¨æŒ‡ä»¤.å› æ­¤éœ€è¦ä¸€ä¸ªELFåŠ è½½å™¨æ¥å°†ELFæ ¼å¼çš„å†…æ ¸æ˜ åƒè½¬æ¢ä¸ºè€Œè£¸äºŒè¿›åˆ¶æ ¼å¼. æ­¤æ—¶, å†…æ ¸çš„éå‹ç¼©éƒ¨åˆ†è°ƒç”¨å‡½æ•°<code>decompress</code>è§£å‹å†…æ ¸å, å°±ç´§æ¥ç€è°ƒç”¨å‡½æ•°<code>parse_elf</code>æ¥å¤„ç†ELFæ ¼å¼çš„å†…æ ¸æ˜ åƒ.</p><h1 id="2-æ ¹æ–‡ä»¶ç³»ç»Ÿ-rootfs"><a class="markdownIt-Anchor" href="#2-æ ¹æ–‡ä»¶ç³»ç»Ÿ-rootfs"></a> 2. æ ¹æ–‡ä»¶ç³»ç»Ÿ: <code>rootfs</code></h1><blockquote><p>Linuxçš„æ ¹æ–‡ä»¶ç³»ç»Ÿæ˜¯ä¾ç…§Filesystem Hierarchy Standard Groupåˆ¶å®šçš„Filesystem Hierarchy Standardï¼ˆFHSï¼‰æ ‡å‡†ã€‚æœåŠ¡å™¨ã€ä¸ªäººè®¡ç®—æœºåˆ°åµŒå…¥å¼ç³»ç»Ÿï¼Œè™½ç„¶ä¸ä¼šå®Œå…¨ç¬¦åˆæ ‡å‡†ï¼Œä½†æ€»ä½“ä¸Šè¿˜æ˜¯éµå¾ªã€‚</p></blockquote><table><thead><tr><th>ç›®å½•</th><th>å†…å®¹</th></tr></thead><tbody><tr><td>/bin</td><td>ä¿å­˜ç³»ç»Ÿç®¡ç†å‘˜ä¸ç”¨æˆ·å‡ä¼šä½¿ç”¨çš„é‡è¦å‘½ä»¤</td></tr><tr><td>/boot</td><td>ç³»ç»Ÿå¼€æœºä½¿ç”¨çš„æ–‡ä»¶ï¼Œå¦‚å†…æ ¸æ˜ åƒå’Œboot loaderç›¸å…³çš„æ–‡ä»¶</td></tr><tr><td>/dev</td><td>è®¾å¤‡æ–‡ä»¶</td></tr><tr><td>/etc</td><td>ç³»ç»Ÿé…ç½®</td></tr><tr><td>/lib</td><td>é‡è¦çš„åº“æ–‡ä»¶å’Œå†…æ ¸æ¨¡å—</td></tr><tr><td>/media</td><td>å¯ç§»åŠ¨å­˜å‚¨ä»‹è´¨çš„æŒ‚è½½ç‚¹</td></tr><tr><td>/mnt</td><td>ä¸´æ—¶æŒ‚è½½ç‚¹ï¼Œç”¨æˆ·ä¹Ÿå¯ä»¥è‡ªè¡Œé€‰æ‹©ä¸€äº›ä¸´æ—¶æŒ‚è½½ç‚¹</td></tr><tr><td>/opt</td><td>ç”¨æˆ·è‡ªè¡Œå®‰è£…è½¯ä»¶çš„ä½ç½®ï¼Œé€šå¸¸ç”¨æˆ·ä¹Ÿä¼šé€‰æ‹©å°†è½¯ä»¶å®‰è£…åœ¨/usr/localä¸‹</td></tr><tr><td>/sbin</td><td>ç³»ç»Ÿç®¡ç†å‘˜ä½¿ç”¨çš„é‡è¦ç³»ç»Ÿå‘½ä»¤</td></tr><tr><td>/tmp</td><td>æ­£åœ¨æ‰§è¡Œçš„ç¨‹åºå­˜æ”¾çš„ä¸´æ—¶æ–‡ä»¶</td></tr><tr><td>/usr</td><td>åŒ…å«ç³»ç»Ÿä¸­å®‰è£…ä¸»è¦ç¨‹åºçš„ç›¸å…³æ–‡ä»¶ï¼Œç±»ä¼¼MS Windowsä¸­çš„â€œProgram filesâ€ç›®å½•</td></tr><tr><td>/var</td><td>é’ˆå¯¹çš„ä¸»è¦æ˜¯ç³»ç»Ÿè¿è¡Œè¿‡ç¨‹ä¸­ç»å¸¸å‘ç”Ÿå˜åŒ–çš„ä¸€äº›æ•°æ®ï¼Œæ¯”å¦‚cacheã€logã€ä¸´æ—¶çš„æ•°æ®åº“ã€æ‰“å°æœºçš„é˜Ÿåˆ—ç­‰</td></tr><tr><td>/home</td><td>ç”¨æˆ·ç›®å½•ä¿å­˜çš„åœ°æ–¹</td></tr><tr><td>/root</td><td>rootç”¨æˆ·çš„ç”¨æˆ·ç›®å½•</td></tr><tr><td>/srv</td><td>åœ¨æœåŠ¡å™¨ç‰ˆæœ¬ä¸Š, æœåŠ¡å™¨è½¯ä»¶ç”¨æ¥ä¿å­˜æ•°æ®çš„ç›®å½•, è­¬å¦‚wwwæœåŠ¡å™¨ä½¿ç”¨çš„ç½‘é¡µèµ„æ–™å°±å¯ä»¥æ”¾åœ¨<code>/srv/www</code>ä¸‹</td></tr></tbody></table><blockquote><p>å¯¹äº<code>/bin</code>ã€<code>/sbin</code>ã€<code>/usr/bin</code>ã€<code>/usr/sbin</code>:</p><ul><li><p>ç³»ç»Ÿç®¡ç†å…ƒå’Œæ™®é€šç”¨æˆ·éƒ½ä½¿ç”¨çš„é‡è¦å‘½ä»¤ä¿å­˜åœ¨<code>/bin</code>ä¸‹</p></li><li><p>ä»…ç”±ç³»ç»Ÿç®¡ç†å‘˜ä½¿ç”¨çš„é‡è¦å‘½ä»¤åˆ™ä¿å­˜åœ¨<code>/sbin</code>ä¸‹</p></li><li><p>ä¸æ˜¯å¾ˆé‡è¦çš„å‘½ä»¤åˆ™åˆ†åˆ«æ”¾ç½®åœ¨<code>/usr/bin</code>å’Œ<code>/usr/sbin</code>ä¸‹</p></li></ul></blockquote><blockquote><ul><li>é‡è¦çš„ç³»ç»Ÿåº“ä¸€èˆ¬æ”¾åœ¨<code>/lib</code>ä¸‹</li><li>å…¶ä»–åº“åˆ™å­˜æ”¾åœ¨<code>/usr/lib</code>ç›®å½•ä¸‹</li></ul></blockquote><h1 id="3-initramfs"><a class="markdownIt-Anchor" href="#3-initramfs"></a> 3. <code>initramfs</code></h1><blockquote><p><code>initramfs</code>çš„ä½œç”¨å¾ˆéš¾ç®€çŸ­æè¿°æ¸…æ¥š, å¯ä»¥ç®€å•è®¤ä¸ºæ˜¯å†…æ ¸ä¸æ ¹æ–‡ä»¶ç³»ç»Ÿä¹‹é—´çš„æ¡¥æ¢</p></blockquote><p>â€‹äº‹å®ä¸Š, ä¸éœ€è¦initramfs, å†…æ ¸ä¹Ÿèƒ½æˆåŠŸçš„æŒ‚è½½æ ¹æ–‡ä»¶ç³»ç»Ÿè¿›å…¥ç”¨æˆ·ç©ºé—´. é‚£æ˜¯å› ä¸ºå†…æ ¸ä¸­å¿…é¡»æœ‰å¯¹åº”çš„ç¡¬ç›˜é©±åŠ¨(æˆ–è€…å…¶ä»–ç¡¬ä»¶é©±åŠ¨). ç„¶è€Œé™¤éæ˜¯ä¸“ç”¨ç³»ç»Ÿ, ç³»ç»Ÿçš„ç¡¬ä»¶å¹³å°æ˜¯å¤šå˜çš„, ç”šè‡³åŒä¸€ä¸ªå¹³å°å¯èƒ½æ›´æ¢ç¡¬ä»¶. ä¸ºäº†å…¼å®¹æ›´å¤šç¡¬ä»¶å¹³å°, å¦‚æœå°†è¿™äº›é©±åŠ¨å…¨éƒ¨ç¼–è¯‘è¿›å†…æ ¸, å¹¶ä¸æ˜¯å¥½ä¸»æ„. å› ä¸ºæ¯ä¸€æ¬¡, ç³»ç»Ÿåªéœ€è¦ä¸€ç§é©±åŠ¨, å½“å‰æ—¶åˆ»å…¶ä»–é©±åŠ¨æ ¹æœ¬ç”¨ä¸ä¸Š.</p><p>â€‹å¦ä¸€æ–¹é¢, rootfså¯èƒ½ä¸åœ¨ä¸€ä¸ªç®€å•çš„ç¡¬ç›˜ä¸Š, è€Œæ˜¯ä½¿ç”¨äº†ç£ç›˜é˜µåˆ—RAID, æ ¹æ–‡ä»¶ç³»ç»Ÿå¯èƒ½æ¨ªè·¨å‡ ä¸ªå­˜å‚¨è®¾å¤‡, ç”šè‡³æ ¹æ–‡ä»¶ç³»ç»Ÿåœ¨ç½‘ç»œè®¾å¤‡ä¸Š. æ­¤æ—¶è¿˜éœ€è¦ç½‘å¡é©±åŠ¨ã€ç½‘ç»œé…ç½®ã€ç½‘ç»œè®¤è¯ï¼Œä»¥åŠé€šä¿¡çš„åŠ å¯†è§£å¯†ã€‚è¿™äº›å·¥ä½œå¦‚æœéƒ½ç”±å†…æ ¸å¤„ç†ï¼Œå†…æ ¸å°†å˜å¾—ååˆ†å¤æ‚ã€‚</p><p>â€‹è¿™æ—¶å°±æ˜¯å…ˆæœ‰é¸¡è¿˜æ˜¯å…ˆæœ‰è›‹çš„é—®é¢˜ï¼šå†…æ ¸è¦åŠ è½½è¿™äº›æ¨¡å—ï¼ˆé©±åŠ¨ï¼‰æ‰èƒ½æ­£ç¡®è¯†åˆ«rootfsæ‰€åœ¨çš„è®¾å¤‡ï¼Œä½†æ˜¯ä¿å­˜è¿™äº›æ¨¡å—çš„rootfsåˆå­˜å‚¨åœ¨è¿™äº›è®¾å¤‡ä¸Šã€‚</p><p>â€‹ä¸ºäº†è§£å†³è¿™ç§çƒ­æ’æ‹”é€‚é…é—®é¢˜ï¼Œå†…æ ¸å¼€å‘è€…è®¾è®¡äº†initramfsæœºåˆ¶ã€‚initramfsæ˜¯ä¸€ä¸ª<code>ä¸´æ—¶çš„æ–‡ä»¶ç³»ç»Ÿ</code>, å…¶ä¸­åŒ…å«äº†å¿…è¦çš„è®¾å¤‡é©±åŠ¨ä»¥åŠåŠ è½½é©±åŠ¨çš„å·¥å…·å’Œè¿è¡Œç¯å¢ƒ. ç”±ç¬¬ä¸‰æ–¹ç¨‹åº(å¦‚BootLoader)å°†initramfsä»ç¡¬ç›˜åŠ è½½è¿›å†…å­˜, ä»¥é©±åŠ¨ç¡¬ç›˜ä¸ºä¾‹, å†…æ ¸è½¬è€Œä»å†…å­˜ä¸­çš„initramfsä¸­è·å–ç¡¬ç›˜æ§åˆ¶ç›¸å…³çš„é©±åŠ¨äº†, ç»§è€Œé©±åŠ¨ç¡¬ç›˜, è®¿é—®ç¡¬ç›˜ä¸Šçš„æ ¹æ–‡ä»¶ç³»ç»Ÿ.</p><p>â€‹åœ¨åˆå§‹åŒ–çš„æœ€å, å†…æ ¸è¿è¡Œinitramfsä¸­çš„initç¨‹åº, è¯¥ç¨‹åºå°†æ¢æµ‹åˆ°ç¡¬ä»¶è®¾å¤‡ã€åŠ è½½å¯¹åº”é©±åŠ¨ï¼ŒæŒ‚è½½çœŸæ­£çš„æ–‡ä»¶ç³»ç»Ÿï¼Œæ‰§è¡Œæ–‡ä»¶ç³»ç»Ÿä¸Šçš„/sbin/initï¼Œä»è€Œåˆ‡æ¢åˆ°çœŸæ­£çš„ç”¨æˆ·ç©ºé—´ã€‚çœŸæ­£çš„æ–‡ä»¶ç³»ç»Ÿè¢«æŒ‚è½½åï¼Œinitramfså³å®Œæˆäº†ä½¿å‘½ï¼Œå…¶å ç”¨çš„å†…å­˜ä¹Ÿä¼šé‡Šæ”¾ã€‚</p><p>â€‹å¦‚æœå°†initramfsçš„åå­—æ‹†å¼€ï¼šinit ram fsï¼Œåˆå§‹ä¸€ä¸ªå†…å­˜ä¸­çš„æ–‡ä»¶ç³»ç»Ÿã€‚</p><blockquote><p>initrdæ˜¯åŸºäºramdiskæŠ€æœ¯çš„, è€Œramdiskå°±æ˜¯åŸºäºå†…å­˜çš„å—è®¾å¤‡(ä¸€æ—¦åˆ›å»ºæ—¶è®¾ç«‹äº†å¤§å°, å°±ä¸èƒ½åŠ¨æ€è°ƒæ•´; è®¿é—®å—è®¾å¤‡éœ€è¦ç¼“å­˜æœºåˆ¶, ä½†å¯¹äºå†…å­˜ä¸­çš„ä¼ªå—è®¾å¤‡, è¿™å¹¶ä¸åˆé€‚). é‰´äºæ­¤ç¼ºç‚¹, Linus Torvaldsæå‡ºç›´æ¥å°†cacheä½œä¸ºä¸€ä¸ªæ–‡ä»¶ç³»ç»ŸæŒ‚è½½ä½¿ç”¨, åŸºäºæ­¤, å®ç°äº†<code>ramfs</code>. ramdiskæœ¬è´¨æ˜¯åŸºäºå†…å­˜çš„å—è®¾å¤‡, è€Œramfsæ˜¯åŸºäºç¼“å­˜çš„æ–‡ä»¶ç³»ç»Ÿ, å› æ­¤ramfsæ²¡æœ‰ä¹‹å‰æ‰€è¯´çš„ä¸€äº›ç¼ºç‚¹, è­¬å¦‚ramfså¯ä»¥æ ¹æ®æ–‡ä»¶å¤§å°è‡ªç”±ä¼¸ç¼©å®¹é‡, ä¸”ramfsåŸºäºå·²æœ‰çš„ç¼“å­˜æœºåˆ¶, ä¸å¿…åƒramdiské‚£æ ·éœ€è¦å’Œç¼“å­˜ä¹‹é—´è¿›è¡Œé¢å¤–çš„ä¸€ç¯.</p><p>äºæ˜¯,ä»2.6å¼€å§‹, ä¼´éšç€ramfsçš„å‡ºç°, initramfså–ä»£äº†initrd.</p><p>ç„¶è€Œåœ¨Ubuntuçš„/bootç›®å½•ä¸­, è‡³ä»Šå¯ä»¥çœ‹åˆ°<code>initrd.img</code>çš„èº«å½±</p></blockquote><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://www.cnblogs.com/lemaden/p/10438499.html">https://www.cnblogs.com/lemaden/p/10438499.html</a><a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>æ“ä½œç³»ç»Ÿ</category>
      
      <category>Linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>è™šæ‹ŸåŒ–(2):è™šæ‹ŸåŒ–æ¦‚è¿°</title>
    <link href="/2022/07/16/%E8%99%9A%E6%8B%9F%E5%8C%96-2-%E8%99%9A%E6%8B%9F%E5%8C%96%E6%A6%82%E8%BF%B0/"/>
    <url>/2022/07/16/%E8%99%9A%E6%8B%9F%E5%8C%96-2-%E8%99%9A%E6%8B%9F%E5%8C%96%E6%A6%82%E8%BF%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="1-è™šæ‹ŸåŒ–æ¦‚è¿°"><a class="markdownIt-Anchor" href="#1-è™šæ‹ŸåŒ–æ¦‚è¿°"></a> 1. è™šæ‹ŸåŒ–æ¦‚è¿°</h1><blockquote><p>ä¸è®ºé‡‡ç”¨ä½•ç§è™šæ‹ŸåŒ–, VMMå¯¹ç‰©ç†èµ„æºçš„è™šæ‹Ÿå¯ä»¥å½’ç»“ä¸ºä¸‰ä¸ªä¸»è¦ä»»åŠ¡: <font color="cyan">å¤„ç†å™¨è™šæ‹ŸåŒ–</font>ã€<font color="cyan"><strong>å†…å­˜è™šæ‹ŸåŒ–</strong></font>å’Œ<font color="cyan"><strong>I/Oè™šæ‹ŸåŒ–</strong></font>ã€‚</p></blockquote><h2 id="11-å¯è™šæ‹ŸåŒ–æ¶æ„å’Œä¸å¯è™šæ‹ŸåŒ–æ¶æ„"><a class="markdownIt-Anchor" href="#11-å¯è™šæ‹ŸåŒ–æ¶æ„å’Œä¸å¯è™šæ‹ŸåŒ–æ¶æ„"></a> 1.1 å¯è™šæ‹ŸåŒ–æ¶æ„å’Œä¸å¯è™šæ‹ŸåŒ–æ¶æ„</h2><p>â€‹å‰æ–‡ç»™å‡ºäº†è™šæ‹ŸåŒ–çš„ä¸‰ç§ç‰¹å¾: åŒè´¨ã€é«˜æ•ˆå’Œèµ„æºå—æ§ã€‚å¦‚æœä¸èƒ½æ»¡è¶³çš„è¯ï¼Œå°±å¯ä»¥è¯´è¿™ä¸ªVMæ˜¯å¤±è´¥çš„ï¼Œæˆ–è€…è¯´VMMçš„éª—æœ¯å¹¶ä¸é«˜æ˜ã€‚ä¸ºäº†ç ”ç©¶å¯è™šæ‹ŸåŒ–çš„æ¡ä»¶ï¼Œéœ€è¦ä»æŒ‡ä»¤å¼€å§‹ç€æ‰‹ã€‚</p><p>â€‹å¤§å¤šæ•°çš„ç°ä»£è®¡ç®—æœºä½“ç³»ç»“æ„éƒ½æœ‰ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„<font color="red">ç‰¹æƒçº§</font>ï¼Œç”¨æ¥åˆ†éš”ç³»ç»Ÿè½¯ä»¶å’Œåº”ç”¨è½¯ä»¶. ç³»ç»Ÿä¸­æœ‰ä¸€äº›æ¶‰åŠç®¡ç†å…³é”®ç³»ç»Ÿèµ„æºçš„æŒ‡ä»¤ç§°ä¸º<font color="green">ç‰¹æƒæŒ‡ä»¤</font>, è¿™äº›æŒ‡ä»¤åªèƒ½åœ¨æœ€é«˜ç‰¹æƒçº§ä¸Šèƒ½å¤Ÿæ­£å¸¸è¿è¡Œ. å¦‚æœåœ¨éæœ€é«˜ç‰¹æƒçº§ä¸Šè¿è¡Œ, å°±ä¼šè§¦å‘ä¸€ä¸ªå¼‚å¸¸, å¤„ç†å™¨ä¼šé™·å…¥åˆ°æœ€é«˜ç‰¹æƒçº§äº¤ç”±ç³»ç»Ÿè½¯ä»¶æ¥å¤„ç†.</p><p>â€‹è™šæ‹ŸåŒ–ä¸–ç•Œé‡Œæœ‰ç±»æŒ‡ä»¤ç§°ä¸º<font color='cyan'>æ•æ„ŸæŒ‡ä»¤</font>, å³æ“ä½œç‰¹æƒèµ„æºçš„æŒ‡ä»¤, åŒ…æ‹¬ä¿®æ”¹è™šæ‹Ÿæœºçš„è¿è¡Œæ¨¡å¼æˆ–è€…ä¸‹é¢ç‰©ç†æœºçš„çŠ¶æ€. æ‰€æœ‰çš„ç‰¹æƒæŒ‡ä»¤éƒ½æ˜¯æ•æ„ŸæŒ‡ä»¤, ä½†ä¸æ˜¯æ‰€æœ‰çš„æ•æ„ŸæŒ‡ä»¤éƒ½æ˜¯ç‰¹æƒæŒ‡ä»¤.</p><blockquote><p>ä¸ºäº†è®©VMMå®Œå…¨æ§åˆ¶ç³»ç»Ÿèµ„æº, å®ƒä¸å…è®¸ç›´æ¥åœ¨VMä¸­æ‰§è¡Œæ•æ„ŸæŒ‡ä»¤. æ‰€æœ‰çš„æ•æ„ŸæŒ‡ä»¤å¿…é¡»ç»è¿‡VMMæˆ–è€…åœ¨VMMçš„å®¡æŸ¥ä¸‹å®Œæˆ. å› æ­¤, å°†VMMè¿è¡Œåœ¨ç³»ç»Ÿingçš„æœ€é«˜ç‰¹æƒçº§ä¸‹, è€Œå°†VMè¿è¡Œåœ¨éæœ€é«˜ç‰¹æƒçº§ä¸Š, å½“å®¢æˆ·æœºæ“ä½œç³»ç»Ÿå› æ‰§è¡Œæ•æ„ŸæŒ‡ä»¤è€Œé™·å…¥åˆ°VMMæ—¶, VMMæ¨¡æ‹Ÿæ‰§è¡Œå¼•èµ·å¼‚å¸¸çš„æ•æ„ŸæŒ‡ä»¤, è¿™ç§è¡Œä¸ºç§°ä¸º<font color="orange">&quot;é™·å…¥å†æ¨¡æ‹Ÿ&quot;</font>.</p></blockquote><p>â€‹é€šè¿‡&quot;é™·å…¥å†æ¨¡æ‹Ÿ&quot;å®ç°è™šæ‹ŸåŒ–çš„æ–¹æ³•æ˜¯æœ‰å‰ææ¡ä»¶çš„, æ‰€æœ‰çš„æ•æ„ŸæŒ‡ä»¤éƒ½å¿…é¡»æ˜¯ç‰¹æƒæŒ‡ä»¤, å¦åˆ™è™šæ‹ŸåŒ–çš„æ­£ç¡®æ€§éš¾ä»¥ä¿è¯. å› æ­¤, <font color='skyblue'>å¦‚æœä¸€ä¸ªä½“ç³»ä¸Šå­˜åœ¨æ•æ„ŸæŒ‡ä»¤ä¸å±äºç‰¹æƒæŒ‡ä»¤, é‚£ä¹ˆå…¶å°±å­˜åœ¨è™šæ‹ŸåŒ–æ¼æ´.(æœ‰äº›è®¡ç®—æœºä½“ç³»ç»“æ„æ˜¯å­˜åœ¨è™šæ‹ŸåŒ–æ¼æ´çš„, å°±æ˜¯è¯´å®ƒä»¬ä¸èƒ½å¾ˆé«˜æ•ˆåœ°æ”¯æŒç³»ç»Ÿè™šæ‹ŸåŒ–.)</font></p><blockquote><p>å…¶å®è¿™é‡Œå…³äºä¸ºä»€ä¹ˆ&quot;æ•æ„ŸæŒ‡ä»¤å¿…é¡»å…¨æ˜¯ç‰¹æƒæŒ‡ä»¤&quot;è¿˜æ˜¯æœ‰äº›ä¸å¤ªç†è§£, ä½†æ˜¯è¿™ä¸ªå°ç»†èŠ‚éœ€è¦è‡ªè¡Œè¡¥å……ç›¸å…³çŸ¥è¯†. æˆ‘è§‰å¾—å¯èƒ½æ˜¯ä¹¦ç±ç¿»è¯‘çš„é—®é¢˜, è¿™é‡Œæ•æ„Ÿå’Œç‰¹æƒçš„å®šä¹‰æ²¡æœ‰é˜è¿°çš„å¾ˆæ¸…æ¥š.</p></blockquote><p>è™šæ‹ŸåŒ–æ¼æ´è™½ç„¶å¯èƒ½å­˜åœ¨, ä½†æ˜¯å¯ä»¥é‡‡å–ä¸€äº›åŠæ³•æ¥é¿å…è¿™äº›æ¼æ´, è­¬å¦‚é€šè¿‡<font color='cyan'>æ¨¡æ‹Ÿ</font>çš„æ–¹æ³•, æ¯æ¬¡å–å‡ºä¸€æ¡æŒ‡ä»¤, æ¨¡æ‹Ÿå‡ºè¿™æ¡æŒ‡ä»¤åœ°æ‰§è¡Œæ•ˆæœ,å†å–å‡ºä¸‹ä¸€æ¡æŒ‡ä»¤, è¿™ç§æ–¹æ³•è¿˜å…è®¸æ¨¡æ‹Ÿä¸åŒä½“ç³»ç»“æ„çš„è™šæ‹Ÿæœº,ä½†æ˜¯æ€§èƒ½å¤ªå·®.</p><h2 id="12-å¤„ç†å™¨æ¨¡æ‹Ÿ"><a class="markdownIt-Anchor" href="#12-å¤„ç†å™¨æ¨¡æ‹Ÿ"></a> 1.2 å¤„ç†å™¨æ¨¡æ‹Ÿ</h2><blockquote><p>å¤„ç†å™¨æ¨¡æ‹Ÿæ˜¯VMMä¸­æœ€æ ¸å¿ƒçš„éƒ¨åˆ†, å› ä¸ºè®¿é—®å†…å­˜å’ŒI/Oçš„æŒ‡ä»¤æœ¬èº«å°±æ˜¯æ•æ„ŸæŒ‡ä»¤, æ‰€ä»¥å†…å­˜è™šæ‹ŸåŒ–å’ŒI/Oè™šæ‹ŸåŒ–ä¹Ÿéƒ½ä¾èµ–äºå¤„ç†å™¨è™šæ‹ŸåŒ–</p></blockquote><h3 id="121-æŒ‡ä»¤çš„æ¨¡æ‹Ÿ"><a class="markdownIt-Anchor" href="#121-æŒ‡ä»¤çš„æ¨¡æ‹Ÿ"></a> 1.2.1 æŒ‡ä»¤çš„æ¨¡æ‹Ÿ:</h3><ul><li>è™šæ‹Ÿå¯„å­˜å™¨</li><li>ä¸Šä¸‹æ–‡</li><li>è™šæ‹Ÿå¤„ç†å™¨</li></ul><blockquote><p>åœ¨æ²¡æœ‰è™šæ‹ŸåŒ–çš„ç¯å¢ƒé‡Œ, æ“ä½œç³»ç»Ÿç›´æ¥è®¿é—®ç‰©ç†å¤„ç†å™¨, å¤„åœ¨æœ€é«˜çš„ç‰¹æƒçº§åˆ«. å½“VMMæ¥ç®¡ç‰©ç†å¤„ç†å™¨å, VMä¸Šçš„æ“ä½œç³»ç»Ÿé™çº§åœ¨éæœ€é«˜ç‰¹æƒçº§åˆ«ä¸Šè¿è¡Œ, æ­¤æ—¶è¯•å›¾è®¿é—®å…³é”®èµ„æºçš„æŒ‡ä»¤å°±ç§°ä¸ºäº†ç‰¹æƒæŒ‡ä»¤.</p></blockquote><p>â€‹VMè¯•å›¾è®¿é—®å…³é”®èµ„æºæ—¶, è¯¥è¯·æ±‚å¹¶ä¸ä¼šçœŸæ­£å‘ç”Ÿåœ¨ç‰©ç†å¯„å­˜å™¨ä¸Š, ç›¸åVMMä¼šæ¨¡æ‹Ÿç‰©ç†å¤„ç†å™¨çš„è¡Œä¸º, ä½¿ç”¨å¯¹åº”çš„è™šæ‹Ÿçš„å¯„å­˜å™¨</p><h3 id="122-ä¸­æ–­å’Œå¼‚å¸¸æ³¨å…¥"><a class="markdownIt-Anchor" href="#122-ä¸­æ–­å’Œå¼‚å¸¸æ³¨å…¥"></a> 1.2.2 ä¸­æ–­å’Œå¼‚å¸¸æ³¨å…¥:</h3><blockquote><p>VMMå¯¹äºå¼‚å¸¸çš„è™šæ‹ŸåŒ–éœ€è¦å®Œå…¨éµå¾ªç‰©ç†å¤„ç†å™¨å¯¹äºå„ç§å¼‚å¸¸æ¡ä»¶çš„å®šä¹‰, å†æ ¹æ®è™šæ‹Ÿå¤„ç†å™¨å½“æ—¶çš„å†…å®¹, æ¥åˆ¤æ–­æ˜¯å¦éœ€è¦æ¨¡æ‹Ÿå‡ºä¸€ä¸ªè™šæ‹Ÿçš„å¼‚å¸¸, å¹¶æ³¨å…¥åˆ°è™šæ‹Ÿç¯å¢ƒä¸­.</p></blockquote><p>â€‹VMMé€šå¸¸ä¼šåœ¨<code>ç¡¬ä»¶å¼‚å¸¸å¤„ç†ç¨‹åº</code>å’Œ<code>æ¨¡æ‹Ÿä»£ç </code>ä¸­è¿›è¡Œå¼‚å¸¸è™šæ‹ŸåŒ–çš„æ£€æŸ¥, æ— è®ºæ˜¯å“ªä¸€ç§, VMMéƒ½éœ€è¦åŒºåˆ†ä¸¤ç§åŸå› :</p><ol><li>è™šæ‹Ÿæœºè‡ªèº«å¯¹è¿è¡Œç¯å¢ƒå’Œä¸Šä¸‹æ–‡çš„è®¾ç½®è¿èƒŒäº†æŒ‡ä»¤æ­£ç¡®æ‰§è¡Œçš„æ¡ä»¶</li><li>è™šæ‹Ÿæœºè¿è¡Œåœ¨éæœ€é«˜ç‰¹æƒçº§åˆ«, ç”±äºè™šæ‹ŸåŒ–çš„åŸå› è§¦å‘çš„å¼‚å¸¸.</li></ol><p>â€‹è€Œå¯¹äºç‰©ç†ä¸­æ–­çš„è§¦å‘æ¥è‡ªäºç‰¹å®šçš„ç‰©ç†ä¸­æ–­æº, è™šæ‹Ÿä¸­æ–­çš„è§¦å‘åˆ™æ¥è‡ªäºè™šæ‹Ÿè®¾å¤‡çš„æ¨¡æ‹Ÿç¨‹åº. (åŒ…æ‹¬å†…éƒ¨ä¸­æ–­æºçš„æ¨¡æ‹Ÿå’Œå¤–éƒ¨è™šæ‹Ÿè®¾å¤‡çš„æ¨¡æ‹Ÿ)</p><h2 id="13-å†…å­˜è™šæ‹ŸåŒ–"><a class="markdownIt-Anchor" href="#13-å†…å­˜è™šæ‹ŸåŒ–"></a> 1.3 å†…å­˜è™šæ‹ŸåŒ–</h2><p>â€‹ä»æ“ä½œç³»ç»Ÿçš„è§’åº¦,ç‰©ç†å†…å­˜æœ‰ä¸¤ä¸ªåŸºæœ¬ç‰¹ç‚¹: ç‰©ç†åœ°å€ä»0å¼€å§‹å’Œå†…å­˜åœ°å€è¿ç»­æ€§(æˆ–è€…è¯´åœ¨ä¸€å®šçš„ç²’åº¦ä¸Šè¿ç»­). åœ¨è™šæ‹ŸåŒ–ä¸­, VMMå¿…é¡»å¯¹VMæ‰€è®¿é—®çš„å†…å­˜è¿›è¡Œä¸€å®šç¨‹åº¦ä¸Šçš„è™šæ‹ŸåŒ–.</p><p>â€‹åœ¨è™šæ‹Ÿç¯å¢ƒä¸­, å†…å­˜è™šæ‹ŸåŒ–é¢ä¸´çš„é—®é¢˜æ˜¯: ç‰©ç†å†…å­˜è¦è¢«å¤šä¸ªå®¢æˆ·æœºæ“ä½œç³»ç»ŸåŒæ—¶ä½¿ç”¨, ä½†ç‰©ç†å†…å­˜åªæœ‰ä¸€ä»½, ç‰©ç†èµ·å§‹åœ°å€0æ˜¾ç„¶ä¹Ÿåªæœ‰ä¸€ä¸ª, æ— æ³•åŒæ—¶æ»¡è¶³æ‰€æœ‰VMçš„OSå†…å­˜ä»0å¼€å§‹çš„è¦æ±‚. ç”±äºä½¿ç”¨äº†å†…å­˜åˆ†åŒºçš„æ–¹å¼, å†…å­˜çš„è¿ç»­æ€§è¦æ±‚èƒ½å¤Ÿå¾—åˆ°æ»¡è¶³, ä½†æ˜¯å†…å­˜çš„ä½¿ç”¨æ•ˆç‡éå¸¸ä¸çµæ´». åœ¨è¿™ç§æƒ…å†µä¸‹, VMMè¦åšçš„å°±æ˜¯&quot;æ¬ºéª—&quot;VM, è®©VMä»¥ä¸ºå®ƒæ‰€è®¿é—®çš„å†…å­˜æ˜¯ä»0å¼€å§‹å¹¶ä¸”è¿ç»­çš„, è¿™ä¸ªæ¬ºéª—è¿‡ç¨‹å°±æ˜¯å†…å­˜è™šæ‹ŸåŒ–.</p><blockquote><p>å†…å­˜è™šæ‹ŸåŒ–çš„æ ¸å¿ƒåœ¨äºå¼•å…¥ä¸€å±‚æ–°çš„åœ°å€ç©ºé—´: <font color='cyan'>å®¢æˆ·æœºç‰©ç†åœ°å€ç©ºé—´</font></p></blockquote><h2 id="14-ioè™šæ‹ŸåŒ–"><a class="markdownIt-Anchor" href="#14-ioè™šæ‹ŸåŒ–"></a> 1.4 I/Oè™šæ‹ŸåŒ–</h2><p>â€‹å¤–è®¾æ˜¯é€šè¿‡ä¸€ç»„I/Oèµ„æº(ç«¯å£I/Oæˆ–è€…æ˜¯MMIO)æ¥è¿›è¡Œè®¿é—®çš„, æ‰€ä»¥è®¾å¤‡ç›¸å…³çš„è™šæ‹ŸåŒ–åˆè¢«ç§°ä¸ºI/Oè™šæ‹ŸåŒ–.</p><h1 id="2-vmmçš„åˆ†ç±»"><a class="markdownIt-Anchor" href="#2-vmmçš„åˆ†ç±»"></a> 2. VMMçš„åˆ†ç±»</h1><h2 id="21-æŒ‰è™šæ‹Ÿå¹³å°åˆ†ç±»"><a class="markdownIt-Anchor" href="#21-æŒ‰è™šæ‹Ÿå¹³å°åˆ†ç±»"></a> 2.1 æŒ‰è™šæ‹Ÿå¹³å°åˆ†ç±»</h2><ol><li>å®Œå…¨è™šæ‹ŸåŒ–(Full Virtualization): å®¢æˆ·æœºæ“ä½œç³»ç»Ÿå¯Ÿè§‰ä¸åˆ°æ˜¯è¿è¡Œåœ¨ä¸€ä¸ªè™šæ‹Ÿå¹³å°ä¸Š, è™šæ‹Ÿçš„æ˜¯ç°å®å­˜åœ¨çš„å¹³å°.</li><li>ç±»è™šæ‹ŸåŒ–(Para-Virtualization): VMMè™šæ‹Ÿçš„å¹³å°æ˜¯ç°å®ä¸­å¹¶ä¸å­˜åœ¨çš„, éœ€è¦å¯¹è¿™ç±»VMè¿›è¡Œé€‚å½“ä¿®æ”¹ä½¿ä¹‹é€‚åº”è™šæ‹Ÿç¯å¢ƒ.</li></ol><blockquote><p>ç±»è™šæ‹ŸåŒ–é€šè¿‡åœ¨æºä»£ç çº§åˆ«ä¿®æ”¹æŒ‡ä»¤ä»¥å›é¿è™šæ‹ŸåŒ–æ¼æ´, è€Œä¸”ç±»è™šæ‹ŸåŒ–ç”±äºä¸æ˜¯æ¨¡å¼çœŸå®çš„è®¾å¤‡, å› æ­¤å¯ä»¥è‡ªå®šä¹‰å‡ºé«˜åº¦ä¼˜åŒ–çš„I/Oåè®®, è¿™ç§I/Oåè®®å®Œå…¨åŸºäºäº‹åŠ¡, å¯ä»¥è¾¾åˆ°è¿‘ä¼¼ç‰©ç†æœºçš„é€Ÿåº¦. å› ä¸ºç°æœ‰çš„ç³»ç»Ÿå’Œè®¾å¤‡, å¾€å¾€ä¸ºäº†é€šç”¨æ€§å­˜åœ¨å¾ˆå¤šå†—ä½™, ç±»è™šæ‹ŸåŒ–çš„è‡ªå®šä¹‰åœ¨æŸäº›æ—¶å€™åè€Œèƒ½æœ‰ä¸é”™çš„æ€§èƒ½è¡¨ç°.</p></blockquote><h2 id="22-æŒ‰vmmå®ç°ç»“æ„åˆ†ç±»"><a class="markdownIt-Anchor" href="#22-æŒ‰vmmå®ç°ç»“æ„åˆ†ç±»"></a> 2.2 æŒ‰VMMå®ç°ç»“æ„åˆ†ç±»</h2><h3 id="1-hypervisoræ¨¡å‹"><a class="markdownIt-Anchor" href="#1-hypervisoræ¨¡å‹"></a> 1. Hypervisoræ¨¡å‹</h3><p>â€‹åœ¨è¯¥æ¨¡å‹ä¸­, VMMå¯ä»¥è¢«çœ‹åšæ˜¯ä¸€ä¸ªå®Œæ•´çš„æ“ä½œç³»ç»Ÿï¼Œä¸åŒä¹‹å¤„åœ¨äºï¼ŒVMMæ˜¯ä¸ºè™šæ‹ŸåŒ–è®¾è®¡çš„ï¼Œè¿˜å…·æœ‰è™šæ‹ŸåŒ–åŠŸèƒ½ã€‚é¦–å…ˆï¼Œæ‰€æœ‰çš„ç‰©ç†èµ„æºå¦‚å¤„ç†å™¨ã€å†…å­˜å’ŒI/Oè®¾å¤‡éƒ½å½’VMMæ‰€æœ‰ï¼›å…¶æ¬¡VMMéœ€è¦å‘ä¸Šæä¾›è™šæ‹Ÿæœºç”¨äºè¿è¡Œå®¢æˆ·æœºæ“ä½œç³»ç»Ÿï¼Œå› æ­¤VMMè¿˜è´Ÿè´£è™šæ‹Ÿç¯å¢ƒçš„åˆ›å»ºå’Œç®¡ç†ã€‚</p><p>â€‹Hypervisoræ¨¡å‹çš„æ¶æ„ï¼š</p><ul><li>P(processor): å¤„ç†å™¨ç®¡ç†ä»£ç ï¼ˆè´Ÿè´£ç‰©ç†å¤„ç†å™¨çš„ç®¡ç†å’Œè™šæ‹ŸåŒ–ï¼‰</li><li>M(Memory): å†…å­˜ç®¡ç†ä»£ç ï¼ˆè´Ÿè´£ç‰©ç†å†…å­˜çš„ç®¡ç†å’Œè™šæ‹ŸåŒ–ï¼‰</li><li>DM(Device Model)ï¼šè´Ÿè´£I/Oè®¾å¤‡çš„è™šæ‹ŸåŒ–</li><li>DRï¼ˆDevice Driverï¼‰ï¼šè´Ÿè´£I/Oè®¾å¤‡çš„é©±åŠ¨</li></ul><blockquote><p>æœ‰å¾—å¿…æœ‰å¤±ï¼ŒHypervisoræ¨¡å‹åœ¨æ‹¥æœ‰è™šæ‹ŸåŒ–é«˜æ•ˆç‡çš„åŒæ—¶ä¹Ÿæš´éœ²å‡ºå…¶ç¼ºç‚¹ï¼Œç”±äºVMMå®Œå…¨æ‹¥æœ‰ç‰©ç†èµ„æºï¼Œå› æ­¤VMMéœ€è¦è¿›è¡Œç‰©ç†èµ„æºçš„ç®¡ç†ï¼ŒåŒ…æ‹¬è®¾å¤‡çš„é©±åŠ¨ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œè®¾å¤‡é©±åŠ¨å¼€å‘çš„å·¥ä½œé‡éå¸¸å¤§ã€‚å› æ­¤å®é™…ä¸­ï¼ŒåŸºäºHypervisorçš„VMMä¸€èˆ¬æœ‰é€‰æ‹©åœ°æ”¯æŒä¸€äº›I/Oè®¾å¤‡ã€‚</p></blockquote><h3 id="2-å®¿ä¸»æ¨¡å‹"><a class="markdownIt-Anchor" href="#2-å®¿ä¸»æ¨¡å‹"></a> 2. å®¿ä¸»æ¨¡å‹</h3><p>â€‹å®¿ä¸»æ¨¡å‹ä¸­ï¼Œç‰©ç†èµ„æºç”±å®¿ä¸»æœºæ“ä½œç³»ç»Ÿç®¡ç†ã€‚å®¿ä¸»æœºæ“ä½œç³»ç»Ÿæ˜¯ä¼ ç»Ÿçš„æ“ä½œç³»ç»Ÿï¼Œè­¬å¦‚Windowså’ŒLinuxï¼Œè¿™äº›ä¼ ç»Ÿæ“ä½œç³»ç»Ÿå¹¶ä¸æ˜¯ä¸ºè™šæ‹ŸåŒ–è€Œè®¾è®¡çš„ï¼Œå› æ­¤æœ¬èº«å¹¶ä¸å…·å¤‡è™šæ‹ŸåŒ–åŠŸèƒ½ï¼Œå®é™…çš„è™šæ‹ŸåŒ–åŠŸèƒ½ç”±VMMæä¾›ã€‚VMMæ­¤æ—¶é€šå¸¸æ˜¯å®¿ä¸»æœºæ“ä½œç³»ç»Ÿç‹¬ç«‹çš„å†…æ ¸æ¨¡å—ï¼Œæœ‰äº›å®ç°åŒ…å«ç”¨æˆ·æ€è¿›ç¨‹ï¼Œå¦‚I/Oè™šæ‹ŸåŒ–çš„ç”¨æˆ·æ€è®¾å¤‡æ¨¡å‹ã€‚</p><p>â€‹å®¿ä¸»æ¨¡å‹å¯ä»¥å……åˆ†åˆ©ç”¨ç°æœ‰æ“ä½œç³»ç»Ÿçš„è®¾å¤‡é©±åŠ¨ç¨‹åºï¼ŒVMMæ— éœ€ä¸ºå„ç±»I/Oè®¾å¤‡é‡æ–°å®ç°é©±åŠ¨ç¨‹åºã€‚ç„¶è€ŒVMMéœ€è¦è°ƒç”¨å®¿ä¸»æœºæ“ä½œç³»ç»Ÿæä¾›çš„æœåŠ¡æ¥å£è·å–èµ„æºè¿›è¡Œè™šæ‹ŸåŒ–ï¼Œæ•ˆç‡å’ŒåŠŸèƒ½éƒ½ä¼šå—åˆ°å½±å“ã€‚</p><h3 id="3-æ··åˆæ¨¡å‹"><a class="markdownIt-Anchor" href="#3-æ··åˆæ¨¡å‹"></a> 3. æ··åˆæ¨¡å‹</h3><p>â€‹æ··åˆæ¨¡å‹æ˜¯ä¸Šè¿°ä¸¤ç§æ¨¡å¼çš„é›†åˆä½“ã€‚VMMä½äºæœ€åº•å±‚ï¼Œæ‹¥æœ‰æ‰€æœ‰çš„ç‰©ç†èµ„æºã€‚ä¸Hypervisoræ¨¡å¼ä¸åŒåœ¨äºï¼ŒVMMä¼šå°†å¤§éƒ¨åˆ†I/Oè®¾å¤‡çš„æ§åˆ¶æƒäº¤ç»™ä¸€ä¸ªè¿è¡Œåœ¨ç‰¹æƒè™šæ‹Ÿæœºä¸­çš„ç‰¹æƒæ“ä½œç³»ç»Ÿæ¥å®Œæˆã€‚å¤„ç†å™¨å’Œå†…å­˜çš„è™šæ‹ŸåŒ–ä¾ç„¶ç”±VMMæ¥å®Œæˆï¼Œè€ŒI/Oçš„è™šæ‹ŸåŒ–åˆ™ç”±VMMå’Œç‰¹æƒæ“ä½œç³»ç»Ÿå…±åŒå®Œæˆã€‚</p><ul><li>DMå’ŒDRå¤„åœ¨ç‰¹æƒæ“ä½œç³»ç»Ÿä¸­</li><li>På’ŒMåˆ™ä¾ç„¶ç”±VMMè´Ÿè´£</li></ul><h2 id="23-ç°å®æ¡ˆä¾‹kvmkernel-based-virual-machine"><a class="markdownIt-Anchor" href="#23-ç°å®æ¡ˆä¾‹kvmkernel-based-virual-machine"></a> 2.3 ç°å®æ¡ˆä¾‹ï¼šKVM(Kernel-based Virual Machine)</h2><blockquote><p>KVMæœ€æ—©ç”±Qumranetå…¬å¸å¼€å‘, åœ¨2006å¹´10æœˆå‡ºç°åœ¨Linuxå†…æ ¸çš„é‚®ä»¶åˆ—è¡¨ä¸Š, å¹¶äº2007å¹´2æœˆé›†æˆåˆ°Linux2.6.20å†…æ ¸ä¸­, æˆä¸ºå†…æ ¸çš„ä¸€éƒ¨åˆ†</p></blockquote><p>â€‹KVMå‡ºç°ä¹‹åˆ, æœ‰äººè®¤ä¸ºKVMæ˜¯å®¿ä¸»æ¨¡å¼, è€Œéšç€æ›´å¤šçš„è™šæ‹ŸåŒ–åŠŸèƒ½åŠ å…¥åˆ°Linuxå†…æ ¸ä¸­, è¶Šæ¥è¶Šå¤šçš„äººè®¤ä¸ºLinuxå·²ç»æ˜¯ä¸€ä¸ªHypervisor, å› æ­¤KVMæ˜¯Hypervisoræ¨¡å‹.</p>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>æ“ä½œç³»ç»Ÿ</category>
      
      <category>è™šæ‹ŸåŒ–åŸºç¡€</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>è™šæ‹ŸåŒ–(1):å‰è¨€</title>
    <link href="/2022/07/14/%E8%99%9A%E6%8B%9F%E5%8C%96-1-%E5%89%8D%E8%A8%80/"/>
    <url>/2022/07/14/%E8%99%9A%E6%8B%9F%E5%8C%96-1-%E5%89%8D%E8%A8%80/</url>
    
    <content type="html"><![CDATA[<h1 id="1-å‰è¨€"><a class="markdownIt-Anchor" href="#1-å‰è¨€"></a> 1. å‰è¨€</h1><blockquote><p>ã€Šç³»ç»Ÿè™šæ‹ŸåŒ–ï¼šåŸç†ä¸å®ç°ã€‹ç¬”è®°ï¼š</p><p><em>å…·ä½“æ¥è¯´ï¼Œè™šæ‹ŸåŒ–æŠ€æœ¯çš„å®ç°å½¢å¼æ˜¯åœ¨ç³»ç»Ÿä¸­åŠ å…¥ä¸€ä¸ªè™šæ‹ŸåŒ–å±‚ï¼Œè™šæ‹ŸåŒ–å±‚å°†ä¸‹å±‚çš„èµ„æºæŠ½è±¡æˆå¦ä¸€å½¢å¼çš„èµ„æºï¼Œæä¾›ç»™ä¸Šå±‚ä½¿ç”¨ã€‚é€šè¿‡ç©ºé—´ä¸Šçš„åˆ†å‰²ã€æ—¶é—´ä¸Šçš„åˆ†æ—¶ä»¥åŠæ¨¡æ‹Ÿï¼Œè™šæ‹ŸåŒ–å¯ä»¥å°†ä¸€ä»½èµ„æºæŠ½è±¡æˆå¤šä»½ã€‚åè¿‡æ¥ï¼Œè™šæ‹ŸåŒ–ä¹Ÿå¯ä»¥å°†å¤šä»½èµ„æºæŠ½è±¡æˆä¸€ä»½ã€‚</em></p></blockquote><p>è™šæ‹ŸåŒ–æŠ€æœ¯æˆç†Ÿçš„æ—¶æœºçœŸæ­£åˆ°æ¥ï¼Œå‘ç”Ÿåœ¨**<u>ç¡¬ä»¶è™šæ‹ŸåŒ–æŠ€æœ¯</u>**çš„è¯ç”Ÿä¹‹åï¼ˆå¦‚Intel VTæŠ€æœ¯å’ŒAMD SVMæŠ€æœ¯ï¼‰</p><p><img src="https://imagebed.torch-fan.site/2022/blog20220714072606.png" alt="è®¡ç®—æœºç³»ç»Ÿçš„å„ä¸ªæŠ½è±¡å±‚" /></p><ul><li>ç¡¬ä»¶æŠ½è±¡å±‚(Hardware Abstraction Layer, HAL) æ˜¯è®¡ç®—æœºä¸­è½¯ä»¶æ‰€èƒ½æ§åˆ¶çš„ç¡¬ä»¶çš„æŠ½è±¡æ¥å£(å¦‚CPUå¯„å­˜å™¨ã€å†…å­˜ç®¡ç†æ¨¡å—ã€I/Oç«¯å£å’Œå†…å­˜æ˜ å°„çš„I/Oåœ°å€<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="Memory mapped I/O and Isolated I/O - GeeksforGeeks">[1]</span></a></sup>ç­‰ï¼‰</li><li>APIæŠ½è±¡å±‚æŠ½è±¡çš„æ˜¯ä¸€ä¸ªè¿›ç¨‹æ‰€èƒ½æ§åˆ¶çš„ç³»ç»ŸåŠŸèƒ½çš„é›†åˆ, åŒ…æ‹¬åˆ›å»ºè¿›ç¨‹ã€ç”³è¯·å’Œå½’è¿˜å†…å­˜ã€è¿›ç¨‹é—´åŒæ­¥ä¸å…±äº«ç­‰</li></ul><h2 id="11-ç¡¬ä»¶æŠ½è±¡å±‚ä¸Šçš„è™šæ‹ŸåŒ–"><a class="markdownIt-Anchor" href="#11-ç¡¬ä»¶æŠ½è±¡å±‚ä¸Šçš„è™šæ‹ŸåŒ–"></a> 1.1 ç¡¬ä»¶æŠ½è±¡å±‚ä¸Šçš„è™šæ‹ŸåŒ–</h2><p>â€‹ç¡¬ä»¶æŠ½è±¡å±‚ä¸Šçš„è™šæ‹ŸåŒ–æ˜¯é€šè¿‡æŠ½è±¡<code>ç¡¬ä»¶æŠ½è±¡å±‚</code>æ¥å®ç°è™šæ‹Ÿæœº, ä¸ºå®¢æˆ·æœºæ“ä½œç³»ç»Ÿå‘ˆç°å’Œç‰©ç†ç¡¬ä»¶ç›¸åŒæˆ–ç›¸è¿‘çš„ç¡¬ä»¶æŠ½è±¡å±‚. ç”±äºå®¢æˆ·æœºæ“ä½œç³»ç»Ÿæ‰€èƒ½çœ‹åˆ°çš„æ˜¯ç¡¬ä»¶æŠ½è±¡å±‚, å› æ­¤å®¢æˆ·æœºæ“ä½œç³»ç»Ÿçš„è¡Œä¸ºå’Œåœ¨ç‰©ç†å¹³å°ä¸Šæ²¡æœ‰ä»€ä¹ˆåŒºåˆ«.</p><p>â€‹ç¡¬ä»¶æŠ½è±¡å±‚ä¸­,Hostå’ŒGuestçš„ISA(Instruction Set Architectrue, æŒ‡ä»¤é›†æ¶æ„)ä¸€èˆ¬æ˜¯ä¸€æ ·çš„. Guest OSçš„å¤§éƒ¨åˆ†æŒ‡ä»¤éƒ½å¯ä»¥åœ¨å®¿ä¸»æœºå¤„ç†å™¨ä¸Šç›´æ¥è¿è¡Œ,åªæœ‰é‚£äº›éœ€è¦è™šæ‹ŸåŒ–çš„æŒ‡ä»¤æ‰ä¼šç”±è™šæ‹ŸåŒ–è½¯ä»¶è¿›è¡Œå¤„ç†,  ä»è€Œå¤§å¤§<font color="red"><strong>é™ä½è™šæ‹ŸåŒ–å¼€é”€</strong></font>.</p><p>â€‹Guestå’ŒHostçš„ç¡¬ä»¶æŠ½è±¡å±‚çš„æŸäº›éƒ¨åˆ†å¦‚ä¸­æ–­æ§åˆ¶å™¨ã€è®¾å¤‡ç­‰ï¼Œå¯ä»¥æ˜¯å®Œå…¨ä¸åŒçš„ï¼Œå½“å®¢æˆ·æœºå¯¹ç¡¬ä»¶æŠ½è±¡å±‚è®¿é—®æ—¶ï¼Œè™šæ‹ŸåŒ–è½¯ä»¶éœ€è¦å¯¹æ­¤è¿›è¡Œæˆªè·å¹¶æ¨¡æ‹Ÿã€‚</p><h2 id="12-æ“ä½œç³»ç»Ÿå±‚ä¸Šçš„è™šæ‹ŸåŒ–"><a class="markdownIt-Anchor" href="#12-æ“ä½œç³»ç»Ÿå±‚ä¸Šçš„è™šæ‹ŸåŒ–"></a> 1.2 æ“ä½œç³»ç»Ÿå±‚ä¸Šçš„è™šæ‹ŸåŒ–</h2><p>â€‹æ“ä½œç³»ç»Ÿå±‚ä¸Šçš„è™šæ‹ŸåŒ–æ˜¯æŒ‡æ“ä½œç³»ç»Ÿçš„å†…æ ¸å¯ä»¥æä¾›å¤šä¸ªç›¸äº’éš”ç¦»çš„<font color="green"><strong>ç”¨æˆ·æ€å®ä¾‹</strong></font>ï¼Œè¿™äº›ç”¨æˆ·æ€å®ä¾‹ï¼ˆé€šå¸¸è€Œè¨€è¢«ç§°ä¸º<font color="cyan"><strong>å®¹å™¨</strong>/<strong>container</strong></font>ï¼‰å¯¹äºå®ƒçš„ç”¨æˆ·è€Œè¨€å°±åƒçœŸçš„è®¡ç®—æœºï¼Œæœ‰è‡ªå·±ç‹¬ç«‹çš„æ“ä½œç³»ç»Ÿ, ç½‘ç»œ, ç³»ç»Ÿè®¾ç½®å’Œåº“å‡½æ•°.</p><p>â€‹è¿™ç§æŠ€æœ¯å¯ä»¥è®¤ä¸ºæ˜¯UNIXç³»ç»Ÿ<code>chroot</code><sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="chroot command in Linux with examples - GeeksforGeeks">[2]</span></a></sup>å‘½ä»¤çš„å»¶ä¼¸, å› ä¸ºè¿™æ˜¯æ“ä½œç³»ç»Ÿå†…æ ¸ä¸»åŠ¨æä¾›çš„è™šæ‹ŸåŒ–, å› æ­¤æ“ä½œç³»ç»Ÿå±‚ä¸Šçš„è™šæ‹ŸåŒ–ä¹Ÿéå¸¸é«˜æ•ˆ, å®ƒçš„è™šæ‹ŸåŒ–èµ„æºå’Œæ€§èƒ½å¼€é”€éå¸¸å°, ä¹Ÿä¸éœ€è¦æœ‰ç¡¬ä»¶çš„ç‰¹æ®Šæ”¯æŒ. ä½†æ˜¯çµæ´»æ€§è¾ƒå°, <font color="pink">æ¯ä¸ªå®¹å™¨ä¸­çš„æ“ä½œç³»ç»Ÿå¿…é¡»å’Œå®¿ä¸»æœºæ˜¯åŒä¸€ç±»æ“ä½œç³»ç»Ÿ</font>(æ³¨æ„æ˜¯åŒä¸€ç±», è‡³äºä»€ä¹ˆèƒ½å½’ä¸ºä¸€ç±»åˆ™è¦æ›´ç»†çš„åˆ’åˆ†äº†)</p><h2 id="13-åº“å‡½æ•°å±‚ä¸Šçš„è™šæ‹ŸåŒ–"><a class="markdownIt-Anchor" href="#13-åº“å‡½æ•°å±‚ä¸Šçš„è™šæ‹ŸåŒ–"></a> 1.3 åº“å‡½æ•°å±‚ä¸Šçš„è™šæ‹ŸåŒ–</h2><p>â€‹æ“ä½œç³»ç»Ÿé€šè¿‡åº”ç”¨çº§çš„åº“å‡½æ•°æä¾›ç»™åº”ç”¨ç¨‹åºä¸€ç»„æœåŠ¡, ä¾‹å¦‚æ–‡ä»¶æ“ä½œæœåŠ¡\æ—¶é—´æ“ä½œæœåŠ¡ç­‰ã€‚ä¾‹å¦‚ï¼Œwineæ˜¯åœ¨Linuxä¸Šæ¨¡æ‹Ÿäº†Windowsçš„åº“å‡½æ•°æ¥å£ï¼Œä½¿å¾—WIndowsç¨‹åºèƒ½å¤Ÿåœ¨Linuxä¸Šæ­£å¸¸è¿è¡Œã€‚</p><h2 id="14-ç¼–ç¨‹è¯­è¨€å±‚ä¸Šçš„è™šæ‹ŸåŒ–"><a class="markdownIt-Anchor" href="#14-ç¼–ç¨‹è¯­è¨€å±‚ä¸Šçš„è™šæ‹ŸåŒ–"></a> 1.4 ç¼–ç¨‹è¯­è¨€å±‚ä¸Šçš„è™šæ‹ŸåŒ–</h2><p>â€‹å¦‚JVMï¼ˆJava Virtual Machineï¼‰å’Œå¾®è½¯çš„CLRï¼ˆCommon Language Runtimeï¼‰ã€‚è¿™ç±»è™šæ‹Ÿæœºè¿è¡Œçš„æ˜¯ä¸€ä¸ªè¿›ç¨‹çº§çš„ä½œä¸šï¼Œæ‰€ä¸åŒçš„æ˜¯è¿™äº›ç¨‹åºæ‰€é’ˆå¯¹çš„ä¸æ˜¯ä¸€ä¸ªç¡¬ä»¶ä¸Šå­˜åœ¨çš„ä½“ç³»ç»“æ„ï¼Œè€Œæ˜¯ä¸€ä¸ªè™šæ‹Ÿä½“ç³»ç»“æ„ã€‚</p><hr /><h2 id="ç³»ç»Ÿè™šæ‹ŸåŒ–"><a class="markdownIt-Anchor" href="#ç³»ç»Ÿè™šæ‹ŸåŒ–"></a> ç³»ç»Ÿè™šæ‹ŸåŒ–</h2><p>ç†è®ºä¸Šæ¥è¯´ï¼Œè™šæ‹Ÿæœºå’Œç‰©ç†æœºå¯ä»¥æ˜¯ä¸¤ä¸ªå®Œå…¨ä¸åŒçš„ISAç³»ç»Ÿï¼Œä½†æ˜¯ä¸åŒçš„ISAä½¿å¾—è™šæ‹Ÿæœºçš„æ¯ä¸€æ¡æŒ‡ä»¤éƒ½éœ€è¦åœ¨ç‰©ç†æœºä¸Šæ¨¡æ‹Ÿæ‰§è¡Œï¼Œä»è€Œé€ æˆæ€§èƒ½çš„æå¤§ä¸‹é™ã€‚ç›¸åŒä½“ç³»æ¶æ„çš„ç³»ç»Ÿè™šæ‹ŸåŒ–é€šå¸¸ä¼šæœ‰è¾ƒå¥½æ€§èƒ½, å®ç°èµ·æ¥ä¹Ÿæ›´ç®€å•.</p><blockquote><p>1974å¹´, Popekå’ŒGoldbergå®šä¹‰äº†è™šæ‹Ÿæœºå¯ä»¥çœ‹ä½œæ˜¯ç‰©ç†æœºçš„ä¸€ç§é«˜æ•ˆéš”ç¦»å¤åˆ¶.</p><p>ä¸Šé¢è•´å«äº†è™šæ‹Ÿæœºçš„ä¸‰ä¸ªå…¸å‹ç‰¹å¾: åŒè´¨ã€é«˜æ•ˆå’Œèµ„æºå—æ§ã€‚</p></blockquote><p><img src="http://imagebed.torch-fan.site/2022/blog/20220714094813.png" alt="ç³»ç»Ÿè™šæ‹ŸåŒ–" /></p><p>ä¸Šå›¾ä¸­è™šæ‹ŸåŒ–å±‚ä¹Ÿè¢«ç§°ä¸ºVMM(Virtual Machine Monitor),  é€šè¿‡è™šæ‹ŸåŒ–å±‚çš„æ¨¡æ‹Ÿ, è™šæ‹Ÿæœºä¸­çš„æ“ä½œç³»ç»Ÿè®¤ä¸ºè‡ªå·±ä»ç„¶æ˜¯ç‹¬å ä¸€ä¸ªç³»ç»Ÿåœ¨è¿è¡Œ. åªè¦ä¸¤å°æœºå™¨æä¾›ç›¸åŒçš„è™šæ‹Ÿç¡¬ä»¶æŠ½è±¡å±‚ï¼Œè™šæ‹Ÿæœºå¯ä»¥åœ¨ä¸¤è€…ä¹‹é—´è¿›è¡Œæ— ç¼åœ°è¿ç§»ã€‚</p><h1 id="2-x86æ¦‚è¦"><a class="markdownIt-Anchor" href="#2-x86æ¦‚è¦"></a> 2. x86æ¦‚è¦</h1><h2 id="21-x86å†…å­˜æ¶æ„"><a class="markdownIt-Anchor" href="#21-x86å†…å­˜æ¶æ„"></a> 2.1 x86å†…å­˜æ¶æ„</h2><h3 id="211-åœ°å€ç©ºé—´"><a class="markdownIt-Anchor" href="#211-åœ°å€ç©ºé—´"></a> 2.1.1 åœ°å€ç©ºé—´ï¼š</h3><ol><li>ç‰©ç†åœ°å€ç©ºé—´</li></ol><p>â€‹ç¡¬ä»¶å¹³å°å¯ä»¥ç®€å•çš„åˆ’åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼šCPUã€å†…å­˜å’Œå…¶ä»–ç¡¬ä»¶è®¾å¤‡ã€‚åœ¨CPUçœ¼ä¸­ï¼Œå†…å­˜å’Œå…¶ä»–ç¡¬ä»¶è®¾å¤‡éƒ½å±äºå¯ä»¥ä½¿ç”¨çš„èµ„æºï¼Œè¿™äº›èµ„æºç»„åˆåœ¨ä¸€èµ·ï¼Œåˆ†å¸ƒåœ¨CPUçš„ç‰©ç†åœ°å€ç©ºé—´ä¸­ã€‚ç‰©ç†åœ°å€ç©ºé—´çš„å¤§å°ï¼Œç”±CPUå®ç°çš„ç‰©ç†åœ°å€ä½æ•°å†³å®šï¼Œä½†ç‰©ç†åœ°å€çš„ä½æ•°å’ŒCPUå¤„ç†æ•°æ®çš„èƒ½åŠ›ï¼ˆå³CPUä½æ•°æ²¡æœ‰å¿…ç„¶çš„è”ç³»ï¼‰ï¼Œ å¦‚16ä½çš„8086CPUå…·æœ‰20ä½çš„åœ°å€ç©ºé—´ã€‚</p><p>â€‹åœ¨è¿™é‡Œï¼Œå¯ä»¥ç”¨<font color="cyan"><strong>å†…å­˜æ˜ å°„I/O</strong></font>æ¥ä¸¾ä¾‹ï¼Œå¦‚ä¸€ä¸ªCPUçš„ç‰©ç†åœ°å€ç©ºé—´ä¸º4GBï¼Œæœ‰512MBçš„å†…å­˜ï¼Œå…¶ä»–ç¡¬ä»¶è®¾å¤‡å¯„å­˜å™¨è¢«æ˜ å°„åˆ°512MBçš„I/Oåœ°å€å†…ï¼Œåˆ™è¯¥å¹³å°çš„ç‰©ç†åœ°å€ç©ºé—´ä¸­æœ‰1GBçš„å…ƒç´ æ˜¯æœ‰æ•ˆçš„ï¼Œå…¶ä½™éƒ¨åˆ†ä¸å­˜åœ¨ã€‚</p><ol start="2"><li>çº¿æ€§åœ°å€ç©ºé—´</li></ol><p>â€‹ä¸€ä¸ªå¹³å°åªèƒ½æœ‰ä¸€ä¸ªç‰©ç†åœ°å€ç©ºé—´,ä½†æ˜¯æ¯ä¸ªç¨‹åºéƒ½è®¤ä¸ºè‡ªå·±ç‹¬äº«äº†æ•´ä¸ªå¹³å°çš„ç¡¬ä»¶èµ„æº, ä¸ºäº†è®©å¤šä¸ªç¨‹åºèƒ½å¤Ÿç›¸äº’éš”ç¦»å¹¶å®‰å…¨åœ°ä½¿ç”¨ç‰©ç†åœ°å€ç©ºé—´çš„èµ„æº, äºæ˜¯å¼•å…¥äº†çº¿æ€§åœ°å€ç©ºé—´çš„æ¦‚å¿µ.</p><p>â€‹çº¿æ€§åœ°å€ç©ºé—´çš„å¤§å°åŒæ ·å–å†³äºCPUå®ç°çš„çº¿æ€§åœ°å€ä½æ•°, ä¾‹å¦‚32ä½çº¿æ€§åœ°å€çš„CPUå…·æœ‰4GBå¤§å°çš„çº¿æ€§åœ°å€ç©ºé—´. æ³¨æ„, çº¿æ€§åœ°å€ç©ºé—´çš„å¤§å°å’Œç‰©ç†åœ°å€ç©ºé—´å¤§å°æ²¡æœ‰å¿…ç„¶è”ç³», å¦‚Intelçš„PAEå¹³å°æœ‰4GBçš„çº¿æ€§åœ°å€ç©ºé—´, 64GBçš„ç‰©ç†åœ°å€ç©ºé—´.</p><p>â€‹çº¿æ€§åœ°å€ç©ºé—´ä¼šè¢«æ˜ å°„åˆ°ç‰©ç†åœ°å€ç©ºé—´çš„æŸä¸€éƒ¨åˆ†æˆ–è€…æ•´ä¸ªç‰©ç†åœ°å€ç©ºé—´, CPUè´Ÿè´£å°†çº¿æ€§åœ°å€è½¬æ¢æˆç‰©ç†åœ°å€, ä½¿ç¨‹åºèƒ½å¤Ÿæ­£ç¡®è®¿é—®åˆ°è¯¥çº¿æ€§åœ°å€ç©ºé—´æ‰€æ˜ å°„.</p><p><img src="https://imagebed.torch-fan.site/2022/blog/20220714103654.png" alt="çº¿æ€§åœ°å€ç©ºé—´" /></p><h3 id="212-åœ°å€"><a class="markdownIt-Anchor" href="#212-åœ°å€"></a> 2.1.2 åœ°å€:</h3><ol><li>é€»è¾‘åœ°å€</li></ol><p>â€‹ç”±äºx86ç‰¹æ®Šçš„<code>æ®µæœºåˆ¶</code>, è¿˜æœ‰ä¸€ç§é€»è¾‘åœ°å€, å³ç¨‹åºç›´æ¥ä½¿ç”¨çš„åœ°å€, ç”±æ®µé€‰æ‹©ç¬¦å’Œåç§»é‡(32ä½å¹³å°ä¸­æ˜¯32ä½)æ„æˆ. åœ¨Cè¯­è¨€ä¸­, æŒ‡é’ˆå®é™…ä¸Šå­˜å‚¨çš„æ˜¯é€»è¾‘åœ°å€çš„<code>åç§»éƒ¨åˆ†</code>, è€Œè¯¥åç§»å¯¹åº”çš„<code>æ®µé€‰æ‹©ç¬¦</code>ä½äºæ®µå¯„å­˜å™¨ä¸­.</p><ol start="2"><li>çº¿æ€§åœ°å€(è™šæ‹Ÿåœ°å€)</li></ol><p>â€‹çº¿æ€§åœ°å€æ˜¯é€»è¾‘åœ°å€è½¬æ¢åçš„ç»“æœ, ç”¨äºç´¢å¼•çº¿æ€§åœ°å€ç©ºé—´. å½“CPUä½¿ç”¨<code>åˆ†é¡µæœºåˆ¶</code>æ—¶, çº¿æ€§åœ°å€å¿…é¡»è½¬æ¢æˆç‰©ç†åœ°å€æ‰èƒ½è®¿é—®å¹³å°å†…å­˜æˆ–ç¡¬ä»¶è®¾å¤‡æ‰èƒ½è®¿é—®å†…å­˜å’Œç¡¬ä»¶è®¾å¤‡; å½“åˆ†é¡µæœºåˆ¶æœªå¯ç”¨æ—¶, çº¿æ€§åœ°å€ç›¸å½“äºç‰©ç†åœ°å€. æœ‰å…³åˆ†æ®µå’Œåˆ†é¡µå¯è§<sup id="fnref:3" class="footnote-ref"><a href="#fn:3" rel="footnote"><span class="hint--top hint--rounded" aria-label="Difference Between Paging and Segmentation - GeeksforGeeks">[3]</span></a></sup></p><ol start="3"><li>ç‰©ç†åœ°å€</li></ol><p>â€‹è¿™æ˜¯CPUæäº¤åˆ°æ€»çº¿ç”¨äºè®¿é—®å¹³å°å†…å­˜å’Œç¡¬ä»¶è®¾å¤‡çš„æœ€ç»ˆåœ°å€, å®ƒå’Œä¸Šé¢ä¸¤ä¸ªåœ°å€æœ‰å¦‚ä¸‹å…³ç³»:</p><ul><li>åˆ†æ®µæœºåˆ¶å¯ç”¨, åˆ†é¡µæœªå¯ç”¨æ—¶: é€»è¾‘åœ°å€ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>â†’</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">â†’</span></span></span></span> çº¿æ€§åœ°å€ = ç‰©ç†åœ°å€</li><li>åˆ†æ®µæœºåˆ¶å’Œåˆ†é¡µæœºåˆ¶éƒ½å¯åŠ¨: é€»è¾‘åœ°å€ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>â†’</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">â†’</span></span></span></span> çº¿æ€§åœ°å€ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>â†’</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">â†’</span></span></span></span> ç‰©ç†åœ°å€</li></ul><blockquote><p>è¿™é‡Œå¯ä»¥åœä¸‹æ¥æ€è€ƒä¸€ä¸‹, é€»è¾‘åœ°å€æ˜¯å¦æ˜¯åº”ç”¨ç¨‹åºä¸­(é«˜çº§è¯­è¨€ç¼–ç¨‹)ä½¿ç”¨çš„ç›¸å¯¹åœ°å€, è€Œçº¿æ€§åœ°å€å¯¹åº”æ•´ä¸ªè¿›ç¨‹ä½¿ç”¨çš„ç›¸å¯¹åœ°å€, è€Œç‰©ç†åœ°å€å°±æ˜¯æœ€ç»ˆå†…å­˜ä¸­å®é™…åœ°å€?</p></blockquote><blockquote><p>çŸ¥è¯†è¡¥å……: <font><strong>æ€»çº¿åœ°å€</strong></font></p><p>åœ¨x86ä¸‹, è®¾å¤‡å¯„å­˜å™¨çš„ç‰©ç†åœ°å€å’Œå¯„å­˜å™¨åœ¨è®¾å¤‡ä¸Šçš„åœ°å€æ˜¯ä¸åŒçš„, å­˜åœ¨ä¸€ä¸ªæ˜ å°„å…³ç³»(ç”±ç”µå­çº¿è·¯è´Ÿè´£è½¬æ¢), å¯¹CPUæ˜¯é€æ˜çš„, è€ŒCPUç”¨äºè®¿é—®è®¾å¤‡çš„ç‰©ç†åœ°å€æ˜¯è®¾å¤‡å¯„å­˜å™¨å±•ç°ç»™æ€»çº¿çš„åœ°å€, æ‰€ä»¥åœ¨x86ä¸‹æœ‰æ—¶ä¹Ÿç§°ç‰©ç†åœ°å€ä¸ºæ€»çº¿åœ°å€</p></blockquote><h3 id="213-x86å†…å­˜ç®¡ç†æœºåˆ¶"><a class="markdownIt-Anchor" href="#213-x86å†…å­˜ç®¡ç†æœºåˆ¶"></a> 2.1.3 x86å†…å­˜ç®¡ç†æœºåˆ¶</h3><h4 id="1-åˆ†æ®µæœºåˆ¶"><a class="markdownIt-Anchor" href="#1-åˆ†æ®µæœºåˆ¶"></a> 1. åˆ†æ®µæœºåˆ¶</h4><blockquote><p>åˆ†æ®µæœºåˆ¶: å°†å†…å­˜åˆ’åˆ†æˆä»¥èµ·å§‹åœ°å€(Base)å’Œé•¿åº¦(Limit)æè¿°çš„å—, è¿™äº›å†…å­˜å—å°±è¢«ç§°ä¸ºæ®µ.</p></blockquote><p>åˆ†æ®µæœºåˆ¶ç”±4ä¸ªåŸºç¡€éƒ¨åˆ†ç»„æˆ:</p><ul><li>é€»è¾‘åœ°å€</li><li>æ®µé€‰æ‹©å¯„å­˜å™¨</li><li>æ®µæè¿°ç¬¦</li><li>æ®µæè¿°ç¬¦è¡¨</li></ul><p><img src="https://imagebed.torch-fan.site/2022/blog/segment.png" alt="åˆ†æ®µæœºåˆ¶" /></p><p>â€‹æ®µé€‰æ‹©ç¬¦(segment selector): æ˜¯é€»è¾‘åœ°å€çš„ä¸€ä¸ªç»„æˆéƒ¨åˆ†, å…±16ä½, ç”¨æ¥ç´¢å¼•<code>æ®µæè¿°è¡¨</code>ä»¥è·å¾—è¯¥æ®µå¯¹åº”çš„<code>æ®µæè¿°ç¬¦</code>. æ®µé€‰æ‹©ç¬¦ä¸­æœ‰æ ‡è¯†æ®µè¡¨çš„å­—æ®µ, æ˜¯ç”¨æœ¬åœ°æ®µè¡¨è¿˜æ˜¯å…¨å±€æ®µè¡¨, ä»¥åŠå…¶ä»–æ§åˆ¶å­—æ®µ. ä¸ºäº†CPUèƒ½å¤Ÿå¿«é€Ÿè·å¾—æ®µé€‰æ‹©ç¬¦, x86æ¶æ„æä¾›äº†6ä¸ªæ®µå¯„å­˜å™¨(segment register)ç”¨äºå­˜æ”¾å½“å‰ç¨‹åºçš„å„ä¸ªæ®µçš„æ®µé€‰æ‹©ç¬¦.</p><blockquote><ul><li>CS(code-segment, ä»£ç æ®µ): å­˜æ”¾ä»£ç æ®µçš„æ®µé€‰æ‹©ç¬¦</li><li>DS(data-segment, æ•°æ®æ®µ): å­˜æ”¾æ•°æ®æ®µçš„æ®µé€‰æ‹©ç¬¦</li><li>SS(stack-segment, æ ˆæ®µ): å­˜æ”¾æ ˆçš„æ®µé€‰æ‹©ç¬¦</li><li>ESã€FSã€GSï¼šä¾›ç¨‹åºè‡ªç”±ä½¿ç”¨ï¼Œå¯ä»¥å­˜æ”¾é¢å¤–3ä¸ªæ•°æ®æ®µçš„æ®µé€‰æ‹©ç¬¦ã€‚</li></ul></blockquote><p>â€‹æ®µæè¿°ç¬¦(segment descriptor): æ®µæè¿°ç¬¦è®°å½•äº†å„ä¸ªæ®µçš„<code>åŸºåœ°å€</code>, <code>é•¿åº¦</code>å’Œ<code>å„ç§å±æ€§</code>.</p><p>â€‹æ®µæè¿°è¡¨(ç®€ç§°æ®µè¡¨), x86æ¶æ„æä¾›ä¸¤ç§æ®µæè¿°ç¬¦è¡¨, åˆ†åˆ«æ˜¯: å…¨å±€æ®µæè¿°ç¬¦è¡¨(Global Descriptor Table) å’Œ æœ¬åœ°æ®µæè¿°ç¬¦(Local Descriptor Table). ç³»ç»Ÿä¸­è‡³å°‘æœ‰ä¸€ä¸ªGDTå¯ä»¥è¢«æœ‰æ‰€è¿›ç¨‹è®¿é—®, åŒæ—¶ç³»ç»Ÿä¸­å¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªLDTè¢«æŸä¸ªè¿›ç¨‹ç§æœ‰æˆ–è€…åœ¨è‹¥å¹²è¿›ç¨‹ä¹‹é—´å…±äº«. GDTæ˜¯å†…å­˜ä¸­çš„ä¸€ä¸ªæ•°æ®ç»“æ„, ç±»ä¼¼æ•°ç»„, è€ŒLDTæ˜¯ä¸€ä¸ªæ®µ, å®ƒçš„æ®µæè¿°ç¬¦ä¿å­˜åœ¨GDTä¸­.</p><h4 id="2-åˆ†é¡µæœºåˆ¶"><a class="markdownIt-Anchor" href="#2-åˆ†é¡µæœºåˆ¶"></a> 2. åˆ†é¡µæœºåˆ¶</h4><blockquote><p>åˆ†é¡µæœºåˆ¶è®©ç°ä»£æ“ä½œç³»ç»Ÿä¸­çš„è™šæ‹Ÿå†…å­˜ç§°ä¸ºå¯èƒ½, ä¸€ä¸ªé¡µé¢å¯ä»¥å­˜åœ¨äºç‰©ç†å†…å­˜ä¸­, ä¹Ÿå¯ä»¥å­˜æ”¾åœ¨ç£ç›˜çš„äº¤æ¢åŒºåŸŸä¸­, ç¨‹åºå¯ä»¥åˆ©ç”¨æ¯”æœºå™¨ç‰©ç†å†…å­˜æ›´å¤§çš„å†…å­˜åŒºåŸŸ.</p></blockquote><p>â€‹åˆ†é¡µæœºåˆ¶çš„æ ¸å¿ƒæ€æƒ³æ˜¯é€šè¿‡é¡µè¡¨å°†çº¿æ€§åœ°å€è½¬æ¢ä½ç‰©ç†åœ°å€, å¹¶é…åˆæ—è·¯è½¬æ¢ç¼“å†²åŒº(Translation Lookaside Buffer, TLB)æ¥åŠ é€Ÿåœ°å€è½¬æ¢è¿‡ç¨‹. è¿™é‡Œå¯¹åˆ†é¡µå’Œåˆ†æ®µä¸åšè¯¦ç»†æè¿°, ä¼šå•ç‹¬æ·±å…¥äº†è§£è¿™ä¸¤ä¸ªå…³é”®æœºåˆ¶.</p><p><img src="https://imagebed.torch-fan.site/2022/blog/6541efd3-cf26-41bf-96df-d922ee524d30_.png" alt="åˆ†é¡µæœºåˆ¶" /></p><h2 id="22-x86æ¶æ„çš„åŸºæœ¬è¿è¡Œç¯å¢ƒ"><a class="markdownIt-Anchor" href="#22-x86æ¶æ„çš„åŸºæœ¬è¿è¡Œç¯å¢ƒ"></a> 2.2 x86æ¶æ„çš„åŸºæœ¬è¿è¡Œç¯å¢ƒ</h2><h3 id="221-ä¸‰ç§åŸºæœ¬æ¨¡å¼"><a class="markdownIt-Anchor" href="#221-ä¸‰ç§åŸºæœ¬æ¨¡å¼"></a> 2.2.1 ä¸‰ç§åŸºæœ¬æ¨¡å¼:</h3><blockquote><p>x86å®é™…ä¸Šæœ‰4ç§è¿è¡Œæ¨¡å¼: å®æ¨¡å¼ã€ä¿æŠ¤æ¨¡å¼ã€SMMæ¨¡å¼å’Œè™šæ‹Ÿ8086æ¨¡å¼ã€‚é™¤äº†SMMæ¨¡å¼å¤–ï¼Œå…¶ä½™ä¸‰ç§æ¨¡å¼å‡å¸¸è§äºä¹¦æœ¬ä¸­ã€‚</p></blockquote><ol><li>å®æ¨¡å¼ï¼ˆReal Modeï¼‰ï¼šå½“CPUåŠ ç”µå¹¶ç»å†æœ€åˆçš„æ··æ²ŒçŠ¶æ€åï¼Œé¦–å…ˆè¿›å…¥çš„å°±æ˜¯å®æ¨¡å¼ï¼Œä»–æ˜¯æ—©æœŸintel 8086å¤„ç†å™¨å·¥ä½œçš„æ¨¡å¼ã€‚åœ¨è¯¥æ¨¡å¼ä¸‹ï¼Œé€»è¾‘åœ°å€è½¬æ¢åå³ä¸ºç‰©ç†åœ°å€ï¼ŒCPUå¯ä»¥è®¿é—®1MBçš„ç‰©ç†åœ°å€ç©ºé—´ï¼ˆå®é™…æ˜¯1MB+64KBï¼‰ã€‚æ“ä½œç³»ç»Ÿæˆ–BIOSé€šå¸¸åœ¨è¯¥æ¨¡å¼ä¸‹å‡†å¤‡å¿…è¦çš„æ•°æ®ç»“æ„å’Œåˆå§‹åŒ–å…³é”®çš„å¯„å­˜å™¨ï¼Œç„¶ååˆ‡å…¥ä¿æŠ¤æ¨¡å¼ã€‚</li><li>ä¿æŠ¤æ¨¡å¼ï¼ˆProtect Modeï¼‰ï¼šæ“ä½œç³»ç»Ÿè¿è¡Œæ—¶æœ€å¸¸ç”¨çš„æ¨¡å¼ï¼Œåœ¨è¯¥æ¨¡å¼ä¸‹ï¼ŒCPUçš„æ‰€æœ‰åŠŸèƒ½å‡ ä¹éƒ½èƒ½å¾—åˆ°ä½¿ç”¨ï¼Œå¯ä»¥è®¿é—®æ¶æ„å…è®¸çš„æ‰€æœ‰ç‰©ç†åœ°å€ç©ºé—´ï¼ˆä¾‹å¦‚x86æ˜¯4GBï¼‰ã€‚</li><li>è™šæ‹Ÿ8086æ¨¡å¼ï¼ˆVirutal 8086 modeï¼‰ï¼šä¸ºäº†æ—©æœŸçš„ç¨‹åºèƒ½å¤Ÿåœ¨ä¿æŠ¤æ¨¡å¼ä¸‹è¿è¡Œï¼Œx86æä¾›äº†8086æ¨¡å¼ã€‚è¯¥æ¨¡å¼å¯ä»¥è®©CPUåœ¨ä¿æŠ¤æ¨¡å¼ä¸‹ä¸º8086ç¨‹åºè™šæ‹Ÿå®æ¨¡å¼çš„è¿è¡Œç¯å¢ƒï¼Œä½¿è¿™äº›ç¨‹åºåœ¨æ‰§è¡Œæ—¶æ— é¡»çœŸæ­£çš„ä»ä¿æŠ¤æ¨¡å¼åˆ‡æ¢åˆ°å®æ¨¡å¼ã€‚</li></ol><h2 id="23-å…¶ä»–"><a class="markdownIt-Anchor" href="#23-å…¶ä»–"></a> 2.3 å…¶ä»–ï¼š</h2><p>â€‹è¯¸å¦‚I/Oã€ä¸­æ–­ã€å¯„å­˜å™¨ã€æ€»çº¿ç›¸å…³å†…å®¹è¿‡äºç¹å¤ï¼Œç”±äºæ­¤æ—¶é‡å¿ƒåœ¨è™šæ‹ŸåŒ–æ–¹é¢ï¼Œå…³äºæ“ä½œç³»ç»Ÿç›¸å…³çŸ¥è¯†æˆ‘ä»¬å¯ä»¥åœ¨éœ€è¦æ—¶è¿›è¡Œè¡¥å……ã€‚</p><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://www.geeksforgeeks.org/memory-mapped-i-o-and-isolated-i-o/">Memory mapped I/O and Isolated I/O - GeeksforGeeks</a><a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a href="https://www.geeksforgeeks.org/chroot-command-in-linux-with-examples/">chroot command in Linux with examples - GeeksforGeeks</a><a href="#fnref:2" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:3" class="footnote-text"><span><a href="https://www.geeksforgeeks.org/difference-between-paging-and-segmentation/">Difference Between Paging and Segmentation - GeeksforGeeks</a><a href="#fnref:3" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>æ“ä½œç³»ç»Ÿ</category>
      
      <category>è™šæ‹ŸåŒ–åŸºç¡€</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>clashé…ç½®æ–‡ä»¶é¢„å¤„ç†</title>
    <link href="/2022/07/11/clash%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E9%A2%84%E5%A4%84%E7%90%86/"/>
    <url>/2022/07/11/clash%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E9%A2%84%E5%A4%84%E7%90%86/</url>
    
    <content type="html"><![CDATA[<h1 id="1-å‚è€ƒæ–‡æ¡£"><a class="markdownIt-Anchor" href="#1-å‚è€ƒæ–‡æ¡£"></a> 1. å‚è€ƒæ–‡æ¡£ï¼š</h1><ul><li>clash for windowsçš„parseré…ç½®ï¼š<a href="https://docs.cfw.lbyczf.com/contents/parser.html#%E7%AE%80%E4%BE%BF%E6%96%B9%E6%B3%95-yaml">https://docs.cfw.lbyczf.com/contents/parser.html#%E7%AE%80%E4%BE%BF%E6%96%B9%E6%B3%95-yaml</a></li><li>clash premiumé…ç½®æ–‡æ¡£ï¼š<a href="https://github.com/Dreamacro/clash/wiki/configuration">https://github.com/Dreamacro/clash/wiki/configuration</a></li></ul><h1 id="2-parseræ¨èé…ç½®"><a class="markdownIt-Anchor" href="#2-parseræ¨èé…ç½®"></a> 2. Parseræ¨èé…ç½®ï¼š</h1><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">parsers:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-attr">reg:</span> <span class="hljs-string">https://+.+</span><br>      <span class="hljs-attr">yaml:</span><br>        <span class="hljs-attr">prepend-rules:</span> <br>        <span class="hljs-bullet">-</span> <span class="hljs-string">IP-CIDR6,::/0,DIRECT</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">IP-CIDR,119.29.29.29/32,DIRECT</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">IP-CIDR,114.114.114.114/32,DIRECT</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">IP-CIDR,1.1.1.1/32,DIRECT</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">IP-CIDR,1.0.0.1/32,DIRECT</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">IP-CIDR,8.8.8.8/32,DIRECT</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">DOMAIN-KEYWORD,bilibili,DIRECT</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">DOMAIN-KEYWORD,csdn,DIRECT</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">DOMAIN-KEYWORD,bing,DIRECT</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">DOMAIN-KEYWORD,ieee,DIRECT</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">DOMAIN-KEYWORD,wiley,DIRECT</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">DOMAIN-KEYWORD,sciencedirect,DIRECT</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">DOMAIN-KEYWORD,elsevier,DIRECT</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">DOMAIN-KEYWORD,office,DIRECT</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">DOMAIN-KEYWORD,springer,DIRECT</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">DOMAIN-KEYWORD,dl.acm.org,DIRECT</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">DOMAIN-KEYWORD,grammarly,DIRECT</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">DOMAIN-KEYWORD,webofscience,DIRECT</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">DOMAIN-KEYWORD,clarivate,DIRECT</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">DOMAIN-KEYWORD,webofknowledge,DIRECT</span><br>        <span class="hljs-attr">mix-object:</span><br>          <span class="hljs-attr">dns:</span><br>              <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br>              <span class="hljs-attr">ipv6:</span> <span class="hljs-literal">true</span><br>              <span class="hljs-comment"># enhanced-mode: redir-host</span><br>              <span class="hljs-attr">enhanced-mode:</span> <span class="hljs-string">fake-ip</span><br>              <span class="hljs-attr">fake-ip-range:</span> <span class="hljs-number">198.18</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><span class="hljs-string">/16</span>   <span class="hljs-comment"># if you don&#x27;t know what it is, don&#x27;t change it</span><br>              <span class="hljs-attr">fake-ip-filter:</span>                <span class="hljs-comment"># fake ip white domain list, aka Always Real IP</span><br>                  <span class="hljs-bullet">-</span> <span class="hljs-string">&#x27;*.lan&#x27;</span><br>                  <span class="hljs-bullet">-</span> <span class="hljs-string">localhost.ptlogin2.qq.com</span><br>              <span class="hljs-attr">nameserver:</span><br>                <span class="hljs-bullet">-</span> <span class="hljs-number">192.168</span><span class="hljs-number">.10</span><span class="hljs-number">.1</span><br>                <span class="hljs-bullet">-</span> <span class="hljs-number">119.29</span><span class="hljs-number">.29</span><span class="hljs-number">.29</span><br>                <span class="hljs-bullet">-</span> <span class="hljs-number">223.6</span><span class="hljs-number">.6</span><span class="hljs-number">.6</span><br>                <span class="hljs-comment"># - tcp://1.1.1.1</span><br>                <span class="hljs-comment"># - &#x27;[2400:3200::1]:53&#x27;  # &#x27;[&lt;ipv6&gt;]:43&#x27; ipv6DNSè¦ç”¨è¿™ç§æ ¼å¼æ‰è¡Œ~</span><br>              <span class="hljs-attr">fallback:</span><br>                <span class="hljs-bullet">-</span> <span class="hljs-number">119.29</span><span class="hljs-number">.29</span><span class="hljs-number">.29</span><br>                <span class="hljs-bullet">-</span> <span class="hljs-number">114.114</span><span class="hljs-number">.114</span><span class="hljs-number">.114</span><br>                <span class="hljs-bullet">-</span> <span class="hljs-number">223.6</span><span class="hljs-number">.6</span><span class="hljs-number">.6</span><br>                <span class="hljs-bullet">-</span> <span class="hljs-number">8.8</span><span class="hljs-number">.8</span><span class="hljs-number">.8</span><br>                <span class="hljs-comment"># - &#x27;[2400:3200::1]:53&#x27;</span><br>                <span class="hljs-comment"># - tcp://1.1.1.1</span><br>                <span class="hljs-comment"># - tcp://8.8.8.8</span><br>              <span class="hljs-attr">nameserver-policy:</span><br>                  <span class="hljs-string">&#x27;+.live.com&#x27;</span><span class="hljs-string">:</span> <span class="hljs-string">&#x27;4.2.2.1&#x27;</span><br>                  <span class="hljs-string">&#x27;+.live.net&#x27;</span><span class="hljs-string">:</span> <span class="hljs-string">&#x27;4.2.2.1&#x27;</span><br>                  <span class="hljs-string">&#x27;+.office.com&#x27;</span><span class="hljs-string">:</span> <span class="hljs-string">&#x27;4.2.2.1&#x27;</span><br>                  <span class="hljs-string">&#x27;+.office.net&#x27;</span><span class="hljs-string">:</span> <span class="hljs-string">&#x27;4.2.2.1&#x27;</span><br>                  <span class="hljs-string">&#x27;+.sharepoint.com&#x27;</span><span class="hljs-string">:</span> <span class="hljs-string">&#x27;4.2.2.1&#x27;</span><br>                  <span class="hljs-string">&#x27;+.office365.com&#x27;</span><span class="hljs-string">:</span> <span class="hljs-string">&#x27;4.2.2.1&#x27;</span><br>                  <span class="hljs-string">&#x27;+.officeppe.net&#x27;</span><span class="hljs-string">:</span> <span class="hljs-string">&#x27;4.2.2.1&#x27;</span><br>                  <span class="hljs-string">&#x27;+.skype.com&#x27;</span><span class="hljs-string">:</span> <span class="hljs-string">&#x27;4.2.2.1&#x27;</span><br>                  <span class="hljs-string">&#x27;+.onedrive.com&#x27;</span><span class="hljs-string">:</span> <span class="hljs-string">&#x27;4.2.2.1&#x27;</span><br>                  <span class="hljs-string">&#x27;+.msocsp.com&#x27;</span><span class="hljs-string">:</span> <span class="hljs-string">&#x27;4.2.2.1&#x27;</span><br>                  <span class="hljs-string">&#x27;+.msauthimages.net&#x27;</span><span class="hljs-string">:</span> <span class="hljs-string">&#x27;4.2.2.1&#x27;</span><br>                  <span class="hljs-string">&#x27;+.msauth.net&#x27;</span><span class="hljs-string">:</span> <span class="hljs-string">&#x27;4.2.2.1&#x27;</span><br>                  <span class="hljs-string">&#x27;+.msn.com&#x27;</span><span class="hljs-string">:</span> <span class="hljs-string">&#x27;4.2.2.1&#x27;</span><br>                  <span class="hljs-string">&#x27;+.onenote.com&#x27;</span><span class="hljs-string">:</span> <span class="hljs-string">&#x27;4.2.2.1&#x27;</span><br>                  <span class="hljs-string">&#x27;+.onenote.net&#x27;</span><span class="hljs-string">:</span> <span class="hljs-string">&#x27;4.2.2.1&#x27;</span><br>                  <span class="hljs-string">&#x27;+.1drv.com&#x27;</span><span class="hljs-string">:</span> <span class="hljs-string">&#x27;4.2.2.1&#x27;</span><br>                  <span class="hljs-string">&#x27;+.microsoft.com&#x27;</span><span class="hljs-string">:</span> <span class="hljs-string">&#x27;4.2.2.1&#x27;</span><br>                  <span class="hljs-string">&#x27;+.microsoftonline.com&#x27;</span><span class="hljs-string">:</span> <span class="hljs-string">&#x27;4.2.2.1&#x27;</span><br>              <span class="hljs-attr">fallback-filter:</span><br>                  <span class="hljs-attr">geoip:</span> <span class="hljs-literal">true</span>  <br>                  <span class="hljs-attr">geoip-code:</span> <span class="hljs-string">CN</span>         <br>                  <span class="hljs-attr">ipcidr:</span>                      <br>                  <span class="hljs-bullet">-</span> <span class="hljs-number">240.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span><span class="hljs-string">/4</span><br>                  <span class="hljs-attr">domain:</span><br>                  <span class="hljs-bullet">-</span> <span class="hljs-string">&#x27;+.google.com&#x27;</span><br>                  <span class="hljs-bullet">-</span> <span class="hljs-string">&#x27;+.facebook.com&#x27;</span><br>                  <span class="hljs-bullet">-</span> <span class="hljs-string">&#x27;+.youtube.com&#x27;</span><br>                  <span class="hljs-bullet">-</span> <span class="hljs-string">&#x27;+.github.com&#x27;</span><br>                  <span class="hljs-bullet">-</span> <span class="hljs-string">&#x27;+.live.com&#x27;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æ”¶è—</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Endnoteä½¿ç”¨å°è´´å£«</title>
    <link href="/2022/06/30/Endnote%E4%BD%BF%E7%94%A8%E5%B0%8F%E8%B4%B4%E5%A3%AB/"/>
    <url>/2022/06/30/Endnote%E4%BD%BF%E7%94%A8%E5%B0%8F%E8%B4%B4%E5%A3%AB/</url>
    
    <content type="html"><![CDATA[<h1 id="1-å¢åŠ å¼•ç”¨æ–‡çŒ®çš„æ ¼å¼æ ·å¼"><a class="markdownIt-Anchor" href="#1-å¢åŠ å¼•ç”¨æ–‡çŒ®çš„æ ¼å¼æ ·å¼"></a> 1. å¢åŠ å¼•ç”¨æ–‡çŒ®çš„æ ¼å¼æ ·å¼:</h1><p>åœ¨å†™ä¸­æ–‡è®ºæ–‡æ—¶, å¼•æ–‡æ ¼å¼ä¸€èˆ¬ä¸åœ¨å†…ç½®çš„æ ·å¼ä¸­, éœ€è¦å»endnoteå®˜ç½‘ä¸‹è½½(ç¨å¾®è‡ªå·±æ‰¾æ‰¾), å…·ä½“æ€ä¹ˆä¸‹å°±ä¸æ•™äº†.</p><p>è­¬å¦‚ä¸­æ–‡å¼•æ–‡æ ¼å¼å¯ä»¥æœç´¢: GBT7714, ä¸€èˆ¬ä½¿ç”¨<code>(numeric)</code>åç¼€çš„, å¼•ç”¨æ ·å¼çš„æ–‡ä»¶æ ¼å¼ä¸º: <code>.ens</code>, ä¸‹è½½ååŒå‡»æ‰“å¼€, ç„¶å<code>save as</code>ä¸€ä¸‹, å–ä¸ªåå­—Endnoteå°±çŸ¥é“æ¥æ–°å®¶ä¼™äº†!</p><p><code>save as</code>åæ ·å¼æ–‡ä»¶ä¼šè¢«æ”¾åœ¨%USER%/Documents/EndNote/Stylesä¸‹(å…¶ä»–æ“ä½œç³»ç»ŸæŒ‰ç…§æ­¤æ€è·¯æ‰¾, åæ­£åœ¨ç”¨æˆ·ç›®å½•çš„ç›¸å…³åº”ç”¨çš„æ–‡æ¡£ç›®å½•å†…)</p><h1 id="2-ä¿®æ”¹å‚è€ƒæ–‡çŒ®æ ¼å¼"><a class="markdownIt-Anchor" href="#2-ä¿®æ”¹å‚è€ƒæ–‡çŒ®æ ¼å¼"></a> 2. ä¿®æ”¹å‚è€ƒæ–‡çŒ®æ ¼å¼</h1><p><img src="https://imagebed.torch-fan.site/2022/blog/20220630134649.png" alt="è®¾ç½®æŒ‰é’®" /></p><p>endnoteçš„æ ·å¼è®¾ç½®æŒ‰é’®æ¯”è¾ƒå¥‡è‘©, ä¸€ä¸ªå°ç®­å¤´, ç‚¹å¼€åå°±èƒ½è®¾ç½®æ ·å¼äº†, è­¬å¦‚:</p><ul><li>å¼•æ–‡çš„æ•´ä½“ç¼©è¿›å°±è®¾ç½® hang. (å°±è¿™ä¸ªæ¯”è¾ƒå¸¸ç”¨)</li></ul><h1 id="3-è‡ªå®šä¹‰å¼•æ–‡æ ·å¼"><a class="markdownIt-Anchor" href="#3-è‡ªå®šä¹‰å¼•æ–‡æ ·å¼"></a> 3. è‡ªå®šä¹‰å¼•æ–‡æ ·å¼</h1><p>å®˜æ–¹æä¾›çš„å‚è€ƒæ–‡æ¡£: <a href="https://clarivate.libguides.com/ld.php?content_id=33224848">https://clarivate.libguides.com/ld.php?content_id=33224848</a></p><p>æ ‡ç‚¹ç¬¦å·åœ¨å¼•æ–‡æ ·å¼å®šä¹‰ä¸­, æœ‰äº›æ ‡ç‚¹(Punctuation)æœ‰ä¸åŒå«ä¹‰, å…·ä½“å¯ä»¥ä¹¦ä¸­<code>3.2.2 Punction</code></p><blockquote><p>3.2.2 Punctuation</p><p>This is an option available with EndNote X6 and later. Style guides in some regions require a space before the colon (and other special characters) in the formatting of references. Other style guides do not.</p><p>Select either English or French as the punctuation option. The default selection is English.</p><p>The English option tells EndNote to remove extra spaces before the punctuation marks listed below. Spaces before other punctuation marks and symbols are retained.</p><ul><li>Colon <code>(:)</code></li><li>Semi-colon <code>(;)</code></li><li>Exclamation mark <code>(!)</code></li><li>Question mark <code>(?)</code></li></ul><p>The French option tells EndNote that a space is required before and after the following punctuation marks.</p><ul><li>Colon <code>(:)</code></li><li>Semi-colon <code>(;)</code></li><li>Chevrons <code>(&lt;&lt; &gt;&gt;)</code> (opening and closing)</li><li>Exclamation mark <code>(!)</code></li><li>Question mark <code>(?)</code></li><li>Percent sign <code>(%)</code></li><li>Dollar sign <code>($)</code></li><li>Number Sign or Hash Mark <code>(#)</code></li></ul></blockquote><p>EndNoteçš„å¼•æ–‡æ ·å¼å®šä¹‰ä¸­æœ‰ä¸€äº›ç‰¹æ®Šçš„ç¬¦å·, ç”¨æ¥å¤„ç†ä¸€äº›å¯å˜æƒ…å†µ(æ¯”å¦‚æœ‰çš„æ–‡ç« æœ‰å‰¯æ ‡é¢˜, æœ‰çš„æ–‡ç« æ²¡æœ‰å‰¯æ ‡é¢˜), è¿™äº›åœ¨ä¹¦ä¸­<code>3.3.6 Special Characters in Templates</code>ä¸­æœ‰ä»‹ç».  è¿™äº›ç‰¹æ®Šç¬¦å·ä¹Ÿç”±<code>Insert Field</code>æ’å…¥, å…¶åŠŸèƒ½è¯¦è§ä¹¦ä¸­ä»‹ç».</p><blockquote><p>3.3.6 Special Characters in Templates</p><p>In addition to fields and punctuation, there are several special characters EndNote uses to help control how reference information appears in a style. The table below shows these characters and how they are used (note that all special characters have been enlarged below for readability).</p><p><img src="https://imagebed.torch-fan.site/2022/blog/20220630151418.png" alt="3.3.6fig1" /></p><p><img src="https://imagebed.torch-fan.site/2022/blog/20220630151454.png" alt="3.3.6fig2" /></p></blockquote>]]></content>
    
    
    <categories>
      
      <category>æ•™ç¨‹</category>
      
      <category>æ–‡æ¡£æ’°å†™</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>522.æœ€é•¿ç‰¹æ®Šåºåˆ—</title>
    <link href="/2022/06/27/522-%E6%9C%80%E9%95%BF%E7%89%B9%E6%AE%8A%E5%BA%8F%E5%88%97/"/>
    <url>/2022/06/27/522-%E6%9C%80%E9%95%BF%E7%89%B9%E6%AE%8A%E5%BA%8F%E5%88%97/</url>
    
    <content type="html"><![CDATA[<h1 id="522-æœ€é•¿ç‰¹æ®Šåºåˆ—"><a class="markdownIt-Anchor" href="#522-æœ€é•¿ç‰¹æ®Šåºåˆ—"></a> 522. æœ€é•¿ç‰¹æ®Šåºåˆ—</h1><p>Leetcodeé¢˜ç›®é“¾æ¥: <a href="https://leetcode.cn/problems/longest-uncommon-subsequence-ii/">https://leetcode.cn/problems/longest-uncommon-subsequence-ii/</a></p><h2 id="1-è§£é¢˜æ€è·¯"><a class="markdownIt-Anchor" href="#1-è§£é¢˜æ€è·¯"></a> 1. è§£é¢˜æ€è·¯:</h2><ol><li><code>æœ€é•¿ç‰¹æ®Šåºåˆ—</code> æ˜¾ç„¶æ˜¯æ•°ç»„ä¸­æŸä¸ªå­—ç¬¦ä¸²è€Œéå…¶å­åºåˆ—: è¯•æƒ³å¦‚æœç»“æœæ˜¯æŸä¸ªå­åºåˆ—, é‚£ä¹ˆè¯¥å­åºåˆ—æ‰€å±çš„å­—ç¬¦ä¸²ä¹Ÿå¿…ç„¶æ˜¯æ›´å¤§çš„ç»“æœ(è¯¥å­—ç¬¦ä¸²ä¹Ÿå¿…ç„¶ä¸æ˜¯ä»»ä½•å…¶ä»–å­—ç¬¦ä¸²çš„å­åºåˆ—!), å› æ­¤è‡ªç›¸çŸ›ç›¾, è¯¥é¢˜çš„ç»“æœå¿…ç„¶ç›´æ¥æ˜¯æ•°ç»„ä¸­æŸä¸ªå­—ç¬¦ä¸².</li><li>é¢˜ç›®å¯ä»¥è½¬æ¢ä¸º: <mark style="color:orange;">æ‰¾åˆ°ä¸€ä¸ªæ•°ç»„ä¸­æœ€é•¿ä¸”ä¸ä¸ºå…¶ä»–å­—ç¬¦ä¸²å­åºåˆ—çš„å…ƒç´ </mark>.</li></ol><h3 id="11-æœ´ç´ è§£æ³•"><a class="markdownIt-Anchor" href="#11-æœ´ç´ è§£æ³•"></a> 1.1 æœ´ç´ è§£æ³•:</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">findLUSlength</span><span class="hljs-params">(<span class="hljs-type">const</span> vector&lt;string&gt;&amp; strs)</span> </span>&#123;<br><br>        <span class="hljs-type">int</span> arrLen = strs.<span class="hljs-built_in">size</span>();<br>        <span class="hljs-type">int</span> ans = <span class="hljs-number">-1</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; arrLen; i++) &#123;<br>            <span class="hljs-type">int</span> signedSizeI = <span class="hljs-built_in">int</span>(strs[i].<span class="hljs-built_in">size</span>()); <br>            <span class="hljs-keyword">if</span> (ans &gt; signedSizeI) <span class="hljs-keyword">continue</span>;<br>            <span class="hljs-type">int</span> j = <span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">for</span> (; j &lt; arrLen; j++) &#123;<br>                <span class="hljs-keyword">if</span> (j &gt;= arrLen) <span class="hljs-keyword">break</span>;<br>                <span class="hljs-keyword">if</span> (i == j) <span class="hljs-keyword">continue</span>;<br>                <span class="hljs-type">int</span> signedSizeJ = <span class="hljs-built_in">int</span>(strs[j].<span class="hljs-built_in">size</span>());<br>                <span class="hljs-type">int</span> permission = signedSizeI &gt; signedSizeJ;<br>                <span class="hljs-keyword">if</span> (! permission &amp;&amp; <span class="hljs-keyword">this</span>-&gt;<span class="hljs-built_in">isSub</span>(strs[i], strs[j])) &#123;<br>                    <span class="hljs-keyword">break</span>;<br>                &#125;<br>            &#125;<br>            <span class="hljs-keyword">if</span> (j &gt;= arrLen &amp;&amp; ans &lt; signedSizeI) &#123;<br>                ans = signedSizeI;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br><br><span class="hljs-keyword">private</span>:<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">isSub</span><span class="hljs-params">(<span class="hljs-type">const</span> string&amp; a, <span class="hljs-type">const</span> string&amp; b)</span> </span>&#123;<br>        <span class="hljs-type">int</span> lengthA = a.<span class="hljs-built_in">length</span>(), lengthB = b.<span class="hljs-built_in">length</span>();<br>        <span class="hljs-type">int</span> i = <span class="hljs-number">0</span>, j = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">while</span>(i &lt; lengthA &amp;&amp; j &lt; lengthB) &#123;<br>            <span class="hljs-keyword">if</span> (a[i] == b[j++]) &#123;<br>                i++;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> i == lengthA;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><h3 id="12-ä¼˜åŒ–1-é¢„å¤„ç†"><a class="markdownIt-Anchor" href="#12-ä¼˜åŒ–1-é¢„å¤„ç†"></a> 1.2 ä¼˜åŒ–1: é¢„å¤„ç†</h3><blockquote><p>ç”±äºå­˜åœ¨åŒå±‚å¾ªç¯, å› æ­¤æˆ‘ä»¬æƒ³å°½å¯èƒ½é™ä½å†…å­˜å¾ªç¯å¤æ‚åº¦</p><p>è€ƒè™‘åˆ°, å¦‚æœä¸€ä¸ªAé•¿åº¦å¤§äºB, é‚£ä¹ˆAå¿…ç„¶ä¸ä¸ºBçš„å­åºåˆ—, é‚£ä¹ˆå¯ä»¥å¯¹æ•°ç»„åšä¸€ä¸ªé¢„å¤„ç†, å°†æ•°ç»„é€†åºæ’åˆ—, å°±å¯ä»¥å‡å°‘ä¸€äº›åˆ¤æ–­é•¿åº¦æ“ä½œ (å½“ç„¶, ä»å°åˆ°å¤§æ’ä¹Ÿè¡Œ, ä¸¤è€…æ˜¯å¦ä¼šäº§ç”ŸåŒºåˆ«å‘¢?)</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">findLUSlength</span><span class="hljs-params">(vector&lt;string&gt;&amp; strs)</span> </span>&#123;<br>    <span class="hljs-built_in">sort</span>(strs.<span class="hljs-built_in">begin</span>(), strs.<span class="hljs-built_in">end</span>(), [](<span class="hljs-type">const</span> string&amp; a, <span class="hljs-type">const</span> string&amp; b)&#123;<br>        <span class="hljs-keyword">return</span> a.<span class="hljs-built_in">length</span>() &gt; b.<span class="hljs-built_in">length</span>();<br>    &#125;);<br><br>    <span class="hljs-type">int</span> arrLen = strs.<span class="hljs-built_in">size</span>();<br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">-1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; arrLen; i++) &#123;<br>        <span class="hljs-type">int</span> signedSizeI = <span class="hljs-built_in">int</span>(strs[i].<span class="hljs-built_in">size</span>()); <br>        <span class="hljs-keyword">if</span> (ans &gt; signedSizeI) <span class="hljs-keyword">continue</span>;<br>        <span class="hljs-type">int</span> j = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (; j &lt; arrLen; j++) &#123;<br>            <span class="hljs-keyword">if</span> (j &gt;= arrLen) <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">if</span> (i == j) <span class="hljs-keyword">continue</span>;<br>            <span class="hljs-type">int</span> signedSizeJ = <span class="hljs-built_in">int</span>(strs[j].<span class="hljs-built_in">size</span>());<br>            <span class="hljs-type">int</span> permission = signedSizeI &gt; signedSizeJ;<br>            <span class="hljs-keyword">if</span> (! permission &amp;&amp; <span class="hljs-keyword">this</span>-&gt;<span class="hljs-built_in">isSub</span>(strs[i], strs[j])) &#123;<br>                <span class="hljs-keyword">break</span>;<br>            &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (permission) &#123;<br>                j = arrLen - <span class="hljs-number">1</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (j &gt;= arrLen &amp;&amp; ans &lt; signedSizeI) &#123;<br>            ans = signedSizeI;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="13-ä¼˜åŒ–2-è¿­ä»£æ­¥æ•°"><a class="markdownIt-Anchor" href="#13-ä¼˜åŒ–2-è¿­ä»£æ­¥æ•°"></a> 1.3 ä¼˜åŒ–2: è¿­ä»£æ­¥æ•°</h3><blockquote><p>è€ƒè™‘åˆ°å­—ç¬¦ä¸²é•¿åº¦å¯¹å­åºåˆ—åˆ¤æ–­çš„å½±å“, åœ¨è¿›è¡ŒåŒå±‚å¾ªç¯æ—¶, æˆ‘ä»¬å®Œå…¨åªéœ€è¦å¯¹<code>j</code>å‘æ›´é•¿å­—ç¬¦ä¸²è¿›è¡Œéå†å³å¯~</p><p>ä½†è¿™æ ·ä¼šé‡åˆ°ä¸€ä¸ªæ–°é—®é¢˜: <code>å¦‚æœæœ‰é•¿åº¦ç›¸åŒæˆ–è€…ç”šè‡³å®Œå…¨ä¸€æ ·çš„å­—ç¬¦ä¸², è¯¥å¦‚ä½•å¤„ç†å‘¢?</code></p><ol><li>å¦‚æœé¢„å¤„ç†æ—¶æ˜¯ä»å¤§åˆ°å°æ’åˆ—, åªéœ€è¦ä¸¤å±‚å¾ªç¯éƒ½é€†åºå³å¯(å¦‚æœæ˜¯æ­£å¸¸çš„ä»å°åˆ°å¤§é¢„å¤„ç†, åˆ™ä¸å¿…è€ƒè™‘è¿™ä¸€ç‚¹)</li><li>å¦‚æœæœ‰å®Œå…¨ä¸€æ ·çš„å­—ç¬¦ä¸², å¤„ç†æ–¹å¼ä¹Ÿæœ‰ä¸€äº›æ”¹å˜: å¦‚æœaæ˜¯bçš„å­ä¸²,<code>j</code>ä¸èƒ½ç›´æ¥è·³è¿‡äº†, è¦å°†åç»­æ‰€æœ‰ç›¸åŒé•¿åº¦çš„å­—ç¬¦ä¸²éƒ½éå†, å¹¶ä½¿ç”¨ä¸€ä¸ªé›†åˆè®°å½•å®Œå…¨ç›¸åŒçš„å­—ç¬¦ä¸²(è¿™äº›å­—ç¬¦ä¸²å¿…ç„¶äº’ä¸ºå­ä¸², ä¸èƒ½è€ƒè™‘äº†, é‡åˆ°ç›´æ¥è·³è¿‡). è¿™æ ·åšå¯ä»¥é¿å…å‡ºç°å¥‡æ•°ä¸ªç›¸åŒå­—ç¬¦ä¸²çš„é—®é¢˜(ä¸”è¯¥ç±»å­—ç¬¦ä¸²æ— çˆ¶å­—ç¬¦ä¸²)</li></ol></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;set&gt;</span></span><br><span class="hljs-keyword">using</span> std::set;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">findLUSlength</span><span class="hljs-params">(vector&lt;string&gt;&amp; strs)</span> </span>&#123;<br>        <span class="hljs-built_in">sort</span>(strs.<span class="hljs-built_in">begin</span>(), strs.<span class="hljs-built_in">end</span>(), [](<span class="hljs-type">const</span> string&amp; a, <span class="hljs-type">const</span> string&amp; b)&#123;<br>            <span class="hljs-keyword">return</span> a.<span class="hljs-built_in">length</span>() &gt; b.<span class="hljs-built_in">length</span>();<br>        &#125;);<br><br>        set&lt;<span class="hljs-type">int</span>&gt; invalid;<br>        <span class="hljs-type">int</span> arrLen = strs.<span class="hljs-built_in">size</span>();<br>        <span class="hljs-type">int</span> ans = <span class="hljs-number">-1</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = arrLen - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) &#123;<br>            <span class="hljs-keyword">if</span> (invalid.<span class="hljs-built_in">count</span>(i) == <span class="hljs-number">1</span>) <span class="hljs-keyword">continue</span>;<br>            <span class="hljs-type">int</span> signedSizeI = <span class="hljs-built_in">int</span>(strs[i].<span class="hljs-built_in">size</span>()); <br>            <span class="hljs-keyword">if</span> (ans &gt; signedSizeI) <span class="hljs-keyword">continue</span>;<br>            <span class="hljs-type">int</span> j = i - <span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">for</span> (; j &gt;= <span class="hljs-number">0</span>; j--) &#123;<br>                <span class="hljs-type">int</span> signedSizeJ = <span class="hljs-built_in">int</span>(strs[j].<span class="hljs-built_in">size</span>());<br>                <span class="hljs-keyword">if</span> (j &lt; <span class="hljs-number">0</span>) <span class="hljs-keyword">break</span>;<br>                <span class="hljs-keyword">if</span> (i == j) <span class="hljs-keyword">continue</span>;<br>                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>-&gt;<span class="hljs-built_in">isSub</span>(strs[i], strs[j])) &#123;<br>                    <span class="hljs-keyword">if</span>(invalid.<span class="hljs-built_in">count</span>(i) == <span class="hljs-number">0</span>) invalid.<span class="hljs-built_in">insert</span>(i);<br>                    <span class="hljs-keyword">if</span> (signedSizeI == signedSizeJ) &#123;<br>                        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>-&gt;<span class="hljs-built_in">isSub</span>(strs[j], strs[i]))&#123;<br>                            invalid.<span class="hljs-built_in">insert</span>(j);<br>                        &#125;<br>                    &#125; <span class="hljs-keyword">else</span> &#123;<br>                        <span class="hljs-keyword">break</span>;<br>                    &#125;<br>                &#125;<br>            &#125;<br>            <span class="hljs-keyword">if</span> (invalid.<span class="hljs-built_in">count</span>(i) == <span class="hljs-number">0</span> &amp;&amp; j &lt; <span class="hljs-number">0</span> &amp;&amp; ans &lt; signedSizeI) &#123;<br>                ans = signedSizeI;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br><br><span class="hljs-keyword">private</span>:<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">isSub</span><span class="hljs-params">(<span class="hljs-type">const</span> string&amp; a, <span class="hljs-type">const</span> string&amp; b)</span> </span>&#123;<br>        <span class="hljs-type">int</span> lengthA = a.<span class="hljs-built_in">length</span>(), lengthB = b.<span class="hljs-built_in">length</span>();<br>        <span class="hljs-type">int</span> i = <span class="hljs-number">0</span>, j = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">while</span>(i &lt; lengthA &amp;&amp; j &lt; lengthB) &#123;<br>            <span class="hljs-keyword">if</span> (a[i] == b[j++]) &#123;<br>                i++;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> i == lengthA;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>Leetcode</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä½¿ç”¨Gitbookä¹¦å†™æ–‡æ¡£(ä¸æ¨è)</title>
    <link href="/2022/06/27/%E4%BD%BF%E7%94%A8Gitbook%E4%B9%A6%E5%86%99%E6%96%87%E6%A1%A3/"/>
    <url>/2022/06/27/%E4%BD%BF%E7%94%A8Gitbook%E4%B9%A6%E5%86%99%E6%96%87%E6%A1%A3/</url>
    
    <content type="html"><![CDATA[<h1 id="è¯´åœ¨å‰é¢"><a class="markdownIt-Anchor" href="#è¯´åœ¨å‰é¢"></a> è¯´åœ¨å‰é¢:</h1><p>gitbookå®˜ç½‘æœ¬èº«è¢«å¢™è™½ç„¶é—®é¢˜ä¸å¤§, ä½†æ˜¯å…¶åœ¨çº¿ç¼–è¾‘å™¨æå…¶æ¶å¿ƒ, ç°åœ¨å·²ç»ä¸æ¨èä½¿ç”¨GitBookè¿™æ¬¾å·¥å…·äº†.</p><h1 id="1-å®‰è£…"><a class="markdownIt-Anchor" href="#1-å®‰è£…"></a> 1. å®‰è£…:</h1><h2 id="11-ç¯å¢ƒè¦æ±‚"><a class="markdownIt-Anchor" href="#11-ç¯å¢ƒè¦æ±‚"></a> 1.1  ç¯å¢ƒè¦æ±‚:</h2><ul><li>NodeJS (v4.0.0 and above is recommended):<code>Node.jsç‰ˆæœ¬éœ€è¦ä¸º4.0.0ä»¥ä¸Š</code></li><li>Windows, Linux, Unix, or Mac OS X: <code>å…¨å¹³å°éƒ½æ”¯æŒ</code></li></ul><h2 id="12-å®‰è£…"><a class="markdownIt-Anchor" href="#12-å®‰è£…"></a> 1.2 å®‰è£…:</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install gitbook-cli -g<br></code></pre></td></tr></table></figure><h2 id="13-åˆ›å»ºbook"><a class="markdownIt-Anchor" href="#13-åˆ›å»ºbook"></a> 1.3 åˆ›å»º<code>book</code>:</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">gitbook init<br><br><span class="hljs-comment"># `preview` and `serve` your book using: </span><br>gitbook serve<br><br><span class="hljs-comment"># or `build` the static website using:</span><br>gitbook build<br></code></pre></td></tr></table></figure><h2 id="14-å…¶ä»–"><a class="markdownIt-Anchor" href="#14-å…¶ä»–"></a> 1.4 å…¶ä»–:</h2><blockquote><p>å¦‚æœä½ æƒ³ç”¨å…¶ä»–ç‰ˆæœ¬çš„gitbook</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">gitbook fetch beta<br><br><span class="hljs-comment"># to list remote versions available for install</span><br>gitbook ls-remote <br></code></pre></td></tr></table></figure><blockquote><p>å¦‚æœæƒ³è°ƒè¯•ç½‘ç«™, è·å¾—æ›´å¤šå¼‚å¸¸é“¾ä¿¡æ¯:</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#  to get better error messages (with stack trace)</span><br>gitbook build ./ --<span class="hljs-built_in">log</span>=debug --debug<br></code></pre></td></tr></table></figure><h1 id="2-é¡¹ç›®ç»“æ„"><a class="markdownIt-Anchor" href="#2-é¡¹ç›®ç»“æ„"></a> 2. é¡¹ç›®ç»“æ„:</h1><h2 id="21-åŸºç¡€"><a class="markdownIt-Anchor" href="#21-åŸºç¡€"></a> 2.1 åŸºç¡€:</h2><p>æ¯ä¸ª<code>Gitbook</code>é¡¹ç›®æ ¹ç›®å½•éƒ½åº”è¯¥æœ‰ä¸€ä¸ª<code>.gitbook.yaml</code>æ–‡ä»¶, æ–‡ä»¶å†…å®¹å®ä¾‹å¦‚ä¸‹:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">root:</span> <span class="hljs-string">./docs</span><br><br><span class="hljs-attr">structure:</span>  <br>    <span class="hljs-attr">readme:</span> <span class="hljs-string">README.md</span>  <br>    <span class="hljs-attr">summary:</span> <span class="hljs-string">SUMMARY.md</span><br><br><span class="hljs-attr">redirects:</span>  <br>    <span class="hljs-attr">previous/page:</span> <span class="hljs-string">new-folder/page.md</span><br></code></pre></td></tr></table></figure><p>æ ¹ç›®å½•è¿˜æœ‰ä¸€ä¸ªå¯é€‰çš„<code>book.json</code>ç”¨æ¥æ·»åŠ æ’ä»¶, åˆ›å»ºæ–‡ä»¶æ·»åŠ å†…å®¹ååªéœ€è¦æ‰§è¡Œ<code>gitbook install</code>å³å¯:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br><br>    <span class="hljs-attr">&quot;title&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;æ¼”ç¤ºç”¨&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;æ¼”ç¤º&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;author&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;twilight&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;language&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;zh-hans&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;gitbook&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;3.2.3&quot;</span><span class="hljs-punctuation">,</span><br><br>    <span class="hljs-attr">&quot;plugins&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>      <span class="hljs-string">&quot;back-to-top-button&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-string">&quot;splitter&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-string">&quot;lightbox&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-string">&quot;custom-favicon&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-string">&quot;chapter-fold&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-string">&quot;page-toc-button&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-string">&quot;-sharing&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-string">&quot;-lunr&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-string">&quot;-search&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-string">&quot;search-pro&quot;</span><br><br>    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br><br>    <span class="hljs-attr">&quot;pluginsConfig&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br><br>        <span class="hljs-attr">&quot;page-toc-button&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>            <span class="hljs-attr">&quot;maxTocDepth&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;minTocSize&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><br>        <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;favicon&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;./assets/favicon.ico&quot;</span><br>      <span class="hljs-punctuation">&#125;</span><br>        <br><br><span class="hljs-punctuation">&#125;</span><br><br>```json<br><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;plugins&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>      <span class="hljs-string">&quot;back-to-top-button&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-string">&quot;lightbox&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-string">&quot;chapter-fold&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-string">&quot;page-toc-button&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-string">&quot;-sharing&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-string">&quot;-lunr&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-string">&quot;-search&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-string">&quot;search-pro&quot;</span><br><br>    <span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><br>## <span class="hljs-number">2.2</span> `root`:<br><br>&gt; `root`å­—æ®µè®¾ç½®äº†ä¸€ä¸ªæœç´¢è·¯å¾„, GitBookä¼šä»¥è¯¥è·¯å¾„ä¸ºæ ¹ç›®å½•æœç´¢ç›¸å…³æ–‡æ¡£<br>&gt; <br>&gt; `äº‹å®ä¸Š, rootå­—æ®µç›®å‰ä¼¼ä¹ä¸èƒ½ç”¨, å¹¶ä¸æ¨èè®¾ç½®è¯¥å±æ€§!`<br><br>**æ‰€æœ‰å…¶ä»–æŒ‡å®šè·¯å¾„çš„é€‰é¡¹éƒ½ä¼šä»¥æ ¹ç›®å½•ä¸ºç›¸å¯¹è·¯å¾„**. è­¬å¦‚å°†`structure.<span class="hljs-keyword">summary</span>`å®šä¹‰ä¸º`./product/<span class="hljs-keyword">SUMMARY</span>.md`, é‚£ä¹ˆGitBookå°†ä¼šæœç´¢æ–‡ä»¶:`./docs/product/<span class="hljs-keyword">SUMMARY</span>.md`<br><br>## <span class="hljs-number">2.3</span> `structure`:<br><br>`structure`å­—æ®µåŒ…å«ä¸¤ä¸ªå±æ€§:<br><br>- `readme`: è¯¥æ–‡æ¡£æ˜¯æ–‡æ¡£çš„ç¬¬ä¸€é¡µ, å…¶é»˜è®¤å€¼ä¸º: `./README.md`<br>- `<span class="hljs-keyword">summary</span>`: æ–‡æ¡£çš„ç›®å½•, å…¶é»˜è®¤å€¼ä¸º: `./<span class="hljs-keyword">SUMMARY</span>.md`<br><br>&gt; ä»–ä»¬çš„è·¯å¾„éƒ½æ˜¯ç›¸å¯¹`root`è€Œè¨€çš„ç›¸å¯¹è·¯å¾„<br><br>## <span class="hljs-number">2.4</span> `<span class="hljs-keyword">summary</span>`:<br><br>```markdown<br># <span class="hljs-keyword">Summary</span><br><br>## Use headings <span class="hljs-keyword">to</span> <span class="hljs-keyword">create</span> page <span class="hljs-keyword">groups</span> <span class="hljs-keyword">like</span> this one<br><br>* [First pag<span class="hljs-string">e&#x27;s title](page1/README.md)    </span><br><span class="hljs-string">    * [Some child page](page1/page1-1.md)    </span><br><span class="hljs-string">    * [Some other child page](part1/page1-2.md)</span><br><span class="hljs-string"></span><br><span class="hljs-string">* [Second page&#x27;</span>s title](page2/README.md)    <br>    * [<span class="hljs-keyword">Some</span> child page](page2/page2<span class="hljs-number">-1.</span>md)    <br>    * [<span class="hljs-keyword">Some</span> other child page](part2/page2<span class="hljs-number">-2.</span>md)    <br><br>## A second-page <span class="hljs-keyword">group</span><br><br>* [Yet another page](another-page.md)<br></code></pre></td></tr></table></figure><blockquote><p>The summary markdown file is <strong>a mirror of the Table of Contents</strong> of your GitBook space. So even when no summary file is provided during an initial import, GitBook will create one and/or update it whenever you update your content using the GitBook editor.</p><p>Due to this, it is not possible to reference the same markdown file twice in your <code>SUMMARY.md</code> file, because this would imply that a single page lives at two different URLs in your GitBook space.</p></blockquote><h2 id="25-redirects"><a class="markdownIt-Anchor" href="#25-redirects"></a> 2.5 <code>redirects</code>:</h2><p>GitBookå…è®¸ç”¨æˆ·è‡ªå®šä¹‰URLé‡å®šå‘.</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs markdown">redirects:  <br><span class="hljs-code">    help: support.md</span><br></code></pre></td></tr></table></figure><blockquote><p>å½“ç”¨æˆ·è®¿é—®<code>/help</code>æ—¶,è¯·æ±‚ä¼šè¢«é‡å®šå‘åˆ°<code>/support</code>ä¸Š.</p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs markdown">redirects:<br><span class="hljs-code">    help: misc/support.md</span><br></code></pre></td></tr></table></figure><blockquote><p><code>/help</code>è¢«é‡å®šå‘åˆ°<code>/misc/support</code>ä¸Š</p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs markdown">redirects:  <br><span class="hljs-code">    help/contact: contact.md</span><br></code></pre></td></tr></table></figure><blockquote><p><code>/help/contact</code>è¢«é‡å®šå‘åˆ°<code>/contact</code>ä¸Š</p></blockquote><h1 id="å…¶ä»–"><a class="markdownIt-Anchor" href="#å…¶ä»–"></a> å…¶ä»–:</h1><h2 id="gitbookå‡ºç°typeerror-cbapply-is-not-a-function"><a class="markdownIt-Anchor" href="#gitbookå‡ºç°typeerror-cbapply-is-not-a-function"></a> gitbookå‡ºç°TypeError: cb.apply is not a function</h2><blockquote><p>é™ä½node.jsçš„ç‰ˆæœ¬: <code>10.14.1</code></p></blockquote><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://github.com/GitbookIO/gitbook/blob/master/docs/setup.md">https://github.com/GitbookIO/gitbook/blob/master/docs/setup.md</a><a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a href="https://docs.gitbook.com/integrations/git-sync/content-configuration">https://docs.gitbook.com/integrations/git-sync/content-configuration</a><a href="#fnref:2" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>æ•™ç¨‹</category>
      
      <category>æ–‡æ¡£æ’°å†™</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æœºåœºæ¨è</title>
    <link href="/2022/06/27/%E6%9C%BA%E5%9C%BA%E6%8E%A8%E8%8D%90/"/>
    <url>/2022/06/27/%E6%9C%BA%E5%9C%BA%E6%8E%A8%E8%8D%90/</url>
    
    <content type="html"><![CDATA[<h1 id="1-gladosç‚¹å‡»ç›´è¾¾"><a class="markdownIt-Anchor" href="#1-gladosç‚¹å‡»ç›´è¾¾"></a> 1. <a href="https://github.com/glados-network/GLaDOS">GLaDOS(ç‚¹å‡»ç›´è¾¾)</a></h1><blockquote><p>è¾“å…¥é‚€è¯·ç <code>W90XQ-WS8SY-37XTL-ULQ4X</code>, æˆ‘ä»¬ä¿©éƒ½èƒ½è·å¾—14å¤©, ä¸¾æ‰‹ä¹‹åŠ³å“¦~:)</p></blockquote><h2 id="11-ä¼˜ç‚¹"><a class="markdownIt-Anchor" href="#11-ä¼˜ç‚¹"></a> 1.1 ä¼˜ç‚¹:</h2><ul><li>å¯ä½¿ç”¨å­¦æ ¡é‚®ç®±å…è´¹é¢†å–ä¸€å¹´eduå¥—é¤, æ¯æœˆ50G</li><li>å¥—é¤ä»·æ ¼ä¸­è§„ä¸­çŸ©:</li></ul><p><img src="https://imagebed.torch-fan.site/2022/blog/glados.png" alt="GlaDOSå¥—é¤ä»·æ ¼" /></p><ul><li>æ•™è‚²ç”¨æˆ·å¯ä»¥ä½¿ç”¨<code>Think-Different</code>ä¼˜æƒ ç , æ»¡100-50</li><li>æ”¯æŒçš„ç»ˆç«¯éå¸¸å¤š:</li></ul><p><img src="https://imagebed.torch-fan.site/2022/blog/glados_app.png" alt="GlaDOSæ”¯æŒçš„ç»ˆç«¯åº”ç”¨å’Œè®¾å¤‡" /></p><h2 id="12-ç¼ºç‚¹"><a class="markdownIt-Anchor" href="#12-ç¼ºç‚¹"></a> 1.2 ç¼ºç‚¹:</h2><ul><li>ä½çº§å¥—é¤ä¸å¤Ÿå¿«, ä½†æ˜¯æ—¥å¸¸ä½¿ç”¨è¿˜æ˜¯å¯ä»¥çš„</li><li>å¥—é¤ä»·æ ¼è™½ç„¶å¯ä»¥, ä½†æ˜¯è¿˜æ˜¯å¤ªè´µ, ä¸€èˆ¬ä¸éœ€è¦é‚£ä¹ˆå¤šæµé‡(200G), æœ‰ä¸ª50Gå…¶å®å°±å¤Ÿäº†</li></ul><h1 id="2-å¢™è£‚ç‚¹å‡»ç›´è¾¾"><a class="markdownIt-Anchor" href="#2-å¢™è£‚ç‚¹å‡»ç›´è¾¾"></a> 2. <a href="https://my.qianglie.com/#/register?code=v3zqp9Ze">å¢™è£‚(ç‚¹å‡»ç›´è¾¾)</a></h1><h2 id="21-ä¼˜ç‚¹"><a class="markdownIt-Anchor" href="#21-ä¼˜ç‚¹"></a> 2.1 ä¼˜ç‚¹:</h2><blockquote><p>ç”±äºä¼˜ç‚¹è¿‡äºçªå‡º, å°±ä¸ä»‹ç»ç¼ºç‚¹äº†</p></blockquote><ul><li>æå…¶çš„ä¾¿å®œ, ä¹Ÿæœ‰BGPå’ŒIEPLçº¿è·¯</li></ul><p><img src="https://imagebed.torch-fan.site/2022/blog/qianglie_price1.png" alt="å¢™è£‚å¥—é¤ä»·æ ¼1" /></p><p><img src="https://imagebed.torch-fan.site/2022/blog/qianglie_price2.png" alt="å¢™è£‚å¥—é¤ä»·æ ¼2" /></p><p><img src="https://imagebed.torch-fan.site/2022/blog/qianglie_standard.png" alt="æœ€ä¾¿å®œçš„Standardå¥—é¤" /></p>]]></content>
    
    
    <categories>
      
      <category>æ”¶è—</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç”±Githubæ‰˜ç®¡çš„è®°ç¬”è®°æ–¹å¼</title>
    <link href="/2022/06/25/%E7%94%B1Github%E6%89%98%E7%AE%A1%E7%9A%84%E8%AE%B0%E7%AC%94%E8%AE%B0%E6%96%B9%E5%BC%8F/"/>
    <url>/2022/06/25/%E7%94%B1Github%E6%89%98%E7%AE%A1%E7%9A%84%E8%AE%B0%E7%AC%94%E8%AE%B0%E6%96%B9%E5%BC%8F/</url>
    
    <content type="html"><![CDATA[<h1 id="1-å‰è¨€"><a class="markdownIt-Anchor" href="#1-å‰è¨€"></a> 1. å‰è¨€:</h1><blockquote><p>è¯»è¿™ç¯‡ç¬”è®°, å‡å¦‚è¯»è€…æœ‰ä¸€äº›åšå®¢æ­å»ºç»éªŒ, åº”å½“èƒ½å¾ˆå¿«å¿ƒé¢†ç¥ä¼š, å¦åˆ™è¿™ç¯‡ç¬”è®°å¹¶ä¸é€‚åˆä½ .</p></blockquote><p>ä½¿ç”¨Githubæ‰˜ç®¡ç¬”è®°, å¯ä»¥ç›´æ¥åˆ©ç”¨å…¶æä¾›çš„Github pagesæœåŠ¡. å› ä¸ºæˆ‘æ¯”è¾ƒå–œæ¬¢ç”¨markdownå†™ç¬”è®°, å› æ­¤åšç¬”è®°ä¸»è¦æ˜¯ä¸¤ç§å½¢å¼: 1. ä½¿ç”¨hexoæ­å»ºçš„åšå®¢; 2. ä½¿ç”¨gitbook<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="https://app.gitbook.com/">[1]</span></a></sup>. è¿™ä¸¤è€…éƒ½å¯ä»¥ç”¨markdownè¿›è¡Œä¹¦å†™, è€Œä¸”æºæ–‡ä»¶éƒ½æ‰˜ç®¡åœ¨Githubä¸Š, ä¸å¿…æ‹…å¿ƒç¬”è®°è½¯ä»¶å€’é—­ (å½“ç„¶, Githubä¹Ÿä¸æ˜¯ä¸å¯èƒ½å€’é—­æˆ–è€…è¢«å°çš„, ä½†æ˜¯æœ‰ç”Ÿä¹‹å¹´åº”è¯¥ä¸è‡³äº).</p><h1 id="2-ç½‘é¡µæ­å»ºå‡†å¤‡"><a class="markdownIt-Anchor" href="#2-ç½‘é¡µæ­å»ºå‡†å¤‡"></a> 2. ç½‘é¡µæ­å»ºå‡†å¤‡:</h1><h2 id="21-ä¸ºä»€ä¹ˆè¦æœ‰è¿™ä¸€èŠ‚"><a class="markdownIt-Anchor" href="#21-ä¸ºä»€ä¹ˆè¦æœ‰è¿™ä¸€èŠ‚"></a> 2.1 ä¸ºä»€ä¹ˆè¦æœ‰è¿™ä¸€èŠ‚?</h2><p>ç›´æ¥ç”¨Github pagesä¸æ˜¯ä¸èƒ½ç”¨, ä½†æ˜¯å›½å†…è®¿é—®å¯ç”¨æ€§å ªå¿§, ç»å¸¸æ— æ³•è®¿é—®æˆ–è€…é€Ÿåº¦è¿‡æ…¢. ä¸ºæ­¤å¯ä»¥è€ƒè™‘ä½¿ç”¨ netlify<sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="https://www.netlify.com/">[2]</span></a></sup>æˆ–è€…cloudflare<sup id="fnref:3" class="footnote-ref"><a href="#fn:3" rel="footnote"><span class="hint--top hint--rounded" aria-label="https://cloudfare.com/">[3]</span></a></sup>. æˆ‘ä¸ªäººæ¨ècloudflare, å› ä¸ºcloudflareçš„CDNè¦å¥½ä¸€ç‚¹çš„, è€Œä¸”è¿˜æä¾›webä¹‹å¤–çš„ä¸€äº›å…¶ä»–æœåŠ¡(æ¯”å¦‚éå¸¸å¥½ç”¨çš„cloudflare workers).</p><h2 id="22-å‰æœŸå‡†å¤‡"><a class="markdownIt-Anchor" href="#22-å‰æœŸå‡†å¤‡"></a> 2.2 å‰æœŸå‡†å¤‡:</h2><blockquote><p>æ‰€éœ€çš„å‡†å¤‡ä¸å¤š</p></blockquote><ol><li>åŸŸåä¸€ä¸ª(å¿…é€‰): ä½¿ç”¨cloudflareçš„cdnæ‰˜ç®¡å¿…é¡»è¦æœ‰åŸŸå, åæ­£ä¹Ÿä¸è´µ</li><li>VPNä¸€ä¸ª(å¯é€‰): netlifyå¿…é¡»ç§‘å­¦ä¸Šç½‘, cloudflareå¦‚æœä¸ç§‘å­¦ä¸Šç½‘è®¿é—®å¤ªæ…¢.</li></ol><h2 id="23-å¼€å§‹è®°ç¬”è®°"><a class="markdownIt-Anchor" href="#23-å¼€å§‹è®°ç¬”è®°"></a> 2.3 å¼€å§‹è®°ç¬”è®°!</h2><p>å…¶å®è‡³æ­¤, å·²ç»æ²¡æœ‰ä»€ä¹ˆéœ€è¦åšçš„äº†, åªéœ€æŠŠgithub pagesçš„è‡ªå®šä¹‰åŸŸåæ”¹ä¸€ä¸‹,æ”¹æˆä½ åœ¨cloudflareä¸­æ‰€è®¾ç½®åŸŸå(æˆ–è€…å­åŸŸå),cloudflareä¼šè‡ªåŠ¨å¯¹è¯¥åŸŸååŠå…¶å­åŸŸåå¼€å¯CDNç¼“å­˜, åŠ é€Ÿè®¿é—®.</p><h1 id="3-å†™ç¬”è®°åšå®¢çš„å›¾ç‰‡æ”¾å“ª"><a class="markdownIt-Anchor" href="#3-å†™ç¬”è®°åšå®¢çš„å›¾ç‰‡æ”¾å“ª"></a> 3. å†™ç¬”è®°/åšå®¢çš„å›¾ç‰‡æ”¾å“ª?</h1><p>å¦‚æœä¸åšå®¢ç½‘ç«™æˆ–è€…ç¬”è®°æ”¾åœ¨ä¸€èµ·, ä¼¼ä¹æœ‰é‚£ä¹ˆä¸€äº›ä¸æ˜¯å¾ˆæ–¹ä¾¿, æ€»ä¹‹æˆ‘ä¸å¤ªå–œæ¬¢è¿™ç§æ–¹å¼; å¦‚æœç”¨ç½‘ä¸Šçš„å›¾åºŠ, æˆ‘åˆå¾ˆæ€€ç–‘å›¾åºŠçš„å¯ç”¨æ€§(è¯´ä¸å®šå“ªå¤©å°±ç”¨ä¸äº†äº†, å²‚ä¸æ˜¯æˆäº†å†¤å¤§å¤´).</p><p>å› æ­¤æˆ‘çš„é¦–é€‰æƒ³æ³•æ˜¯ç”¨github pagesæ‰˜ç®¡é™æ€èµ„æº, åæ­£å‰é¢æœ‰cloudflareè¿›è¡ŒCDNåŠ é€Ÿäº†. å‰©ä½™çš„é—®é¢˜å°±æ˜¯å¦‚ä½•æ–¹ä¾¿çš„ä¸Šä¼ /åˆ é™¤å›¾ç‰‡, å¾ˆå¹¸è¿çš„æ˜¯æœ‰è¿™æ ·çš„è½¯ä»¶, ä¸éœ€è¦æˆ‘ä»¬è‡ªå·±å†™: picgo<sup id="fnref:4" class="footnote-ref"><a href="#fn:4" rel="footnote"><span class="hint--top hint--rounded" aria-label="https://picgo.github.io/PicGo-Doc/zh/">[4]</span></a></sup> å’Œ upgit<sup id="fnref:5" class="footnote-ref"><a href="#fn:5" rel="footnote"><span class="hint--top hint--rounded" aria-label="https://github.com/pluveto/upgit">[5]</span></a></sup>.</p><p><img src="https://imagebed.torch-fan.site/blog/20220625182706.png" alt="PicGoä¸»ç•Œé¢" /></p><p>PicGoæ”¯æŒä»¥githubä¸ºå­˜å‚¨çš„å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½, ä¸”PicGoå’Œupgitéƒ½æ”¯æŒåœ¨typoraä¸­ç›´æ¥ä½¿ç”¨, ä½†upgitåªæ”¯æŒå‘½ä»¤è¡Œ, å› æ­¤windowsç”¨æˆ·æ¨èä½¿ç”¨picgo. åœ¨TyporaéªŒè¯Picgoæ—¶å¯èƒ½ä¼šé‡åˆ°ä¸€ä¸ªå°é—®é¢˜:</p><p><img src="https://imagebed.torch-fan.site/blog/20220625184048.png" alt="TyporaéªŒè¯Picgoå¤±è´¥" /></p><p>è¿™é‡Œçœ‹åˆ°TyporaæŠ¥é”™ä¿¡æ¯ä¸­çš„ç«¯å£å·, ä¸è‡ªèº«Picgoè®¾ç½®çš„ç›‘å¬ç«¯å£æ˜¯å¦ä¸€è‡´, å¦‚æœæœ‰æ­¤æŠ¥é”™ä¿¡æ¯, ä¸€èˆ¬æ˜¯ä¸ä¸€è‡´å¯¼è‡´çš„. æˆ–è€…æ˜¯ç”±äºCDNç¼“å­˜å»¶è¿Ÿ, å¯¼è‡´typoraæ— æ³•åŠæ—¶éªŒè¯, è¿™ä¸ªæ—¶å€™, typoraå°±åªèƒ½ç”¨å…¶ä»–å›¾ç‰‡æ‰˜ç®¡å¹³å°äº†.</p><blockquote><p>æ¨èå¼€å¯Picgoä¸­çš„<code>ä¸Šä¼ å‰é‡å‘½å</code>, è¿™æ ·ä¸€æ¥å°±å¯ä»¥è‡ªå®šä¹‰å›¾ç‰‡åå­—äº†!</p><p>æœ€å¥½è®¾ç½®å¥½å›¾ç‰‡ä¸Šä¼ è·¯å¾„, å°±å¥½æ‰¹é‡ç®¡ç†å›¾ç‰‡äº†.</p></blockquote><h1 id="4-æ€»ç»“"><a class="markdownIt-Anchor" href="#4-æ€»ç»“"></a> 4. æ€»ç»“:</h1><p>è‡ªè´­åŸŸå + cloudflare / Gitbook + Picgo å°±èƒ½æœ‰è¾ƒä¸ºå®‰å¿ƒçš„å†™ä½œä½“éªŒ(ç¼–è¾‘å™¨é€‰æ‹©ä¸Šå°‘ä¸äº†typora~)</p><blockquote><p>å½“ä½ å¼€å§‹ä½¿ç”¨åŸŸåæ­å»ºç¬”è®°ç½‘ç«™æ—¶, åˆèƒ½å‘ç°cloudflareæ›´ç¥å¥‡çš„åŠŸèƒ½~ æœ‰äº›äº‹è¿›å»äº†, å°±å‡ºä¸æ¥äº†.</p></blockquote><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://app.gitbook.com/">https://app.gitbook.com/</a><a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a href="https://www.netlify.com/">https://www.netlify.com/</a><a href="#fnref:2" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:3" class="footnote-text"><span><a href="https://cloudfare.com/">https://cloudfare.com/</a><a href="#fnref:3" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:4" class="footnote-text"><span><a href="https://picgo.github.io/PicGo-Doc/zh/">https://picgo.github.io/PicGo-Doc/zh/</a><a href="#fnref:4" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:5" class="footnote-text"><span><a href="https://github.com/pluveto/upgit">https://github.com/pluveto/upgit</a><a href="#fnref:5" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>æ”¶è—</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>DNS serveræ•´ç†(æŒç»­æ›´æ–°)</title>
    <link href="/2022/06/21/DNS-server%E6%95%B4%E7%90%86/"/>
    <url>/2022/06/21/DNS-server%E6%95%B4%E7%90%86/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æ”¶é›†DNSæœåŠ¡å™¨çš„æ„ä¹‰ä¸åœ¨äºèƒ½è¶Šè¿‡GFW, è€Œæ˜¯åœ¨å½“å‰DNSæ±¡æŸ“è¶Šå‘ä¸¥æ•´çš„ç¯å¢ƒä¸‹ï¼Œèƒ½å¤Ÿæ‰¾åˆ°ä¸€ä¸ªæ¯”è¾ƒå¥½çš„DNS serverä»¥ä¾¿æä¾›ä¼˜è´¨çš„githubå’Œonedriveï¼ˆæˆ–microsoftç›¸å…³è½¯ä»¶ï¼‰è®¿é—®ä½“éªŒ, è¿™ä¸€ç¯‡ä¼šæŒç»­æ›´æ–°, å¹¶ä¸”æ ¹æ®æ—¥å¸¸ä½“éªŒéšåä¼šå¼ºè°ƒå‡ºæ¯”è¾ƒå¥½ç”¨çš„å‡ ä¸ªDNS server.</p><p>ä»¥ä¸‹ä¸¤ç±»DNSè§£ææ–¹å¼å®‰å…¨ä¸Šè¦æ›´é«˜ä¸€äº›:</p><p>DoH: DNS over HTTPS (ä¸€èˆ¬å¯åœ¨æµè§ˆå™¨ä¸­ç›´æ¥è®¾ç½®)<br />ä¾‹å¦‚: <code>https://doh.pub/dns-query?</code></p><p>DoT: DNS over TLS</p><p>åŒæ—¶å›½å¤–å·²ç»æœ‰ç½‘ç«™æ”¶å½•äº†å…¨çƒçš„å…¬å…±DNS<sup id="fnref:6" class="footnote-ref"><a href="#fn:6" rel="footnote"><span class="hint--top hint--rounded" aria-label="è¶…å…¨çš„å…¬å…±DNSåˆ—è¡¨">[6]</span></a></sup>, å¦‚æœæƒ³æ›´çµæ´»çš„é€‰æ‹©DNSï¼Œå¯ä»¥å‚è€ƒè¯¥ç½‘ç«™ã€‚</p></blockquote><p>æ¨èåˆ—è¡¨ï¼š</p><ul><li>é˜¿é‡ŒDNSï¼ˆipv4+ipv6ï¼‰</li><li>114DNSï¼ˆipv4ï¼‰</li><li>è…¾è®¯DNS</li></ul><p><img src="https://imagebed.torch-fan.site/2022/blog/dnsbenchmark.png" alt="DNS benchmark" /></p><h1 id="1-å›½å†…dns"><a class="markdownIt-Anchor" href="#1-å›½å†…dns"></a> 1. å›½å†…DNS</h1><h2 id="1-è…¾è®¯dns-dnspod"><a class="markdownIt-Anchor" href="#1-è…¾è®¯dns-dnspod"></a> 1. è…¾è®¯DNS ï¼ˆDNSPodï¼‰</h2><p>IPv4:</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs accesslog"><span class="hljs-number">119.29.29.29</span><br></code></pre></td></tr></table></figure><p>IPv6:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">2402</span>:<span class="hljs-number">4</span>e00::<br></code></pre></td></tr></table></figure><p>DoH:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">https:<span class="hljs-regexp">//</span>doh.pub/dns-query<br><br>https:<span class="hljs-regexp">//</span>sm2.doh.pub/dns-query<br></code></pre></td></tr></table></figure><p>DoT:</p><figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs glsl"><span class="hljs-built_in">dot</span>.pub<br></code></pre></td></tr></table></figure><h2 id="2-é˜¿é‡Œ-dns-alidns"><a class="markdownIt-Anchor" href="#2-é˜¿é‡Œ-dns-alidns"></a> 2. é˜¿é‡Œ DNS (Alidns)</h2><p>IPv4:</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs accesslog"><span class="hljs-number">223.5.5.5</span><br><br><span class="hljs-number">223.6.6.6</span><br></code></pre></td></tr></table></figure><p>IPv6:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">2400</span>:<span class="hljs-number">3200</span>::<span class="hljs-number">1</span><br><br><span class="hljs-attribute">2400</span>:<span class="hljs-number">3200</span>:baba::<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><p>DoH:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">https:<span class="hljs-regexp">//</span>dns.alidns.com/dns-query<br></code></pre></td></tr></table></figure><p>DoT:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus">dns<span class="hljs-selector-class">.alidns</span>.com<br></code></pre></td></tr></table></figure><h2 id="3-ç™¾åº¦-dns"><a class="markdownIt-Anchor" href="#3-ç™¾åº¦-dns"></a> 3. ç™¾åº¦ DNS</h2><p>IPv4:</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs accesslog"><span class="hljs-number">180.76.76.76</span><br></code></pre></td></tr></table></figure><p>IPv6:</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-number">2400</span><span class="hljs-symbol">:da00</span>::<span class="hljs-number">6666</span><br></code></pre></td></tr></table></figure><h2 id="4-360-å®‰å…¨-dns"><a class="markdownIt-Anchor" href="#4-360-å®‰å…¨-dns"></a> 4. 360 å®‰å…¨ DNS</h2><p>ç”µä¿¡/é“é€š/ç§»åŠ¨ IPv4</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs accesslog"><span class="hljs-number">101.226.4.6</span><br><br><span class="hljs-number">218.30.118.6</span><br></code></pre></td></tr></table></figure><p>è”é€š IPv4</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs accesslog"><span class="hljs-number">123.125.81.6</span><br><br><span class="hljs-number">140.207.198.6</span><br></code></pre></td></tr></table></figure><p>DoH:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">https:<span class="hljs-regexp">//</span>doh.<span class="hljs-number">360</span>.cn<br></code></pre></td></tr></table></figure><p>DoT:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">dot</span>.<span class="hljs-number">360</span>.cn<br></code></pre></td></tr></table></figure><h2 id="5-114dns"><a class="markdownIt-Anchor" href="#5-114dns"></a> 5. 114DNS</h2><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs accesslog"><span class="hljs-number">114.114.114.114</span><br><br><span class="hljs-number">114.114.115.115</span><br></code></pre></td></tr></table></figure><h2 id="6-microsoft"><a class="markdownIt-Anchor" href="#6-microsoft"></a> 6. Microsoft</h2><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs accesslog"><span class="hljs-number">4.2.2.1</span><br><br><span class="hljs-number">4.2.2.2</span><br></code></pre></td></tr></table></figure><blockquote><p>Xbox æ¨è(è¿™æ ·è¿˜å¯ä»¥æµç•…ä¸Šgithub):</p><ul><li>4.2.2.1</li><li>114.114.114.114</li></ul></blockquote><h1 id="2-å›½å¤–dns"><a class="markdownIt-Anchor" href="#2-å›½å¤–dns"></a> 2. å›½å¤–DNS</h1><blockquote><p>å¦‚æœæƒ³æµç•…è®¿é—®github, ä¸»è¦å¾—ç”¨å›½å¤–çš„DNS</p></blockquote><h2 id="1-cloudfare-dns"><a class="markdownIt-Anchor" href="#1-cloudfare-dns"></a> 1. Cloudfare DNS</h2><p>IPv4:</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs accesslog"><span class="hljs-number">1.1.1.1</span><br><br><span class="hljs-number">1.0.0.1</span><br></code></pre></td></tr></table></figure><p>IPv6:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">2606</span>:<span class="hljs-number">4700</span>:<span class="hljs-number">4700</span>::<span class="hljs-number">1111</span><br><br><span class="hljs-attribute">2606</span>:<span class="hljs-number">4700</span>:<span class="hljs-number">4700</span>::<span class="hljs-number">1001</span><br></code></pre></td></tr></table></figure><p>DoH:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs awk">https:<span class="hljs-regexp">//</span>cloudflare-dns.com/dns-query<br><br>https:<span class="hljs-regexp">//</span><span class="hljs-number">1.1</span>.<span class="hljs-number">1.1</span>/dns-query<br><br>https:<span class="hljs-regexp">//</span><span class="hljs-number">1.0</span>.<span class="hljs-number">0.1</span>/dns-query<br></code></pre></td></tr></table></figure><p>DoT:</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver"><span class="hljs-number">1</span>dot1dot1dot1.cloudflare-dns.com<br><br><span class="hljs-literal">one</span>.<span class="hljs-literal">one</span>.<span class="hljs-literal">one</span>.<span class="hljs-literal">one</span><br></code></pre></td></tr></table></figure><h2 id="2-quad9-dns-æœ‰æ—¶å¥½ç”¨"><a class="markdownIt-Anchor" href="#2-quad9-dns-æœ‰æ—¶å¥½ç”¨"></a> 2. Quad9 DNS (æœ‰æ—¶å¥½ç”¨)</h2><p>IPv4:</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs accesslog"><span class="hljs-number">9.9.9.9</span><br><br><span class="hljs-number">149.112.112.112</span><br></code></pre></td></tr></table></figure><p>IPv6:</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-number">2620</span><span class="hljs-symbol">:fe</span>::fe<br><br><span class="hljs-number">2620</span><span class="hljs-symbol">:fe</span>::<span class="hljs-number">9</span><br></code></pre></td></tr></table></figure><p>DoH:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">https:<span class="hljs-regexp">//</span>dns.quad9.net/dns-query<br></code></pre></td></tr></table></figure><p>DoT:</p><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dos">dns.quad9.<span class="hljs-built_in">net</span><br></code></pre></td></tr></table></figure><h1 id="3-dns-related-tools"><a class="markdownIt-Anchor" href="#3-dns-related-tools"></a> 3. DNS related tools:</h1><ol><li>GRC(windows/Linux+wine)<sup id="fnref:4" class="footnote-ref"><a href="#fn:4" rel="footnote"><span class="hint--top hint--rounded" aria-label="https://www.grc.com/dns/benchmark.htm">[4]</span></a></sup></li><li>Adguard DNS</li></ol><h1 id="linuxubuntuä¸‹dnsä¿®æ”¹"><a class="markdownIt-Anchor" href="#linuxubuntuä¸‹dnsä¿®æ”¹"></a> Linux(Ubuntu)ä¸‹DNSä¿®æ”¹:</h1><h2 id="dnsé…ç½®æ–‡ä»¶ä½ç½®"><a class="markdownIt-Anchor" href="#dnsé…ç½®æ–‡ä»¶ä½ç½®"></a> DNSé…ç½®æ–‡ä»¶ä½ç½®:</h2><ol><li>å…¨å±€é…ç½®: <code>/etc/systemd/resolved.conf</code></li><li>å±€éƒ¨é…ç½®(å•ä¸ªç½‘å¡): <code>/etc/NetworkManager</code>  (å¯èƒ½åœ¨<code>conf.d</code>ä¸‹, ä¹Ÿæœ‰å¯èƒ½<code>system-cionnections</code>ä¸‹, åæ­£åœ¨è¿™ä¸ªæ ¹ç›®å½•ä¸‹)</li></ol><h2 id="system-resolved-å‘½ä»¤"><a class="markdownIt-Anchor" href="#system-resolved-å‘½ä»¤"></a> <code>system-resolved</code> å‘½ä»¤:</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo systemd-resolve --status <span class="hljs-comment"># æŸ¥çœ‹å½“å‰DNSé…ç½®ä¿¡æ¯</span><br>sudo systemd-resolve --revert -i eno3 <span class="hljs-comment"># æ¸…ç©ºæŒ‡å®šç½‘å¡çš„é…ç½®ä¿¡æ¯</span><br>sudo systemctl restart systemd-resolved.service <span class="hljs-comment">#ã€€é‡å¯systemd-resolveä½¿é…ç½®ç”Ÿæ•ˆ</span><br></code></pre></td></tr></table></figure><h1 id="4-clash-for-windowscfwæ¨èçš„dnsè®¾ç½®"><a class="markdownIt-Anchor" href="#4-clash-for-windowscfwæ¨èçš„dnsè®¾ç½®"></a> 4. clash for windows(CFW)æ¨èçš„DNSè®¾ç½®ï¼š</h1><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">mixin:</span> <span class="hljs-comment"># object</span><br>    <span class="hljs-attr">dns:</span><br>        <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br>        <span class="hljs-attr">ipv6:</span> <span class="hljs-literal">true</span><br>        <span class="hljs-comment"># enhanced-mode: redir-host</span><br>        <span class="hljs-attr">enhanced-mode:</span> <span class="hljs-string">fake-ip</span><br>        <span class="hljs-attr">fake-ip-range:</span> <span class="hljs-number">198.18</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><span class="hljs-string">/16</span>   <span class="hljs-comment"># if you don&#x27;t know what it is, don&#x27;t change it</span><br>        <span class="hljs-attr">fake-ip-filter:</span>                <span class="hljs-comment"># fake ip white domain list, aka Always Real IP</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-string">&#x27;*.lan&#x27;</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-string">localhost.ptlogin2.qq.com</span><br>        <span class="hljs-attr">nameserver:</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-string">tls://dot.pub</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-number">119.29</span><span class="hljs-number">.29</span><span class="hljs-number">.29</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-number">114.114</span><span class="hljs-number">.114</span><span class="hljs-number">.114</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-string">tcp://1.1.1.1</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-string">&#x27;[2400:3200::1]:53&#x27;</span>  <span class="hljs-comment"># &#x27;[&lt;ipv6&gt;]:43&#x27; ipv6DNSè¦ç”¨è¿™ç§æ ¼å¼æ‰è¡Œ~</span><br>        <span class="hljs-attr">fallback:</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-number">4.2</span><span class="hljs-number">.2</span><span class="hljs-number">.1</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-number">119.29</span><span class="hljs-number">.29</span><span class="hljs-number">.29</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-number">114.114</span><span class="hljs-number">.114</span><span class="hljs-number">.114</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-string">&#x27;[2400:3200::1]:53&#x27;</span><br>            <span class="hljs-comment"># - tcp://1.1.1.1</span><br>            <span class="hljs-comment"># - tcp://8.8.8.8</span><br>        <span class="hljs-attr">nameserver-policy:</span><br>            <span class="hljs-string">&#x27;+.live.com&#x27;</span><span class="hljs-string">:</span> <span class="hljs-string">&#x27;4.2.2.1&#x27;</span><br>            <span class="hljs-string">&#x27;+.live.net&#x27;</span><span class="hljs-string">:</span> <span class="hljs-string">&#x27;4.2.2.1&#x27;</span><br>            <span class="hljs-string">&#x27;+.office.com&#x27;</span><span class="hljs-string">:</span> <span class="hljs-string">&#x27;4.2.2.1&#x27;</span><br>            <span class="hljs-string">&#x27;+.office.net&#x27;</span><span class="hljs-string">:</span> <span class="hljs-string">&#x27;4.2.2.1&#x27;</span><br>            <span class="hljs-string">&#x27;+.sharepoint.com&#x27;</span><span class="hljs-string">:</span> <span class="hljs-string">&#x27;4.2.2.1&#x27;</span><br>            <span class="hljs-string">&#x27;+.office365.com&#x27;</span><span class="hljs-string">:</span> <span class="hljs-string">&#x27;4.2.2.1&#x27;</span><br>            <span class="hljs-string">&#x27;+.officeppe.net&#x27;</span><span class="hljs-string">:</span> <span class="hljs-string">&#x27;4.2.2.1&#x27;</span><br>            <span class="hljs-string">&#x27;+.skype.com&#x27;</span><span class="hljs-string">:</span> <span class="hljs-string">&#x27;4.2.2.1&#x27;</span><br>            <span class="hljs-string">&#x27;+.onedrive.com&#x27;</span><span class="hljs-string">:</span> <span class="hljs-string">&#x27;4.2.2.1&#x27;</span><br>            <span class="hljs-string">&#x27;+.msocsp.com&#x27;</span><span class="hljs-string">:</span> <span class="hljs-string">&#x27;4.2.2.1&#x27;</span><br>            <span class="hljs-string">&#x27;+.msauthimages.net&#x27;</span><span class="hljs-string">:</span> <span class="hljs-string">&#x27;4.2.2.1&#x27;</span><br>            <span class="hljs-string">&#x27;+.msauth.net&#x27;</span><span class="hljs-string">:</span> <span class="hljs-string">&#x27;4.2.2.1&#x27;</span><br>            <span class="hljs-string">&#x27;+.msn.com&#x27;</span><span class="hljs-string">:</span> <span class="hljs-string">&#x27;4.2.2.1&#x27;</span><br>            <span class="hljs-string">&#x27;+.onenote.com&#x27;</span><span class="hljs-string">:</span> <span class="hljs-string">&#x27;4.2.2.1&#x27;</span><br>            <span class="hljs-string">&#x27;+.onenote.net&#x27;</span><span class="hljs-string">:</span> <span class="hljs-string">&#x27;4.2.2.1&#x27;</span><br>            <span class="hljs-string">&#x27;+.1drv.com&#x27;</span><span class="hljs-string">:</span> <span class="hljs-string">&#x27;4.2.2.1&#x27;</span><br>            <span class="hljs-string">&#x27;+.microsoft.com&#x27;</span><span class="hljs-string">:</span> <span class="hljs-string">&#x27;4.2.2.1&#x27;</span><br>            <span class="hljs-string">&#x27;+.microsoftonline.com&#x27;</span><span class="hljs-string">:</span> <span class="hljs-string">&#x27;4.2.2.1&#x27;</span><br>        <span class="hljs-attr">fallback-filter:</span><br>            <span class="hljs-attr">geoip:</span> <span class="hljs-literal">true</span>  <br>            <span class="hljs-attr">geoip-code:</span> <span class="hljs-string">CN</span>         <br>            <span class="hljs-attr">ipcidr:</span>                      <br>            <span class="hljs-bullet">-</span> <span class="hljs-number">240.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span><span class="hljs-string">/4</span><br>            <span class="hljs-attr">domain:</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-string">&#x27;+.google.com&#x27;</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-string">&#x27;+.facebook.com&#x27;</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-string">&#x27;+.youtube.com&#x27;</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-string">&#x27;+.github.com&#x27;</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-string">&#x27;+.live.com&#x27;</span><br></code></pre></td></tr></table></figure><h1 id="å‚è€ƒèµ„æ–™"><a class="markdownIt-Anchor" href="#å‚è€ƒèµ„æ–™"></a> å‚è€ƒèµ„æ–™ï¼š</h1><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://blog.csdn.net/weixin_39666550/article/details/119267446">https://blog.csdn.net/weixin_39666550/article/details/119267446</a><a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a href="https://dns.icoa.cn/">https://dns.icoa.cn/</a><a href="#fnref:2" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:3" class="footnote-text"><span><a href="https://dnscrypt.info/public-servers/">https://dnscrypt.info/public-servers/</a><a href="#fnref:3" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:4" class="footnote-text"><span><a href="https://www.grc.com/dns/benchmark.htm">https://www.grc.com/dns/benchmark.htm</a><a href="#fnref:4" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:5" class="footnote-text"><span>ä¿æŠ¤ç”µè„‘, é˜²æ­¢DNSåŠ«æŒ<a href="#fnref:5" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:5" class="footnote-text"><span><a href="https://adguard-dns.io/zh_cn/welcome.html">https://adguard-dns.io/zh_cn/welcome.html</a><a href="#fnref:5" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:6" class="footnote-text"><span><a href="https://adguard-dns.io/kb/general/dns-providers/">è¶…å…¨çš„å…¬å…±DNSåˆ—è¡¨</a><a href="#fnref:6" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>æ”¶è—</category>
      
    </categories>
    
    
    <tags>
      
      <tag>DNS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>EWMAï¼ˆæŒ‡æ•°åŠ æƒå¹³å‡æ³•ï¼‰</title>
    <link href="/2022/06/20/EWMA/"/>
    <url>/2022/06/20/EWMA/</url>
    
    <content type="html"><![CDATA[<h1 id="ewmaä¸å½’ä¸€åŒ–å±‚çš„æ¸Šæº"><a class="markdownIt-Anchor" href="#ewmaä¸å½’ä¸€åŒ–å±‚çš„æ¸Šæº"></a> EWMAä¸å½’ä¸€åŒ–å±‚çš„æ¸Šæº</h1><blockquote><p>EWMA (Exponentially Weighted Moving Average)</p><p>åŠ æƒç§»åŠ¨å¹³å‡æ³•ï¼Œå¯¹è§‚å¯Ÿå€¼ç»™äºˆä¸åŒæƒé‡ï¼Œè¶Šè¿‘çš„è§‚å¯Ÿå€¼ç»™äºˆæ›´é«˜çš„æƒé‡ã€‚ç›¸æ¯”ä¼ ç»Ÿçš„å¹³å‡æ³•ï¼Œä¸éœ€è¦ä¿å­˜è¿‡å»æ‰€æœ‰çš„å†å²è®°å½•ï¼Œä¸”èƒ½å¤Ÿæ˜¾è‘—é™ä½è®¡ç®—é‡</p></blockquote><p>äº‹å®ä¸Šï¼Œè¿™ä¸ªEWMAåœ¨æ·±åº¦å­¦ä¹ çš„å„ç§normalizationå±‚é‡Œï¼Œä»¥momentumå‚æ•°çš„å½¢å¼å‡ºç°ï¼Œä»¥åŠ¨é‡æ§åˆ¶å½’ä¸€åŒ–å±‚å‡å€¼å’Œæ–¹å·®å‚æ•°çš„å‚æ•°æ›´æ–°æ­¥éª¤ã€‚</p><p>EWMAçš„è®¡ç®—æ–¹å¼å¦‚ä¸‹ï¼š</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>E</mi><mi>W</mi><mi>M</mi><msub><mi>A</mi><mi>t</mi></msub><mo>=</mo><mi>Î±</mi><mo>Ã—</mo><msub><mi>r</mi><mi>t</mi></msub><mo>+</mo><mo stretchy="false">(</mo><mn>1</mn><mo>âˆ’</mo><mi>Î±</mi><mo stretchy="false">)</mo><mo>Ã—</mo><mi>E</mi><mi>W</mi><mi>M</mi><msub><mi>A</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">EWMA_t = \alpha \times r_t + (1 - \alpha) \times EWMA_{t-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">Î±</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.73333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">Î±</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.891661em;vertical-align:-0.208331em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span></span></p><h1 id="å‚è€ƒèµ„æ–™"><a class="markdownIt-Anchor" href="#å‚è€ƒèµ„æ–™"></a> å‚è€ƒèµ„æ–™</h1><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://corporatefinanceinstitute.com/resources/knowledge/trading-investing/exponentially-weighted-moving-average-ewma/">https://corporatefinanceinstitute.com/resources/knowledge/trading-investing/exponentially-weighted-moving-average-ewma/</a><a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a href="https://zhuanlan.zhihu.com/p/187459739">https://zhuanlan.zhihu.com/p/187459739</a><a href="#fnref:2" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content>
    
    
    
    <tags>
      
      <tag>ML</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ’å€¼æ–¹æ³•å¯¹å›¾åƒä¿çœŸåº¦çš„å½±å“</title>
    <link href="/2022/06/19/%E6%8F%92%E5%80%BC%E6%96%B9%E6%B3%95%E5%AF%B9%E5%9B%BE%E5%83%8F%E4%BF%9D%E7%9C%9F%E5%BA%A6%E7%9A%84%E5%BD%B1%E5%93%8D/"/>
    <url>/2022/06/19/%E6%8F%92%E5%80%BC%E6%96%B9%E6%B3%95%E5%AF%B9%E5%9B%BE%E5%83%8F%E4%BF%9D%E7%9C%9F%E5%BA%A6%E7%9A%84%E5%BD%B1%E5%93%8D/</url>
    
    <content type="html"><![CDATA[<blockquote><p>å›¾åƒå¤„ç†è¿‡ç¨‹ä¸­ï¼Œç»å¸¸ä¼šç”¨åˆ°æ’å€¼æ–¹æ³•å¯¹å›¾åƒå¤§å°è¿›è¡Œå˜æ¢ï¼Œç„¶è€Œä¸åŒçš„æ’å€¼æ–¹æ³•å¯¹å›¾åƒå½±å“éå¸¸å¤§ã€‚è¿™ç¯‡ç¬”è®°ä»…ä½œä¸ºä¸€ä¸ªå¼•å­ï¼Œè¯¥è®ºæ–‡çš„å¯¹æ¯”ç»“æœä»…ä½œå‚è€ƒï¼ŒçœŸæ­£æœ‰ä»·å€¼çš„æ˜¯å…¶å®éªŒæ€è·¯ã€‚</p><p>æ—¥ååœ¨è¿›è¡Œå›¾åƒå¤„ç†è¿‡ç¨‹ä¸­ï¼Œèƒ½å¤Ÿå¯¹å…¶æœ‰è½»å¾®å°è±¡ï¼Œç¬”è®°çš„æ„ä¹‰ä¹Ÿå°±å­˜åœ¨äº†ã€‚</p></blockquote><h1 id="1-å®éªŒå¯¹æ¯”ç»“æœ"><a class="markdownIt-Anchor" href="#1-å®éªŒå¯¹æ¯”ç»“æœ"></a> 1. å®éªŒå¯¹æ¯”ç»“æœ</h1><p><img src="https://imagebed.torch-fan.site/blog/20220619141842.png" alt="ä¸‰ç»´å›¾åƒå°ºå¯¸æ’å€¼åå¯¹MSEçš„å½±å“" /><br /><img src="https://imagebed.torch-fan.site/blog/20220619141952.png" alt="ä¸‰ç»´å›¾åƒå°ºå¯¸æ’å€¼åçš„PSNR" /></p><p>ä½œè€…æ²¡æœ‰å¯¹ç¬¬ä¸‰ç»´åº¦åšæ¯”è¾ƒä¸¥æ ¼çš„é™åˆ¶ï¼Œä½†æ˜¯æ ¹æ®è¡¨ä¸­ç»“æœï¼Œç»´åº¦çš„å˜åŒ–ä¼šè¾ƒå¤§çš„å½±å“å›¾åƒçš„å¤„ç†ç»“æœã€‚</p><h1 id="2-è¡¡é‡å›¾åƒæ’å€¼å˜æ¢çš„åå·®å¼‚åº¦"><a class="markdownIt-Anchor" href="#2-è¡¡é‡å›¾åƒæ’å€¼å˜æ¢çš„åå·®å¼‚åº¦"></a> 2. è¡¡é‡å›¾åƒæ’å€¼å˜æ¢çš„åå·®å¼‚åº¦ï¼š</h1><h2 id="21-mse"><a class="markdownIt-Anchor" href="#21-mse"></a> 2.1 MSE</h2><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>M</mi><mi>S</mi><mi>E</mi><mo>=</mo><mfrac><mn>1</mn><mrow><mi>M</mi><mo>Ã—</mo><mi>N</mi></mrow></mfrac><munderover><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>M</mi></munderover><munderover><mo>âˆ‘</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><mo stretchy="false">(</mo><msup><mi>f</mi><mo mathvariant="normal">â€²</mo></msup><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo><mo>âˆ’</mo><mi>f</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">MSE = \frac{1}{M \times N} \sum_{i=1}^M \sum_{j=1}^{N} (f&#x27;(i,j) - f(i, j)) ^ 2 </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:3.2421130000000007em;vertical-align:-1.4137769999999998em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.7693300000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8283360000000002em;"><span style="top:-1.872331em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">âˆ‘</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">M</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.277669em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8283360000000006em;"><span style="top:-1.872331em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">âˆ‘</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.4137769999999998em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.801892em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.1141079999999999em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span></p><h2 id="22-psnrpeak-signal-to-noise-ratio-å³°å€¼ä¿¡å™ªæ¯”-è¶Šå¤§è¡¨ç¤ºå›¾åƒä¿çœŸåº¦è¶Šé«˜"><a class="markdownIt-Anchor" href="#22-psnrpeak-signal-to-noise-ratio-å³°å€¼ä¿¡å™ªæ¯”-è¶Šå¤§è¡¨ç¤ºå›¾åƒä¿çœŸåº¦è¶Šé«˜"></a> 2.2 PSNR(Peak Signal-to-Noise Ratio, å³°å€¼ä¿¡å™ªæ¯”)ï¼š è¶Šå¤§è¡¨ç¤ºå›¾åƒä¿çœŸåº¦è¶Šé«˜</h2><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mi>S</mi><mi>N</mi><mi>R</mi><mo>=</mo><mn>10</mn><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>10</mn></msub><mfrac><msup><mi>Q</mi><mn>2</mn></msup><mrow><mi>M</mi><mi>S</mi><mi>E</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">PSNR =  10 log_{10}\frac{Q^2}{MSE}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.177108em;vertical-align:-0.686em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.491108em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">Q</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><blockquote><p>Qè¡¨ç¤ºåƒç´ çš„ç°åº¦é˜¶ï¼Œä¸€èˆ¬æ˜¯255</p></blockquote><h2 id="23-ssimstructural-similarity-index-ç»“æ„ç›¸ä¼¼æ€§ä½†è¿‡äºè®¡ç®—ç¨å› æ­¤ä»…åšäº†è§£çŸ¥é“ä»–æ˜¯ç”¨å‡å€¼-åæ–¹å·®æ¥è®¡ç®—ç›¸ä¼¼åº¦çš„å³å¯"><a class="markdownIt-Anchor" href="#23-ssimstructural-similarity-index-ç»“æ„ç›¸ä¼¼æ€§ä½†è¿‡äºè®¡ç®—ç¨å› æ­¤ä»…åšäº†è§£çŸ¥é“ä»–æ˜¯ç”¨å‡å€¼-åæ–¹å·®æ¥è®¡ç®—ç›¸ä¼¼åº¦çš„å³å¯"></a> 2.3 SSIM(Structural Similarity Index): ç»“æ„ç›¸ä¼¼æ€§â€”â€”ä½†è¿‡äºè®¡ç®—ç¨ï¼Œå› æ­¤ä»…åšäº†è§£ï¼ŒçŸ¥é“ä»–æ˜¯ç”¨å‡å€¼ã€åæ–¹å·®æ¥è®¡ç®—ç›¸ä¼¼åº¦çš„å³å¯ã€‚</h2><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span>å‚è€ƒæ–‡çŒ®ï¼šã€ŠEvaluation of interpolation effects on upsampling and accuracy of cost functions-based optimized automatic image registrationã€‹ <a href="https://doi.org/10.1155/2013/395915">https://doi.org/10.1155/2013/395915</a><a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content>
    
    
    
    <tags>
      
      <tag>CV</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å—å¼€ç½‘å…³çš„API</title>
    <link href="/2022/06/17/%E5%8D%97%E5%BC%80%E7%BD%91%E5%85%B3%E7%9A%84API/"/>
    <url>/2022/06/17/%E5%8D%97%E5%BC%80%E7%BD%91%E5%85%B3%E7%9A%84API/</url>
    
    <content type="html"><![CDATA[<h1 id="1-è”ç½‘çš„apiæ¨¡æ¿"><a class="markdownIt-Anchor" href="#1-è”ç½‘çš„apiæ¨¡æ¿"></a> 1. è”ç½‘çš„APIæ¨¡æ¿</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">IP=&lt;xx.xx.xx.xx&gt;<br>USER=&lt;account name&gt;<br>PASSWD=&lt;your password&gt;<br><br>curl --location --request GET <span class="hljs-string">&#x27;http://202.113.18.106:801/eportal/?c=ACSetting&amp;a=Login&amp;loginMethod=1&amp;protocol=http%3A&amp;hostname=202.113.18.106&amp;port=&amp;iTermType=1&amp;wlanuserip=&#x27;</span><span class="hljs-variable">$IP</span><span class="hljs-string">&#x27;&amp;wlanacip=null&amp;wlanacname=null&amp;redirect=null&amp;session=null&amp;vlanid=0&amp;mac=00-00-00-00-00-00&amp;ip=&#x27;</span><span class="hljs-variable">$IP</span><span class="hljs-string">&#x27;&amp;enAdvert=0&amp;jsVersion=2.4.3&amp;DDDDD=&#x27;</span><span class="hljs-variable">$USER</span><span class="hljs-string">&#x27;&amp;upass=&#x27;</span><span class="hljs-variable">$PASSWD</span><span class="hljs-string">&#x27;&amp;R1=0&amp;R2=0&amp;R3=0&amp;R6=0&amp;para=00&amp;0MKKey=123456&amp;buttonClicked=&amp;redirect_url=&amp;err_flag=&amp;username=&amp;password=&amp;user=&amp;cmd=&amp;Login=&#x27;</span> --header <span class="hljs-string">&#x27;Connection: keep-alive&#x27;</span> --header <span class="hljs-string">&#x27;Upgrade-Insecure-Requests: 1&#x27;</span>  --header <span class="hljs-string">&#x27;User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.128 Safari/537.36&#x27;</span> --header <span class="hljs-string">&#x27;Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9&#x27;</span> --header <span class="hljs-string">&#x27;Referer: http://202.113.18.106/&#x27;</span> --header <span class="hljs-string">&#x27;Accept-Language: zh,en-US;q=0.9,en;q=0.8&#x27;</span> --header <span class="hljs-string">&#x27;Cookie: PHPSESSID=ovt8a9cipcg3qvs1iru5imn6q4; SL_GWPT_Show_Hide_tmp=1; SL_G_WPT_TO=en; SL_wptGlobTipTmp=1&#x27;</span><br></code></pre></td></tr></table></figure><h1 id="2-æ³¨é”€ç½‘å…³çš„api"><a class="markdownIt-Anchor" href="#2-æ³¨é”€ç½‘å…³çš„api"></a> 2. æ³¨é”€ç½‘å…³çš„API</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash">curl <span class="hljs-string">&#x27;http://202.113.18.106:801/eportal/?c=ACSetting&amp;a=Logout&amp;loginMethod=1&amp;runRadius=1&amp;DDDDD=&amp;protocol=http%3A&amp;hostname=202.113.18.106&amp;port=&amp;iTermType=1&amp;wlanuserip=null&amp;wlanacip=null&amp;wlanacname=null&amp;redirect=null&amp;session=null&amp;vlanid=undefined&amp;mac=00-00-00-00-00-00&amp;ip=&amp;queryACIP=0&amp;jsVersion=2.4.3&#x27;</span> \<br>  -H <span class="hljs-string">&#x27;Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9&#x27;</span> \<br>  -H <span class="hljs-string">&#x27;Accept-Language: zh,en-US;q=0.9,en;q=0.8,zh-CN;q=0.7&#x27;</span> \<br>  -H <span class="hljs-string">&#x27;Cookie: PHPSESSID=nao32p0q126vq9se8up9ioh2s0&#x27;</span> \<br>  -H <span class="hljs-string">&#x27;DNT: 1&#x27;</span> \<br>  -H <span class="hljs-string">&#x27;Proxy-Connection: keep-alive&#x27;</span> \<br>  -H <span class="hljs-string">&#x27;Referer: http://202.113.18.106/&#x27;</span> \<br>  -H <span class="hljs-string">&#x27;Upgrade-Insecure-Requests: 1&#x27;</span> \<br>  -H <span class="hljs-string">&#x27;User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/102.0.0.0 Safari/537.36&#x27;</span> \<br>  --compressed \<br>  --insecure<br></code></pre></td></tr></table></figure><h1 id="3-å…¶ä»–é€”å¾„"><a class="markdownIt-Anchor" href="#3-å…¶ä»–é€”å¾„"></a> 3. å…¶ä»–é€”å¾„ï¼š</h1><p>å¦‚æœæœ¬æœºæ— curlä¹Ÿæ— ç½‘ç»œæ— æ³•å®‰è£…ï¼Œæ¨èä½¿ç”¨clashçš„å±€åŸŸç½‘ä»£ç†åŠŸèƒ½ï¼Œåœ¨å‘½ä»¤è¡Œè®¾ç½®ä»£ç†åï¼Œå…ˆå®‰è£…å¥½net-toolsç„¶åç»§ç»­ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">export</span> http_proxy=&lt;xx.xx.xx.xx&gt;:&lt;port&gt;<br><span class="hljs-built_in">export</span> https_proxy=&lt;xx.xx.xx.xx&gt;:&lt;port&gt;<br></code></pre></td></tr></table></figure><blockquote><p>å½“å‘½ä»¤è¡Œè®¾ç½®ä»£ç†ä¹‹åï¼Œè¯¥ç»ˆç«¯å¯ä»¥é€šè¿‡ä»£ç†å°†è¯·æ±‚å‘åœ¨ä»£ç†ä¸»æœºä¸Šï¼Œç„¶åé—´æ¥ä¸Šç½‘ï¼ˆå±€åŸŸç½‘å†…å¯ç›´æ¥é€šä¿¡~ï¼‰, å½“ç„¶è¿™æ ·æè¿°ä¸æ˜¯å¾ˆæ¸…æ¥šï¼Œå¯ä»¥ç›´æ¥é—®æˆ‘ï¼Œæ¼”ç¤ºä¸€éå°±ç›´æ¥ä¼šäº†~</p></blockquote><h1 id="4-å—å¼€çš„dnsæœåŠ¡å™¨"><a class="markdownIt-Anchor" href="#4-å—å¼€çš„dnsæœåŠ¡å™¨"></a> 4. å—å¼€çš„DNSæœåŠ¡å™¨ï¼š</h1><ul><li>202.113.16.41</li><li>222.30.45.41</li></ul>]]></content>
    
    
    
    <tags>
      
      <tag>å—å¼€</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hello~</title>
    <link href="/2022/05/25/hello/"/>
    <url>/2022/05/25/hello/</url>
    
    <content type="html"><![CDATA[<p>åŠªåŠ›åšç¬”è®°!</p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
