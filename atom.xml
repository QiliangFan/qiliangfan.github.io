<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Torch-Fan</title>
  
  <subtitle>å­¦ä¹ ç¬”è®°~</subtitle>
  <link href="https://www.torch-fan.site/atom.xml" rel="self"/>
  
  <link href="https://www.torch-fan.site/"/>
  <updated>2022-11-15T02:27:36.105Z</updated>
  <id>https://www.torch-fan.site/</id>
  
  <author>
    <name>Torch-Fan</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Mac æ¸…ç†åƒåœ¾</title>
    <link href="https://www.torch-fan.site/2022/09/29/Mac-%E6%B8%85%E7%90%86%E5%9E%83%E5%9C%BE/"/>
    <id>https://www.torch-fan.site/2022/09/29/Mac-%E6%B8%85%E7%90%86%E5%9E%83%E5%9C%BE/</id>
    <published>2022-09-29T01:12:48.000Z</published>
    <updated>2022-11-15T02:27:36.105Z</updated>
    
    <content type="html"><![CDATA[<h1 id="1-æ¸…ç†æ—¥å¿—æ–‡ä»¶"><a class="markdownIt-Anchor" href="#1-æ¸…ç†æ—¥å¿—æ–‡ä»¶"></a> 1 æ¸…ç†æ—¥å¿—æ–‡ä»¶:</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># ä¸æ˜¯å¾ˆæ¨èæŠŠlogæ–‡ä»¶å¤¹ç»™åˆ é™¤, åˆ é™¤å†…å®¹å°±è¡Œ</span><br>sudo <span class="hljs-built_in">rm</span> -rf /private/var/log/*<br>sudo <span class="hljs-built_in">rm</span> -rf /private/var/logs/*<br></code></pre></td></tr></table></figure><h1 id="2-æ¸…ç†ä¸´æ—¶æ–‡ä»¶å’Œç¼“å­˜æ–‡ä»¶"><a class="markdownIt-Anchor" href="#2-æ¸…ç†ä¸´æ—¶æ–‡ä»¶å’Œç¼“å­˜æ–‡ä»¶"></a> 2 æ¸…ç†ä¸´æ—¶æ–‡ä»¶å’Œç¼“å­˜æ–‡ä»¶</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo <span class="hljs-built_in">rm</span> -rf /private/var/tmp/*<br><br>sudo <span class="hljs-built_in">rm</span> -rf ~/Library/Caches/*<br></code></pre></td></tr></table></figure><h1 id="3-åˆ é™¤æœ¬æœºçš„æ—¶é—´æœºå™¨å¤‡ä»½æ³¨æ„-ä¸æ˜¯æŒ‡æ—¶é—´æœºå™¨å¤‡ä»½ç¡¬ç›˜"><a class="markdownIt-Anchor" href="#3-åˆ é™¤æœ¬æœºçš„æ—¶é—´æœºå™¨å¤‡ä»½æ³¨æ„-ä¸æ˜¯æŒ‡æ—¶é—´æœºå™¨å¤‡ä»½ç¡¬ç›˜"></a> 3 åˆ é™¤æœ¬æœºçš„æ—¶é—´æœºå™¨å¤‡ä»½(æ³¨æ„, ä¸æ˜¯æŒ‡æ—¶é—´æœºå™¨å¤‡ä»½ç¡¬ç›˜)</h1><blockquote><p>Mac OS é™¤äº†ç”¨ç¡¬ç›˜ææ—¶é—´æœºå™¨å¤‡ä»½, ä»–è‡ªå·±è¿˜ä¼šæä¸€ä»½å¤‡ä»½</p><p>åˆ é™¤æ—¶é—´æœºå™¨ç¼“å­˜æœ€èŠ‚çœç©ºé—´çš„</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># åˆ—å‡ºæœ¬æœºä¸Šæ‰€æœ‰æœ¬åœ°æ—¶é—´æœºå™¨ç¼“å­˜</span><br>sudo tmutil listlocalsnapshots /<br><br><span class="hljs-comment"># åˆ é™¤æŒ‡å®šçš„æ—¶é—´æœºå™¨å¤‡ä»½ç¼“å­˜(å¯ä»¥å¤šå‡ºå¾ˆå¤š~, ç³»ç»Ÿæ–‡ä»¶å¤§éƒ¨åˆ†éƒ½æ˜¯è¿™äº›æçš„å¤‡ä»½)</span><br>tmutil deletelocalsnapshots 2022-09-28-105624<br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;1-æ¸…ç†æ—¥å¿—æ–‡ä»¶&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#1-æ¸…ç†æ—¥å¿—æ–‡ä»¶&quot;&gt;&lt;/a&gt; 1 æ¸…ç†æ—¥å¿—æ–‡ä»¶:&lt;/h1&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gut</summary>
      
    
    
    
    <category term="æ”¶è—" scheme="https://www.torch-fan.site/categories/%E6%94%B6%E8%97%8F/"/>
    
    
    <category term="Mac OS" scheme="https://www.torch-fan.site/tags/Mac-OS/"/>
    
  </entry>
  
  <entry>
    <title>vscodeè¿æ¥è™šæ‹Ÿæœºå°è´´å£«</title>
    <link href="https://www.torch-fan.site/2022/09/23/vscode%E8%BF%9E%E6%8E%A5%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%B0%8F%E8%B4%B4%E5%A3%AB/"/>
    <id>https://www.torch-fan.site/2022/09/23/vscode%E8%BF%9E%E6%8E%A5%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%B0%8F%E8%B4%B4%E5%A3%AB/</id>
    <published>2022-09-23T11:09:38.000Z</published>
    <updated>2022-11-15T02:27:36.105Z</updated>
    
    <content type="html"><![CDATA[<p>è°ˆåˆ°vscodeè¿æ¥è™šæ‹Ÿæœº, å¾ˆå¤šäººç¬¬ä¸€æƒ³åˆ°æ¡¥æ¥æ¨¡å¼, ä½†æ˜¯å¯¹äºwifiç½‘å¡, ç°é˜¶æ®µä¼¼ä¹æ— æ³•å®ç°,å¦‚æœå¯¹wifiç½‘å¡ä½¿ç”¨æ¡¥æ¥, å®¢æˆ·æœºå°†æ²¡æœ‰ç½‘ç»œ, è¿˜è¡¨ç°ä¸ºæ²¡æœ‰è·¯ç”±å’Œipv4åœ°å€, å› æ­¤è¿™ç¯‡ç¬”è®°ä¸»è¦æ˜¯ä¸ºé‚£äº›ä½¿ç”¨ç¬”è®°æœ¬(æ‹¥æœ‰æ— çº¿ç½‘å¡)çš„åŒå­¦å‡†å¤‡.</p><h1 id="1-å‡†å¤‡å·¥ä½œ"><a class="markdownIt-Anchor" href="#1-å‡†å¤‡å·¥ä½œ"></a> 1. å‡†å¤‡å·¥ä½œ:</h1><p>åˆ›å»ºä¸€ä¸ªNATç½‘ç»œçš„è™šæ‹Ÿæœº.</p><h1 id="2-é…ç½®ç«¯å£æ˜ å°„"><a class="markdownIt-Anchor" href="#2-é…ç½®ç«¯å£æ˜ å°„"></a> 2. é…ç½®ç«¯å£æ˜ å°„:</h1><p>åœ¨NATæ¨¡å¼ä¸‹, å®¢æˆ·æœºçš„IPæ˜¯ä¸è¢«æ„ŸçŸ¥çš„, ä¸ºäº†èƒ½å¤Ÿæ–¹ä¾¿çš„è®¿é—®åˆ°å®¢æˆ·æœº, æˆ‘ä»¬è¿›è¡Œç«¯å£æ˜ å°„(æœ‰æ—¶ä¹Ÿå«NATæ˜ å°„).</p><p>æ€è·¯: æˆ‘ä»¬å¯ä»¥åœ¨virtual boxä¸­å°†<code>å®¿ä¸»æœºçš„ç«¯å£</code>æ˜ å°„åˆ°<code>å®¢æˆ·æœºçš„ç«¯å£</code>:</p><p>å‡è®¾æˆ‘ä»¬æœ‰å®¢æˆ·æœºIP: <code>10.0.2.15</code></p><p><img src="https://s1.ax1x.com/2022/09/23/xkXQaR.jpg" alt="å®¢æˆ·æœºIP" /></p><p>æˆ‘ä»¬è®¾ç«‹å¦‚ä¸‹çš„ç«¯å£æ˜ å°„:</p><table><thead><tr><th style="text-align:center">Host</th><th style="text-align:center">Guest</th></tr></thead><tbody><tr><td style="text-align:center">127.0.0.1:22</td><td style="text-align:center">10.0.2.15:22</td></tr></tbody></table><blockquote><p>ä¸‹å›¾ä¸­é…ç½®çš„æ˜ å°„æ˜¯ 127.0.0.1:2233 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>â†’</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">â†’</span></span></span></span> 10.0.2.15:22, ä½†æ˜¯ä¸ºäº†æ–¹ä¾¿, æ¨èå°†ä¸»æœºç«¯å£æ¢ä¸º22, è¿™æ ·è¿æ¥æ—¶å°±ä¸ç”¨é¢å¤–çš„å‚æ•°,è‡³äºç«¯å£å†²çª,æœ€åä¸€èŠ‚ç»™å‡ºè§£å†³æ€è·¯.</p></blockquote><p><img src="https://s1.ax1x.com/2022/09/23/xkX3Px.jpg" alt="ç«¯å£æ˜ å°„" /></p><h1 id="3-è®¿é—®å®¢æˆ·æœº"><a class="markdownIt-Anchor" href="#3-è®¿é—®å®¢æˆ·æœº"></a> 3. è®¿é—®å®¢æˆ·æœº:</h1><p>å¦‚æœæˆ‘ä»¬éœ€è¦SSHåˆ°å®¢æˆ·æœº, ä¸€èˆ¬æƒ³çš„å¯èƒ½æ˜¯ç›´æ¥ssh: <code>ssh guest_user@&lt;guest_ip&gt;</code>, ä½†æ˜¯NATæƒ…å†µä¸‹IPæ˜¯ä¸æ„ŸçŸ¥çš„, å› æ­¤æ— æ³•è®¿é—®, ä½†æ˜¯æˆ‘ä»¬åšç«¯å£æ˜ å°„ä¹‹å, å°±å˜äº†, æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼è®¿é—®å®¢æˆ·æœº:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ssh guest_user@127.0.0.1 <span class="hljs-comment"># äº‹å®ä¸Š, ä»–æ˜¯sshåˆ°å®¢æˆ·æœºä¸Š, ç™»é™†ç”¨æˆ·åä¸ºguest_user</span><br></code></pre></td></tr></table></figure><p>éšåå¦‚æœæƒ³ä½¿ç”¨vscode, åƒå¾€å¸¸ä¸€æ ·å³å¯.</p><h1 id="4-å…¶ä»–"><a class="markdownIt-Anchor" href="#4-å…¶ä»–"></a> 4. å…¶ä»–:</h1><p>ä¸Šæ–‡æˆ‘ä»¬è®²åˆ°, å°†æœ¬æœºçš„22ç«¯å£æ˜ å°„åˆ°å®¢æˆ·æœºçš„22ç«¯å£, ä½†æ˜¯æœ¬æœºçš„22ç«¯å£å¹¶ä¸æ€»æ˜¯ç©ºé—²çš„, ä¸ºæ­¤æˆ‘ä»¬å¯èƒ½å°†2233ç«¯å£æ˜ å°„åˆ°å®¢æˆ·æœºçš„22ç«¯å£, è®¿é—®æ–¹å¼å°±å˜åŒ–äº†:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ssh -p 2233 guest_user@127.0.0.1<br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;è°ˆåˆ°vscodeè¿æ¥è™šæ‹Ÿæœº, å¾ˆå¤šäººç¬¬ä¸€æƒ³åˆ°æ¡¥æ¥æ¨¡å¼, ä½†æ˜¯å¯¹äºwifiç½‘å¡, ç°é˜¶æ®µä¼¼ä¹æ— æ³•å®ç°,å¦‚æœå¯¹wifiç½‘å¡ä½¿ç”¨æ¡¥æ¥, å®¢æˆ·æœºå°†æ²¡æœ‰ç½‘ç»œ, è¿˜è¡¨ç°ä¸ºæ²¡æœ‰è·¯ç”±å’Œipv4åœ°å€, å› æ­¤è¿™ç¯‡ç¬”è®°ä¸»è¦æ˜¯ä¸ºé‚£äº›ä½¿ç”¨ç¬”è®°æœ¬(æ‹¥æœ‰æ— çº¿ç½‘å¡)çš„åŒå­¦å‡†å¤‡.&lt;/p&gt;
&lt;h1 id=&quot;1</summary>
      
    
    
    
    <category term="æ”¶è—" scheme="https://www.torch-fan.site/categories/%E6%94%B6%E8%97%8F/"/>
    
    
  </entry>
  
  <entry>
    <title>CMU Bomblab(æ±‡ç¼–å°ç¬”è®°)</title>
    <link href="https://www.torch-fan.site/2022/09/22/CMU-Bomblab-%E6%B1%87%E7%BC%96%E5%B0%8F%E7%AC%94%E8%AE%B0/"/>
    <id>https://www.torch-fan.site/2022/09/22/CMU-Bomblab-%E6%B1%87%E7%BC%96%E5%B0%8F%E7%AC%94%E8%AE%B0/</id>
    <published>2022-09-22T09:59:06.000Z</published>
    <updated>2022-11-15T02:27:36.104Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>å‚è€ƒ: <a href="https://github.com/CurryTang/bomb_lab_solution">https://github.com/CurryTang/bomb_lab_solution</a></p></blockquote><blockquote><p>ä»¥ä¸‹ä»x64æ¶æ„ä¸ºå‡†</p></blockquote><h1 id="1-ç›¸å…³æŒ‡ä»¤"><a class="markdownIt-Anchor" href="#1-ç›¸å…³æŒ‡ä»¤"></a> 1. ç›¸å…³æŒ‡ä»¤:</h1><h2 id="11-objdump-ç”¨äºç»™å‡ºæ‰€æœ‰æ±‡ç¼–æŒ‡ä»¤"><a class="markdownIt-Anchor" href="#11-objdump-ç”¨äºç»™å‡ºæ‰€æœ‰æ±‡ç¼–æŒ‡ä»¤"></a> 1.1 objdump: ç”¨äºç»™å‡ºæ‰€æœ‰æ±‡ç¼–æŒ‡ä»¤</h2><blockquote><p>objdump -d</p><p><code>Display assembler contents of executable sections</code></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">objdump -d xxx &gt; xxx.asm<br></code></pre></td></tr></table></figure><h2 id="12-gdb"><a class="markdownIt-Anchor" href="#12-gdb"></a> 1.2 gdb</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">gdb &lt;program&gt; <span class="hljs-comment"># è°ƒè¯•ç¨‹åº</span><br>p &lt;var&gt;  <span class="hljs-comment"># æ‰“å°å˜é‡</span><br>b &lt;func&gt;  <span class="hljs-comment"># ç»™å‡½æ•°è®¾ç½®ç«¯ç‚¹</span><br>c <span class="hljs-comment"># continue</span><br>n <span class="hljs-comment"># next line, stepping over function calls</span><br>s <span class="hljs-comment"># next line, stepping into funciton calls</span><br>list <span class="hljs-comment"># å±•å¼€æºç¨‹åºä»£ç </span><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">p/c *0x2000@10 <span class="hljs-comment"># æŸ¥çœ‹å†…å­˜å­—ç¬¦å€¼</span><br>x /25c 0x2000  <span class="hljs-comment"># xæœ¬èº«å°±æ˜¯çœ‹å†…å­˜çš„, ä¸éœ€è¦åŠ *</span><br><br>p/x <span class="hljs-variable">$eax</span> <span class="hljs-comment"># æŸ¥çœ‹å¯„å­˜å™¨å€¼çš„8è¿›åˆ¶å½¢å¼</span><br><br>x /20a 0x2000<br></code></pre></td></tr></table></figure><p>x æŒ‰åå…­è¿›åˆ¶æ ¼å¼æ˜¾ç¤ºå˜é‡ã€‚</p><p>d æŒ‰åè¿›åˆ¶æ ¼å¼æ˜¾ç¤ºå˜é‡ã€‚</p><p>u æŒ‰åå…­è¿›åˆ¶æ ¼å¼æ˜¾ç¤ºæ— ç¬¦å·æ•´å‹ã€‚</p><p>o æŒ‰å…«è¿›åˆ¶æ ¼å¼æ˜¾ç¤ºå˜é‡ã€‚</p><p>t æŒ‰äºŒè¿›åˆ¶æ ¼å¼æ˜¾ç¤ºå˜é‡ã€‚</p><p>a æŒ‰åå…­è¿›åˆ¶æ ¼å¼æ˜¾ç¤ºå˜é‡ã€‚</p><p>c æŒ‰å­—ç¬¦æ ¼å¼æ˜¾ç¤ºå˜é‡ã€‚</p><p>f æŒ‰æµ®ç‚¹æ•°æ ¼å¼æ˜¾ç¤ºå˜é‡ã€‚</p><p>åˆ‡æ¢æ ˆå¸§:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">bt</span><br><br><span class="hljs-attribute">f</span><span class="hljs-meta"> [N]</span><br></code></pre></td></tr></table></figure><p>æ˜¾ç¤ºæ‰€æœ‰å¯„å­˜å™¨</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">i</span> registers<br></code></pre></td></tr></table></figure><p>çœ‹å¯„å­˜å™¨çš„å€¼</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">x</span> /<span class="hljs-number">16</span>xb $eax+<span class="hljs-number">0</span>x14<br></code></pre></td></tr></table></figure><h2 id="13-strings"><a class="markdownIt-Anchor" href="#13-strings"></a> 1.3 strings</h2><p>å¦‚æœä»æ±‡ç¼–ä¸­çœ‹åˆ°æŸäº›å…³é”®å­—ç¬¦, å¯ä»¥è¿™æ ·è·å–ä¸€æ•´å¥è¯:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">strings bomb | grep keywords<br></code></pre></td></tr></table></figure><h1 id="2-bomblabå®éªŒæ“ä½œ"><a class="markdownIt-Anchor" href="#2-bomblabå®éªŒæ“ä½œ"></a> 2. Bomblabå®éªŒæ“ä½œ</h1><ol><li>å¼€å¯æ±‡ç¼–çª—å£(å¥½æŸ¥çœ‹å¯¹åº”çš„æ±‡ç¼–ä»£ç )</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">layout asm<br></code></pre></td></tr></table></figure><ol start="2"><li>æ‰“æ–­ç‚¹</li></ol><p>åœ¨è¿›æ¯ä¸ªé˜¶æ®µå‰ä¸”åœ¨readlineå‰æ‰“æ–­ç‚¹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">b *0x400e37 <span class="hljs-comment"># åœ°å€\æŒ‡é’ˆå‰è¦æœ‰ *</span><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">b phase_1<br>b phase_2<br>b phase_3<br>b phase_4<br>b phase_5<br>b phase_6<br></code></pre></td></tr></table></figure><ol start="3"><li>å¼€å§‹è¿è¡Œ,è¿›è¡Œè°ƒè¯•</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">r<br><br><span class="hljs-comment"># æŸ¥çœ‹æŸä¸€ä¸ªåœ°å€/å‡½æ•°çš„æ±‡ç¼– (å¦‚æœä¸åœ¨è¿è¡Œæ²¡æ³•æ ¹æ®åœ°å€çœ‹æ±‡ç¼–, åªèƒ½ç”¨å‡½æ•°ååå­—)</span><br>disassem *0x400ee0<br><br>disassem phase_1<br><br>disassem strings_not_equal<br></code></pre></td></tr></table></figure><h1 id="3-çœ‹æ±‡ç¼–"><a class="markdownIt-Anchor" href="#3-çœ‹æ±‡ç¼–"></a> 3. çœ‹æ±‡ç¼–</h1><p>x86ç³»ç»Ÿä¸­,æ ˆçš„åœ°å€æ˜¯ä»é«˜åœ°å€å¾€ä½åœ°å€, pushæ ˆå¸§çš„æ—¶å€™, rsp(<code>stack pointer</code>)å‡å°‘å››ä¸ªå­—èŠ‚.</p><p><img src="https://s1.328888.xyz/2022/09/22/IoR1S.png" alt="å¯„å­˜å™¨" /></p><h2 id="31-é€šç”¨å¯„å­˜å™¨64ä½å¯„å­˜å™¨"><a class="markdownIt-Anchor" href="#31-é€šç”¨å¯„å­˜å™¨64ä½å¯„å­˜å™¨"></a> 3.1 é€šç”¨å¯„å­˜å™¨(64ä½å¯„å­˜å™¨)</h2><p>0x8(%rsp) è¡¨ç¤ºä¸Šä¸€ä¸ªå˜é‡(ä¸€èˆ¬ç¬¬ä¸€ä¸ª)</p><blockquote><p>bombä¸­å°†string_lengthçš„è¿”å›å€¼æ”¾åœ¨EAXä¸­</p></blockquote><p>EAX: accumulator, åŠ æ³•ä¹˜æ³•æŒ‡ä»¤çš„ç¼ºçœå¯„å­˜å™¨<br />EBX: baseåŸºåœ°å€å¯„å­˜å™¨,åœ¨å†…å­˜å¯»å€æ—¶å­˜æ”¾åŸºåœ°å€<br />ECX: counterè®¡æ•°å™¨, é‡å¤(REP)å‰ç¼€æŒ‡ä»¤å’ŒLOOPæŒ‡ä»¤çš„å†…å®šè®¡æ•°å™¨<br />EDX: å­˜æ”¾æ•´æ•°é™¤æ³•äº§ç”Ÿçš„ä½™æ•°<br />ESI/EDI: source/destination index, å­—ç¬¦ä¸²æ“ä½œæŒ‡ä»¤é‡Œ, DS:ESIæŒ‡å‘æºä¸², ES:EDIæŒ‡å‘ç›®æ ‡ä¸²<br />EBP: base pointer, é«˜çº§è¯­è¨€å‡½æ•°è°ƒç”¨æ—¶çš„frame pointerä¿å­˜åœ°æ–¹<br />å¦‚:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs asm">push ebp;  // ä¿å­˜å½“å‰ebp<br>mov ebp,esp; // ebpè®¾ä¸ºå½“å‰<br>sub esp,xxx;  // é¢„ç•™xxxå­—èŠ‚ç»™å‡½æ•°ä¸´æ—¶å˜é‡<br></code></pre></td></tr></table></figure><p>ESP: ä¸“é—¨ç”¨ä½œå †æ ˆçš„é¡¶éƒ¨æŒ‡é’ˆ</p><h2 id="32-å…¶ä»–å¯„å­˜å™¨"><a class="markdownIt-Anchor" href="#32-å…¶ä»–å¯„å­˜å™¨"></a> 3.2 å…¶ä»–å¯„å­˜å™¨:</h2><p>R0~R12 æ˜¯64ä½å·¥ä½œå¯„å­˜å™¨, å…¶ä¸­R12æœ‰å¯èƒ½è¢«linkerä¿®æ”¹,æ‰€ä»¥å‡½æ•°å¼€å¤´ç»å¸¸å¯¹R12è¿›è¡Œä¿æŠ¤</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">push %r12 <span class="hljs-comment"># å°†R12çš„å†…å®¹æ¨å…¥å †æ ˆè¿›è¡Œä¿æŠ¤</span><br></code></pre></td></tr></table></figure><p>å½“å‡½æ•°å‚æ•°å°‘äº7ä¸ªæ—¶, ä»å·¦åˆ°å³å‚æ•°ä¾æ¬¡æ”¾å…¥å¯„å­˜å™¨:</p><ul><li>rdi</li><li>rsi</li><li>rdx</li><li>rcx</li><li>r8</li><li>r9</li></ul><h2 id="33-æ¡ä»¶è·³è½¬æŒ‡ä»¤å’Œæ¯”è¾ƒæŒ‡ä»¤"><a class="markdownIt-Anchor" href="#33-æ¡ä»¶è·³è½¬æŒ‡ä»¤å’Œæ¯”è¾ƒæŒ‡ä»¤"></a> 3.3 æ¡ä»¶è·³è½¬æŒ‡ä»¤å’Œæ¯”è¾ƒæŒ‡ä»¤:</h2><blockquote><p><a href="https://faydoc.tripod.com/cpu/jle.htm">https://faydoc.tripod.com/cpu/jle.htm</a></p></blockquote><p><code>test</code> æŒ‡ä»¤ä¸»è¦å°†ä¸¤ä¸ªæ“ä½œæ•°æŒ‰ä½ä¸, å¹¶æ ¹æ®ç»“æœè®¾ç½®<code>æ ‡å¿—å¯„å­˜å™¨</code> (ç»“æœä¸ä¼šå†™å›åˆ°ç›®æ ‡æ“ä½œæ•°), <code>test</code>çš„ä¸¤ä¸ªå¯„å­˜å™¨åªæœ‰éƒ½æ˜¯ç©º(å…¨0)æ—¶æˆ–è€…ä¸åŒæ—¶, ZFæ‰ä¼šè¢«ç½®ä½</p><blockquote><p>æ³¨æ„: addq src, dst -&gt; dst = dst + src, ä¼šå°†ç»“æœå†™å›åˆ°ç›®æ ‡å¯„å­˜å™¨ä¸Š</p></blockquote><p><code>test</code>æŒ‡ä»¤ä½ä¸è¿ç®—ç»“æœä¸º0çš„è¯, ZF(Zero Flag)è®¾ä¸º0.</p><p><code>je</code> æ˜¯jz(jump if zero)çš„åˆ«ç§°.<br /><code>jne</code>å°±æ˜¯åè¿‡æ¥çš„æ¡ä»¶è·³è½¬æŒ‡ä»¤</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">cmp</span> eax, edx<br>ja somewhere ; <span class="hljs-attribute">will</span> go <span class="hljs-string">&quot;somewhere&quot;</span> if eax &gt;u edx<br>             ; <span class="hljs-attribute">where</span> &gt;u is <span class="hljs-string">&quot;unsigned greater than&quot;</span><br><br>cmp eax, edx<br>jg somewhere ; <span class="hljs-attribute">will</span> go <span class="hljs-string">&quot;somewhere&quot;</span> if eax &gt;s edx<br>             ; <span class="hljs-attribute">where</span> &gt;s is <span class="hljs-string">&quot;signed greater than&quot;</span><br></code></pre></td></tr></table></figure><p><code>cmpb</code>: åˆ¤æ–­æ˜¯å¦ç›¸ç­‰, ç„¶åç½®ZFä¸º1:</p><p><code>cmpl</code>:<br />For &gt;, there is ja for unsigned and jg for signed (jump if above and jump if greater).</p><pre><code class="hljs">For &lt;, there is jb for unsigned and jl for signed (jump if below and jump if less).</code></pre><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">cmpb <span class="hljs-variable">$0x0</span>, (%edx)<br></code></pre></td></tr></table></figure><p><code>(%edx)</code> è¡¨ç¤º %edxä¸­æ‰€ä¿å­˜çš„åœ°å€æŒ‡å‘å•å…ƒçš„å†…å®¹(å³å–æŒ‡é’ˆæ‰€æŒ‡å†…å®¹)</p><h2 id="34-å¯„å­˜å™¨æ“ä½œ"><a class="markdownIt-Anchor" href="#34-å¯„å­˜å™¨æ“ä½œ"></a> 3.4 å¯„å­˜å™¨æ“ä½œ:</h2><blockquote><p><a href="https://stackoverflow.com/questions/19748074/meaning-of-0x8rsp">https://stackoverflow.com/questions/19748074/meaning-of-0x8rsp</a></p></blockquote><p><code>0x8(%rsp)</code> means &quot;get the location on the stack that is 8 bytes away from the stack pointer %rsp</p><p><code>lea</code>: å’Œmovå¾ˆåƒ, ä¸è¿‡æœ‰å…¶ä»–ä½œç”¨</p><h1 id="å…¶ä»–"><a class="markdownIt-Anchor" href="#å…¶ä»–"></a> å…¶ä»–:</h1><p>å› ä¸ºä¸åŒåŒå­¦çš„bombå†…å®¹ä¸åŒ, æˆ‘å¸®çš„ä¸€ä½åŒå­¦æ¯”ç½‘ä¸Šçš„ç‰ˆæœ¬è¦ç¨å¾®å¤æ‚ä¸€äº›,å…±è®¡19å°æ—¶,bingo~</p><p>è¿™ç¯‡ç¬”è®°åªæ˜¯é›¶æ˜Ÿéšç¬”, å¸®åŠ©è‡ªå·±å›å¿†æ±‡ç¼–, æ—¥åæœ‰æœºä¼šä¼šç»¼åˆæ•´ç†</p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;å‚è€ƒ: &lt;a href=&quot;https://github.com/CurryTang/bomb_lab_solution&quot;&gt;https://github.com/CurryTang/bomb_lab_solution&lt;/a&gt;&lt;/p&gt;
&lt;/blockq</summary>
      
    
    
    
    <category term="è®¡ç®—æœºåŸºç¡€" scheme="https://www.torch-fan.site/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/"/>
    
    <category term="æ“ä½œç³»ç»Ÿ" scheme="https://www.torch-fan.site/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"/>
    
    <category term="Linux" scheme="https://www.torch-fan.site/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/Linux/"/>
    
    <category term="æ±‡ç¼–" scheme="https://www.torch-fan.site/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/Linux/%E6%B1%87%E7%BC%96/"/>
    
    
  </entry>
  
  <entry>
    <title>Generate 204é“¾æ¥æ”¶é›†</title>
    <link href="https://www.torch-fan.site/2022/09/04/Generate-204%E9%93%BE%E6%8E%A5%E6%94%B6%E9%9B%86/"/>
    <id>https://www.torch-fan.site/2022/09/04/Generate-204%E9%93%BE%E6%8E%A5%E6%94%B6%E9%9B%86/</id>
    <published>2022-09-04T04:39:15.000Z</published>
    <updated>2022-11-15T02:27:36.104Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æ³¨æ„, è¿™äº›é“¾æ¥éƒ½å¯ä»¥ç”¨httpsæ›¿ä»£, ä½†æ˜¯å¹¶ä¸æ¨è.</p></blockquote><ul><li><a href="http://www.gstatic.com/generate_204">http://www.gstatic.com/generate_204</a></li><li><a href="http://cp.cloudflare.com/generate_204">http://cp.cloudflare.com/generate_204</a></li><li><a href="http://www.qualcomm.cn/generate_204">http://www.qualcomm.cn/generate_204</a></li><li><a href="http://clients3.google.com/generate_204">http://clients3.google.com/generate_204</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;æ³¨æ„, è¿™äº›é“¾æ¥éƒ½å¯ä»¥ç”¨httpsæ›¿ä»£, ä½†æ˜¯å¹¶ä¸æ¨è.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.gstatic.com/generate_204&quot;&gt;http://www.gstatic.com</summary>
      
    
    
    
    <category term="æ”¶è—" scheme="https://www.torch-fan.site/categories/%E6%94%B6%E8%97%8F/"/>
    
    
  </entry>
  
  <entry>
    <title>dbsç»“é¡¹æŠ¥å‘Š</title>
    <link href="https://www.torch-fan.site/2022/09/03/dbs%E7%BB%93%E9%A1%B9%E6%8A%A5%E5%91%8A/"/>
    <id>https://www.torch-fan.site/2022/09/03/dbs%E7%BB%93%E9%A1%B9%E6%8A%A5%E5%91%8A/</id>
    <published>2022-09-03T08:24:39.000Z</published>
    <updated>2022-11-15T02:27:36.104Z</updated>
    
    <content type="html"><![CDATA[<center>    <font size="10"><bold>ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°å¯åŠ¨å¾®å‹è™šæ‹Ÿæœº</bold></font>    <br/><br/></center><h1 id="1-é¡¹ç›®å®ç°æ–¹æ¡ˆç ”ç©¶"><a class="markdownIt-Anchor" href="#1-é¡¹ç›®å®ç°æ–¹æ¡ˆç ”ç©¶"></a> 1. ğŸ“½ é¡¹ç›®å®ç°æ–¹æ¡ˆç ”ç©¶:</h1><blockquote><p>å®ç°æ–¹æ¡ˆç»™å‡ºæ˜¯ä¸ºäº†æä¾›<font color="cyan">å¯å¤ç°æ€§</font></p></blockquote><table><thead><tr><th>é…ç½®</th><th>æè¿°</th></tr></thead><tbody><tr><td>å¤„ç†å™¨</td><td>AMDÂ® Ryzen 7 4800h with radeon graphics Ã— 16</td></tr><tr><td>å†…å­˜</td><td>32g</td></tr><tr><td>æ˜¾å¡</td><td>NVIDIA Corporation TU117M [GeForce GTX 1650 Ti Mobile] / NVIDIA GeForce GTX 1650 Ti/PCIe/SSE2</td></tr><tr><td>OS</td><td>Ubuntu 22.04 LTS</td></tr><tr><td>rustcç‰ˆæœ¬</td><td>rustc 1.62.1</td></tr></tbody></table><h2 id="11-å‚è€ƒç›®æ ‡-firecracker"><a class="markdownIt-Anchor" href="#11-å‚è€ƒç›®æ ‡-firecracker"></a> 1.1 ğŸ² å‚è€ƒç›®æ ‡: <a href="https://github.com/firecracker-microvm/firecracker">firecracker</a></h2><h3 id="111-æ„å»ºfirecracker"><a class="markdownIt-Anchor" href="#111-æ„å»ºfirecracker"></a> 1.1.1 æ„å»º<code>firecracker</code></h3><blockquote><p>cargoçš„ä½¿ç”¨æ–‡æ¡£: <a href="https://doc.rust-lang.org/cargo/index.html">https://doc.rust-lang.org/cargo/index.html</a></p><p>å¦‚æœéœ€è¦ç¼–è¯‘å…¶ä»–å¹³å°çš„crate, å¯èƒ½è¿˜éœ€è¦ç”¨rustupæ·»åŠ å¯¹åº”çš„toolchain, rustupçš„ä½¿ç”¨æ–‡æ¡£: <a href="https://rust-lang.github.io/rustup/index.html">https://rust-lang.github.io/rustup/index.html</a></p></blockquote><ol><li>æ‹‰å–æºç :</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">git <span class="hljs-built_in">clone</span> https://github.com/firecracker-microvm/firecracker<br><span class="hljs-built_in">cd</span> firecracker<br></code></pre></td></tr></table></figure><ol start="2"><li><p>é…ç½®ä¾èµ–</p><blockquote><p>æ„å»ºfirecrakerä¾èµ–äº<code>Docker</code>, æˆ‘çš„ä¸ªäººåšå®¢ä¸Šdockerçš„å®‰è£…ç¬”è®°å¯ä¾›å‚è€ƒ: <a href="https://www.torch-fan.site/2022/07/21/Ubuntu%E4%B8%8A%E4%BD%BF%E7%94%A8docker/">Ubuntuä¸Šä½¿ç”¨Docker</a></p></blockquote></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo apt install build-essential clang<br>cargo check <br></code></pre></td></tr></table></figure><ol start="3"><li>æ„å»ºfirecracker</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">tools/devtool build<br><br><span class="hljs-comment"># release</span><br>tools/devtool build --release<br></code></pre></td></tr></table></figure><h3 id="112-ä½¿ç”¨firecrackeråˆ›å»ºè™šæ‹Ÿæœº"><a class="markdownIt-Anchor" href="#112-ä½¿ç”¨firecrackeråˆ›å»ºè™šæ‹Ÿæœº"></a> 1.1.2 ä½¿ç”¨<code>firecracker</code>åˆ›å»ºè™šæ‹Ÿæœº</h3><blockquote><p>å‚è€ƒèµ„æ–™: <a href="https://github.com/firecracker-microvm/firecracker/blob/main/docs/getting-started.md">https://github.com/firecracker-microvm/firecracker/blob/main/docs/getting-started.md</a></p></blockquote><blockquote><p>äº‹å®ä¸Š, æŠ¥å‘Šçš„æœ€ç»ˆç›®çš„ç›®çš„å¹¶ä¸åœ¨äºæè¿°æ„å»ºfirecrakeræˆ–è€…ä½¿ç”¨dbsä¹‹ç±»çš„æ–¹å¼, è€Œæ˜¯å€ŸåŠ©å¯¹firecrakerçš„äº†è§£æ¥è¾…åŠ©ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°ä»<code>DBS</code>ä¸­å¯åŠ¨ä¸€ä¸ªè™šæ‹Ÿæœº, å› æ­¤æ–‡æ¡£å™è¿°ä¸ä»¥çº¿æ€§è¿›è¡Œ, å°†è¿›è¡Œè·³è½¬, ä½“ç°æ€è€ƒçš„è¿‡ç¨‹.</p></blockquote><p>â€‹ä½¿ç”¨firecrackeråˆ›å»ºè™šæ‹Ÿæœº, éœ€è¦è¿™äº›å†…å®¹:</p><ol><li><code>API socket</code></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">./firecracker --api-sock /tmp/firecracker.socket<br></code></pre></td></tr></table></figure><ol start="2"><li><p><code>Linux kernel</code></p></li><li><p><code>rootfs</code></p></li></ol><p>â€‹å› æ­¤å½“æˆ‘ä»¬å¼€å§‹äº†è§£<code>DBS</code>æ—¶, éœ€è¦å…³æ³¨<code>DBS</code>å·²ç»å…·å¤‡å’Œä¸å…·å¤‡çš„è¦ç´ ,</p><h2 id="12-æ›´è¿›ä¸€æ­¥"><a class="markdownIt-Anchor" href="#12-æ›´è¿›ä¸€æ­¥"></a> 1.2 ğŸ¦Œ æ›´è¿›ä¸€æ­¥</h2><blockquote><p>ä¸Šé¢çš„æ­¥éª¤ä¸å­˜åœ¨ä»»ä½•å›°éš¾, ä½†æˆ‘ä»¬å¹¶ä¸å…³å¿ƒæ˜¯å¦åˆ›å»ºå¥½è™šæ‹Ÿæœº, è€Œå…³æ³¨åœ¨firecrackerä¸€å¼€å§‹æ˜¯å¦‚ä½•åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿæœº</p></blockquote><h3 id="121-vmmçš„å¯¹å¤–æ¥å£"><a class="markdownIt-Anchor" href="#121-vmmçš„å¯¹å¤–æ¥å£"></a> 1.2.1 VMMçš„å¯¹å¤–æ¥å£</h3><blockquote><p>å®šä½åˆ°<code>src/firecracker/src/main.rs</code>, å…³æ³¨åœ¨<code>api-sock</code>å‘½ä»¤è¡Œå‚æ•°</p></blockquote><p>firecrackerå¯¹è™šæ‹Ÿæœºè¿›è¡Œé…ç½®ä¸»è¦åˆ†ä¸º<font color="cyan"><strong>ä¸¤ç§å½¢å¼</strong></font>:</p><ol><li>HTTP APIçš„è¯·æ±‚æ–¹å¼è¿›è¡Œé…ç½®(ä¹Ÿå¯ä»¥åŒæ—¶æŒ‡å®šé…ç½®æ–‡ä»¶)</li><li>é€šè¿‡æŒ‡å®šé…ç½®æ–‡ä»¶çš„æ–¹å¼è¿›è¡Œé…ç½®</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash">rootfs_path=$(<span class="hljs-built_in">pwd</span>)<span class="hljs-string">&quot;/hello-rootfs.ext4&quot;</span><br>curl --unix-socket /tmp/firecracker.socket -i \<br>  -X PUT <span class="hljs-string">&#x27;http://localhost/drives/rootfs&#x27;</span> \<br>  -H <span class="hljs-string">&#x27;Accept: application/json&#x27;</span>           \<br>  -H <span class="hljs-string">&#x27;Content-Type: application/json&#x27;</span>     \<br>  -d <span class="hljs-string">&quot;&#123;</span><br><span class="hljs-string">        \&quot;drive_id\&quot;: \&quot;rootfs\&quot;,</span><br><span class="hljs-string">        \&quot;path_on_host\&quot;: \&quot;<span class="hljs-variable">$&#123;rootfs_path&#125;</span>\&quot;,</span><br><span class="hljs-string">        \&quot;is_root_device\&quot;: true,</span><br><span class="hljs-string">        \&quot;is_read_only\&quot;: false</span><br><span class="hljs-string">   &#125;&quot;</span><br><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># ä¸ä½¿ç”¨APIè¿›è¡Œé…ç½®, ä¼ å…¥é…ç½®æ–‡ä»¶</span><br>./firecracker --api-sock /tmp/firecracker.socket --config-file &lt;path_to_the_configuration_file&gt;<br></code></pre></td></tr></table></figure><blockquote><p>å¯¹äºDBSè€Œè¨€, é¡¹ç›®æœ€åˆç›®æ ‡æ˜¯é€šè¿‡å‘½ä»¤è¡Œå‚æ•°è¿›è¡Œå¯åŠ¨, è€Œä¸éœ€è¦kataçš„ç¯å¢ƒ, å› æ­¤æˆ‘ä»¬å¯ä»¥å…³æ³¨åœ¨ä½¿ç”¨é…ç½®æ–‡ä»¶åˆ›å»ºè™šæ‹Ÿæœºçš„ä»£ç é€»è¾‘éƒ¨åˆ†, å› æ­¤å¯ä»¥å…³æ³¨å‡½æ•°<code>run_without_api</code> <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>â†’</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">â†’</span></span></span></span>  <code>VmResources::from_json</code></p></blockquote><h3 id="122-rootfså’Œlinux-kernelçš„ä½¿ç”¨æ–¹å¼"><a class="markdownIt-Anchor" href="#122-rootfså’Œlinux-kernelçš„ä½¿ç”¨æ–¹å¼"></a> 1.2.2 rootfså’ŒLinux kernelçš„ä½¿ç”¨æ–¹å¼</h3><blockquote><p>è¦äº†è§£rootfså’ŒLinux kernelå¦‚ä½•è¢«ä½¿ç”¨äº†, éœ€è¦ä»<code>main.rs</code>çš„<code>run_without_api</code>ä¸­, æ·±å…¥åˆ°<code>build_microvm_from_json</code></p></blockquote><ul><li>kernelè¢«ä»¥<code>VmmConfig::block_devices</code>çš„å½¢å¼ä¼ å…¥</li><li>rootfsä½œä¸º<code>VmmConfig::block_devices</code>é…ç½®çš„ä¸€éƒ¨åˆ†è¿›è¡Œä¼ å…¥</li><li>è‡³äºå¯åŠ¨è™šæ‹Ÿæœºç­‰å‘½ä»¤, åˆ™å¯ä»¥HTTP APIå½¢å¼, ä¼ é€’ç»™<code>api_server/src/lib.rs</code>, æ¥å—è¯·æ±‚<code>/actions</code>çš„å‚æ•°, å¹¶å¯åŠ¨é…ç½®å¥½çš„è™šæ‹Ÿæœº</li></ul><blockquote><p>è‡³æ­¤, æˆ‘ä»¬å¯ä»¥å¸¦ç€ç–‘é—®, è¾¹å¼€å§‹å®ç°æˆ‘ä»¬çš„é¡¹ç›®éœ€æ±‚, è¾¹æµè§ˆäº†è§£firecrackeræ˜¯å¦‚ä½•å®ç°çš„.</p></blockquote><h1 id="2-é˜¶æ®µä¸€-åˆ›å»ºå‘½ä»¤è¡Œå‰ç«¯æ¥å£"><a class="markdownIt-Anchor" href="#2-é˜¶æ®µä¸€-åˆ›å»ºå‘½ä»¤è¡Œå‰ç«¯æ¥å£"></a> 2. ğŸ”¨ é˜¶æ®µä¸€: åˆ›å»ºå‘½ä»¤è¡Œå‰ç«¯æ¥å£</h1><blockquote><p>ç”±äºrustç¼–ç¨‹ç»éªŒä¸å¤š, å› æ­¤å°½å¯èƒ½ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“, åœ¨å‘½ä»¤è¡Œè§£æä¸Š, é€‰ç”¨<a href="https://github.com/clap-rs/clap">clap</a> (Dual-licensed under <code>Apache 2.0</code> or <code>MIT</code>, å¯¹äºDBSè€Œè¨€, æ­£å¥½å¯ä»¥ç”¨<code>Apache 2.0</code>)</p><p><code>clap</code>çš„ä½¿ç”¨æ–‡æ¡£: <a href="https://docs.rs/clap/latest/clap/">https://docs.rs/clap/latest/clap/</a></p></blockquote><h2 id="21-å‘½ä»¤è¡Œé…ç½®é¡¹"><a class="markdownIt-Anchor" href="#21-å‘½ä»¤è¡Œé…ç½®é¡¹"></a> 2.1 ğŸ¨ å‘½ä»¤è¡Œé…ç½®é¡¹</h2><blockquote><p>ä»<a href="https://github.com/kata-containers/kata-containers/tree/runtime-rs">kata-containers</a>çš„<code>runtime-rs</code>åˆ†æ”¯ä¸­, å¯ä»¥åœ¨<code>dragonball::vm::VmConfigInfo</code>ä¸­çœ‹åˆ°DBSä½¿ç”¨çš„è™šæ‹Ÿæœºé…ç½®.</p></blockquote><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">CpuTopology</span> &#123;<br>    <span class="hljs-comment">/// threads per core to indicate hyperthreading is enabled or not</span><br>    <span class="hljs-keyword">pub</span> threads_per_core: <span class="hljs-type">u8</span>,<br>    <span class="hljs-comment">/// cores per die to guide guest cpu topology init</span><br>    <span class="hljs-keyword">pub</span> cores_per_die: <span class="hljs-type">u8</span>,<br>    <span class="hljs-comment">/// dies per socket to guide guest cpu topology</span><br>    <span class="hljs-keyword">pub</span> dies_per_socket: <span class="hljs-type">u8</span>,<br>    <span class="hljs-comment">/// number of sockets</span><br>    <span class="hljs-keyword">pub</span> sockets: <span class="hljs-type">u8</span>,<br>&#125;<br><br><span class="hljs-meta">#[derive(Clone, Debug, PartialEq)]</span><br><span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">VmConfigInfo</span> &#123;<br>    <span class="hljs-comment">/// Number of vcpu to start.</span><br>    <span class="hljs-keyword">pub</span> vcpu_count: <span class="hljs-type">u8</span>,<br>    <span class="hljs-comment">/// Max number of vcpu can be added</span><br>    <span class="hljs-keyword">pub</span> max_vcpu_count: <span class="hljs-type">u8</span>,<br>    <span class="hljs-comment">/// cpu power management.</span><br>    <span class="hljs-keyword">pub</span> cpu_pm: <span class="hljs-type">String</span>,<br>    <span class="hljs-comment">/// cpu topology information</span><br>    <span class="hljs-keyword">pub</span> cpu_topology: CpuTopology,<br>    <span class="hljs-comment">/// vpmu support level</span><br>    <span class="hljs-keyword">pub</span> vpmu_feature: <span class="hljs-type">u8</span>,<br><br>    <span class="hljs-comment">/// Memory type that can be either hugetlbfs or shmem, default is shmem</span><br>    <span class="hljs-keyword">pub</span> mem_type: <span class="hljs-type">String</span>,<br>    <span class="hljs-comment">/// Memory file path</span><br>    <span class="hljs-keyword">pub</span> mem_file_path: <span class="hljs-type">String</span>,<br>    <span class="hljs-comment">/// The memory size in MiB.</span><br>    <span class="hljs-keyword">pub</span> mem_size_mib: <span class="hljs-type">usize</span>,<br><br>    <span class="hljs-comment">/// sock path</span><br>    <span class="hljs-keyword">pub</span> serial_path: <span class="hljs-type">Option</span>&lt;<span class="hljs-type">String</span>&gt;,<br>&#125;<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨<code>clap</code>å®šä¹‰å‘½ä»¤è¡Œå‚æ•°åï¼Œå…·ä½“å†…å®¹å¦‚ä¸‹:</p><table><thead><tr><th style="text-align:center">arguments</th><th style="text-align:center">required</th><th style="text-align:center">default value</th><th style="text-align:center">description</th></tr></thead><tbody><tr><td style="text-align:center"><code>rootfs</code></td><td style="text-align:center">true</td><td style="text-align:center">-</td><td style="text-align:center">The path to rootfs image.</td></tr><tr><td style="text-align:center"><code>kernel-path</code></td><td style="text-align:center">true</td><td style="text-align:center">-</td><td style="text-align:center">The path of kernel image (Only uncompressed kernel is supported for Dragonball).</td></tr><tr><td style="text-align:center"><code>log-file</code></td><td style="text-align:center">false</td><td style="text-align:center"><code>&quot;dbs-cli.log&quot;</code></td><td style="text-align:center">The path to log file</td></tr><tr><td style="text-align:center"><code>log-level</code></td><td style="text-align:center">false</td><td style="text-align:center"><code>&quot;Info&quot;</code></td><td style="text-align:center">The logging level.</td></tr><tr><td style="text-align:center"><code>boot-args</code></td><td style="text-align:center">false</td><td style="text-align:center"><code>console=ttyS0 tty0 reboot=k debug panic=1 pci=off root=/dev/vda1</code></td><td style="text-align:center">The boot arguments passed to the kernel.</td></tr><tr><td style="text-align:center"><code>is-root</code></td><td style="text-align:center">false</td><td style="text-align:center"><code>true</code></td><td style="text-align:center">Decide the device to be the root boot device or not.</td></tr><tr><td style="text-align:center"><code>is-read-only</code></td><td style="text-align:center">false</td><td style="text-align:center"><code>false</code></td><td style="text-align:center">The driver opened in read-only or not.</td></tr><tr><td style="text-align:center"><code>vcpu</code></td><td style="text-align:center">false</td><td style="text-align:center"><code>1</code></td><td style="text-align:center">The number of vcpu to start.</td></tr><tr><td style="text-align:center"><code>max-vcpu</code></td><td style="text-align:center">false</td><td style="text-align:center"><code>1</code></td><td style="text-align:center">The max number of vpu can be added.</td></tr><tr><td style="text-align:center"><code>cpu-pm</code></td><td style="text-align:center">false</td><td style="text-align:center"><code>0</code></td><td style="text-align:center">vpmu support level.</td></tr><tr><td style="text-align:center"><code>threads-per-core</code></td><td style="text-align:center">false</td><td style="text-align:center"><code>1</code></td><td style="text-align:center">Threads per core to indicate hyper-threading is enabled or not.</td></tr><tr><td style="text-align:center"><code>cores-per-die</code></td><td style="text-align:center">false</td><td style="text-align:center"><code>1</code></td><td style="text-align:center">Cores per die to guide guest cpu topology init.</td></tr><tr><td style="text-align:center"><code>dies-per-socket</code></td><td style="text-align:center">false</td><td style="text-align:center"><code>1</code></td><td style="text-align:center">Dies per socket to guide guest cpu topology.</td></tr><tr><td style="text-align:center"><code>sockets</code></td><td style="text-align:center">false</td><td style="text-align:center"><code>1</code></td><td style="text-align:center">The number of sockets.</td></tr><tr><td style="text-align:center"><code>mem-type</code></td><td style="text-align:center">false</td><td style="text-align:center"><code>shmem</code></td><td style="text-align:center">Memory type that can be either hugetlbfs or shmem.</td></tr><tr><td style="text-align:center"><code>mem-file</code></td><td style="text-align:center">false</td><td style="text-align:center">``</td><td style="text-align:center">Memory file path.</td></tr><tr><td style="text-align:center"><code>initrd-path</code></td><td style="text-align:center">false</td><td style="text-align:center"><code>None</code></td><td style="text-align:center">The path of initrd.</td></tr></tbody></table><h2 id="22-å‚æ•°ç›¸å…³çš„æ³¨æ„äº‹é¡¹"><a class="markdownIt-Anchor" href="#22-å‚æ•°ç›¸å…³çš„æ³¨æ„äº‹é¡¹"></a> 2.2 å‚æ•°ç›¸å…³çš„æ³¨æ„äº‹é¡¹:</h2><p>æ•´ä¸ªå‘½ä»¤è¡Œå‚æ•°æœ€ä¸ºå…³é”®çš„ä¸‰ä¸ªå‚æ•°æ˜¯<code>rootfs</code>, <code>kernel-path</code> å’Œ <code>boot-args</code>. ç”±äºä»å‘½ä»¤è¡Œç»ˆç«¯è¿›å…¥vmçš„consoleé‡‡ç”¨çš„æ–¹å¼æ˜¯å°†ttySxçš„è¾“å‡ºé‡å®šå‘åˆ°å½“å‰ç»ˆç«¯çš„stdout, å› æ­¤éœ€è¦ç¡®ä¿kernelæ”¯æŒserial consoleå¹¶ä¸”rootfsåœ¨æ„å»ºæ—¶éœ€è¦é…ç½®å¥½å¯åŠ¨ä¹‹åèƒ½å¤Ÿå¯åŠ¨å¯¹åº”ç»ˆç«¯, å¦åˆ™å°†æ— æ³•è¿›å…¥vm. å¯¹äº<code>boot-args</code>, <code>console=xx</code>å’Œ<code>root=&quot;dev/vda1&quot;</code> æ˜¯æ ¹æ®å¯¹åº”rootfsçš„è®¾ç½®æ¥çš„, å› æ­¤è™½ç„¶ä¸æ˜¯å¿…é¡»ç»™å‡ºçš„å‚æ•°, ä½†æ˜¯éœ€è¦è‡ªè¡ŒæŸ¥çœ‹æ˜¯å¦éœ€è¦æœ‰æ‰€ä¿®æ”¹ã€‚</p><h1 id="3-é˜¶æ®µäºŒ-é¡¹ç›®å®ç°æ€è·¯åŠé—®é¢˜è§£å†³"><a class="markdownIt-Anchor" href="#3-é˜¶æ®µäºŒ-é¡¹ç›®å®ç°æ€è·¯åŠé—®é¢˜è§£å†³"></a> 3. ğŸ”¥ é˜¶æ®µäºŒï¼š é¡¹ç›®å®ç°æ€è·¯åŠé—®é¢˜è§£å†³</h1><h2 id="31-å‘½ä»¤è¡Œå‚æ•°"><a class="markdownIt-Anchor" href="#31-å‘½ä»¤è¡Œå‚æ•°"></a> 3.1 å‘½ä»¤è¡Œå‚æ•°ï¼š</h2><p>â€‹æ ¹æ®firecrakerå’Œkata-containerç°æœ‰ä»£ç ï¼Œç¡®å®šå¯åŠ¨è™šæ‹Ÿæœºå¿…å¤‡å‚æ•°åï¼Œä¾¿å¯ç›´æ¥ç”¨<code>clap</code>æä¾›çš„ä¸€äº›<code>derive</code>æ¥å®šä¹‰å‘½ä»¤è¡Œå‚æ•°ï¼Œå‚æ•°é¡¹è§ä¸Šè¡¨ï¼Œæš‚æ— é—®é¢˜å‡ºç°ã€‚</p><h2 id="32-è¿›å…¥vmç»ˆç«¯"><a class="markdownIt-Anchor" href="#32-è¿›å…¥vmç»ˆç«¯"></a> 3.2 è¿›å…¥vmç»ˆç«¯ï¼š</h2><p>â€‹åŸºäºç°æœ‰kata-containerçš„ä¸€äº›åˆ›å»ºvmã€å¯åŠ¨vmã€åˆ›å»ºè®¾å¤‡ç­‰APIï¼Œåªéœ€è¿›è¡Œç®€å•çš„ä¿®æ”¹è°ƒç”¨å³å¯å®Œæˆã€‚ä½†æ˜¯æœ€ååœ¨IOä¸Šå‡ºç°é—®é¢˜ï¼Œå…·ä½“å¯ä»¥æè¿°ä¸ºåˆ›å»ºvmçš„æ ‡å‡†è¾“å…¥è¾“å‡ºç»ˆç«¯æ—¶ï¼Œ<code>com1</code>æœªå°†è¾“å‡ºé‡å®šå‘åˆ°stdoutï¼Œå¯¼è‡´æ— æ³•ä¸vmè¿›è¡Œäº¤äº’ã€‚</p><p>â€‹è§£å†³æ–¹æ³•ï¼Œä¸º<code>com1</code>è®¾ç½®è¾“å‡ºæµå¹¶é‡å®šå‘åˆ°<code>stdout</code>ï¼š</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs rust">device.<span class="hljs-title function_ invoke__">lock</span>().<span class="hljs-title function_ invoke__">unwrap</span>().<span class="hljs-title function_ invoke__">set_output_stream</span>(<span class="hljs-title function_ invoke__">Some</span>(<span class="hljs-type">Box</span>::<span class="hljs-title function_ invoke__">new</span>(std::io::<span class="hljs-title function_ invoke__">stdout</span>())));<br></code></pre></td></tr></table></figure><h2 id="33-åŸºæœ¬åŸç†-serial-console"><a class="markdownIt-Anchor" href="#33-åŸºæœ¬åŸç†-serial-console"></a> 3.3 åŸºæœ¬åŸç†ï¼š <code>serial console</code></h2><ul><li><a href="https://www.kernel.org/doc/html/latest/admin-guide/serial-console.html">Linux Serial Console â€” The Linux Kernel documentation</a></li><li><a href="https://tldp.org/HOWTO/Serial-HOWTO-10.html">Serial HOWTO: Serial Port Devices /dev/ttyS2, etc. (tldp.org)</a></li></ul><blockquote><p>ä¸‹å›¾ä¸ºä¸²å£å¯¹åº”ç»ˆç«¯åä»¥åŠIOåœ°å€</p></blockquote><p><img src="https://s1.ax1x.com/2022/08/29/vfSKR1.png" alt="" /></p><p><code>kata-container</code>åœ¨<code>runtime-rs</code>åˆ†æ”¯ä¸‹ï¼Œcom2è¢«ç”¨æ¥è¾“å‡ºæ—¥å¿—ä¿¡æ¯ï¼ˆåŒæ—¶ä¹Ÿå°†dmesgä¹Ÿå†™å…¥loggeräº†ï¼‰ï¼Œå› æ­¤åªèƒ½ä½¿ç”¨è®¾å¤‡com1è¿æ¥åˆ°å¯¹åº”çš„ç»ˆç«¯ã€‚</p><blockquote><p><code>console=device,options</code> ç”¨æ¥æŒ‡å®šç»ˆç«¯çš„è¾“å‡ºï¼Œè¯¥å‚æ•°æ”¾åœ¨kernelçš„å¯åŠ¨å‚æ•°ä¸­ã€‚</p><p><code>device</code>å¯èƒ½çš„å€¼ä¸ºï¼š</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">tty0 <span class="hljs-keyword">for</span> <span class="hljs-keyword">the</span> foreground virtual console<br>                ttyX <span class="hljs-keyword">for</span> <span class="hljs-keyword">any</span> other virtual console<br>                ttySx <span class="hljs-keyword">for</span> <span class="hljs-keyword">a</span> serial port<br>                lp0 <span class="hljs-keyword">for</span> <span class="hljs-keyword">the</span> <span class="hljs-keyword">first</span> parallel port<br>                ttyUSB0 <span class="hljs-keyword">for</span> <span class="hljs-keyword">the</span> <span class="hljs-keyword">first</span> USB serial device<br></code></pre></td></tr></table></figure></blockquote><p>åœ¨<code>kata-container</code>ä»“åº“<code>runtime-rs</code>åˆ†æ”¯çš„ç°æœ‰ä»£ç ä¸‹ï¼Œå·²ç»æœ‰é€šè¿‡socketè¿›å…¥serial consoleçš„ä»£ç ï¼Œä½†æ˜¯ä»å‘½ä»¤è¡Œå°†stdioé‡å®šå‘åˆ°è™šæ‹Ÿæœºserial consoleçš„ä»£ç å´ä¸èƒ½è¾¾åˆ°æ­£å¸¸é¢„æœŸã€‚åœ¨é€šè¿‡åå¤æµè§ˆä»£ç ï¼Œé€šè¿‡<code>3.2</code>ä¸­çš„ä¿®æ”¹ï¼Œè§£å†³äº†æ— æ³•åˆ›å»ºstdio consoleçš„é—®é¢˜ï¼Œå†åŠ ä¸Šæ­¤å‰å®ç°çš„å‘½ä»¤è¡Œå‚æ•°è§£æï¼Œæ•´ä¸ªæµç¨‹å°±å·²ç»å®Œæˆäº†ã€‚</p><h1 id="4-é¡¹ç›®æˆæœå±•ç¤º"><a class="markdownIt-Anchor" href="#4-é¡¹ç›®æˆæœå±•ç¤º"></a> 4. é¡¹ç›®æˆæœå±•ç¤ºï¼š</h1><h2 id="41-æœ¬åœ°å¼€å‘ä»“åº“"><a class="markdownIt-Anchor" href="#41-æœ¬åœ°å¼€å‘ä»“åº“"></a> 4.1 æœ¬åœ°å¼€å‘ä»“åº“ï¼š</h2><p>ä»“åº“åœ°å€ï¼š <a href="https://github.com/QiliangFan/kata-containers">https://github.com/QiliangFan/kata-containers</a></p><p>åˆ†æ”¯ï¼š<code>runtime-rs</code></p><h2 id="42-pull-request"><a class="markdownIt-Anchor" href="#42-pull-request"></a> 4.2  pull request:</h2><ul><li><p><a href="https://github.com/openanolis/dbs-cli/pull/1">Create VM from command line arguments #1</a></p></li><li><p><a href="https://github.com/kata-containers/kata-containers/pull/5082">dragonball: Fix problem that stdio console cannot connect to stdout #5082</a></p></li></ul><h2 id="43-è¿è¡Œç¤ºä¾‹ä¸ç»“æœæˆªå›¾"><a class="markdownIt-Anchor" href="#43-è¿è¡Œç¤ºä¾‹ä¸ç»“æœæˆªå›¾"></a> 4.3 è¿è¡Œç¤ºä¾‹ä¸ç»“æœæˆªå›¾:</h2><blockquote><p>ä¸ºäº†ç»“æœæ˜“äºå¤ç°ï¼Œä½¿ç”¨äº†firecrakeré¡¹ç›®çš„kernelå’Œrootfs(æ–¹ä¾¿ç”¨æˆ·ä¸‹è½½ï¼Œ å½“ç„¶å…¶ä»–æ”¯æŒserial consoleçš„å†…æ ¸å’Œrootfsä¹Ÿå¯ä»¥)ï¼Œå¦‚éœ€è¿è¡Œæ­¤CLIï¼Œå¯å‰å¾€<a href="https://github.com/firecracker-microvm/firecracker/blob/main/docs/getting-started.md">firecracker/getting-started.md at main Â· firecracker-microvm/firecracker (github.com)</a>ä¸‹è½½å¹¶ä½¿ç”¨</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">./dbs-cli --kernel-path ~/data/build/dbs/firecracker/vmlinux.bin --rootfs ~/data/build/dbs/firecracker/bionic.rootfs.ext4 --boot-args <span class="hljs-string">&quot;console=ttyS0 tty0 reboot=k debug panic=1 pci=off root=/dev/vda&quot;</span><br></code></pre></td></tr></table></figure><p><img src="https://s1.ax1x.com/2022/08/27/vRc536.png" alt="è¿›å…¥vm" /></p><p><img src="https://s1.ax1x.com/2022/08/27/vRczgf.png" alt="è¾“å…¥æŒ‡ä»¤" /></p><h2 id="44-å¯é€šè¿‡å‘½ä»¤è¡Œé…ç½®çš„å‚æ•°"><a class="markdownIt-Anchor" href="#44-å¯é€šè¿‡å‘½ä»¤è¡Œé…ç½®çš„å‚æ•°"></a> 4.4 å¯é€šè¿‡å‘½ä»¤è¡Œé…ç½®çš„å‚æ•°ï¼š</h2><table><thead><tr><th style="text-align:center">arguments</th><th style="text-align:center">required</th><th style="text-align:center">default value</th><th style="text-align:center">description</th></tr></thead><tbody><tr><td style="text-align:center"><code>rootfs</code></td><td style="text-align:center">true</td><td style="text-align:center">-</td><td style="text-align:center">The path to rootfs image.</td></tr><tr><td style="text-align:center"><code>kernel-path</code></td><td style="text-align:center">true</td><td style="text-align:center">-</td><td style="text-align:center">The path of kernel image (Only uncompressed kernel is supported for Dragonball).</td></tr><tr><td style="text-align:center"><code>log-file</code></td><td style="text-align:center">false</td><td style="text-align:center"><code>&quot;dbs-cli.log&quot;</code></td><td style="text-align:center">The path to log file</td></tr><tr><td style="text-align:center"><code>log-level</code></td><td style="text-align:center">false</td><td style="text-align:center"><code>&quot;Info&quot;</code></td><td style="text-align:center">The logging level.</td></tr><tr><td style="text-align:center"><code>boot-args</code></td><td style="text-align:center">false</td><td style="text-align:center"><code>console=ttyS0 tty0 reboot=k debug panic=1 pci=off root=/dev/vda1</code></td><td style="text-align:center">The boot arguments passed to the kernel.</td></tr><tr><td style="text-align:center"><code>is-root</code></td><td style="text-align:center">false</td><td style="text-align:center"><code>true</code></td><td style="text-align:center">Decide the device to be the root boot device or not.</td></tr><tr><td style="text-align:center"><code>is-read-only</code></td><td style="text-align:center">false</td><td style="text-align:center"><code>false</code></td><td style="text-align:center">The driver opened in read-only or not.</td></tr><tr><td style="text-align:center"><code>vcpu</code></td><td style="text-align:center">false</td><td style="text-align:center"><code>1</code></td><td style="text-align:center">The number of vcpu to start.</td></tr><tr><td style="text-align:center"><code>max-vcpu</code></td><td style="text-align:center">false</td><td style="text-align:center"><code>1</code></td><td style="text-align:center">The max number of vpu can be added.</td></tr><tr><td style="text-align:center"><code>cpu-pm</code></td><td style="text-align:center">false</td><td style="text-align:center"><code>0</code></td><td style="text-align:center">vpmu support level.</td></tr><tr><td style="text-align:center"><code>threads-per-core</code></td><td style="text-align:center">false</td><td style="text-align:center"><code>1</code></td><td style="text-align:center">Threads per core to indicate hyper-threading is enabled or not.</td></tr><tr><td style="text-align:center"><code>cores-per-die</code></td><td style="text-align:center">false</td><td style="text-align:center"><code>1</code></td><td style="text-align:center">Cores per die to guide guest cpu topology init.</td></tr><tr><td style="text-align:center"><code>dies-per-socket</code></td><td style="text-align:center">false</td><td style="text-align:center"><code>1</code></td><td style="text-align:center">Dies per socket to guide guest cpu topology.</td></tr><tr><td style="text-align:center"><code>sockets</code></td><td style="text-align:center">false</td><td style="text-align:center"><code>1</code></td><td style="text-align:center">The number of sockets.</td></tr><tr><td style="text-align:center"><code>mem-type</code></td><td style="text-align:center">false</td><td style="text-align:center"><code>shmem</code></td><td style="text-align:center">Memory type that can be either hugetlbfs or shmem.</td></tr><tr><td style="text-align:center"><code>mem-file</code></td><td style="text-align:center">false</td><td style="text-align:center">``</td><td style="text-align:center">Memory file path.</td></tr><tr><td style="text-align:center"><code>initrd-path</code></td><td style="text-align:center">false</td><td style="text-align:center"><code>None</code></td><td style="text-align:center">The path of initrd.</td></tr></tbody></table><h2 id="45-ä½¿ç”¨ç¤ºä¾‹"><a class="markdownIt-Anchor" href="#45-ä½¿ç”¨ç¤ºä¾‹"></a> 4.5 ä½¿ç”¨ç¤ºä¾‹:</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">./dbs-cli \<br>  --kernel-path ~/data/build/dbs/vmlinux.bin \<br>  --rootfs ~/data/build/dbs/rootfs.dmg \<br>  --boot-args <span class="hljs-string">&quot;console=ttyS0 tty0 reboot=k debug panic=1 pci=off root=/dev/vda1&quot;</span> ;<br></code></pre></td></tr></table></figure><p>For the rootfs from firecracker:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">./dbs-cli \<br>  --kernel-path ~/data/build/dbs/vmlinux.bin \<br>  --rootfs ~/data/build/dbs/bionic.rootfs.ext4 \<br>  --boot-args <span class="hljs-string">&quot;console=ttyS0 tty0 reboot=k debug panic=1 pci=off root=/dev/vda&quot;</span> ;<br></code></pre></td></tr></table></figure><p>For the rootfs build from kata:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">./dbs-cli \<br>  --kernel-path ~/data/build/dbs/vmlinux.bin \<br>  --rootfs ~/data/build/dbs/kata-containers.img \<br>  --boot-args <span class="hljs-string">&quot;console=ttyS0 tty0 reboot=k debug panic=1 pci=off root=/dev/vda1&quot;</span> ;<br></code></pre></td></tr></table></figure><p>Set the log level and log file:</p><blockquote><p>The log-level argument is case-insensitive: ErrOR and InFO are valid.</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">./dbs-cli \<br>  --log-file dbs-cli.log --log-level ERROR \<br>  --kernel-path ~/data/build/dbs/vmlinux.bin \<br>  --rootfs ~/data/build/dbs/kata-containers.img \<br>  --boot-args <span class="hljs-string">&quot;console=ttyS0 tty0 reboot=k debug panic=1 pci=off root=/dev/vda1&quot;</span> ;<br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;center&gt;
    &lt;font size=&quot;10&quot;&gt;&lt;bold&gt;ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°å¯åŠ¨å¾®å‹è™šæ‹Ÿæœº&lt;/bold&gt;&lt;/font&gt;
    &lt;br/&gt;&lt;br/&gt;
&lt;/center&gt;
&lt;h1 id=&quot;1-é¡¹ç›®å®ç°æ–¹æ¡ˆç ”ç©¶&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; hr</summary>
      
    
    
    
    
    <category term="æŠ¥å‘Š" scheme="https://www.torch-fan.site/tags/%E6%8A%A5%E5%91%8A/"/>
    
  </entry>
  
  <entry>
    <title>Linuxä¸ªäººä½¿ç”¨æŒ‡ä»¤æ”¶é›†</title>
    <link href="https://www.torch-fan.site/2022/08/24/Linux%E4%B8%AA%E4%BA%BA%E4%BD%BF%E7%94%A8%E6%8C%87%E4%BB%A4%E6%94%B6%E9%9B%86/"/>
    <id>https://www.torch-fan.site/2022/08/24/Linux%E4%B8%AA%E4%BA%BA%E4%BD%BF%E7%94%A8%E6%8C%87%E4%BB%A4%E6%94%B6%E9%9B%86/</id>
    <published>2022-08-24T12:02:52.000Z</published>
    <updated>2022-11-15T02:27:36.103Z</updated>
    
    <content type="html"><![CDATA[<h1 id="1-socketserial"><a class="markdownIt-Anchor" href="#1-socketserial"></a> 1. Socket/Serial</h1><blockquote><p>ç™»é™†ç»‘å®šåœ¨socketä¸Šçš„console</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># console.sock æ”¹ä¸ºå¯¹åº”çš„socketåœ°å€</span><br>socat <span class="hljs-string">&quot;stdin,raw,echo=0,escape=0x11&quot;</span> <span class="hljs-string">&quot;unix-connect:[console.sock]&quot;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;1-socketserial&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#1-socketserial&quot;&gt;&lt;/a&gt; 1. Socket/Serial&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;ç™»é™†ç»‘å®šåœ¨socketä¸Šçš„console&lt;</summary>
      
    
    
    
    <category term="è®¡ç®—æœºåŸºç¡€" scheme="https://www.torch-fan.site/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/"/>
    
    <category term="æ“ä½œç³»ç»Ÿ" scheme="https://www.torch-fan.site/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"/>
    
    <category term="Linux" scheme="https://www.torch-fan.site/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/Linux/"/>
    
    
  </entry>
  
  <entry>
    <title>matplotlibçš„å¸¸ç”¨è®¾ç½®</title>
    <link href="https://www.torch-fan.site/2022/08/23/matplotlib%E7%9A%84%E5%B8%B8%E7%94%A8%E8%AE%BE%E7%BD%AE/"/>
    <id>https://www.torch-fan.site/2022/08/23/matplotlib%E7%9A%84%E5%B8%B8%E7%94%A8%E8%AE%BE%E7%BD%AE/</id>
    <published>2022-08-23T01:22:52.000Z</published>
    <updated>2022-11-15T02:27:36.103Z</updated>
    
    <content type="html"><![CDATA[<h1 id="1-backend"><a class="markdownIt-Anchor" href="#1-backend"></a> 1. backend</h1><blockquote><p>æœ‰æ—¶ä¿å­˜çš„å›¾ç‰‡ä¸åªæ˜¯png, å¯èƒ½è¿˜éœ€è¦pdf, å› æ­¤è®¾ç½®å¯ä»¥è®¾ç½®å¥½backedn</p><p>å‚è€ƒèµ„æ–™: <a href="https://matplotlib.org/stable/api/matplotlib_configuration_api.html?highlight=backend">https://matplotlib.org/stable/api/matplotlib_configuration_api.html</a></p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python3">matplotlib.use(&quot;pdf&quot;);<br></code></pre></td></tr></table></figure><ul><li>interactive backends: GTK3Agg, GTK3Cairo, GTK4Agg, GTK4Cairo, MacOSX, nbAgg, QtAgg, QtCairo, TkAgg, TkCairo, WebAgg, WX, WXAgg, WXCairo, Qt5Agg, Qt5Cairo</li><li>non-interactive backends: agg, cairo, pdf, pgf, ps, svg, template</li></ul><h1 id="2-rcparams"><a class="markdownIt-Anchor" href="#2-rcparams"></a> 2. rcParams</h1><blockquote><p>å¯è®¾ç½®çš„å±æ€§åˆ—è¡¨: <a href="https://matplotlib.org/stable/api/matplotlib_configuration_api.html?highlight=rcparams#matplotlib.rcParams">https://matplotlib.org/stable/api/matplotlib_configuration_api.html?highlight=rcparams#matplotlib.rcParams</a></p></blockquote><h2 id="21-dpi-æ¶‰åŠæ¸…æ™°åº¦"><a class="markdownIt-Anchor" href="#21-dpi-æ¶‰åŠæ¸…æ™°åº¦"></a> 2.1 DPI (æ¶‰åŠæ¸…æ™°åº¦)</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">plt.rcParams[<span class="hljs-string">&#x27;figure.dpi&#x27;</span>] = <span class="hljs-number">200</span><br></code></pre></td></tr></table></figure><h2 id="22-å­—ä½“"><a class="markdownIt-Anchor" href="#22-å­—ä½“"></a> 2.2 å­—ä½“</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">plt.rcParams.update(&#123;<br>    <span class="hljs-string">&quot;font.size&quot;</span>:<span class="hljs-number">20</span>,<br>    <span class="hljs-string">&#x27;font.sans-serif&#x27;</span>: <span class="hljs-string">&quot;simsun&quot;</span>  <span class="hljs-comment"># SimHei</span><br>    &#125;)<br></code></pre></td></tr></table></figure><h3 id="221-ubuntuæ”¯æŒä¸­æ–‡"><a class="markdownIt-Anchor" href="#221-ubuntuæ”¯æŒä¸­æ–‡"></a> 2.2.1 ubuntuæ”¯æŒä¸­æ–‡</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># æŸ¥çœ‹matplotlibé…ç½®æ–‡ä»¶ä½ç½®</span><br><span class="hljs-keyword">import</span> matplotlib<br><span class="hljs-built_in">print</span>(matplotlib.matplotlib_fname())<br><span class="hljs-comment"># å¦‚: /APP/anaconda/anaconda3/lib/python3.6/site-packages/matplotlib/mpl-data/matplotlibrc</span><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># è¿›å…¥å­—ä½“åº“</span><br><span class="hljs-built_in">cd</span> ~/APP/anaconda/anaconda3/lib/python3.6/site-packages/matplotlib/mpl-data/fonts/ttf<br><br><span class="hljs-comment"># æ¸…é™¤ç¼“å­˜</span><br><span class="hljs-built_in">rm</span> ~/.cache/matplotlib<br><br><span class="hljs-comment"># å°†simsun.ttfå¤åˆ¶åˆ°è¯¥ç›®å½•ä¸‹å³å¯</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;1-backend&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#1-backend&quot;&gt;&lt;/a&gt; 1. backend&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;æœ‰æ—¶ä¿å­˜çš„å›¾ç‰‡ä¸åªæ˜¯png, å¯èƒ½è¿˜éœ€è¦pdf, å› æ­¤è®¾ç½®å¯ä»¥è®¾ç½®å¥½bac</summary>
      
    
    
    
    <category term="ç¼–ç¨‹è¯­è¨€" scheme="https://www.torch-fan.site/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/"/>
    
    <category term="Python" scheme="https://www.torch-fan.site/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/"/>
    
    <category term="Matplotlib" scheme="https://www.torch-fan.site/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/Matplotlib/"/>
    
    
  </entry>
  
  <entry>
    <title>kernelå’Œrootfsé•œåƒæ„å»º</title>
    <link href="https://www.torch-fan.site/2022/08/15/kernel%E5%92%8Crootfs%E9%95%9C%E5%83%8F%E6%9E%84%E5%BB%BA/"/>
    <id>https://www.torch-fan.site/2022/08/15/kernel%E5%92%8Crootfs%E9%95%9C%E5%83%8F%E6%9E%84%E5%BB%BA/</id>
    <published>2022-08-15T10:58:57.000Z</published>
    <updated>2022-11-15T02:27:36.103Z</updated>
    
    <content type="html"><![CDATA[<h1 id="1-åˆ›å»ºrootfs"><a class="markdownIt-Anchor" href="#1-åˆ›å»ºrootfs"></a> 1. åˆ›å»ºrootfs:</h1><p>åœ¨Linuxä¸Šè‡ªå¸¦<code>mkfs</code>æŒ‡ä»¤, ç”¨äºåˆ›å»ºæ–‡ä»¶ç³»ç»Ÿ.</p><p><img src="https://s1.ax1x.com/2022/08/15/vdcuFA.png" alt="mkfs" /></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># åˆ›å»ºä¸€ä¸ªå®¹é‡ä¸º512MBçš„æ ¹æ–‡ä»¶ç³»ç»Ÿ</span><br>mkfs -t ext4 rootfs.ext4 512M<br></code></pre></td></tr></table></figure><h1 id="2-æ„å»ºvmlinux-elfæ–‡ä»¶-å†…æ ¸ç¼–è¯‘æœ€åŸå§‹çš„æ–‡ä»¶-å¯è¢«rustçš„linux-loaderåŠ è½½"><a class="markdownIt-Anchor" href="#2-æ„å»ºvmlinux-elfæ–‡ä»¶-å†…æ ¸ç¼–è¯‘æœ€åŸå§‹çš„æ–‡ä»¶-å¯è¢«rustçš„linux-loaderåŠ è½½"></a> 2. æ„å»ºvmlinux (ELFæ–‡ä»¶, å†…æ ¸ç¼–è¯‘æœ€åŸå§‹çš„æ–‡ä»¶, å¯è¢«rustçš„<code>linux-loader</code>åŠ è½½)</h1><blockquote><p>å‚è€ƒæ–‡æ¡£: <a href="https://wiki.ubuntu.com/Kernel/BuildYourOwnKernel">https://wiki.ubuntu.com/Kernel/BuildYourOwnKernel</a></p></blockquote><h2 id="21-ä¸‹è½½å†…æ ¸æºç "><a class="markdownIt-Anchor" href="#21-ä¸‹è½½å†…æ ¸æºç "></a> 2.1 ä¸‹è½½å†…æ ¸æºç :</h2><p>æºç ä»“åº“: <a href="https://www.kernel.org/">https://www.kernel.org/</a></p><h2 id="22-å®‰è£…ä¾èµ–"><a class="markdownIt-Anchor" href="#22-å®‰è£…ä¾èµ–"></a> 2.2 å®‰è£…ä¾èµ–:</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo apt-get install libncurses-dev gawk flex bison openssl libssl-dev dkms libelf-dev libudev-dev libpci-dev libiberty-dev autoconf git<br></code></pre></td></tr></table></figure><h2 id="23-é…ç½®å†…æ ¸"><a class="markdownIt-Anchor" href="#23-é…ç½®å†…æ ¸"></a> 2.3 é…ç½®å†…æ ¸</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># optional: å¤åˆ¶æœ¬æœºçš„é…ç½®</span><br><span class="hljs-built_in">cp</span> -v /boot/config-$(<span class="hljs-built_in">uname</span> -r) .config<br><br><span class="hljs-built_in">chmod</span> +x ./scripts/*<br>make menuconfig<br></code></pre></td></tr></table></figure><p>ä»å†…æ ¸æºç æ ¹ç›®å½•çš„makefileä¸­, å¯ä»¥çœ‹åˆ°é»˜è®¤å°±æ˜¯vmlinux, æš‚æ—¶ä¹Ÿä¸éœ€è¦å»è€ƒè™‘vmlinuzçš„å‹ç¼©é—®é¢˜.</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-comment"># The all: target is the default when no target is given on the</span><br><span class="hljs-comment"># command line.</span><br><span class="hljs-comment"># This allow a user to issue only &#x27;make&#x27; to build a kernel including modules</span><br><span class="hljs-comment"># Defaults to vmlinux, but the arch makefile usually adds further targets</span><br><span class="hljs-section">all: vmlinux</span><br></code></pre></td></tr></table></figure><p>æ„å»ºå†…æ ¸</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">make</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;1-åˆ›å»ºrootfs&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#1-åˆ›å»ºrootfs&quot;&gt;&lt;/a&gt; 1. åˆ›å»ºrootfs:&lt;/h1&gt;
&lt;p&gt;åœ¨Linuxä¸Šè‡ªå¸¦&lt;code&gt;mkfs&lt;/code&gt;æŒ‡ä»¤, ç”¨äºåˆ›å»ºæ–‡ä»¶ç³»ç»Ÿ.&lt;/p&gt;
&lt;p</summary>
      
    
    
    
    <category term="è®¡ç®—æœºåŸºç¡€" scheme="https://www.torch-fan.site/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/"/>
    
    <category term="æ“ä½œç³»ç»Ÿ" scheme="https://www.torch-fan.site/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"/>
    
    <category term="Linux" scheme="https://www.torch-fan.site/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/Linux/"/>
    
    
  </entry>
  
  <entry>
    <title>Rusté”™è¯¯å¤„ç†</title>
    <link href="https://www.torch-fan.site/2022/08/02/Rust%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/"/>
    <id>https://www.torch-fan.site/2022/08/02/Rust%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/</id>
    <published>2022-08-02T12:49:12.000Z</published>
    <updated>2022-11-15T02:27:36.103Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>è¿™é‡Œä¸å¤è¿°æ–‡æ¡£å’Œæ•™ç¨‹ä¸­æœ‰çš„å†…å®¹, æ¯”å¦‚<code>Result</code>ä¹‹ç±»çš„ç»†èŠ‚, å¯ä»¥è‡ªè¡Œçœ‹æ–‡æ¡£å†…å®¹:</p><ul><li><p><a href="https://learning-rust.github.io/docs/e7.custom_error_types.html">https://learning-rust.github.io/docs/e7.custom_error_types.html</a></p></li><li><p><a href="https://doc.rust-lang.org/book/ch09-00-error-handling.html">https://doc.rust-lang.org/book/ch09-00-error-handling.html</a></p></li></ul><p>å‚è€ƒèµ„æ–™: <a href="https://www.philipdaniels.com/blog/2019/defining-rust-error-types/">https://www.philipdaniels.com/blog/2019/defining-rust-error-types/</a></p></blockquote><h1 id="1-rustä¸­è‡ªå®šä¹‰errorçš„æ–¹å¼"><a class="markdownIt-Anchor" href="#1-rustä¸­è‡ªå®šä¹‰errorçš„æ–¹å¼"></a> 1. Rustä¸­è‡ªå®šä¹‰Errorçš„æ–¹å¼</h1><h2 id="11-å®šä¹‰ä¸€ä¸ªé”™è¯¯ç±»å‹"><a class="markdownIt-Anchor" href="#11-å®šä¹‰ä¸€ä¸ªé”™è¯¯ç±»å‹"></a> 1.1 å®šä¹‰ä¸€ä¸ªé”™è¯¯ç±»å‹:</h2><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-meta">#[derive(Debug)]</span><br><span class="hljs-keyword">pub</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">MyErorType</span> &#123;<br>    <span class="hljs-comment">// Errors from external libraries..</span><br>    <span class="hljs-title function_ invoke__">Io</span>(io::Error),<br>    <span class="hljs-title function_ invoke__">Git</span>(git2::Error),<br>    <span class="hljs-comment">// Errors raised by us...</span><br>    <span class="hljs-title function_ invoke__">Regular</span>(ErrorKind),<br>    <span class="hljs-title function_ invoke__">Custom</span>(<span class="hljs-type">String</span>)<br>&#125;<br><br><span class="hljs-meta">#[derive(Clone, Copy, Debug, Eq, Hash, Ord, PartialEq, PartialOrd)]</span><br><span class="hljs-keyword">pub</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">ErrorKind</span> &#123;<br>    NotFound,<br>    NotAuthorized,<br>    <span class="hljs-comment">// ...</span><br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">ErrorKind</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">as_str</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-type">str</span> &#123;<br>        <span class="hljs-keyword">match</span> *<span class="hljs-keyword">self</span> &#123;<br>            ErrorKind::NotFound =&gt; <span class="hljs-string">&quot;not found&quot;</span>,<br>            ErrorKind::NotAuthorized =&gt; <span class="hljs-string">&quot;not authorized&quot;</span><br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="12-å®ç°errorå’Œdisplayè¿™ä¸¤ä¸ªtrait"><a class="markdownIt-Anchor" href="#12-å®ç°errorå’Œdisplayè¿™ä¸¤ä¸ªtrait"></a> 1.2 å®ç°<code>Error</code>å’Œ<code>Display</code>è¿™ä¸¤ä¸ªtrait</h2><blockquote><p><code>Error</code>åªå…è®¸è¿”å›é™æ€å­—ç¬¦ä¸²å¸¸é‡</p></blockquote><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Error</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">MyErrorType</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">description</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-type">str</span> &#123;<br>        <span class="hljs-keyword">match</span> *<span class="hljs-keyword">self</span> &#123;<br>            MyErrorType::<span class="hljs-title function_ invoke__">Io</span>(<span class="hljs-keyword">ref</span> err) =&gt; err.<span class="hljs-title function_ invoke__">description</span>(),<br>            MyErrorType::<span class="hljs-title function_ invoke__">Git</span>(<span class="hljs-keyword">ref</span> err) =&gt; err.<span class="hljs-title function_ invoke__">description</span>(),<br>            MyErrorType::<span class="hljs-title function_ invoke__">Regular</span>(<span class="hljs-keyword">ref</span> err) =&gt; err.<span class="hljs-title function_ invoke__">as_str</span>(),<br>            MyErrorType::<span class="hljs-title function_ invoke__">Custom</span>(<span class="hljs-keyword">ref</span> err) =&gt; err,<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p><code>fmt::Display</code>æ›´ä¸ºçµæ´»ä¸€ç‚¹</p></blockquote><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">impl</span> <span class="hljs-title class_">fmt</span>::Display <span class="hljs-keyword">for</span> <span class="hljs-title class_">MyErrorType</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">fmt</span>(&amp;<span class="hljs-keyword">self</span>, f: &amp;<span class="hljs-keyword">mut</span> fmt::Formatter) <span class="hljs-punctuation">-&gt;</span> fmt::<span class="hljs-type">Result</span> &#123;<br>        <span class="hljs-keyword">match</span> *<span class="hljs-keyword">self</span> &#123;<br>            MyErrorType::<span class="hljs-title function_ invoke__">Io</span>(<span class="hljs-keyword">ref</span> err) =&gt; err.<span class="hljs-title function_ invoke__">fmt</span>(f),<br>            MyErrorType::<span class="hljs-title function_ invoke__">Git</span>(<span class="hljs-keyword">ref</span> err) =&gt; err.<span class="hljs-title function_ invoke__">fmt</span>(f),<br>            MyErrorType::<span class="hljs-title function_ invoke__">Regular</span>(<span class="hljs-keyword">ref</span> err) =&gt; <span class="hljs-built_in">write!</span>(f, <span class="hljs-string">&quot;A regular error occurred &#123;:?&#125;&quot;</span>, err),<br>            MyErrorType::<span class="hljs-title function_ invoke__">Custom</span>(<span class="hljs-keyword">ref</span> err) =&gt; <span class="hljs-built_in">write!</span>(f, <span class="hljs-string">&quot;A custom error occurred &#123;:?&#125;&quot;</span>, err),<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="13-ä¸ºexternal-error-typeå®ç°from"><a class="markdownIt-Anchor" href="#13-ä¸ºexternal-error-typeå®ç°from"></a> 1.3 ä¸ºexternal error typeå®ç°<code>From</code></h2><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">impl</span> <span class="hljs-title class_">From</span>&lt;io::Error&gt; <span class="hljs-keyword">for</span> <span class="hljs-title class_">MyErrorType</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">from</span>(err: io::Error) <span class="hljs-punctuation">-&gt;</span> MyErrorType &#123;<br>        MyErrorType::<span class="hljs-title function_ invoke__">Io</span>(err)<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">From</span>&lt;io::Error&gt; <span class="hljs-keyword">for</span> <span class="hljs-title class_">MyErrorType</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">from</span>(err: git2::Error) <span class="hljs-punctuation">-&gt;</span> MyErrorType &#123;<br>        MyErrorType::<span class="hljs-title function_ invoke__">Git</span>(err)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>ä½¿ç”¨èµ·æ¥å°±å¯ä»¥è¿™æ ·, åœ¨æ•è·å¼‚å¸¸çš„ä»£ç ç‰‡æ®µä¸­:</p></blockquote><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs rust">MyErrorType::<span class="hljs-title function_ invoke__">From</span>(err)<br></code></pre></td></tr></table></figure><h2 id="14-å¯é€‰-åˆ›å»ºä¸€ä¸ªresultåˆ«å"><a class="markdownIt-Anchor" href="#14-å¯é€‰-åˆ›å»ºä¸€ä¸ªresultåˆ«å"></a> 1.4 å¯é€‰: åˆ›å»ºä¸€ä¸ªResultåˆ«å</h2><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">pub</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">Result</span>&lt;T&gt; = std::result::<span class="hljs-type">Result</span>&lt;T, MyErrorType&gt;;<br></code></pre></td></tr></table></figure><h2 id="15-ä½¿ç”¨è‡ªå®šä¹‰çš„ç±»å‹"><a class="markdownIt-Anchor" href="#15-ä½¿ç”¨è‡ªå®šä¹‰çš„ç±»å‹"></a> 1.5 ä½¿ç”¨è‡ªå®šä¹‰çš„ç±»å‹:</h2><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">some_func</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-type">usize</span>&gt; &#123;<br>    <span class="hljs-comment">// possible: std::io::Error</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">_f</span> = std::fs::File::<span class="hljs-title function_ invoke__">create</span>(<span class="hljs-string">&quot;aa&quot;</span>)?;<br>    <span class="hljs-comment">// possible: git2::Error</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">_g</span> = Respository::<span class="hljs-title function_ invoke__">init</span>(<span class="hljs-string">&quot;/path/to/repo&quot;</span>)?;<br><br>    <span class="hljs-comment">// return a error</span><br>    <span class="hljs-title function_ invoke__">Err</span>(MyErrorType::<span class="hljs-title function_ invoke__">Regular</span>(ErrorKind::NotAuthorized));<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="2-rust-ä¸­ä½¿ç”¨-thiserror-å’Œ-anyhow-ç®€æ´-å¥½ç”¨"><a class="markdownIt-Anchor" href="#2-rust-ä¸­ä½¿ç”¨-thiserror-å’Œ-anyhow-ç®€æ´-å¥½ç”¨"></a> 2. Rust ä¸­ä½¿ç”¨ <code>thiserror</code> å’Œ <code>anyhow</code> (ç®€æ´, å¥½ç”¨)</h1><blockquote><p><code>thiserror</code>æ–‡æ¡£: <a href="https://docs.rs/thiserror/latest/thiserror/">https://docs.rs/thiserror/latest/thiserror/</a></p><p><code>anyhow</code>æ–‡æ¡£: <a href="https://github.com/dtolnay/anyhow">https://github.com/dtolnay/anyhow</a></p><p>è¿™ä¸¤ä¸ªåº“ä¸»è¦è¿˜æ˜¯ä¸ºäº†æŸäº›åº“é‡Œå¤„ç†æ•°é‡ä¼—å¤šçš„å¼‚å¸¸ç±»å‹, å¯ä»¥è§£å†³å…¼å®¹, ä½†è¿˜éœ€è¦é¢å¤–å¤„ç†</p></blockquote><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> anyhow::<span class="hljs-type">Result</span><br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">get</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;()&gt; &#123;  <span class="hljs-comment">// ~~æ¥æ”¶ä»»æ„ç±»å‹å¼‚å¸¸~~</span><br><br>&#125;<br><br></code></pre></td></tr></table></figure><h1 id="3-é”™è¯¯ç±»å‹æ˜ å°„"><a class="markdownIt-Anchor" href="#3-é”™è¯¯ç±»å‹æ˜ å°„"></a> 3. é”™è¯¯ç±»å‹æ˜ å°„</h1><blockquote><p>å‰é¢æ‰€ä½œçš„åŠªåŠ›åªæ˜¯ä¸ºäº†å…¼å®¹, ä½†æ˜¯rustå¹¶ä¸ä¼šä¸»åŠ¨å»åš, è½¬æ¢å·¥ä½œè¿˜æ˜¯å¾—è‡ªå·±æ¥</p></blockquote><h2 id="31-map_err"><a class="markdownIt-Anchor" href="#31-map_err"></a> 3.1 <code>map_err</code></h2><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::env;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">double_arg</span>(<span class="hljs-keyword">mut</span> argv: env::Args) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-type">i32</span>, <span class="hljs-type">String</span>&gt; &#123;<br>    argv.<span class="hljs-title function_ invoke__">nth</span>(<span class="hljs-number">1</span>)<br>        .<span class="hljs-title function_ invoke__">ok_or</span>(<span class="hljs-string">&quot;Please give at least one argument&quot;</span>.<span class="hljs-title function_ invoke__">to_owned</span>())<br>        .<span class="hljs-title function_ invoke__">and_then</span>(|arg| arg.parse::&lt;<span class="hljs-type">i32</span>&gt;().<span class="hljs-title function_ invoke__">map_err</span>(|err| err.<span class="hljs-title function_ invoke__">to_string</span>()))<br>        .<span class="hljs-title function_ invoke__">map</span>(|n| <span class="hljs-number">2</span> * n)<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">match</span> <span class="hljs-title function_ invoke__">double_arg</span>(env::<span class="hljs-title function_ invoke__">args</span>()) &#123;<br>        <span class="hljs-title function_ invoke__">Ok</span>(n) =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, n),<br>        <span class="hljs-title function_ invoke__">Err</span>(err) =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Error: &#123;&#125;&quot;</span>, err),<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// è¿™é‡Œæ˜¯ç”¨æ„é€ å‡½æ•°åšlambdaå‡½æ•°äº†</span><br>cmdline.<span class="hljs-title function_ invoke__">insert_str</span>(boot_args)<br>    .<span class="hljs-title function_ invoke__">map_err</span>(BootSourceConfigError::InvalidKernelCommandLine)<br>    .<span class="hljs-title function_ invoke__">map_err</span>(VmmActionError::BootSource)<br>    .<span class="hljs-title function_ invoke__">map_err</span>(CLIError::BootSource)?;<br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;è¿™é‡Œä¸å¤è¿°æ–‡æ¡£å’Œæ•™ç¨‹ä¸­æœ‰çš„å†…å®¹, æ¯”å¦‚&lt;code&gt;Result&lt;/code&gt;ä¹‹ç±»çš„ç»†èŠ‚, å¯ä»¥è‡ªè¡Œçœ‹æ–‡æ¡£å†…å®¹:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https://learning-rust.github.io/docs/e7.cu</summary>
      
    
    
    
    <category term="ç¼–ç¨‹è¯­è¨€" scheme="https://www.torch-fan.site/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/"/>
    
    <category term="Rust" scheme="https://www.torch-fan.site/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Rust/"/>
    
    <category term="åŸºç¡€" scheme="https://www.torch-fan.site/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Rust/%E5%9F%BA%E7%A1%80/"/>
    
    
  </entry>
  
  <entry>
    <title>LaTexåŸºç¡€-Table</title>
    <link href="https://www.torch-fan.site/2022/08/02/LaTex%E5%9F%BA%E7%A1%80-Table/"/>
    <id>https://www.torch-fan.site/2022/08/02/LaTex%E5%9F%BA%E7%A1%80-Table/</id>
    <published>2022-08-02T08:09:42.000Z</published>
    <updated>2022-11-15T02:27:36.102Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\begin</span>&#123;tabular&#125;[pos]&#123;cols&#125;<br><br>  table content<br><br><span class="hljs-keyword">\end</span>&#123;tabular&#125;<br></code></pre></td></tr></table></figure><p>where options can be:</p><ul><li><code>pos</code>Â : Vertical position. It can assume the following values:</li></ul><table><thead><tr><th><code>t</code></th><th>the line at the top is aligned with the text baseline (å¯ä»¥ç†è§£ä¸ºä¸€æ¨ªæ–‡å­—çš„åº•éƒ¨åŸºçº¿, æ‰€æœ‰æ–‡å­—åœ¨è¿™ä¸ªåŸºçº¿ä¸Šæ’å¸ƒ)</th></tr></thead><tbody><tr><td><code>b</code></td><td>the line at the bottom is aligned with the text baseline</td></tr><tr><td><code>c</code> or none</td><td>the table is centred to the text baseline</td></tr></tbody></table><ul><li><code>cols</code>Â : Defines the alignment and the borders of each column. It can have the following values:</li></ul><table><thead><tr><th><code>l</code></th><th>left-justified column</th></tr></thead><tbody><tr><td><code>c</code></td><td>centred column</td></tr><tr><td><code>r</code></td><td>right-justified column</td></tr><tr><td><code>p&#123;'width'&#125;</code></td><td>paragraph column with text vertically aligned at the top</td></tr><tr><td><code>m&#123;'width'&#125;</code></td><td>paragraph column with text vertically aligned in the middle (requires <code>array</code><br /> package)</td></tr><tr><td><code>b&#123;'width'&#125;</code></td><td>paragraph column with text vertically aligned at the bottom (requires <code>array</code><br /> package)</td></tr><tr><td><code>&amp;#124;</code></td><td>vertical line</td></tr><tr><td><code>&amp;#124;&amp;#124;</code></td><td>double vertical line</td></tr><tr><td><code>*&#123;num&#125;&#123;form&#125;</code></td><td>the format form is repeated <em>num</em> times; for example <code>*&#123;3&#125;&#123;&amp;#124;l&#125;&amp;#124;</code><br /> is equal to <code>&amp;#124;l&amp;#124;l&amp;#124;l&amp;#124;</code></td></tr></tbody></table><p>To separate between cells and introducing new lines use the following commands:</p><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td><code>&amp;</code></td><td>column separator</td></tr><tr><td><code>\\\\</code></td><td>start new row (additional space may be specified after <code>\\</code><br /> using square brackets, such as <code>\\[6pt]</code><br />)</td></tr><tr><td><code>\\hline</code></td><td>horizontal line between rows</td></tr><tr><td><code>\\newline</code></td><td>start a new line within a cell (in a paragraph column)</td></tr><tr><td><code>\\cline&#123;i-j&#125;</code></td><td>partial horizontal line beginning in column <em>i</em> and ending in column <em>j</em></td></tr></tbody></table><h1 id="1-ç”¨tableåˆ¶ä½œå°é¢"><a class="markdownIt-Anchor" href="#1-ç”¨tableåˆ¶ä½œå°é¢"></a> 1. ç”¨tableåˆ¶ä½œå°é¢:</h1><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-comment">% ç”¨äºåˆ¶ä½œæ›´å¤æ‚çš„å°é¢</span><br><span class="hljs-keyword">\title</span>&#123;<span class="hljs-keyword">\makebox</span>&#123;<br>    <span class="hljs-keyword">\begin</span>&#123;tabular&#125;&#123;c&#125;<br>        <span class="hljs-keyword">\includegraphics</span>[width=<span class="hljs-keyword">\textwidth</span>]&#123;img/nankai.jpg&#125; <span class="hljs-keyword">\\</span><br>         <span class="hljs-keyword">\textbf</span>&#123;è¯¾ç¨‹æŠ¥å‘Š&#125; <span class="hljs-keyword">\\</span><br>         xxxxxx<br>    <span class="hljs-keyword">\end</span>&#123;tabular&#125;<br>    &#125;<br>&#125;<br><span class="hljs-keyword">\author</span>&#123;<span class="hljs-keyword">\makebox</span>&#123;<br>    <span class="hljs-keyword">\begin</span>&#123;tabular&#125;&#123;cc&#125;<br>        å§“åï¼š <span class="hljs-built_in">&amp;</span> xxxx  <span class="hljs-keyword">\\</span><br>        å­¦å·ï¼š <span class="hljs-built_in">&amp;</span> xxxx<br>    <span class="hljs-keyword">\end</span>&#123;tabular&#125;<br>&#125;&#125;<br><span class="hljs-keyword">\date</span>&#123;<span class="hljs-keyword">\today</span>&#125;<br></code></pre></td></tr></table></figure><h1 id="2-å°†è¡¨æ ¼è¿›è¡Œæ•´ä½“ç¼©æ”¾å¹¶ä¸æ¨è-é™¤éè¿«ä¸å¾—å·²"><a class="markdownIt-Anchor" href="#2-å°†è¡¨æ ¼è¿›è¡Œæ•´ä½“ç¼©æ”¾å¹¶ä¸æ¨è-é™¤éè¿«ä¸å¾—å·²"></a> 2. å°†è¡¨æ ¼è¿›è¡Œæ•´ä½“ç¼©æ”¾(å¹¶ä¸æ¨è, é™¤éè¿«ä¸å¾—å·²)</h1><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\resizebox</span>&#123;<span class="hljs-keyword">\textwidth</span>&#125;&#123;15mm&#125;&#123;<br>  <span class="hljs-keyword">\begin</span>&#123;tabular&#125;&#123;|c|c|&#125;<br>    <span class="hljs-keyword">\hline</span><br>    <span class="hljs-keyword">\ </span> <span class="hljs-built_in">&amp;</span> å¹³å‡è¿è¡Œæ—¶é—´(å•ä½: s) <span class="hljs-keyword">\\</span><br>    <span class="hljs-keyword">\hline</span><br>    è®­ç»ƒé˜¶æ®µ <span class="hljs-built_in">&amp;</span> 2333.5593 <span class="hljs-keyword">\\</span><br>    æµ‹è¯•é˜¶æ®µ <span class="hljs-built_in">&amp;</span> <span class="hljs-keyword">\ </span> <span class="hljs-keyword">\\</span><br>    <span class="hljs-keyword">\hline</span><br>  <span class="hljs-keyword">\end</span>&#123;tabular&#125;<br>&#125;  <span class="hljs-comment">% åªèƒ½åŒ…å«tabular ä¸èƒ½åŒ…å«æ–‡æœ¬ å¦‚ \caption</span><br></code></pre></td></tr></table></figure><h1 id="3-æ•´ä½“è°ƒæ•´æ¯ä¸€åˆ—å®½åº¦"><a class="markdownIt-Anchor" href="#3-æ•´ä½“è°ƒæ•´æ¯ä¸€åˆ—å®½åº¦"></a> 3. æ•´ä½“è°ƒæ•´æ¯ä¸€åˆ—å®½åº¦</h1><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\setlength</span>&#123;<span class="hljs-keyword">\tabcolsep</span>&#125;&#123;7mm&#125;&#123;<br>  <span class="hljs-keyword">\begin</span>&#123;tabular&#125;&#123;cccccc&#125; <br>    <span class="hljs-keyword">\toprule</span><br>    Models  <span class="hljs-built_in">&amp;</span>  <span class="hljs-built_in">$</span><span class="hljs-keyword">\hat</span> c<span class="hljs-built_in">$</span>  <span class="hljs-built_in">&amp;</span>  <span class="hljs-built_in">$</span><span class="hljs-keyword">\hat</span><span class="hljs-keyword">\alpha</span><span class="hljs-built_in">$</span>  <span class="hljs-built_in">&amp;</span>  <span class="hljs-built_in">$</span><span class="hljs-keyword">\hat</span><span class="hljs-keyword">\beta</span><span class="hljs-built_in">_</span>0<span class="hljs-built_in">$</span>  <span class="hljs-built_in">&amp;</span>  <span class="hljs-built_in">$</span><span class="hljs-keyword">\hat</span><span class="hljs-keyword">\beta</span><span class="hljs-built_in">_</span>1<span class="hljs-built_in">$</span>  <span class="hljs-built_in">&amp;</span>  <span class="hljs-built_in">$</span><span class="hljs-keyword">\hat</span><span class="hljs-keyword">\beta</span><span class="hljs-built_in">_</span>2<span class="hljs-built_in">$</span>  <span class="hljs-keyword">\\</span> <span class="hljs-keyword">\hline</span><br>    model  <span class="hljs-built_in">&amp;</span> 30.6302  <span class="hljs-built_in">&amp;</span> 0.4127  <span class="hljs-built_in">&amp;</span> 9.4257  <span class="hljs-built_in">&amp;</span> - <span class="hljs-built_in">&amp;</span> - <span class="hljs-keyword">\\</span><br>    model  <span class="hljs-built_in">&amp;</span> 12.4089  <span class="hljs-built_in">&amp;</span> 0.5169  <span class="hljs-built_in">&amp;</span> 18.6986  <span class="hljs-built_in">&amp;</span> -6.6157  <span class="hljs-built_in">&amp;</span> - <span class="hljs-keyword">\\</span><br>    model  <span class="hljs-built_in">&amp;</span> 14.8586  <span class="hljs-built_in">&amp;</span> 0.4991  <span class="hljs-built_in">&amp;</span> 19.5421  <span class="hljs-built_in">&amp;</span> -7.0717  <span class="hljs-built_in">&amp;</span> 0.2183  <span class="hljs-keyword">\\</span><br>    model  <span class="hljs-built_in">&amp;</span> 3.06302  <span class="hljs-built_in">&amp;</span> 0.41266  <span class="hljs-built_in">&amp;</span> 0.11725  <span class="hljs-built_in">&amp;</span> - <span class="hljs-built_in">&amp;</span> - <span class="hljs-keyword">\\</span><br>    model  <span class="hljs-built_in">&amp;</span> 1.24089  <span class="hljs-built_in">&amp;</span> 0.51691  <span class="hljs-built_in">&amp;</span> 0.83605  <span class="hljs-built_in">&amp;</span> -0.66157  <span class="hljs-built_in">&amp;</span> - <span class="hljs-keyword">\\</span><br>    model  <span class="hljs-built_in">&amp;</span> 1.48586  <span class="hljs-built_in">&amp;</span> 0.49906  <span class="hljs-built_in">&amp;</span> 0.95609  <span class="hljs-built_in">&amp;</span> -0.70717  <span class="hljs-built_in">&amp;</span> 0.02183  <span class="hljs-keyword">\\</span><br>    <span class="hljs-keyword">\bottomrule</span><br>    <span class="hljs-keyword">\caption</span>&#123;å“ˆå“ˆå“ˆ&#125;<br>  <span class="hljs-keyword">\end</span>&#123;tabular&#125;<br>&#125;  <span class="hljs-comment">% è¿™ä¸ªå¯ä»¥åŒ…å«å¾ˆå¤šå…ƒç´ </span><br></code></pre></td></tr></table></figure><h1 id="4-è®¾ç½®åˆ—é«˜"><a class="markdownIt-Anchor" href="#4-è®¾ç½®åˆ—é«˜"></a> 4.  è®¾ç½®åˆ—é«˜</h1><blockquote><p><code>\rule&#123;çº¿çš„å®½åº¦&#125;&#123;çº¿æ’‘èµ·çš„é«˜åº¦&#125;</code></p><p>çº¿è®¾ç½®ä¸º0ptå®½åº¦, å°±å¯ä»¥èµ·åˆ°æ’‘èµ·å•å…ƒæ ¼çš„ä½œç”¨äº†</p></blockquote><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\begin</span>&#123;tabular&#125;&#123;|c|c|&#125;<br>  <span class="hljs-keyword">\hline</span><br>  <span class="hljs-keyword">\ </span> <span class="hljs-built_in">&amp;</span> å¹³å‡è¿è¡Œæ—¶é—´(å•ä½: s) <span class="hljs-keyword">\\</span><br>  <span class="hljs-keyword">\hline</span><br>  <span class="hljs-keyword">\rule</span>&#123;0pt&#125;&#123;8pt&#125;è®­ç»ƒé˜¶æ®µ <span class="hljs-built_in">&amp;</span> 2333.5593 <span class="hljs-keyword">\\</span><br>  æµ‹è¯•é˜¶æ®µ <span class="hljs-built_in">&amp;</span> <span class="hljs-keyword">\ </span> <span class="hljs-keyword">\\</span><br>  <span class="hljs-keyword">\hline</span><br><span class="hljs-keyword">\end</span>&#123;tabular&#125;<br></code></pre></td></tr></table></figure><h1 id="5-ä¸‰çº¿è¡¨"><a class="markdownIt-Anchor" href="#5-ä¸‰çº¿è¡¨"></a> 5. ä¸‰çº¿è¡¨</h1><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\documentclass</span>&#123;article&#125; <br><span class="hljs-keyword">\usepackage</span>&#123;float&#125;<span class="hljs-comment">%æä¾›floatæµ®åŠ¨ç¯å¢ƒ</span><br><span class="hljs-keyword">\usepackage</span>&#123;booktabs&#125;<span class="hljs-comment">%æä¾›å‘½ä»¤\topruleã€\midruleã€\bottomrule</span><br> <br><span class="hljs-keyword">\begin</span>&#123;document&#125;<br> <br>  <span class="hljs-comment">%ç»å…¸ä¸‰çº¿è¡¨</span><br>  <span class="hljs-keyword">\begin</span>&#123;table&#125;[H]<br>    <span class="hljs-keyword">\caption</span>&#123;<span class="hljs-keyword">\textbf</span>&#123;Example 1&#125;&#125;<span class="hljs-comment">%æ ‡é¢˜</span><br>    <span class="hljs-keyword">\centering</span><span class="hljs-comment">%æŠŠè¡¨å±…ä¸­</span><br>    <span class="hljs-keyword">\begin</span>&#123;tabular&#125;&#123;c&#123;80pt&#125;c&#123;80pt&#125;c&#123;80pt&#125;c&#123;80pt&#125;&#125;<span class="hljs-comment">%å››ä¸ªcä»£è¡¨è¯¥è¡¨ä¸€å…±å››åˆ—ï¼Œå†…å®¹å…¨éƒ¨å±…ä¸­</span><br>    <span class="hljs-keyword">\toprule</span><span class="hljs-comment">%ç¬¬ä¸€é“æ¨ªçº¿</span><br>    Item 1<span class="hljs-built_in">&amp;</span>Item 2<span class="hljs-built_in">&amp;</span>Item 3<span class="hljs-built_in">&amp;</span>Item 4 <span class="hljs-keyword">\\</span><br>    <span class="hljs-keyword">\midrule</span><span class="hljs-comment">%ç¬¬äºŒé“æ¨ªçº¿ </span><br>    Data1<span class="hljs-built_in">&amp;</span>Data2<span class="hljs-built_in">&amp;</span>Data3<span class="hljs-built_in">&amp;</span>Data4 <span class="hljs-keyword">\\</span><br>    Data5<span class="hljs-built_in">&amp;</span>Data6<span class="hljs-built_in">&amp;</span>Data7<span class="hljs-built_in">&amp;</span>Data8 <span class="hljs-keyword">\\</span><br>    <span class="hljs-keyword">\bottomrule</span><span class="hljs-comment">%ç¬¬ä¸‰é“æ¨ªçº¿</span><br>    <span class="hljs-keyword">\end</span>&#123;tabular&#125;<br>  <span class="hljs-keyword">\end</span>&#123;table&#125;<br> <br><span class="hljs-keyword">\end</span>&#123;document&#125;<br></code></pre></td></tr></table></figure><h1 id="6-å¤æ‚è¡¨æ ¼"><a class="markdownIt-Anchor" href="#6-å¤æ‚è¡¨æ ¼"></a> 6. å¤æ‚è¡¨æ ¼</h1><blockquote><p>å¤šåˆ—è¡¨æ ¼ä¸­ç”¨<code>\cline</code> æ§åˆ¶å“ªå‡ åˆ—æœ‰æ¨ªçº¿: <code>\cline&#123;3-5&#125;</code> è¡¨ç¤ºç¬¬3åˆ—å’Œç¬¬5åˆ—æœ‰æ¨ªçº¿.</p></blockquote><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-comment">% å¦‚æœè¦é—´éš”ä¸€åˆ—åŠ æ¨ªçº¿åªè¦ä¸¤ä¸ªæŒ‡ä»¤å°±è¡Œ</span><br><span class="hljs-keyword">\begin</span>&#123;tabular&#125;&#123;llrr&#125; <br>  a <span class="hljs-built_in">&amp;</span>b <span class="hljs-built_in">&amp;</span>c <span class="hljs-built_in">&amp;</span>d <span class="hljs-keyword">\\</span> <span class="hljs-keyword">\cline</span>&#123;1-1&#125; <span class="hljs-keyword">\cline</span>&#123;3-4&#125; <br>  e <span class="hljs-built_in">&amp;</span>f <span class="hljs-built_in">&amp;</span>g <span class="hljs-built_in">&amp;</span>h <br><span class="hljs-keyword">\end</span>&#123;tabular&#125;<br></code></pre></td></tr></table></figure><blockquote><p>å¦‚æœç”¨äº†<code>booktabs</code>, æƒ³è¦<code>\cline</code>ç±»ä¼¼çš„å¤šåˆ—æ¨ªçº¿, åˆ™å¯ä»¥ä½¿ç”¨<code>\cmidrule</code>, è¿™ä¸ªæ¯”<code>\midrule</code>æ›´ç»†</p></blockquote><p><img src="https://img1.imgtp.com/2022/08/02/VIxH5MFg.png" alt="è§£é‡Š" /></p><p><img src="https://img1.imgtp.com/2022/08/02/L8Ict2Bp.png" alt="è§£é‡Š2" /></p><hr /><blockquote><p>\usepackage{multirow}</p></blockquote><blockquote><p><code>\multirow&#123;nrows&#125;[bigstruct]&#123;width&#125;[fixup]&#123;text&#125;</code></p><ul><li>nrows: å ç”¨çš„è¡Œæ•°</li><li>bigstructs: å¯é€‰, åœ¨ä½¿ç”¨äº†bigstructå®åŒ…æ—¶ç”¨</li><li>width: è¯¥æ å®½åº¦, å¦‚æœä¸º*åˆ™ç”±LaTexè‡ªè¡Œå†³å®š</li><li>fixup: å¯é€‰é¡¹, è°ƒæ•´æ–‡æœ¬çš„å‚ç›´ä½ç½®</li><li>text: æ‰€è¦æ’ç‰ˆçš„æ–‡æœ¬, å¯ä»¥ç”¨ \ å¼ºåˆ¶æ¢è¡Œ</li></ul></blockquote><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\begin</span>&#123;tabular&#125;&#123;|c|c|c|c|c|&#125;<br>  <span class="hljs-keyword">\hline</span><br>  <span class="hljs-comment">%è·¨è¡Œï¼ˆå°†ä¸¤è¡Œåˆå¹¶ä¸ºä¸€è¡Œï¼‰ ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡æ˜è·¨å‡ è¡Œ è®°å¾—ä¸‹ä¸€è¡Œå¯¹åº”ä½ç½®ç©ºå‡ºæ¥ ä¸ç„¶ä¼šé‡å , ç¬¬äºŒä¸ªå‚æ•°æ˜¯å®½åº¦</span><br>  <span class="hljs-keyword">\multirow</span>&#123;2&#125;&#123;*&#125;&#123;1&#125; <span class="hljs-built_in">&amp;</span> 11 <span class="hljs-built_in">&amp;</span> 111 <span class="hljs-built_in">&amp;</span> 1111 <span class="hljs-built_in">&amp;</span> 11111 <span class="hljs-keyword">\\</span><br>  <span class="hljs-keyword">\cline</span>&#123;2-5&#125;<br>   <span class="hljs-built_in">&amp;</span> 22 <span class="hljs-built_in">&amp;</span> 222 <span class="hljs-built_in">&amp;</span> 2222 <span class="hljs-built_in">&amp;</span> 22222 <span class="hljs-keyword">\\</span><br>  <span class="hljs-keyword">\hline</span><br>  3 <span class="hljs-built_in">&amp;</span> 33 <span class="hljs-built_in">&amp;</span> 333 <span class="hljs-built_in">&amp;</span> 3333 <span class="hljs-built_in">&amp;</span> 33333 <span class="hljs-keyword">\\</span><br>  <span class="hljs-keyword">\hline</span><br><span class="hljs-keyword">\end</span>&#123;tabular&#125;<br></code></pre></td></tr></table></figure><blockquote><p><code>\multicolumn&#123;ncols&#125;&#123;æŒ‡æ˜å¯¹é½æ–¹å¼ä»¥åŠæ–¹æ ¼çº¿&#125;&#123;å•å…ƒæ ¼å†…å®¹&#125;</code></p></blockquote><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\begin</span>&#123;tabular&#125;&#123;|c|c|c|c|c|&#125;<br>  <span class="hljs-keyword">\hline</span><br>  <span class="hljs-comment">% after \\: \hline or \cline&#123;col1-col2&#125; \cline&#123;col3-col4&#125; ...</span><br>  <span class="hljs-comment">%è·¨åˆ—ï¼ˆå°†ä¸¤åˆ—åˆå¹¶ä¸ºä¸€åˆ—ï¼‰ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡æ˜è·¨å‡ åˆ—  ç¬¬äºŒä¸ªå‚æ•°æŒ‡æ˜å†…å®¹å±…ä¸­å¹¶åœ¨å·¦å³ä¸¤è¾¹ç”»ä¸Šç›´çº¿ æœ€åä¸€ä¸ªå‚æ•°æ˜¯è¡¨æ ¼å†…å®¹</span><br>  <span class="hljs-keyword">\multicolumn</span>&#123;2&#125;&#123;|c|&#125;&#123;1&#125;  <span class="hljs-built_in">&amp;</span> 111 <span class="hljs-built_in">&amp;</span> 1111 <span class="hljs-built_in">&amp;</span> 11111 <span class="hljs-keyword">\\</span><br>  <span class="hljs-keyword">\hline</span><br>   2 <span class="hljs-built_in">&amp;</span> 22 <span class="hljs-built_in">&amp;</span> 222 <span class="hljs-built_in">&amp;</span> 2222 <span class="hljs-built_in">&amp;</span> 22222 <span class="hljs-keyword">\\</span><br>  <span class="hljs-keyword">\hline</span><br>  3 <span class="hljs-built_in">&amp;</span> 33 <span class="hljs-built_in">&amp;</span> 333 <span class="hljs-built_in">&amp;</span> 3333 <span class="hljs-built_in">&amp;</span> 33333 <span class="hljs-keyword">\\</span><br>  <span class="hljs-keyword">\hline</span><br><span class="hljs-keyword">\end</span>&#123;tabular&#125;<br></code></pre></td></tr></table></figure><h1 id="7-è¡¨æ ¼çš„åˆ—æ–¹å‘ä¸Šåˆ†æ•£å¯¹é½"><a class="markdownIt-Anchor" href="#7-è¡¨æ ¼çš„åˆ—æ–¹å‘ä¸Šåˆ†æ•£å¯¹é½"></a> 7. è¡¨æ ¼çš„åˆ—æ–¹å‘ä¸Šåˆ†æ•£å¯¹é½</h1><blockquote><p><code>\makebox[width][position]&#123;text&#125;</code></p><p><code>\makebox[4em][s]&#123;content&#125;</code></p><ul><li>l - left</li><li>r - right</li><li>s - interword space adjusted so text fills box exactly</li></ul></blockquote><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\begin</span>&#123;tabular&#125;&#123;rl&#125;<br>  <span class="hljs-keyword">\makebox</span>[4em][s]&#123;è®ºæ–‡é¢˜ç›®&#125;ï¼š        <span class="hljs-built_in">&amp;</span> <span class="hljs-keyword">\@title</span><span class="hljs-keyword">\\</span><br>  <span class="hljs-keyword">\makebox</span>[4em][s]&#123;ä¸“<span class="hljs-keyword">\hspace</span>&#123;<span class="hljs-keyword">\fill</span>&#125;ä¸š&#125;ï¼š<span class="hljs-built_in">&amp;</span> <span class="hljs-keyword">\@major</span><span class="hljs-keyword">\\</span><br>  <span class="hljs-keyword">\makebox</span>[4em][s]&#123;åš<span class="hljs-keyword">\hspace</span>&#123;<span class="hljs-keyword">\fill</span>&#125;å£«<span class="hljs-keyword">\hspace</span>&#123;<span class="hljs-keyword">\fill</span>&#125;ç”Ÿ&#125;ï¼š      <span class="hljs-built_in">&amp;</span> <span class="hljs-keyword">\@author</span><span class="hljs-keyword">\\</span><br>  <span class="hljs-keyword">\makebox</span>[4em][s]&#123;æŒ‡å¯¼æ•™å¸ˆ&#125;ï¼š        <span class="hljs-built_in">&amp;</span> <span class="hljs-keyword">\@advisorname</span> <span class="hljs-keyword">\,</span><span class="hljs-keyword">\,</span> <span class="hljs-keyword">\@advisortitle</span><br><span class="hljs-keyword">\end</span>&#123;tabular&#125;<br></code></pre></td></tr></table></figure><ol start="7"><li>è¡¨æ ¼å†…æ¢è¡Œ</li></ol><blockquote><p><code>\makecell</code></p></blockquote><p><img src="https://img1.imgtp.com/2022/08/02/LNe2NvOn.png" alt="è§£é‡Š" /></p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\usepackage</span>&#123;makecell&#125;<br><br><span class="hljs-comment">% ...</span><br><br><span class="hljs-keyword">\begin</span>&#123;tabular&#125;&#123;cc&#125;<br>  <span class="hljs-keyword">\makecell</span>[l]&#123;a <span class="hljs-keyword">\\</span> b <span class="hljs-keyword">\\</span> c &#125; <span class="hljs-built_in">&amp;</span> 1 <span class="hljs-keyword">\\</span>  <span class="hljs-comment">% ç”¨äºå•å…ƒæ ¼å†…æ¢è¡Œ</span><br><span class="hljs-keyword">\end</span>&#123;tabular&#125;<br></code></pre></td></tr></table></figure><p>é™¤äº†ä½¿ç”¨<code>\makecell</code>å¤–, è¿˜å¯ä»¥ç”¨åµŒå¥—tabularçš„æ–¹å¼</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\begin</span>&#123;tabular&#125;&#123;cccc&#125;<br>    <span class="hljs-keyword">\toprule</span><br>        <span class="hljs-keyword">\begin</span>&#123;tabular&#125;&#123;c&#125;<br>            ç‰©ç†æœº<span class="hljs-keyword">\\</span>èµ„æºç±»å‹<br>        <span class="hljs-keyword">\end</span>&#123;tabular&#125;<br>          <span class="hljs-built_in">&amp;</span> CPUèµ„æºï¼ˆå•ä½ï¼šæ ¸ï¼‰ <span class="hljs-built_in">&amp;</span> å†…å­˜èµ„æºï¼ˆå•ä½ï¼šGï¼‰ <span class="hljs-built_in">&amp;</span> æœºå™¨æ•°é‡ <span class="hljs-keyword">\\</span><br>     <span class="hljs-keyword">\hline</span><br>         ç±»å‹ä¸€ <span class="hljs-built_in">&amp;</span>  32  <span class="hljs-built_in">&amp;</span> 64 <span class="hljs-built_in">&amp;</span> 6000 <span class="hljs-keyword">\\</span><br>         ç±»å‹äºŒ <span class="hljs-built_in">&amp;</span> 92 <span class="hljs-built_in">&amp;</span> 288 <span class="hljs-built_in">&amp;</span> 3000 <span class="hljs-keyword">\\</span><br>    <span class="hljs-keyword">\bottomrule</span><br><span class="hljs-keyword">\end</span>&#123;tabular&#125;<br></code></pre></td></tr></table></figure><ol start="9"><li>è®¾ç½®åˆç†åˆ—å®½</li></ol><blockquote><p>éœ€è¦å¯¼å…¥<code>makecell</code>åŒ…</p></blockquote><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-comment">% p&#123;xpt&#125; å¯ä»¥æŒ‡å®šæ¯ä¸€åˆ—çš„å®½åº¦ï¼Œ ä½†æ˜¯è¿™æ ·å°±æ²¡æœ‰t, c, b å¯¹é½çš„ä½œç”¨äº†, ä½†æ˜¯å¯ä»¥è‡ªåŠ¨æ¢è¡Œ!</span><br><br><span class="hljs-keyword">\begin</span>&#123;table &#125;[ htbp]<br>  <span class="hljs-keyword">\centering</span><br>  <span class="hljs-keyword">\begin</span>&#123;tabular&#125;&#123;p&#123;80 pt&#125;p&#123;80 pt&#125;p&#123;80 pt&#125;&#125;<br>  <span class="hljs-keyword">\toprule</span><br>  æ“ä½œç³»ç»Ÿ <span class="hljs-built_in">&amp;</span> å‘è¡Œç‰ˆ <span class="hljs-built_in">&amp;</span> ç¼–è¾‘å™¨ <span class="hljs-keyword">\\</span><br>  <span class="hljs-keyword">\midrule</span><br>  Windows <span class="hljs-built_in">&amp;</span> MikTeX <span class="hljs-built_in">&amp;</span> TexMakerX <span class="hljs-keyword">\\</span><br>   Unix/Linux <span class="hljs-built_in">&amp;</span> teTeX <span class="hljs-built_in">&amp;</span> Kile <span class="hljs-keyword">\\</span><br>  Mac OS <span class="hljs-built_in">&amp;</span> MacTeX <span class="hljs-built_in">&amp;</span> TeXShop <span class="hljs-keyword">\\</span><br>   é€šç”¨ <span class="hljs-built_in">&amp;</span> TeX Live <span class="hljs-built_in">&amp;</span> TeXworks <span class="hljs-keyword">\\</span><br>  <span class="hljs-keyword">\bottomrule</span><br><span class="hljs-keyword">\end</span>&#123;tabular&#125;<br></code></pre></td></tr></table></figure><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-comment">% p&#123;80pt&#125;&lt;&#123;\centering&#125;</span><br><br><span class="hljs-keyword">\begin</span>&#123;table &#125;[ htbp]<br> <span class="hljs-keyword">\centering</span><br>  <span class="hljs-keyword">\begin</span>&#123;tabular &#125;&#123;p&#123;80 pt&#125;&lt;&#123;<span class="hljs-keyword">\centering</span>&#125;p&#123;80 pt&#125;&lt;&#123;<span class="hljs-keyword">\raggedleft</span><span class="hljs-keyword">\arraybackslash</span> &#125;p&#123;80 pt&#125;&#125;<br> <span class="hljs-keyword">\toprule</span><br>æ“ä½œç³»ç»Ÿ <span class="hljs-built_in">&amp;</span> å‘è¡Œç‰ˆ <span class="hljs-built_in">&amp;</span> ç¼–è¾‘å™¨ <span class="hljs-keyword">\\</span><br> <span class="hljs-keyword">\midrule</span><br>Windows <span class="hljs-built_in">&amp;</span> MikTeX <span class="hljs-built_in">&amp;</span> TexMakerX <span class="hljs-keyword">\\</span><br> Unix/Linux <span class="hljs-built_in">&amp;</span> teTeX <span class="hljs-built_in">&amp;</span> Kile <span class="hljs-keyword">\\</span><br>Mac OS <span class="hljs-built_in">&amp;</span> MacTeX <span class="hljs-built_in">&amp;</span> TeXShop <span class="hljs-keyword">\\</span><br> é€šç”¨ <span class="hljs-built_in">&amp;</span> TeX Live <span class="hljs-built_in">&amp;</span> TeXworks <span class="hljs-keyword">\\</span><br> <span class="hljs-keyword">\bottomrule</span><br> <span class="hljs-keyword">\end</span>&#123;tabular&#125;<br><span class="hljs-keyword">\end</span>&#123;table&#125;<br></code></pre></td></tr></table></figure><h1 id="9-å°†è¡¨æ—‹è½¬90åº¦æ˜¾ç¤º"><a class="markdownIt-Anchor" href="#9-å°†è¡¨æ—‹è½¬90åº¦æ˜¾ç¤º"></a> 9. å°†è¡¨æ—‹è½¬90åº¦æ˜¾ç¤º</h1><blockquote><p>ä½¿ç”¨å®åŒ…<code>rotating</code></p><p>å°†<code>table</code>ç¯å¢ƒæ”¹ä¸º<code>sidewaytable</code></p><ul><li><code>\usepackage[figuresleft]&#123;rotating&#125;</code>: é¡ºæ—¶é’ˆ90åº¦</li><li><code>\usepackage[figuresright]&#123;rotating&#125;</code>: é€†æ—¶é’ˆ90åº¦</li></ul></blockquote><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\usepackage</span>[figuresright]&#123;rotating&#125;<br><br><span class="hljs-comment">%...</span><br><br><span class="hljs-keyword">\begin</span>&#123;sidewaystable&#125;[htp]<br><span class="hljs-keyword">\caption</span>&#123;This is a caption&#125;  <br><span class="hljs-keyword">\centering</span>  <span class="hljs-comment">%è¡¨æ ¼æ•´ä½“å±…ä¸­</span><br>  <span class="hljs-keyword">\footnotesize</span>  <span class="hljs-comment">%è®¾ç½®å­—ä½“</span><br><span class="hljs-keyword">\begin</span>&#123;tabular&#125;&#123;l*&#123;7&#125;&#123;L&#123;3cm&#125;&#125;&#125; <span class="hljs-comment">%å…±7åˆ—ï¼Œæ¯ä¸€åˆ—åˆ—å®½ä¸º3cm</span><br>    <span class="hljs-comment">%...</span><br><span class="hljs-keyword">\end</span>&#123;tabular&#125;<br><span class="hljs-keyword">\end</span>&#123;sidewaystable&#125;<br></code></pre></td></tr></table></figure><h1 id="multicolumn-å°ç»“"><a class="markdownIt-Anchor" href="#multicolumn-å°ç»“"></a> multicolumn å°ç»“</h1><ul><li><code>m&#123;5cm&#125;</code>: å±…ä¸­</li><li><code>p&#123;5cm&#125;</code>: é¡¶éƒ¨</li><li><code>b&#123;5cm&#125;</code>: åº•éƒ¨</li></ul><p><img src="https://img1.imgtp.com/2022/08/02/UMYQll70.png" alt="multicolumnçš„ä½ç½®è®¾ç½®" /></p><h2 id="1-å‚ç›´å±…ä¸­"><a class="markdownIt-Anchor" href="#1-å‚ç›´å±…ä¸­"></a> 1. å‚ç›´å±…ä¸­</h2><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\begin</span>&#123;center&#125;<br><span class="hljs-keyword">\begin</span>&#123;tabular&#125;&#123;|l|l|l|l|&#125;<br><span class="hljs-keyword">\hline</span><br>Day <span class="hljs-built_in">&amp;</span> Min Temp <span class="hljs-built_in">&amp;</span> Max Temp <span class="hljs-built_in">&amp;</span> Summary <span class="hljs-keyword">\\</span><br><span class="hljs-keyword">\hline</span><br><span class="hljs-comment">% æ³¨æ„, multicolumnä¸­ | ä¼šè¦†ç›–å…¨å±€çš„è¾¹æ¡†è®¾ç½®, ä¸åŠ çš„è¯, å¯¹åº”å•å…ƒæ ¼ä¹Ÿæ²¡è¾¹æ¡†</span><br>Monday <span class="hljs-built_in">&amp;</span> 11C <span class="hljs-built_in">&amp;</span> 22C <span class="hljs-built_in">&amp;</span> <span class="hljs-keyword">\multicolumn</span>&#123;1&#125;&#123;|p&#123;5cm&#125;|&#125;&#123;A clear day with lots of sunshine. However, the strong breeze will bring down the temperatures.&#125; <span class="hljs-keyword">\\</span><br><span class="hljs-keyword">\hline</span><br>Tuesday <span class="hljs-built_in">&amp;</span> 9C <span class="hljs-built_in">&amp;</span> 19C <span class="hljs-built_in">&amp;</span> <span class="hljs-keyword">\multicolumn</span>&#123;1&#125;&#123;|m&#123;5cm&#125;|&#125;&#123;Cloudy with rain, across many northern regions. Clear spells across most of Scotland and Northern Ireland, but rain reaching the far northwest.&#125; <span class="hljs-keyword">\</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">\hline</span><br>Wednesday <span class="hljs-built_in">&amp;</span> 10C <span class="hljs-built_in">&amp;</span> 21C <span class="hljs-built_in">&amp;</span> <span class="hljs-keyword">\multicolumn</span>&#123;1&#125;&#123;|b&#123;5cm&#125;|&#125;&#123;Rain will still linger for the morning. Conditions will improve by early afternoon and continue throughout the evening.&#125; <span class="hljs-keyword">\\</span><br><span class="hljs-keyword">\hline</span><br><br><span class="hljs-keyword">\end</span>&#123;tabular&#125;<br><br><span class="hljs-keyword">\end</span>&#123;center&#125;<br></code></pre></td></tr></table></figure><h2 id="2-å‚ç›´ä¸”æ°´å¹³å±…ä¸­"><a class="markdownIt-Anchor" href="#2-å‚ç›´ä¸”æ°´å¹³å±…ä¸­"></a> 2. å‚ç›´ä¸”æ°´å¹³å±…ä¸­</h2><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\documentclass</span>[a4paper,twoside,12pt]&#123;article&#125;<br><span class="hljs-keyword">\usepackage</span>&#123;amsbsy&#125;<span class="hljs-comment">%</span><br><span class="hljs-keyword">\usepackage</span>&#123;graphicx&#125;<br><span class="hljs-keyword">\usepackage</span>&#123;array&#125;<br><span class="hljs-keyword">\usepackage</span>&#123;calc&#125;<br><span class="hljs-keyword">\newcolumntype</span>&#123;N&#125;&#123;&gt;&#123;<span class="hljs-keyword">\centering</span><span class="hljs-keyword">\arraybackslash</span>&#125;m&#123;.5in&#125;&#125;  <span class="hljs-comment">% \arraybackslash å°±æ˜¯é‚£ä¸ª \\</span><br><span class="hljs-keyword">\newcolumntype</span>&#123;G&#125;&#123;&gt;&#123;<span class="hljs-keyword">\bfseries</span><span class="hljs-keyword">\centering</span><span class="hljs-keyword">\arraybackslash</span>&#125;m&#123;2in+6<span class="hljs-keyword">\tabcolsep</span>&#125;&#125;<br><br><span class="hljs-keyword">\begin</span>&#123;document&#125;<br><br><span class="hljs-keyword">\begin</span>&#123;table&#125;[H]<br><span class="hljs-keyword">\centering</span><br><span class="hljs-keyword">\begin</span>&#123;tabular&#125;&#123;*&#123;9&#125;&#123;N|&#125;&#125;<br><span class="hljs-keyword">\cline</span>&#123;2-9&#125;<br><span class="hljs-keyword">\multicolumn</span>&#123;1&#125;&#123;N|&#125;&#123;&#125; <span class="hljs-built_in">&amp;</span> <span class="hljs-keyword">\multicolumn</span>&#123;4&#125;&#123;G|&#125;&#123;Emissions (Pre Catalytic Converter)&#125; <span class="hljs-built_in">&amp;</span> <span class="hljs-keyword">\multicolumn</span>&#123;4&#125;&#123;G|&#125;&#123;Emissions (Post Catalytic Converter)&#125; <span class="hljs-keyword">\tabularnewline</span>  <span class="hljs-keyword">\hline</span><br><span class="hljs-keyword">\multicolumn</span>&#123;1&#125;&#123;|N|&#125;&#123;<span class="hljs-keyword">\textbf</span>&#123;Dyno Load (<span class="hljs-keyword">\%</span>)&#125;&#125; <span class="hljs-built_in">&amp;</span> <span class="hljs-keyword">\textbf</span>&#123;CO (<span class="hljs-keyword">\%</span>)&#125; <span class="hljs-built_in">&amp;</span> <span class="hljs-keyword">\textbf</span>&#123;HC (ppm)&#125; <span class="hljs-built_in">&amp;</span> <span class="hljs-keyword">\textbf</span>&#123;Nox (ppm)&#125; <span class="hljs-built_in">&amp;</span> <span class="hljs-keyword">\textbf</span>&#123;<span class="hljs-built_in">$</span><span class="hljs-keyword">\boldsymbol</span>&#123;<span class="hljs-keyword">\mathrm</span>&#123;CO<span class="hljs-built_in">_</span>2&#125;&#125;<span class="hljs-built_in">$</span> (<span class="hljs-keyword">\%</span>)&#125; <span class="hljs-built_in">&amp;</span> <span class="hljs-keyword">\textbf</span>&#123;CO (<span class="hljs-keyword">\%</span>)&#125; <span class="hljs-built_in">&amp;</span> <span class="hljs-keyword">\textbf</span>&#123;HC (ppm)&#125; <span class="hljs-built_in">&amp;</span> <span class="hljs-keyword">\textbf</span>&#123;Nox (ppm)&#125; <span class="hljs-built_in">&amp;</span> <span class="hljs-keyword">\textbf</span>&#123;<span class="hljs-built_in">$</span><span class="hljs-keyword">\boldsymbol</span>&#123;<span class="hljs-keyword">\mathrm</span>&#123;CO<span class="hljs-built_in">_</span>2&#125;&#125;<span class="hljs-built_in">$</span> (<span class="hljs-keyword">\%</span>)&#125; <span class="hljs-keyword">\\</span> <span class="hljs-keyword">\hline</span><br><span class="hljs-keyword">\multicolumn</span>&#123;1&#125;&#123;|N|&#125;&#123;10&#125; <span class="hljs-built_in">&amp;</span> 0.77 <span class="hljs-built_in">&amp;</span> 23 <span class="hljs-built_in">&amp;</span> 523 <span class="hljs-built_in">&amp;</span> 14.0 <span class="hljs-built_in">&amp;</span> 0.09 <span class="hljs-built_in">&amp;</span> 18 <span class="hljs-built_in">&amp;</span> 130 <span class="hljs-built_in">&amp;</span> 13.8 <span class="hljs-keyword">\\</span> <span class="hljs-keyword">\hline</span><br><span class="hljs-keyword">\multicolumn</span>&#123;1&#125;&#123;|c|&#125;&#123;30&#125; <span class="hljs-built_in">&amp;</span> 0.78 <span class="hljs-built_in">&amp;</span> 13 <span class="hljs-built_in">&amp;</span> 555 <span class="hljs-built_in">&amp;</span> 14.2 <span class="hljs-built_in">&amp;</span> - <span class="hljs-built_in">&amp;</span> - <span class="hljs-built_in">&amp;</span> - <span class="hljs-built_in">&amp;</span> - <span class="hljs-keyword">\\</span> <span class="hljs-keyword">\hline</span><br><span class="hljs-keyword">\multicolumn</span>&#123;1&#125;&#123;|c|&#125;&#123;70&#125; <span class="hljs-built_in">&amp;</span> 0.70 <span class="hljs-built_in">&amp;</span> 14 <span class="hljs-built_in">&amp;</span> 580 <span class="hljs-built_in">&amp;</span> 14.4 <span class="hljs-built_in">&amp;</span> - <span class="hljs-built_in">&amp;</span> - <span class="hljs-built_in">&amp;</span> - <span class="hljs-built_in">&amp;</span> - <span class="hljs-keyword">\\</span> <span class="hljs-keyword">\hline</span><br><span class="hljs-keyword">\multicolumn</span>&#123;1&#125;&#123;|c|&#125;&#123;90&#125; <span class="hljs-built_in">&amp;</span> 0.74 <span class="hljs-built_in">&amp;</span> 15 <span class="hljs-built_in">&amp;</span> 630 <span class="hljs-built_in">&amp;</span> 14.5 <span class="hljs-built_in">&amp;</span> 0.70 <span class="hljs-built_in">&amp;</span> 15 <span class="hljs-built_in">&amp;</span> 618 <span class="hljs-built_in">&amp;</span> 14.6 <span class="hljs-keyword">\\</span> <span class="hljs-keyword">\hline</span><br><span class="hljs-keyword">\multicolumn</span>&#123;1&#125;&#123;|c|&#125;&#123;Neutral&#125; <span class="hljs-built_in">&amp;</span> 0.06 <span class="hljs-built_in">&amp;</span> 7 <span class="hljs-built_in">&amp;</span> 21 <span class="hljs-built_in">&amp;</span> 15.6 <span class="hljs-built_in">&amp;</span> 0.06 <span class="hljs-built_in">&amp;</span> 5 <span class="hljs-built_in">&amp;</span> 27 <span class="hljs-built_in">&amp;</span> 15.7 <span class="hljs-keyword">\\</span> <span class="hljs-keyword">\hline</span><br><span class="hljs-keyword">\end</span>&#123;tabular&#125;<br><span class="hljs-keyword">\caption</span>&#123;<span class="hljs-keyword">\textbf</span>&#123;&#125;&#125;<br><span class="hljs-keyword">\label</span>&#123;2000Emissions&#125;<br><span class="hljs-keyword">\end</span>&#123;table&#125;<br><br><span class="hljs-keyword">\end</span>&#123;document&#125;<br></code></pre></td></tr></table></figure><h2 id="3-newcolumntypeæ˜¯å¦‚ä½•å·¥ä½œçš„å‘¢"><a class="markdownIt-Anchor" href="#3-newcolumntypeæ˜¯å¦‚ä½•å·¥ä½œçš„å‘¢"></a> 3. <code>newcolumntypeæ˜¯å¦‚ä½•å·¥ä½œçš„å‘¢?</code></h2><blockquote><p>è¯¦æƒ…å¯è§: <a href="https://tex.stackexchange.com/questions/257128/how-does-the-newcolumntype-command-work">https://tex.stackexchange.com/questions/257128/how-does-the-newcolumntype-command-work</a></p></blockquote><blockquote><p><code>\arraybackslash</code></p></blockquote><blockquote><p>As for <code>\arraybackslash</code>, the <code>\raggedright</code>, <code>\raggedleft</code>, and <code>\centering</code> declarations refine <code>\</code> in a way that conflicts with its use in a tabular or array environments. The command <code>\arraybackslash</code> (implemented in array and tabularx) restoresthe meaning of <code>\</code> for use in array and tabular (you would only need <code>\arraybackslash</code> for the last column).</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;figure class=&quot;highlight latex&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class</summary>
      
    
    
    
    <category term="æ•™ç¨‹" scheme="https://www.torch-fan.site/categories/%E6%95%99%E7%A8%8B/"/>
    
    <category term="æ–‡æ¡£æ’°å†™" scheme="https://www.torch-fan.site/categories/%E6%95%99%E7%A8%8B/%E6%96%87%E6%A1%A3%E6%92%B0%E5%86%99/"/>
    
    <category term="LaTex" scheme="https://www.torch-fan.site/categories/%E6%95%99%E7%A8%8B/%E6%96%87%E6%A1%A3%E6%92%B0%E5%86%99/LaTex/"/>
    
    
    <category term="LaTex" scheme="https://www.torch-fan.site/tags/LaTex/"/>
    
  </entry>
  
  <entry>
    <title>LaTexå°æŠ€å·§</title>
    <link href="https://www.torch-fan.site/2022/07/29/LaTex%E5%B0%8F%E6%8A%80%E5%B7%A7/"/>
    <id>https://www.torch-fan.site/2022/07/29/LaTex%E5%B0%8F%E6%8A%80%E5%B7%A7/</id>
    <published>2022-07-29T06:01:03.000Z</published>
    <updated>2022-11-15T02:27:36.102Z</updated>
    
    <content type="html"><![CDATA[<h1 id="1-ç¬¦å·"><a class="markdownIt-Anchor" href="#1-ç¬¦å·"></a> 1. ç¬¦å·</h1><blockquote><p><code>~</code>: æ³¢æµªå·è¡¨ç¤ºä¸€ä¸ªç©ºæ ¼, ä½†åˆä¸åªæ˜¯ä¸€ä¸ªç©ºæ ¼, æ³¢æµªå·å·¦å³çš„å†…å®¹ä¸å…è®¸æ¢è¡Œæˆªæ–­, åœ¨ç”¨<code>A~\cite&#123;name&#125;</code>å¼•ç”¨æ—¶, åå­—å’Œå¼•ç”¨å°±ä¸ä¼šå› æ¢è¡Œè€Œæˆªæ–­äº†.</p></blockquote><p><code>\checkmark</code>: <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">âœ“</mi></mrow><annotation encoding="application/x-tex">\checkmark</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69224em;vertical-align:0em;"></span><span class="mord amsrm">âœ“</span></span></span></span></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;1-ç¬¦å·&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#1-ç¬¦å·&quot;&gt;&lt;/a&gt; 1. ç¬¦å·&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;~&lt;/code&gt;: æ³¢æµªå·è¡¨ç¤ºä¸€ä¸ªç©ºæ ¼, ä½†åˆä¸åªæ˜¯ä¸€ä¸ªç©ºæ ¼, æ³¢æµªå·å·¦å³çš„å†…å®¹ä¸å…è®¸æ¢è¡Œæˆª</summary>
      
    
    
    
    <category term="æ•™ç¨‹" scheme="https://www.torch-fan.site/categories/%E6%95%99%E7%A8%8B/"/>
    
    <category term="æ–‡æ¡£æ’°å†™" scheme="https://www.torch-fan.site/categories/%E6%95%99%E7%A8%8B/%E6%96%87%E6%A1%A3%E6%92%B0%E5%86%99/"/>
    
    <category term="LaTex" scheme="https://www.torch-fan.site/categories/%E6%95%99%E7%A8%8B/%E6%96%87%E6%A1%A3%E6%92%B0%E5%86%99/LaTex/"/>
    
    
    <category term="LaTex" scheme="https://www.torch-fan.site/tags/LaTex/"/>
    
  </entry>
  
  <entry>
    <title>LaTexåŸºç¡€-Figure</title>
    <link href="https://www.torch-fan.site/2022/07/28/LaTex%E5%9F%BA%E7%A1%80-Figure/"/>
    <id>https://www.torch-fan.site/2022/07/28/LaTex%E5%9F%BA%E7%A1%80-Figure/</id>
    <published>2022-07-28T11:59:59.000Z</published>
    <updated>2022-11-15T02:27:36.102Z</updated>
    
    <content type="html"><![CDATA[<h1 id="1-å­å›¾"><a class="markdownIt-Anchor" href="#1-å­å›¾"></a> 1. å­å›¾</h1><blockquote><p>æ³¨æ„, å­å›¾å’Œæ­£å¸¸çš„figureä¹Ÿæ˜¯ä¸€æ ·æœ‰captionçš„, ä¹Ÿå¯ä»¥åŠ <code>\label</code>, ä¸ºäº†çªå‡ºé‡ç‚¹å°±ä¸æå¤æ‚äº†. ä¸‹é¢æ˜¯ä¸€èˆ¬è¦å¼•å…¥çš„package</p><p><code>\usepackages&#123;subcaption&#125;</code></p><p><code>\usepackage&#123;graphicx&#125;</code></p></blockquote><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\begin</span>&#123;figure&#125;<br>    <span class="hljs-keyword">\centering</span><br>    <span class="hljs-keyword">\begin</span>&#123;subfigure&#125;&#123;0.4<span class="hljs-keyword">\textwidth</span>&#125;<br>        <span class="hljs-keyword">\includegraphics</span>[width=<span class="hljs-keyword">\textwidth</span>]&#123;example-image&#125;<br>    <span class="hljs-keyword">\end</span>&#123;subfigure&#125;<br>    <span class="hljs-comment">% è¿™é‡Œå¾ˆå¾®å¦™, å¦‚æœæ²¡æœ‰è¿™ä¸ª\quad, ä¸¤ä¸ªå­å›¾ä¼šå‚ç›´å¹¶åˆ—, åŠ ä¸Šåå°±æ˜¯æ°´å¹³å¹¶åˆ—</span><br>    <span class="hljs-comment">% ä½¿ç”¨ \hfill ä¹Ÿèƒ½èµ·åˆ°è®©å­å›¾æ°´å¹³å¹¶åˆ—çš„ä½œç”¨ </span><br>    <span class="hljs-comment">% å½“ç„¶å¦‚æœæ°´å¹³æ‘†ä¸ä¸‹, å‰©ä½™çš„å›¾è¿˜æ˜¯ä¼šå»ä¸‹ä¸€è¡ŒæŒ¤</span><br>    <span class="hljs-keyword">\quad</span> <br>    <span class="hljs-keyword">\begin</span>&#123;subfigure&#125;&#123;0.4<span class="hljs-keyword">\textwidth</span>&#125;<br>        <span class="hljs-keyword">\includegraphics</span>[width=<span class="hljs-keyword">\textwidth</span>]&#123;example-image&#125;<br>    <span class="hljs-keyword">\end</span>&#123;subfigure&#125;<br>    <br>    <span class="hljs-keyword">\caption</span>&#123;The common architecture of a recurrent VAE. &#125;<br>    <span class="hljs-keyword">\label</span>&#123;fig:recurrent<span class="hljs-built_in">_</span>vae&#125;<br><span class="hljs-keyword">\end</span>&#123;figure&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;1-å­å›¾&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#1-å­å›¾&quot;&gt;&lt;/a&gt; 1. å­å›¾&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;æ³¨æ„, å­å›¾å’Œæ­£å¸¸çš„figureä¹Ÿæ˜¯ä¸€æ ·æœ‰captionçš„, ä¹Ÿå¯ä»¥åŠ &lt;code&gt;\label&lt;/cod</summary>
      
    
    
    
    <category term="æ•™ç¨‹" scheme="https://www.torch-fan.site/categories/%E6%95%99%E7%A8%8B/"/>
    
    <category term="æ–‡æ¡£æ’°å†™" scheme="https://www.torch-fan.site/categories/%E6%95%99%E7%A8%8B/%E6%96%87%E6%A1%A3%E6%92%B0%E5%86%99/"/>
    
    <category term="LaTex" scheme="https://www.torch-fan.site/categories/%E6%95%99%E7%A8%8B/%E6%96%87%E6%A1%A3%E6%92%B0%E5%86%99/LaTex/"/>
    
    
    <category term="LaTex" scheme="https://www.torch-fan.site/tags/LaTex/"/>
    
  </entry>
  
  <entry>
    <title>gitå·¥å…·ç”¨æ³•å°ç»“</title>
    <link href="https://www.torch-fan.site/2022/07/27/git%E5%B7%A5%E5%85%B7%E7%94%A8%E6%B3%95%E5%B0%8F%E7%BB%93/"/>
    <id>https://www.torch-fan.site/2022/07/27/git%E5%B7%A5%E5%85%B7%E7%94%A8%E6%B3%95%E5%B0%8F%E7%BB%93/</id>
    <published>2022-07-27T03:32:12.000Z</published>
    <updated>2022-11-15T02:27:36.101Z</updated>
    
    <content type="html"><![CDATA[<h1 id="1-submodule"><a class="markdownIt-Anchor" href="#1-submodule"></a> 1. <code>submodule</code></h1><blockquote><p>æœ‰æ—¶å€™, é‡åˆ°å¤æ‚çš„é¡¹ç›®ä¼šå­˜åœ¨submodule, è¦æ‹‰å–è¿™æ ·çš„ä»“åº“, éœ€è¦è¿™æ ·. (è‡³äºå¦‚ä½•ç»™è‡ªå·±çš„é¡¹ç›®æ·»åŠ ä¸€ä¸ªsubmodule, gitå®˜æ–¹ç»™äº†ä¾‹å­, å°±ä¸å¤åˆ¶äº†)</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">git pull remote main<br>git submodule update --init <span class="hljs-comment"># åˆå§‹åŒ–submoduleä»¥åŠæ‹‰å–å…¶ä»£ç </span><br>git submodule update &lt;submodule-name&gt; <span class="hljs-comment"># è·å–submoduleçš„è¿œç¨‹æ›´æ–°, ä¹Ÿå¯ä»¥ä¸æŒ‡å®šåå­—, å…¨éƒ¨æ›´æ–°.</span><br></code></pre></td></tr></table></figure><h1 id="2-commit"><a class="markdownIt-Anchor" href="#2-commit"></a> 2. <code>commit</code></h1><blockquote><p><code>-i</code> è¡¨ç¤ºè¿›å…¥äº¤äº’æ¨¡å¼</p><p><code>HEAD~10</code> è¡¨ç¤ºç›®æ ‡æ˜¯ä»HEADå‘å‰(æ›´æ—©)çš„10æ¬¡æäº¤</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git rebase -i HEAD~10<br></code></pre></td></tr></table></figure><p>éšåæ‰“å¼€ä¸€ä¸ªäº¤äº’ç•Œé¢, å°†<code>pick</code>éƒ½æ›¿æ¢ä¸º<code>squash</code>, !!! é™¤äº†æœ€é¡¶ä¸Šé‚£è¡Œçš„<code>pick</code>ä¿ç•™, é‚£æ˜¯<code>HEAD</code>æŒ‡é’ˆæ‰€æŒ‡å‘çš„æœ€æ–°æäº¤. æœ€åä¿å­˜æ–‡ä»¶é€€å‡ºå³å¯.</p><p>é€€å‡ºå, ä¼šè¿›å…¥å¦ä¸€ä¸ªæ–‡ä»¶, è¿™é‡Œæ˜¯ç¼–è¾‘commitçš„æäº¤ä¿¡æ¯çš„, æ¯ä¸ªåˆå¹¶çš„commitå…¶ä¿¡æ¯ä¼šè¢«åˆå¹¶åœ¨ä¸€èµ·, å› æ­¤æ˜¯å¦ä¿®æ”¹å¯ä»¥çœ‹éœ€æ±‚, ä¸€èˆ¬ç›´æ¥é€€å‡ºå°±è¡Œäº†.</p><p>è¿™é‡Œæ˜¯rebaseä¸­å…¶ä»–å¯ä¾›ä½¿ç”¨çš„å‘½ä»¤:</p><blockquote><p>å‘½ä»¤:<br />p, pick &lt;æäº¤&gt; = ä½¿ç”¨æäº¤</p><p>r, reword &lt;æäº¤&gt; = ä½¿ç”¨æäº¤ï¼Œä½†ç¼–è¾‘æäº¤è¯´æ˜</p><p>e, edit &lt;æäº¤&gt; = ä½¿ç”¨æäº¤ï¼Œä½†åœæ­¢ä»¥ä¾¿åœ¨ shell ä¸­ä¿®è¡¥æäº¤</p><p>s, squash &lt;æäº¤&gt; = ä½¿ç”¨æäº¤ï¼Œä½†æŒ¤å‹åˆ°å‰ä¸€ä¸ªæäº¤</p><p>f, fixup [-C | -c] &lt;æäº¤&gt; = ç±»ä¼¼äº â€œsquashâ€ï¼Œä½†åªä¿ç•™å‰ä¸€ä¸ªæäº¤<br />çš„æäº¤è¯´æ˜ï¼Œé™¤éä½¿ç”¨äº† -C å‚æ•°ï¼Œæ­¤æƒ…å†µä¸‹åˆ™åª<br />ä¿ç•™æœ¬æäº¤è¯´æ˜ã€‚ä½¿ç”¨ -c å’Œ -C ç±»ä¼¼ï¼Œä½†ä¼šæ‰“å¼€<br />ç¼–è¾‘å™¨ä¿®æ”¹æäº¤è¯´æ˜</p><p>x, exec &lt;å‘½ä»¤&gt; = ä½¿ç”¨ shell è¿è¡Œå‘½ä»¤ï¼ˆæ­¤è¡Œå‰©ä½™éƒ¨åˆ†ï¼‰</p><p>b, break = åœ¨æ­¤å¤„åœæ­¢ï¼ˆä½¿ç”¨ â€˜git rebase --continueâ€™ ç»§ç»­å˜åŸºï¼‰</p><p>d, drop &lt;æäº¤&gt; = åˆ é™¤æäº¤</p><p>l, label <label> = ä¸ºå½“å‰ HEAD æ‰“ä¸Šæ ‡è®°</p><p>t, reset <label> = é‡ç½® HEAD åˆ°è¯¥æ ‡è®°</p><p>m, merge [-C <commit> | -c <commit>] <label> [# <oneline>]<br />.       åˆ›å»ºä¸€ä¸ªåˆå¹¶æäº¤ï¼Œå¹¶ä½¿ç”¨åŸå§‹çš„åˆå¹¶æäº¤è¯´æ˜ï¼ˆå¦‚æœæ²¡æœ‰æŒ‡å®š<br />.       åŸå§‹æäº¤ï¼Œä½¿ç”¨æ³¨é‡Šéƒ¨åˆ†çš„ oneline ä½œä¸ºæäº¤è¯´æ˜ï¼‰ã€‚ä½¿ç”¨<br />.       -c &lt;æäº¤&gt; å¯ä»¥ç¼–è¾‘æäº¤è¯´æ˜ã€‚</p><p>å¯ä»¥å¯¹è¿™äº›è¡Œé‡æ–°æ’åºï¼Œå°†ä»ä¸Šè‡³ä¸‹æ‰§è¡Œã€‚</p><p>å¦‚æœæ‚¨åœ¨è¿™é‡Œåˆ é™¤ä¸€è¡Œï¼Œå¯¹åº”çš„æäº¤å°†ä¼šä¸¢å¤±ã€‚</p><p>ç„¶è€Œï¼Œå¦‚æœæ‚¨åˆ é™¤å…¨éƒ¨å†…å®¹ï¼Œå˜åŸºæ“ä½œå°†ä¼šç»ˆæ­¢ã€‚</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;1-submodule&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#1-submodule&quot;&gt;&lt;/a&gt; 1. &lt;code&gt;submodule&lt;/code&gt;&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;æœ‰æ—¶å€™, é‡åˆ°å¤æ‚çš„é¡¹ç›®ä¼šå­˜åœ¨sub</summary>
      
    
    
    
    <category term="å·¥å…·" scheme="https://www.torch-fan.site/categories/%E5%B7%A5%E5%85%B7/"/>
    
    <category term="Git" scheme="https://www.torch-fan.site/categories/%E5%B7%A5%E5%85%B7/Git/"/>
    
    <category term="åŸºç¡€" scheme="https://www.torch-fan.site/categories/%E5%B7%A5%E5%85%B7/Git/%E5%9F%BA%E7%A1%80/"/>
    
    
    <category term="Git" scheme="https://www.torch-fan.site/tags/Git/"/>
    
  </entry>
  
  <entry>
    <title>Rustä½¿ç”¨ä¸­é‡åˆ°çš„é—®é¢˜</title>
    <link href="https://www.torch-fan.site/2022/07/26/Rust%E4%BD%BF%E7%94%A8%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/"/>
    <id>https://www.torch-fan.site/2022/07/26/Rust%E4%BD%BF%E7%94%A8%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/</id>
    <published>2022-07-26T02:17:18.000Z</published>
    <updated>2022-11-15T02:27:36.101Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>è¿™é‡Œæ•´ç†çš„é—®é¢˜æœ‰å¯èƒ½å¹¶éé—®é¢˜, è€Œæ˜¯ä½¿ç”¨è¿‡ç¨‹ä¸­å¯¹è¯­æ³•\rustç‰ˆæœ¬ç‰¹æ€§çš„ä¸ç†Ÿæ‚‰å¯¼è‡´, ä¼šå…ˆè¡Œè®°å½•, ç­‰äº†è§£å…¶èƒŒåçš„åŸç†ä¼šè¡¥å……è§£é‡Š.</p></blockquote><h1 id="1-ç¼–ç¨‹æ—¥å¸¸"><a class="markdownIt-Anchor" href="#1-ç¼–ç¨‹æ—¥å¸¸"></a> 1. ç¼–ç¨‹æ—¥å¸¸</h1><h2 id="1-ç±»å‹ä¸åŒ¹é…"><a class="markdownIt-Anchor" href="#1-ç±»å‹ä¸åŒ¹é…"></a> 1. ç±»å‹ä¸åŒ¹é…:</h2><blockquote><p>åœ¨ä½¿ç”¨ä¸€ä¸ªç±»å‹æ—¶, é€šå¸¸ä¼šé‡‡ç”¨<code>use</code>è¯­å¥, ç„¶è€Œåˆæœ‰ä¸€äº›åº“å®ƒä¸ä½¿ç”¨<code>use</code>è€Œç›´æ¥ä»¥å…¨è·¯å¾„å¼•ç”¨ç±»å‹,åœ¨è°ƒç”¨å‡½æ•°æ—¶, æ˜æ˜æ˜¯åŒä¸€ä¸ªç±»å‹,ç¡®å› ä¸ºä¸€ä¸ªæ˜¯ç®€å†™, ä¸€ä¸ªæ˜¯å…¨è·¯å¾„,å¯¼è‡´æ— æ³•åŒ¹é…ç±»å‹è€ŒæŠ¥é”™.</p></blockquote><p>è¿™æ—¶, è¦æ£€æŸ¥ä¸€ä¸‹, æ‰€ä½¿ç”¨çš„å‡½æ•°æ¥è‡ªå“ªä¸ªåº“(ç”¨<code>A</code>æŒ‡ä»£), ç„¶åå˜é‡çš„ç±»å‹æ¥è‡ªå“ªä¸ªåº“(ç”¨<code>B</code>), è¿™é‡Œ<code>A</code>å¿…å®šä½¿ç”¨äº†<code>B</code>, è€Œä½ æ‰€ä½¿ç”¨çš„<code>B</code>ä¸<code>A</code>ä½¿ç”¨çš„<code>B</code>ç‰ˆæœ¬ä¸åŒ. è¿™æ—¶å€™å°±è¦å»çœ‹<code>B</code>çš„ç‰ˆæœ¬, æŠŠä½ ç”¨çš„ç‰ˆæœ¬æ”¹ä¸€ä¸‹, ä¸è¿‡è¿™åœ¨rust 2021editionå­˜åœ¨, éœ€è¦èƒ½å°½å¿«æ”¹è¿›.</p><h2 id="2-cargo-updateæŠ¥é”™"><a class="markdownIt-Anchor" href="#2-cargo-updateæŠ¥é”™"></a> 2. <code>cargo update</code>æŠ¥é”™</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">Updating crates.io index<br>error: failed to select a version <span class="hljs-keyword">for</span> the requirement `vmm-sys-util = <span class="hljs-string">&quot;^0.10.0&quot;</span>`<br>candidate versions found <span class="hljs-built_in">which</span> didn<span class="hljs-string">&#x27;t match: 0.9.0</span><br><span class="hljs-string">location searched: crates.io index</span><br><span class="hljs-string">required by package `dbs-legacy-devices v0.1.0 (/home/fanqiliang/data/project/active/dbs/crates/dbs-legacy-devices)`</span><br></code></pre></td></tr></table></figure><p>è¿™ç§æƒ…å†µæ˜¯: ä½ çš„é¡¹ç›®æ˜¯ä¸€ä¸ªworkspace, ç„¶åä¸åŒcomponentç”¨äº†ç›¸åŒçš„crate, ä½†æ˜¯ä¹‹é—´æœ‰ä¾èµ–å…³ç³», åªèƒ½æ‰‹åŠ¨æ”¹äº†â€¦</p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;è¿™é‡Œæ•´ç†çš„é—®é¢˜æœ‰å¯èƒ½å¹¶éé—®é¢˜, è€Œæ˜¯ä½¿ç”¨è¿‡ç¨‹ä¸­å¯¹è¯­æ³•\rustç‰ˆæœ¬ç‰¹æ€§çš„ä¸ç†Ÿæ‚‰å¯¼è‡´, ä¼šå…ˆè¡Œè®°å½•, ç­‰äº†è§£å…¶èƒŒåçš„åŸç†ä¼šè¡¥å……è§£é‡Š.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;1-ç¼–ç¨‹æ—¥å¸¸&quot;&gt;&lt;a class=&quot;markdownIt-Anc</summary>
      
    
    
    
    <category term="ç¼–ç¨‹è¯­è¨€" scheme="https://www.torch-fan.site/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/"/>
    
    <category term="Rust" scheme="https://www.torch-fan.site/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Rust/"/>
    
    <category term="åŸºç¡€" scheme="https://www.torch-fan.site/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Rust/%E5%9F%BA%E7%A1%80/"/>
    
    
  </entry>
  
  <entry>
    <title>RuståŸºç¡€ç”¨æ³•</title>
    <link href="https://www.torch-fan.site/2022/07/21/Rust%E5%9F%BA%E7%A1%80%E7%94%A8%E6%B3%95/"/>
    <id>https://www.torch-fan.site/2022/07/21/Rust%E5%9F%BA%E7%A1%80%E7%94%A8%E6%B3%95/</id>
    <published>2022-07-21T14:42:37.000Z</published>
    <updated>2022-11-15T02:27:36.099Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>è¿˜æ˜¯è§‰å¾—åªæœ‰åˆ—å‡ºå‚è€ƒèµ„æ–™çš„å¿…è¦, è‡³äºå¿…é¡»å¼ºè°ƒçš„ç»†èŠ‚æ‰ä¼šä¸»åŠ¨åˆ—å‡º</p></blockquote><h1 id="1-cargo"><a class="markdownIt-Anchor" href="#1-cargo"></a> 1. Cargo</h1><blockquote><p>å‚è€ƒèµ„æ–™: <a href="https://doc.rust-lang.org/cargo/index.html">https://doc.rust-lang.org/cargo/index.html</a></p></blockquote><p>å¦‚æœéœ€è¦æ·»åŠ ä¸€ä¸ªä¾èµ–, ä»¥<a href="https://docs.rs/clap/latest/clap/">clap</a>ä¸ºä¾‹:</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">cargo <span class="hljs-built_in">add</span> clap <span class="hljs-comment">--features derive</span><br></code></pre></td></tr></table></figure><h1 id="2-rustup"><a class="markdownIt-Anchor" href="#2-rustup"></a> 2. Rustup</h1><blockquote><p>å‚è€ƒèµ„æ–™: <a href="https://rust-lang.github.io/rustup/index.html">https://rust-lang.github.io/rustup/index.html</a></p></blockquote><h1 id="crates"><a class="markdownIt-Anchor" href="#crates"></a> Crates</h1><table><thead><tr><th style="text-align:center">name</th><th style="text-align:center">doc</th><th style="text-align:center">desc</th></tr></thead><tbody><tr><td style="text-align:center">clap</td><td style="text-align:center"><a href="https://docs.rs/clap">https://docs.rs/clap</a></td><td style="text-align:center">çƒ­é—¨çš„CLIå‚æ•°è§£æåº“</td></tr></tbody></table><h1 id="3-å¸¸è§ç”¨æ³•"><a class="markdownIt-Anchor" href="#3-å¸¸è§ç”¨æ³•"></a> 3. å¸¸è§ç”¨æ³•:</h1><h2 id="31-raw-string"><a class="markdownIt-Anchor" href="#31-raw-string"></a> 3.1 raw string</h2><blockquote><p>raw string:</p><p><code>r#&quot;...&quot;#</code> ä½¿ç”¨r#â€¦# åŒ…è£¹çš„å­—ç¬¦ä¸²å†…å®¹ä¸ä¼šè¢«è½¬ä¹‰</p></blockquote><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">let</span> <span class="hljs-variable">data</span> = <span class="hljs-string">r#&quot;</span><br><span class="hljs-string">        &#123;</span><br><span class="hljs-string">            &quot;name&quot;: &quot;John Doe&quot;,</span><br><span class="hljs-string">            &quot;age&quot;: 43,</span><br><span class="hljs-string">            &quot;phones&quot;: [</span><br><span class="hljs-string">                &quot;+44 1234567&quot;,</span><br><span class="hljs-string">                &quot;+44 2345678&quot;</span><br><span class="hljs-string">            ]</span><br><span class="hljs-string">        &#125;&quot;#</span>;<br></code></pre></td></tr></table></figure><h2 id="32-socket"><a class="markdownIt-Anchor" href="#32-socket"></a> 3.2 socket</h2><blockquote><p>Socketç¼–ç¨‹: æ³¨æ„, socketé€šä¿¡, åªæœ‰ç»‘å®šäº†ä¸€ä¸ªsocketæ‰èƒ½ç›‘å¬æ¥å—æ¶ˆæ¯, å³: åªæœ‰socketæ˜¯å•å‘é€šä¿¡çš„</p></blockquote><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><code class="hljs rust"><br><span class="hljs-keyword">use</span> std::thread;<br><span class="hljs-keyword">use</span> std::os::unix::net::&#123;UnixStream, UnixListener&#125;;<br><span class="hljs-keyword">use</span> std::println;<br><span class="hljs-keyword">use</span> std::io::prelude::*;<br><span class="hljs-keyword">use</span> std::time::Duration;<br><span class="hljs-keyword">use</span> std::io::&#123;BufWriter, BufReader, Read&#125;;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">handle_client</span>(stream:  UnixStream) &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">read_stream</span> = BufReader::<span class="hljs-title function_ invoke__">new</span>(&amp;stream);<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">res</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">new</span>();<br>    <span class="hljs-comment">// for line in read_stream.lines() &#123;</span><br>    <span class="hljs-comment">//     println!(&quot;Server: &#123;&#125;&quot;, line.unwrap());</span><br>    <span class="hljs-comment">// &#125;</span><br>    <span class="hljs-comment">// read_lines is not recommended: as a new line ch is required.</span><br>    read_stream.<span class="hljs-title function_ invoke__">read_to_string</span>(&amp;<span class="hljs-keyword">mut</span> res).<span class="hljs-title function_ invoke__">unwrap</span>();<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Server: &#123;res:?&#125;&quot;</span>);<br><br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() <span class="hljs-punctuation">-&gt;</span> std::io::<span class="hljs-type">Result</span>&lt;()&gt; &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">socket</span> = std::path::Path::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-string">&quot;/tmp/dbs.socks&quot;</span>);<br>    <span class="hljs-keyword">if</span> socket.<span class="hljs-title function_ invoke__">exists</span>() &#123;<br>        std::fs::<span class="hljs-title function_ invoke__">remove_file</span>(socket).<span class="hljs-title function_ invoke__">unwrap</span>();<br>    &#125;<br><br>    <span class="hljs-comment">// server</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">t1</span> = thread::<span class="hljs-title function_ invoke__">spawn</span>(|| &#123;<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">listener</span> = UnixListener::<span class="hljs-title function_ invoke__">bind</span>(<span class="hljs-string">&quot;/tmp/dbs.socks&quot;</span>).<span class="hljs-title function_ invoke__">unwrap</span>();<br>        <span class="hljs-keyword">for</span> <span class="hljs-title class_">mut</span> stream <span class="hljs-keyword">in</span> listener.<span class="hljs-title function_ invoke__">incoming</span>() &#123;<br>            <span class="hljs-keyword">match</span> stream &#123;<br>                <span class="hljs-title function_ invoke__">Ok</span>(stream ) =&gt; &#123;<br>                    <span class="hljs-comment">/* connection succeeded */</span><br>                    thread::<span class="hljs-title function_ invoke__">spawn</span>(|| <span class="hljs-title function_ invoke__">handle_client</span>(stream));<br>                    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;bingo&quot;</span>);<br>                &#125;<br>                <span class="hljs-title function_ invoke__">Err</span>(err) =&gt; &#123;<br>                    <span class="hljs-comment">/* connection failed */</span><br>                    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;:?&#125;&quot;</span>, err);<br>                    <span class="hljs-keyword">break</span>;<br>                &#125;<br>            &#125;<br>        &#125;<br><br>    &#125;);<br><br>    thread::<span class="hljs-title function_ invoke__">sleep</span>(Duration::<span class="hljs-title function_ invoke__">from_millis</span>(<span class="hljs-number">2000</span>));<br><br>    <span class="hljs-comment">// client</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">t2</span> =thread::<span class="hljs-title function_ invoke__">spawn</span>(|| &#123;<br>        <span class="hljs-comment">// println!(&quot;&#123;&#125;&quot;, soc.)</span><br>        <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..<span class="hljs-number">10</span> &#123;<br><br>            <span class="hljs-comment">// each request for one connection (Otherwise, the streaming is recognized as one transfer process)</span><br>            <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">soc</span> = UnixStream::<span class="hljs-title function_ invoke__">connect</span>(<span class="hljs-string">&quot;/tmp/dbs.socks&quot;</span>).<span class="hljs-title function_ invoke__">unwrap</span>();<br>            soc.<span class="hljs-title function_ invoke__">write_all</span>(<span class="hljs-string">b&quot;Hello! dsa\n&quot;</span>).<span class="hljs-title function_ invoke__">unwrap</span>();<br>            <span class="hljs-comment">// let mut reader = BufReader::new(&amp;soc);</span><br>            <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;send&quot;</span>);<br>            thread::<span class="hljs-title function_ invoke__">sleep</span>(Duration::<span class="hljs-title function_ invoke__">from_millis</span>(<span class="hljs-number">200</span>));<br>        &#125;<br><br>    &#125;);<br><br>    t1.<span class="hljs-title function_ invoke__">join</span>().<span class="hljs-title function_ invoke__">unwrap</span>();<br>    t2.<span class="hljs-title function_ invoke__">join</span>().<span class="hljs-title function_ invoke__">unwrap</span>();<br><br><br>    <span class="hljs-title function_ invoke__">Ok</span>(())<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="33-é”™è¯¯å¤„ç†"><a class="markdownIt-Anchor" href="#33-é”™è¯¯å¤„ç†"></a> 3.3 é”™è¯¯å¤„ç†</h2><blockquote><p><code>?</code>å¯ä»¥ç”¨åœ¨Optionåé¢, ä¹Ÿå¯ä»¥ç”¨åœ¨Resultåé¢, ä½†åœ¨ä¸€ä¸ªå‡½æ•°ä¸­, å¦‚æœè¿”å›å€¼æ˜¯Result, åˆ™ä¸èƒ½ç”¨åœ¨Optionå, å¦åˆ™æœ‰è¿”å›Noneçš„é£é™©, ç±»å‹ä¸ä¸€è‡´, ä½†å¯ä»¥ç”¨<code>ok_or</code>æ¥è§£å†³</p></blockquote><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::io::ErrorKind;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">test</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;(), std::io::Error&gt; &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">res</span> = <span class="hljs-title function_ invoke__">do</span>(<span class="hljs-title function_ invoke__">A</span>().<span class="hljs-title function_ invoke__">ok_or</span>(ErrorKin::AddrInUse)?)?;<br>    res<br>&#125;<br></code></pre></td></tr></table></figure><p>é€šè¿‡ok_or, å°†Optionçš„çŸ›ç›¾ä¸Šå‡åˆ°Errorå±‚é¢, å°±å¥½å¤„ç†çš„å¾—å¤šäº†.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;è¿˜æ˜¯è§‰å¾—åªæœ‰åˆ—å‡ºå‚è€ƒèµ„æ–™çš„å¿…è¦, è‡³äºå¿…é¡»å¼ºè°ƒçš„ç»†èŠ‚æ‰ä¼šä¸»åŠ¨åˆ—å‡º&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;1-cargo&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#1-cargo&quot;&gt;&lt;/a&gt; 1. Car</summary>
      
    
    
    
    <category term="ç¼–ç¨‹è¯­è¨€" scheme="https://www.torch-fan.site/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/"/>
    
    <category term="Rust" scheme="https://www.torch-fan.site/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Rust/"/>
    
    <category term="åŸºç¡€" scheme="https://www.torch-fan.site/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Rust/%E5%9F%BA%E7%A1%80/"/>
    
    
  </entry>
  
  <entry>
    <title>Ubuntuä¸Šä½¿ç”¨docker</title>
    <link href="https://www.torch-fan.site/2022/07/21/Ubuntu%E4%B8%8A%E4%BD%BF%E7%94%A8docker/"/>
    <id>https://www.torch-fan.site/2022/07/21/Ubuntu%E4%B8%8A%E4%BD%BF%E7%94%A8docker/</id>
    <published>2022-07-21T12:12:24.000Z</published>
    <updated>2022-11-15T02:27:36.100Z</updated>
    
    <content type="html"><![CDATA[<h1 id="1-å®‰è£…docker"><a class="markdownIt-Anchor" href="#1-å®‰è£…docker"></a> 1. å®‰è£…Docker</h1><h2 id="11-å®‰è£…kvm"><a class="markdownIt-Anchor" href="#11-å®‰è£…kvm"></a> 1.1 å®‰è£…KVM</h2><blockquote><p>å‚è€ƒ: <a href="https://ubuntu.com/blog/kvm-hyphervisor">https://ubuntu.com/blog/kvm-hyphervisor</a></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo apt -y install bridge-utils cpu-checker libvirt-clients libvirt-daemon qemu qemu-kvm<br></code></pre></td></tr></table></figure><blockquote><p>æ£€æŸ¥è™šæ‹ŸåŒ–åŠŸèƒ½</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">kvm-ok<br></code></pre></td></tr></table></figure><h2 id="12-å®‰è£…docker"><a class="markdownIt-Anchor" href="#12-å®‰è£…docker"></a> 1.2 å®‰è£…Docker</h2><blockquote><p>å‚è€ƒèµ„æ–™: <a href="https://docs.docker.com/engine/install/ubuntu/">https://docs.docker.com/engine/install/ubuntu/</a></p><p>æˆ‘å¯¹Docker Desktopå¹¶ä¸æ„Ÿå…´è¶£, å› æ­¤é€‰æ‹©å®‰è£…æ— å›¾å½¢ç•Œé¢çš„<code>Docker Engine</code></p></blockquote><ol><li>å¸è½½æ—§ç‰ˆæœ¬</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo apt-get remove docker docker-engine docker.io containerd runc<br></code></pre></td></tr></table></figure><ol start="2"><li>è®¾ç½®è½¯ä»¶æº</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo apt update<br>sudo apt install ca-certificates curl gnupg lsb-release<br>sudo <span class="hljs-built_in">mkdir</span> -p /etc/apt/keyrings<br>curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg<br><span class="hljs-built_in">echo</span> \<br>  <span class="hljs-string">&quot;deb [arch=<span class="hljs-subst">$(dpkg --print-architecture)</span> signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \</span><br><span class="hljs-string">  <span class="hljs-subst">$(lsb_release -cs)</span> stable&quot;</span> | sudo <span class="hljs-built_in">tee</span> /etc/apt/sources.list.d/docker.list &gt; /dev/null<br>sudo apt-get update<br></code></pre></td></tr></table></figure><ol start="3"><li>å®‰è£…Docker Engine</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo apt-get install docker-ce docker-ce-cli containerd.io docker-compose-plugin<br></code></pre></td></tr></table></figure><ol start="4"><li>é…ç½®æƒé™</li></ol><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">sudo groupadd docker <br>sudo groupadd libvirt<br>sudo groupadd kvm<br>sudo adduser $<span class="hljs-keyword">USER</span> <span class="hljs-title">docker</span><br>sudo adduser $<span class="hljs-keyword">USER</span> <span class="hljs-title">libvirt</span><br>sudo adduser $<span class="hljs-keyword">USER</span> <span class="hljs-title">kvm</span><br>newgrp kvm<br>newgrp docker<br>newgrp libvirt<br></code></pre></td></tr></table></figure><blockquote><p><code>newgrp</code>ç”¨äºé‡æ–°ä»¥å¯¹åº”ç¾¤ç»„èº«ä»½ç™»é™†</p></blockquote><h1 id="2-docker-çš„å¸¸ç”¨å‘½ä»¤"><a class="markdownIt-Anchor" href="#2-docker-çš„å¸¸ç”¨å‘½ä»¤"></a> 2. Docker çš„å¸¸ç”¨å‘½ä»¤</h1><p>æ„å»ºé•œåƒ</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml">docker build -f <span class="hljs-tag">&lt;<span class="hljs-name">dockerfile</span>&gt;</span> -t <span class="hljs-tag">&lt;<span class="hljs-name">image_name:tag</span>&gt;</span> .<br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;1-å®‰è£…docker&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#1-å®‰è£…docker&quot;&gt;&lt;/a&gt; 1. å®‰è£…Docker&lt;/h1&gt;
&lt;h2 id=&quot;11-å®‰è£…kvm&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; hre</summary>
      
    
    
    
    <category term="è®¡ç®—æœºåŸºç¡€" scheme="https://www.torch-fan.site/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/"/>
    
    <category term="æ“ä½œç³»ç»Ÿ" scheme="https://www.torch-fan.site/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"/>
    
    <category term="è™šæ‹ŸåŒ–åº”ç”¨" scheme="https://www.torch-fan.site/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E8%99%9A%E6%8B%9F%E5%8C%96%E5%BA%94%E7%94%A8/"/>
    
    <category term="Docker" scheme="https://www.torch-fan.site/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E8%99%9A%E6%8B%9F%E5%8C%96%E5%BA%94%E7%94%A8/Docker/"/>
    
    
  </entry>
  
  <entry>
    <title>ç½‘ç«™çš„Header--å®‰å…¨è®¾ç½®</title>
    <link href="https://www.torch-fan.site/2022/07/21/%E7%BD%91%E7%AB%99%E7%9A%84%E5%AE%89%E5%85%A8%E8%AE%BE%E7%BD%AE/"/>
    <id>https://www.torch-fan.site/2022/07/21/%E7%BD%91%E7%AB%99%E7%9A%84%E5%AE%89%E5%85%A8%E8%AE%BE%E7%BD%AE/</id>
    <published>2022-07-21T09:37:21.000Z</published>
    <updated>2022-11-15T02:27:36.101Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>å‚è€ƒèµ„æ–™: <a href="https://infosec.mozilla.org/guidelines/web_security#content-security-policy">https://infosec.mozilla.org/guidelines/web_security#content-security-policy</a></p></blockquote><p>è¿™æ˜¯æˆ‘ä¸»é¡µçš„CSPè®¾ç½®, CSPçš„è®¾ç½®å¯ä»¥æœ‰æ•ˆé˜²æ­¢XSS. å¦‚éœ€ä½¿ç”¨, åªè¦æ›¿æ¢æˆ–æ·»åŠ è‡ªå·±éœ€è¦çš„åŸŸåå³å¯~</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;Content-Security-Policy&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;img-src &#x27;self&#x27; image.torch-fan.site img1.imgtp.com;</span></span><br><span class="hljs-string"><span class="hljs-tag">    script-src &#x27;unsafe-inline&#x27; &#x27;self&#x27;lib.baomitu.com at.alicdn.com;</span></span><br><span class="hljs-string"><span class="hljs-tag">    style-src &#x27;self&#x27; &#x27;unsafe-inline&#x27; at.alicdn.com lib.baomitu.com;</span></span><br><span class="hljs-string"><span class="hljs-tag">    media-src &#x27;self&#x27; blob:;</span></span><br><span class="hljs-string"><span class="hljs-tag">    worker-src &#x27;self&#x27; blob:;</span></span><br><span class="hljs-string"><span class="hljs-tag">    object-src &#x27;self&#x27; &quot;</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ä½†æ˜¯, å¯ä»¥çœ‹åˆ°<code>script-src</code>ä¸­æœ‰<code>unsafe-inline</code>, è¿™ä»ç„¶ä¸æ˜¯éå¸¸å®‰å…¨, å› æ­¤å¯ä»¥å»æ‰, ç„¶åæ·»åŠ scriptçš„hashå€¼(ä¸ç”¨æ‹…å¿ƒä¸çŸ¥é“, æµè§ˆå™¨çš„consoleä¸­ä¼šæ‰“å°è¢«å±è”½çš„javascriptè„šæœ¬çš„hashå€¼, å¤åˆ¶ç²˜è´´å³å¯):</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;Content-Security-Policy&quot;</span></span><br><span class="hljs-tag"><span class="hljs-attr">content</span>=<span class="hljs-string">&quot;img-src &#x27;self&#x27; imagebed.torch-fan.site img1.imgtp.com;</span></span><br><span class="hljs-string"><span class="hljs-tag">script-src  &#x27;self&#x27;lib.baomitu.com at.alicdn.com &#x27;sha256-u0AitIxF7N0hYtvjq/jQbABXtOYAsJnJeCFoRizdaDM=&#x27; &#x27;sha256-cPZda3lIu6/tDfdRIA6fN74jCn3QXC9sg4vsBi+VW6w=&#x27; &#x27;sha256-gX0IeNsFB1Hts7cNk8JTGzzl9RcNAI+59T2fVUJBw1I=&#x27;;</span></span><br><span class="hljs-string"><span class="hljs-tag">style-src &#x27;self&#x27; at.alicdn.com lib.baomitu.com &#x27;sha256-quaYMDAFArRHzQDsZzJMSjqcQCtz+UUgFIbN2a8TIQc=&#x27; &#x27;sha256-NK4ORibhZQrqK59KJ1o+jAxvEYk2UPVOV0Wgggbfaek=&#x27;;</span></span><br><span class="hljs-string"><span class="hljs-tag">media-src &#x27;self&#x27; blob:;</span></span><br><span class="hljs-string"><span class="hljs-tag">worker-src &#x27;self&#x27; blob:;</span></span><br><span class="hljs-string"><span class="hljs-tag">object-src &#x27;self&#x27; &quot;</span>&gt;</span><br></code></pre></td></tr></table></figure><p>è¿™ç§æ–¹æ³•ä¹Ÿæœ‰ä¸ªç¼ºé™·, å¯¹äºéœ€è¦åå¤æ„å»ºçš„ç½‘ç«™, å†…è”scriptçš„hashå€¼å¹¶éä¸€æˆä¸å˜çš„, æ­¤æ—¶å°±éœ€è¦ç”¨<code>nonce-&lt;v&gt;</code></p><blockquote><p>Nonces æ˜¯é€šè¿‡åœ¨ CSP ä¸­æŒ‡å®šå…è®¸èµ„æºçš„åºå·ï¼Œè¾¾åˆ°é™åˆ¶éæ³• inline ä»£ç çš„ç›®çš„ã€‚åªæœ‰ä¸ CSP ç­–ç•¥ä¸­åºå·ä¸€è‡´çš„ä»£ç å¯ä»¥æ‰§è¡Œï¼Œå…·ä½“ä½¿ç”¨æ–¹å¼å¦‚ä¸‹(CSSå°±æ²¡å¿…è¦æå®‰å…¨äº†-æˆ–è€…è¯´æ²¡é‚£ä¹ˆé‡è¦)ï¼š</p><p><code>Content-Security-Policy: script-src 'nonce-1'</code></p><p><code>&lt;script nonce=&quot;1&quot;&gt;alert(0);&lt;/script&gt;</code></p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;Content-Security-Policy&quot;</span></span><br><span class="hljs-tag"><span class="hljs-attr">content</span>=<span class="hljs-string">&quot;img-src &#x27;self&#x27; imagebed.torch-fan.site img1.imgtp.com;</span></span><br><span class="hljs-string"><span class="hljs-tag">script-src &#x27;self&#x27; lib.baomitu.com at.alicdn.com utteranc.es &#x27;nonce-1&#x27; &#x27;nonce-2&#x27; &#x27;nonce-3&#x27; &#x27;nonce-4&#x27; &#x27;nonce-5&#x27; &#x27;nonce-6&#x27; &#x27;nonce-7&#x27; &#x27;nonce-8&#x27; &#x27;nonce-9&#x27; &#x27;nonce-10&#x27; &#x27;nonce-11&#x27; &#x27;nonce-12&#x27; &#x27;nonce-13&#x27; &#x27;nonce-14&#x27;;</span></span><br><span class="hljs-string"><span class="hljs-tag">style-src &#x27;self&#x27; &#x27;unsafe-inline&#x27; at.alicdn.com lib.baomitu.com;</span></span><br><span class="hljs-string"><span class="hljs-tag">media-src &#x27;self&#x27; blob:;</span></span><br><span class="hljs-string"><span class="hljs-tag">worker-src &#x27;self&#x27; blob:;</span></span><br><span class="hljs-string"><span class="hljs-tag">object-src &#x27;self&#x27; &quot;</span>&gt;</span><br></code></pre></td></tr></table></figure><p>æœ€å, æ ¹æ®<a href="https://observatory.mozilla.org/analyze/www.torch-fan.site">mozilla observatory</a>çš„ç½‘ç«™æ‰«æç»“æœ, æœ€ç»ˆç½‘ç«™çš„å®‰å…¨è®¾ç½®å¦‚ä¸‹:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;Content-Security-Policy&quot;</span></span><br><span class="hljs-tag"><span class="hljs-attr">content</span>=<span class="hljs-string">&quot;default-src &#x27;none&#x27;; form-action &#x27;none&#x27;; base-uri &#x27;self&#x27;;</span></span><br><span class="hljs-string"><span class="hljs-tag">img-src &#x27;self&#x27; imagebed.torch-fan.site img1.imgtp.com;</span></span><br><span class="hljs-string"><span class="hljs-tag">script-src &#x27;self&#x27; lib.baomitu.com at.alicdn.com utteranc.es &#x27;nonce-1&#x27; &#x27;nonce-2&#x27; &#x27;nonce-3&#x27; &#x27;nonce-4&#x27; &#x27;nonce-5&#x27; &#x27;nonce-6&#x27; &#x27;nonce-7&#x27; &#x27;nonce-8&#x27; &#x27;nonce-9&#x27; &#x27;nonce-10&#x27; &#x27;nonce-11&#x27; &#x27;nonce-12&#x27; &#x27;nonce-13&#x27; &#x27;nonce-14&#x27;;</span></span><br><span class="hljs-string"><span class="hljs-tag">style-src &#x27;self&#x27; &#x27;unsafe-inline&#x27; at.alicdn.com lib.baomitu.com;</span></span><br><span class="hljs-string"><span class="hljs-tag">media-src &#x27;self&#x27; blob:;</span></span><br><span class="hljs-string"><span class="hljs-tag">worker-src &#x27;self&#x27; blob:;</span></span><br><span class="hljs-string"><span class="hljs-tag">object-src &#x27;self&#x27;;</span></span><br><span class="hljs-string"><span class="hljs-tag">font-src &#x27;self&#x27; lib.baomitu.com at.alicdn.com data:;</span></span><br><span class="hljs-string"><span class="hljs-tag">frame-src &#x27;self&#x27; utteranc.es; &quot;</span>&gt;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;å‚è€ƒèµ„æ–™: &lt;a href=&quot;https://infosec.mozilla.org/guidelines/web_security#content-security-policy&quot;&gt;https://infosec.mozilla.org/guid</summary>
      
    
    
    
    <category term="æ”¶è—" scheme="https://www.torch-fan.site/categories/%E6%94%B6%E8%97%8F/"/>
    
    
  </entry>
  
  <entry>
    <title>Modules</title>
    <link href="https://www.torch-fan.site/2022/07/21/modules/"/>
    <id>https://www.torch-fan.site/2022/07/21/modules/</id>
    <published>2022-07-21T07:16:06.000Z</published>
    <updated>2022-11-15T02:27:36.100Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>å‚è€ƒèµ„æ–™: <a href="https://doc.rust-lang.org/reference/items/modules.html">https://doc.rust-lang.org/reference/items/modules.html</a></p></blockquote><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs oxygene">Syntax:<br><span class="hljs-keyword">Module</span> :<br>      <span class="hljs-keyword">unsafe</span>? <span class="hljs-keyword">mod</span> IDENTIFIER <span class="hljs-punctuation">;</span><br>   | <span class="hljs-keyword">unsafe</span>? <span class="hljs-keyword">mod</span> IDENTIFIER <span class="hljs-comment">&#123;</span><br><span class="hljs-comment">        InnerAttribute*</span><br><span class="hljs-comment">        Item*</span><br><span class="hljs-comment">      &#125;</span><br></code></pre></td></tr></table></figure><p><code>module</code>å’Œç±»å‹äº«æœ‰ç›¸åŒçš„å‘½åç©ºé—´, ä¸èƒ½å‡ºç°é‡åçš„ç°è±¡. <code>unsafe</code>å…³é”®è¯åœ¨rustå¾ˆå¤šåœ°æ–¹éƒ½å¯ä»¥ç”¨, å…¶è¯¦ç»†ä½œç”¨ç•™å¾…åç»­è¡¥å…….<br />ä¸€ä¸ª<code>module</code>é€šå¸¸ç”±èŠ±æ‹¬å·çš„å†…å®¹è¿›è¡Œå®šä¹‰, å¦‚:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs rust"><br><span class="hljs-meta">#![allow(unused)]</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br><span class="hljs-keyword">mod</span> math &#123;<br>    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Complex</span> = (<span class="hljs-type">f64</span>, <span class="hljs-type">f64</span>);<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">sin</span>(f: <span class="hljs-type">f64</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">f64</span> &#123;<br>        <span class="hljs-comment">/* ... */</span><br>      <span class="hljs-built_in">unimplemented!</span>();<br>    &#125;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">cos</span>(f: <span class="hljs-type">f64</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">f64</span> &#123;<br>        <span class="hljs-comment">/* ... */</span><br>      <span class="hljs-built_in">unimplemented!</span>();<br>    &#125;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">tan</span>(f: <span class="hljs-type">f64</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">f64</span> &#123;<br>        <span class="hljs-comment">/* ... */</span><br>      <span class="hljs-built_in">unimplemented!</span>();<br>    &#125;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="1-module-source-filenames"><a class="markdownIt-Anchor" href="#1-module-source-filenames"></a> 1. Module Source Filenames</h1><p>ä¸Šé¢æ˜¯ä¸€ç§<code>mod</code>å…³é”®è¯çš„ä½¿ç”¨, å¦ä¸€ç§æ˜¯å£°æ˜ä¸€ä¸ª<code>module</code>, ä½†æ˜¯ä¸å…·å¤‡ä¸»ä½“. å¦‚:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">mod</span> rvmm;<br></code></pre></td></tr></table></figure><p>è¿™ç±»<code>module</code>çš„ä¸»ä½“æ˜¯ä»æ–‡ä»¶ä¸­åŠ è½½çš„. å½“<code>mod</code>è¯­å¥æ²¡æœ‰<code>path</code>å±æ€§æ—¶, moduleæ–‡ä»¶çš„è·¯å¾„ä¼šæ ¹æ®moduleçš„åç§°è¿›è¡Œæ¨ç†, è§ä¸‹è¡¨, è¿™æ ·å°±èƒ½ç»„ç»‡èµ·<code>module</code>çš„æ ‘å½¢ç»“æ„äº†</p><table><thead><tr><th style="text-align:center">Module Path</th><th style="text-align:center">File Path</th><th style="text-align:center">Contents</th></tr></thead><tbody><tr><td style="text-align:center">crate</td><td style="text-align:center"><a href="http://lib.rs">lib.rs</a></td><td style="text-align:center"><code>mod util;</code></td></tr><tr><td style="text-align:center">crate::util</td><td style="text-align:center"><a href="http://util.rs">util.rs</a></td><td style="text-align:center"><code>mod config;</code></td></tr><tr><td style="text-align:center">crate::util::config</td><td style="text-align:center">util/config.rs</td><td style="text-align:center"></td></tr></tbody></table><p>äº‹å®ä¸Š, <code>module</code>å¯¹åº”çš„åå­—ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹, åªè¦è¯¥æ–‡ä»¶å¤¹ä¸‹æœ‰<code>mod.rs</code>.</p><p>æ³¨æ„, ä½¿ç”¨<code>mod</code>è¯­å¥, åªæ˜¯å°†ä¸€ä¸ªmoduleæ·»åŠ åˆ°moduleåˆ†æ”¯æ ‘çš„å½“å‰èŠ‚ç‚¹ä¸Š, è¿˜éœ€è¦ç”¨<code>use</code>è¯­å¥è¿›è¡Œå¯¼å…¥~</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">mod</span> vmm_action;<br><span class="hljs-keyword">pub</span> <span class="hljs-keyword">use</span> self::vmm_action::*;<br></code></pre></td></tr></table></figure><h1 id="2-the-path-attribute"><a class="markdownIt-Anchor" href="#2-the-path-attribute"></a> 2. The path attribute</h1><p>æœ‰æ—¶å€™, <code>module</code>çš„åå­—å¿…é¡»ä¸æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹ç»‘å®šè¿‡äºæ­»æ¿, å› æ­¤å¯ä»¥æŒ‡å®š<code>path</code>å±æ€§, å•ç‹¬è®¾ç½®. è¿™æ—¶åˆå­˜åœ¨ä¸¤ç§æƒ…å†µ:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-meta">#[path = <span class="hljs-string">&quot;foo.rs&quot;</span>]</span><br><span class="hljs-keyword">mod</span> c;<br></code></pre></td></tr></table></figure><table><thead><tr><th>Source File</th><th><code>c</code>'s File Location</th><th><code>c</code>'s Module Path</th></tr></thead><tbody><tr><td><code>src/a/b.rs</code></td><td><code>src/a/foo.rs</code></td><td><code>crate::a::b::c</code></td></tr><tr><td><code>src/a/mod.rs</code></td><td><code>src/a/foo.rs</code></td><td><code>crate::a::c</code></td></tr></tbody></table><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">mod</span> inline &#123;<br>    <span class="hljs-meta">#[path = <span class="hljs-string">&quot;other.rs&quot;</span>]</span><br>    <span class="hljs-keyword">mod</span> inner;<br>&#125;<br></code></pre></td></tr></table></figure><table><thead><tr><th>Source File</th><th><code>inner</code>'s File Location</th><th><code>inner</code>'s Module Path</th></tr></thead><tbody><tr><td><code>src/a/b.rs</code></td><td><code>src/a/b/inline/other.rs</code></td><td><code>crate::a::b::inline::inner</code></td></tr><tr><td><code>src/a/mod.rs</code></td><td><code>src/a/inline/other.rs</code></td><td><code>crate::a::inline::inner</code></td></tr></tbody></table><blockquote><p><code>mod-rs</code>æŒ‡çš„æ˜¯æ ¹æ¨¡å—(ä¾‹å¦‚<code>lib.rs</code>æˆ–è€…<code>main.rs</code>)å’Œ<code>mod.rs</code> (ç”¨æ¥å°†ç›®å½•ä½œä¸ºmodule)</p></blockquote><p>å¯¹äºç¬¬ä¸€ç§æƒ…å†µ, <code>path</code>å±æ€§çš„è®¾ç½®åœ¨<code>inline module</code>ä¹‹å¤–, æŒ‡å®šçš„æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„æ˜¯ç›¸å¯¹äºå½“å‰æºæ–‡ä»¶æ‰€åœ¨ç›®å½•. æ³¨æ„æºæ–‡ä»¶æ˜¯<code>mod-rs</code>è¿˜æ˜¯<code>non-mod-rs</code>å…¶åœ¨module treeä¸­çš„ä½ç½®ä¸ä¸€æ ·~ å¯ä»¥å¯¹æ¯”ç¬¬ä¸€ä¸ªè¡¨æ¥åˆ¤æ–­</p><p>å¯¹äºç¬¬äºŒç§æƒ…å†µ, ä¹Ÿåˆ†ä¸º<code>mod-rs</code>å’Œ<code>non-mod-rs</code>ä¸¤ç§æƒ…å†µ, å…¶å®æœ¬è´¨å·®ä¸å¤š, æœ€ç»ˆå½’ç»“ä¸ºmoduleçš„å®šä¹‰å½¢å¼</p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;å‚è€ƒèµ„æ–™: &lt;a href=&quot;https://doc.rust-lang.org/reference/items/modules.html&quot;&gt;https://doc.rust-lang.org/reference/items/modules.htm</summary>
      
    
    
    
    <category term="ç¼–ç¨‹è¯­è¨€" scheme="https://www.torch-fan.site/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/"/>
    
    <category term="Rust" scheme="https://www.torch-fan.site/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Rust/"/>
    
    <category term="Items" scheme="https://www.torch-fan.site/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Rust/Items/"/>
    
    
  </entry>
  
  <entry>
    <title>Ubuntuå¸¸ç”¨çš„æŒ‡ä»¤å’Œé…ç½®</title>
    <link href="https://www.torch-fan.site/2022/07/21/Ubuntu%E5%B8%B8%E7%94%A8%E7%9A%84%E6%8C%87%E4%BB%A4%E5%92%8C%E9%85%8D%E7%BD%AE/"/>
    <id>https://www.torch-fan.site/2022/07/21/Ubuntu%E5%B8%B8%E7%94%A8%E7%9A%84%E6%8C%87%E4%BB%A4%E5%92%8C%E9%85%8D%E7%BD%AE/</id>
    <published>2022-07-21T05:53:28.000Z</published>
    <updated>2022-11-15T02:27:36.100Z</updated>
    
    <content type="html"><![CDATA[<h1 id="1-è£…æœºåçš„å¸¸ç”¨æŒ‡ä»¤"><a class="markdownIt-Anchor" href="#1-è£…æœºåçš„å¸¸ç”¨æŒ‡ä»¤"></a> 1. è£…æœºåçš„å¸¸ç”¨æŒ‡ä»¤</h1><ol><li>å®‰è£…é©±åŠ¨</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo ubuntu-drivers autoinstall  <br>sudo apt install xorg-server-source<br>sudo apt install nvidia-cudnn<br></code></pre></td></tr></table></figure><blockquote><p><code>ubuntu-drivers devices</code>  å¯ä»¥åˆ—å‡ºæ¨èçš„æ˜¾å¡é©±åŠ¨ç‰ˆæœ¬, æ‰‹åŠ¨è£…æ›´å¥½(ä¸ä¼šåªè£…æœ€æ–°çš„)</p></blockquote><ol start="2"><li>å®‰è£…å¼€å‘å·¥å…·</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo apt install build-essential net-tools curl<br></code></pre></td></tr></table></figure><ol start="3"><li>ç»´æŠ¤</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo resolvectl flush-caches <span class="hljs-comment"># æ¸…é™¤DNSç¼“å­˜</span><br></code></pre></td></tr></table></figure><h1 id="2-é…ç½®ç½‘ç»œ"><a class="markdownIt-Anchor" href="#2-é…ç½®ç½‘ç»œ"></a> 2. é…ç½®ç½‘ç»œ</h1><h2 id="21-é…ç½®tcpç¼“å­˜éå¿…é¡»-æ•ˆæœä¸æ˜æ˜¾"><a class="markdownIt-Anchor" href="#21-é…ç½®tcpç¼“å­˜éå¿…é¡»-æ•ˆæœä¸æ˜æ˜¾"></a> 2.1 é…ç½®TCPç¼“å­˜(éå¿…é¡», æ•ˆæœä¸æ˜æ˜¾)</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo vim /etc/sysctl.conf<br>sudo sysctl -p<br></code></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs conf">net.core.default_qdisc=fq<br>net.ipv4.tcp_congestion_control=bbr<br>net.ipv4.tcp_rmem=375126 500170 75025200<br>net.ipv4.tcp_wmem=375126 500170 75025200<br>net.ipv4.tcp_window_scaling=1<br>net.ipv4.tcp_timestamps=1<br></code></pre></td></tr></table></figure><h2 id="22-é…ç½®dnsè§£ææ¨èä¼˜åŒ–æ•ˆæœçªå‡º"><a class="markdownIt-Anchor" href="#22-é…ç½®dnsè§£ææ¨èä¼˜åŒ–æ•ˆæœçªå‡º"></a> 2.2 é…ç½®DNSè§£æ(æ¨è,ä¼˜åŒ–æ•ˆæœçªå‡º)</h2><blockquote><p><code>systemd-resolve</code>æœåŠ¡æŒ‡ä»¤å¯èƒ½æ˜¯<code>systemd-resolve</code>ä¹Ÿå¯èƒ½æ˜¯<code>resolvectl</code>(å¦‚ubuntu22.04ä¸Š)</p><p><code>systemd-resolve</code>é…ç½®æ–‡ä»¶ä¿®æ”¹æŒ‡å¯¼æ–‡æ¡£: <a href="https://systemd.network/resolved.conf.html">https://systemd.network/resolved.conf.html</a></p></blockquote><ol><li>ä¿®æ”¹é…ç½®æ–‡ä»¶: <code>/etc/systemd/resolved.conf</code>, åœ¨æœ€åé¢åŠ ä¸Šè¿™ä¸€è¡Œ:</li></ol><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">options</span> single-request-reopen<br></code></pre></td></tr></table></figure><blockquote><p>DNSè§£ææ•ˆç‡ä¼šæé«˜å¾ˆå¤š, ä½†æ˜¯è¿˜ä¾èµ–äºDNSæœåŠ¡å™¨çš„ç¨³å®šæ€§</p></blockquote><ol start="2"><li>ä¿®æ”¹DNSæœåŠ¡å™¨</li></ol><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[Resolve]</span><br><span class="hljs-attr">DNS</span>=<span class="hljs-number">119.29</span>.<span class="hljs-number">29.29</span> <span class="hljs-number">223.6</span>.<span class="hljs-number">6.6</span><br><span class="hljs-attr">FallbackDNS</span>=<span class="hljs-number">114.114</span>.<span class="hljs-number">114.114</span> <span class="hljs-number">8.8</span>.<span class="hljs-number">8.8</span><br></code></pre></td></tr></table></figure><ol start="3"><li>é‡å¯æœåŠ¡</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo systemctl restart systemd-resolved.service<br></code></pre></td></tr></table></figure><p>æ­¤æ—¶ä¹Ÿå¯ä»¥æŸ¥çœ‹DNSçš„é…ç½®</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">resolvectl status<br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;1-è£…æœºåçš„å¸¸ç”¨æŒ‡ä»¤&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#1-è£…æœºåçš„å¸¸ç”¨æŒ‡ä»¤&quot;&gt;&lt;/a&gt; 1. è£…æœºåçš„å¸¸ç”¨æŒ‡ä»¤&lt;/h1&gt;
&lt;ol&gt;
&lt;li&gt;å®‰è£…é©±åŠ¨&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&quot;highlight </summary>
      
    
    
    
    <category term="è®¡ç®—æœºåŸºç¡€" scheme="https://www.torch-fan.site/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/"/>
    
    <category term="æ“ä½œç³»ç»Ÿ" scheme="https://www.torch-fan.site/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"/>
    
    <category term="Linux" scheme="https://www.torch-fan.site/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/Linux/"/>
    
    <category term="Ubuntu" scheme="https://www.torch-fan.site/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/Linux/Ubuntu/"/>
    
    
  </entry>
  
  <entry>
    <title>rustç›¸å…³åŸºç¡€çŸ¥è¯†</title>
    <link href="https://www.torch-fan.site/2022/07/21/rust%E7%9B%B8%E5%85%B3%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"/>
    <id>https://www.torch-fan.site/2022/07/21/rust%E7%9B%B8%E5%85%B3%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/</id>
    <published>2022-07-21T04:41:27.000Z</published>
    <updated>2022-11-15T02:27:36.100Z</updated>
    
    <content type="html"><![CDATA[<h1 id="1-ç‰ˆæœ¬æ›´æ›¿é—®é¢˜"><a class="markdownIt-Anchor" href="#1-ç‰ˆæœ¬æ›´æ›¿é—®é¢˜"></a> 1. ç‰ˆæœ¬æ›´æ›¿é—®é¢˜</h1><p>Pythonçš„2.xå’Œ3.xä¹‹é—´æœ‰å·¨å¤§çš„å˜åŒ–, å¯¹äºæ›´ä¸ºå¹´è½»çš„Rustè€Œè¨€, æ¯ä¸€æ¬¡å¤§ç‰ˆæœ¬ä¹‹é—´æœ‰åºŸå¼ƒåŠŸèƒ½å’Œæ–°ç‰¹æ€§ä¹Ÿä¸è¶³ä¸ºå¥‡, å› æ­¤æœ‰æ—¶éœ€è¦ç–‘é—®ä¸åªè¦å»çœ‹å®˜æ–¹æ–‡æ¡£, è¿˜éœ€è¦çœ‹é‡å¤§ç‰ˆæœ¬æ›´æ–°å˜åŒ–, å…·ä½“å¯åœ¨<a href="https://doc.rust-lang.org/stable/edition-guide/">https://doc.rust-lang.org/stable/edition-guide/</a>ä¸­çœ‹åˆ°.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;1-ç‰ˆæœ¬æ›´æ›¿é—®é¢˜&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#1-ç‰ˆæœ¬æ›´æ›¿é—®é¢˜&quot;&gt;&lt;/a&gt; 1. ç‰ˆæœ¬æ›´æ›¿é—®é¢˜&lt;/h1&gt;
&lt;p&gt;Pythonçš„2.xå’Œ3.xä¹‹é—´æœ‰å·¨å¤§çš„å˜åŒ–, å¯¹äºæ›´ä¸ºå¹´è½»çš„Rustè€Œè¨€, æ¯ä¸€æ¬¡å¤§ç‰ˆæœ¬ä¹‹é—´æœ‰åºŸå¼ƒåŠŸèƒ½å’Œ</summary>
      
    
    
    
    <category term="ç¼–ç¨‹è¯­è¨€" scheme="https://www.torch-fan.site/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/"/>
    
    <category term="Rust" scheme="https://www.torch-fan.site/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Rust/"/>
    
    <category term="åŸºç¡€" scheme="https://www.torch-fan.site/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Rust/%E5%9F%BA%E7%A1%80/"/>
    
    
  </entry>
  
</feed>
